var dT=t=>{throw TypeError(t)};var hv=(t,e,r)=>e.has(t)||dT("Cannot "+r);var R=(t,e,r)=>(hv(t,e,"read from private field"),r?r.call(t):e.get(t)),pe=(t,e,r)=>e.has(t)?dT("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),se=(t,e,r,n)=>(hv(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),Te=(t,e,r)=>(hv(t,e,"access private method"),r);var af=(t,e,r,n)=>({set _(i){se(t,e,i,r)},get _(){return R(t,e,n)}});function mX(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}function vX(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var mW={exports:{}},tm={},vW={exports:{}},Ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nh=Symbol.for("react.element"),gX=Symbol.for("react.portal"),yX=Symbol.for("react.fragment"),bX=Symbol.for("react.strict_mode"),xX=Symbol.for("react.profiler"),wX=Symbol.for("react.provider"),_X=Symbol.for("react.context"),SX=Symbol.for("react.forward_ref"),EX=Symbol.for("react.suspense"),NX=Symbol.for("react.memo"),jX=Symbol.for("react.lazy"),hT=Symbol.iterator;function CX(t){return t===null||typeof t!="object"?null:(t=hT&&t[hT]||t["@@iterator"],typeof t=="function"?t:null)}var gW={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},yW=Object.assign,bW={};function zc(t,e,r){this.props=t,this.context=e,this.refs=bW,this.updater=r||gW}zc.prototype.isReactComponent={};zc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};zc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function xW(){}xW.prototype=zc.prototype;function gC(t,e,r){this.props=t,this.context=e,this.refs=bW,this.updater=r||gW}var yC=gC.prototype=new xW;yC.constructor=gC;yW(yC,zc.prototype);yC.isPureReactComponent=!0;var fT=Array.isArray,wW=Object.prototype.hasOwnProperty,bC={current:null},_W={key:!0,ref:!0,__self:!0,__source:!0};function SW(t,e,r){var n,i={},s=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)wW.call(e,n)&&!_W.hasOwnProperty(n)&&(i[n]=e[n]);var o=arguments.length-2;if(o===1)i.children=r;else if(1<o){for(var c=Array(o),u=0;u<o;u++)c[u]=arguments[u+2];i.children=c}if(t&&t.defaultProps)for(n in o=t.defaultProps,o)i[n]===void 0&&(i[n]=o[n]);return{$$typeof:nh,type:t,key:s,ref:a,props:i,_owner:bC.current}}function OX(t,e){return{$$typeof:nh,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function xC(t){return typeof t=="object"&&t!==null&&t.$$typeof===nh}function PX(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var pT=/\/+/g;function fv(t,e){return typeof t=="object"&&t!==null&&t.key!=null?PX(""+t.key):e.toString(36)}function qf(t,e,r,n,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case nh:case gX:a=!0}}if(a)return a=t,i=i(a),t=n===""?"."+fv(a,0):n,fT(i)?(r="",t!=null&&(r=t.replace(pT,"$&/")+"/"),qf(i,e,r,"",function(u){return u})):i!=null&&(xC(i)&&(i=OX(i,r+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(pT,"$&/")+"/")+t)),e.push(i)),1;if(a=0,n=n===""?".":n+":",fT(t))for(var o=0;o<t.length;o++){s=t[o];var c=n+fv(s,o);a+=qf(s,e,r,c,i)}else if(c=CX(t),typeof c=="function")for(t=c.call(t),o=0;!(s=t.next()).done;)s=s.value,c=n+fv(s,o++),a+=qf(s,e,r,c,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function of(t,e,r){if(t==null)return t;var n=[],i=0;return qf(t,n,"","",function(s){return e.call(r,s,i++)}),n}function TX(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var en={current:null},Af={transition:null},IX={ReactCurrentDispatcher:en,ReactCurrentBatchConfig:Af,ReactCurrentOwner:bC};function EW(){throw Error("act(...) is not supported in production builds of React.")}Ye.Children={map:of,forEach:function(t,e,r){of(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return of(t,function(){e++}),e},toArray:function(t){return of(t,function(e){return e})||[]},only:function(t){if(!xC(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ye.Component=zc;Ye.Fragment=yX;Ye.Profiler=xX;Ye.PureComponent=gC;Ye.StrictMode=bX;Ye.Suspense=EX;Ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=IX;Ye.act=EW;Ye.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=yW({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=bC.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(c in e)wW.call(e,c)&&!_W.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&o!==void 0?o[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){o=Array(c);for(var u=0;u<c;u++)o[u]=arguments[u+2];n.children=o}return{$$typeof:nh,type:t.type,key:i,ref:s,props:n,_owner:a}};Ye.createContext=function(t){return t={$$typeof:_X,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:wX,_context:t},t.Consumer=t};Ye.createElement=SW;Ye.createFactory=function(t){var e=SW.bind(null,t);return e.type=t,e};Ye.createRef=function(){return{current:null}};Ye.forwardRef=function(t){return{$$typeof:SX,render:t}};Ye.isValidElement=xC;Ye.lazy=function(t){return{$$typeof:jX,_payload:{_status:-1,_result:t},_init:TX}};Ye.memo=function(t,e){return{$$typeof:NX,type:t,compare:e===void 0?null:e}};Ye.startTransition=function(t){var e=Af.transition;Af.transition={};try{t()}finally{Af.transition=e}};Ye.unstable_act=EW;Ye.useCallback=function(t,e){return en.current.useCallback(t,e)};Ye.useContext=function(t){return en.current.useContext(t)};Ye.useDebugValue=function(){};Ye.useDeferredValue=function(t){return en.current.useDeferredValue(t)};Ye.useEffect=function(t,e){return en.current.useEffect(t,e)};Ye.useId=function(){return en.current.useId()};Ye.useImperativeHandle=function(t,e,r){return en.current.useImperativeHandle(t,e,r)};Ye.useInsertionEffect=function(t,e){return en.current.useInsertionEffect(t,e)};Ye.useLayoutEffect=function(t,e){return en.current.useLayoutEffect(t,e)};Ye.useMemo=function(t,e){return en.current.useMemo(t,e)};Ye.useReducer=function(t,e,r){return en.current.useReducer(t,e,r)};Ye.useRef=function(t){return en.current.useRef(t)};Ye.useState=function(t){return en.current.useState(t)};Ye.useSyncExternalStore=function(t,e,r){return en.current.useSyncExternalStore(t,e,r)};Ye.useTransition=function(){return en.current.useTransition()};Ye.version="18.3.1";vW.exports=Ye;var P=vW.exports;const Ae=vX(P),RX=mX({__proto__:null,default:Ae},[P]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kX=P,$X=Symbol.for("react.element"),DX=Symbol.for("react.fragment"),MX=Object.prototype.hasOwnProperty,qX=kX.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,AX={key:!0,ref:!0,__self:!0,__source:!0};function NW(t,e,r){var n,i={},s=null,a=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)MX.call(e,n)&&!AX.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:$X,type:t,key:s,ref:a,props:i,_owner:qX.current}}tm.Fragment=DX;tm.jsx=NW;tm.jsxs=NW;mW.exports=tm;var l=mW.exports,_2={},jW={exports:{}},$n={},CW={exports:{}},OW={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(q,H){var B=q.length;q.push(H);e:for(;0<B;){var W=B-1>>>1,K=q[W];if(0<i(K,H))q[W]=H,q[B]=K,B=W;else break e}}function r(q){return q.length===0?null:q[0]}function n(q){if(q.length===0)return null;var H=q[0],B=q.pop();if(B!==H){q[0]=B;e:for(var W=0,K=q.length,ue=K>>>1;W<ue;){var ge=2*(W+1)-1,$e=q[ge],ye=ge+1,Oe=q[ye];if(0>i($e,B))ye<K&&0>i(Oe,$e)?(q[W]=Oe,q[ye]=B,W=ye):(q[W]=$e,q[ge]=B,W=ge);else if(ye<K&&0>i(Oe,B))q[W]=Oe,q[ye]=B,W=ye;else break e}}return H}function i(q,H){var B=q.sortIndex-H.sortIndex;return B!==0?B:q.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var c=[],u=[],d=1,h=null,f=3,p=!1,v=!1,y=!1,x=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(q){for(var H=r(u);H!==null;){if(H.callback===null)n(u);else if(H.startTime<=q)n(u),H.sortIndex=H.expirationTime,e(c,H);else break;H=r(u)}}function b(q){if(y=!1,w(q),!v)if(r(c)!==null)v=!0,M(_);else{var H=r(u);H!==null&&V(b,H.startTime-q)}}function _(q,H){v=!1,y&&(y=!1,g(S),S=-1),p=!0;var B=f;try{for(w(H),h=r(c);h!==null&&(!(h.expirationTime>H)||q&&!O());){var W=h.callback;if(typeof W=="function"){h.callback=null,f=h.priorityLevel;var K=W(h.expirationTime<=H);H=t.unstable_now(),typeof K=="function"?h.callback=K:h===r(c)&&n(c),w(H)}else n(c);h=r(c)}if(h!==null)var ue=!0;else{var ge=r(u);ge!==null&&V(b,ge.startTime-H),ue=!1}return ue}finally{h=null,f=B,p=!1}}var E=!1,j=null,S=-1,C=5,N=-1;function O(){return!(t.unstable_now()-N<C)}function T(){if(j!==null){var q=t.unstable_now();N=q;var H=!0;try{H=j(!0,q)}finally{H?I():(E=!1,j=null)}}else E=!1}var I;if(typeof m=="function")I=function(){m(T)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,F=D.port2;D.port1.onmessage=T,I=function(){F.postMessage(null)}}else I=function(){x(T,0)};function M(q){j=q,E||(E=!0,I())}function V(q,H){S=x(function(){q(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,M(_))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(q){switch(f){case 1:case 2:case 3:var H=3;break;default:H=f}var B=f;f=H;try{return q()}finally{f=B}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,H){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var B=f;f=q;try{return H()}finally{f=B}},t.unstable_scheduleCallback=function(q,H,B){var W=t.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?W+B:W):B=W,q){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=B+K,q={id:d++,callback:H,priorityLevel:q,startTime:B,expirationTime:K,sortIndex:-1},B>W?(q.sortIndex=B,e(u,q),r(c)===null&&q===r(u)&&(y?(g(S),S=-1):y=!0,V(b,B-W))):(q.sortIndex=K,e(c,q),v||p||(v=!0,M(_))),q},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(q){var H=f;return function(){var B=f;f=H;try{return q.apply(this,arguments)}finally{f=B}}}})(OW);CW.exports=OW;var FX=CW.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LX=P,kn=FX;function Z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var PW=new Set,md={};function Go(t,e){xc(t,e),xc(t+"Capture",e)}function xc(t,e){for(md[t]=e,t=0;t<e.length;t++)PW.add(e[t])}var Ss=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),S2=Object.prototype.hasOwnProperty,BX=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,mT={},vT={};function zX(t){return S2.call(vT,t)?!0:S2.call(mT,t)?!1:BX.test(t)?vT[t]=!0:(mT[t]=!0,!1)}function UX(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function WX(t,e,r,n){if(e===null||typeof e>"u"||UX(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function tn(t,e,r,n,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var Tr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Tr[t]=new tn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Tr[e]=new tn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Tr[t]=new tn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Tr[t]=new tn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Tr[t]=new tn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Tr[t]=new tn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Tr[t]=new tn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Tr[t]=new tn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Tr[t]=new tn(t,5,!1,t.toLowerCase(),null,!1,!1)});var wC=/[\-:]([a-z])/g;function _C(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(wC,_C);Tr[e]=new tn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(wC,_C);Tr[e]=new tn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(wC,_C);Tr[e]=new tn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Tr[t]=new tn(t,1,!1,t.toLowerCase(),null,!1,!1)});Tr.xlinkHref=new tn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Tr[t]=new tn(t,1,!1,t.toLowerCase(),null,!0,!0)});function SC(t,e,r,n){var i=Tr.hasOwnProperty(e)?Tr[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(WX(e,r,i,n)&&(r=null),n||i===null?zX(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Ts=LX.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,lf=Symbol.for("react.element"),Tl=Symbol.for("react.portal"),Il=Symbol.for("react.fragment"),EC=Symbol.for("react.strict_mode"),E2=Symbol.for("react.profiler"),TW=Symbol.for("react.provider"),IW=Symbol.for("react.context"),NC=Symbol.for("react.forward_ref"),N2=Symbol.for("react.suspense"),j2=Symbol.for("react.suspense_list"),jC=Symbol.for("react.memo"),Vs=Symbol.for("react.lazy"),RW=Symbol.for("react.offscreen"),gT=Symbol.iterator;function ju(t){return t===null||typeof t!="object"?null:(t=gT&&t[gT]||t["@@iterator"],typeof t=="function"?t:null)}var At=Object.assign,pv;function Uu(t){if(pv===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);pv=e&&e[1]||""}return`
`+pv+t}var mv=!1;function vv(t,e){if(!t||mv)return"";mv=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=n.stack.split(`
`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var c=`
`+i[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=o);break}}}finally{mv=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Uu(t):""}function VX(t){switch(t.tag){case 5:return Uu(t.type);case 16:return Uu("Lazy");case 13:return Uu("Suspense");case 19:return Uu("SuspenseList");case 0:case 2:case 15:return t=vv(t.type,!1),t;case 11:return t=vv(t.type.render,!1),t;case 1:return t=vv(t.type,!0),t;default:return""}}function C2(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Il:return"Fragment";case Tl:return"Portal";case E2:return"Profiler";case EC:return"StrictMode";case N2:return"Suspense";case j2:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case IW:return(t.displayName||"Context")+".Consumer";case TW:return(t._context.displayName||"Context")+".Provider";case NC:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case jC:return e=t.displayName||null,e!==null?e:C2(t.type)||"Memo";case Vs:e=t._payload,t=t._init;try{return C2(t(e))}catch{}}return null}function HX(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return C2(e);case 8:return e===EC?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Pa(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function kW(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function KX(t){var e=kW(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){n=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function cf(t){t._valueTracker||(t._valueTracker=KX(t))}function $W(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=kW(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function ip(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function O2(t,e){var r=e.checked;return At({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function yT(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Pa(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function DW(t,e){e=e.checked,e!=null&&SC(t,"checked",e,!1)}function P2(t,e){DW(t,e);var r=Pa(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?T2(t,e.type,r):e.hasOwnProperty("defaultValue")&&T2(t,e.type,Pa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function bT(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function T2(t,e,r){(e!=="number"||ip(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Wu=Array.isArray;function Gl(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Pa(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function I2(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Z(91));return At({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function xT(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(Z(92));if(Wu(r)){if(1<r.length)throw Error(Z(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Pa(r)}}function MW(t,e){var r=Pa(e.value),n=Pa(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function wT(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function qW(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function R2(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?qW(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var uf,AW=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(uf=uf||document.createElement("div"),uf.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=uf.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function vd(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Qu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},GX=["Webkit","ms","Moz","O"];Object.keys(Qu).forEach(function(t){GX.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Qu[e]=Qu[t]})});function FW(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Qu.hasOwnProperty(t)&&Qu[t]?(""+e).trim():e+"px"}function LW(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=FW(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var YX=At({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function k2(t,e){if(e){if(YX[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Z(62))}}function $2(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var D2=null;function CC(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var M2=null,Yl=null,Ql=null;function _T(t){if(t=ah(t)){if(typeof M2!="function")throw Error(Z(280));var e=t.stateNode;e&&(e=am(e),M2(t.stateNode,t.type,e))}}function BW(t){Yl?Ql?Ql.push(t):Ql=[t]:Yl=t}function zW(){if(Yl){var t=Yl,e=Ql;if(Ql=Yl=null,_T(t),e)for(t=0;t<e.length;t++)_T(e[t])}}function UW(t,e){return t(e)}function WW(){}var gv=!1;function VW(t,e,r){if(gv)return t(e,r);gv=!0;try{return UW(t,e,r)}finally{gv=!1,(Yl!==null||Ql!==null)&&(WW(),zW())}}function gd(t,e){var r=t.stateNode;if(r===null)return null;var n=am(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(Z(231,e,typeof r));return r}var q2=!1;if(Ss)try{var Cu={};Object.defineProperty(Cu,"passive",{get:function(){q2=!0}}),window.addEventListener("test",Cu,Cu),window.removeEventListener("test",Cu,Cu)}catch{q2=!1}function QX(t,e,r,n,i,s,a,o,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(d){this.onError(d)}}var Xu=!1,sp=null,ap=!1,A2=null,XX={onError:function(t){Xu=!0,sp=t}};function JX(t,e,r,n,i,s,a,o,c){Xu=!1,sp=null,QX.apply(XX,arguments)}function ZX(t,e,r,n,i,s,a,o,c){if(JX.apply(this,arguments),Xu){if(Xu){var u=sp;Xu=!1,sp=null}else throw Error(Z(198));ap||(ap=!0,A2=u)}}function Yo(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function HW(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ST(t){if(Yo(t)!==t)throw Error(Z(188))}function eJ(t){var e=t.alternate;if(!e){if(e=Yo(t),e===null)throw Error(Z(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return ST(i),t;if(s===n)return ST(i),e;s=s.sibling}throw Error(Z(188))}if(r.return!==n.return)r=i,n=s;else{for(var a=!1,o=i.child;o;){if(o===r){a=!0,r=i,n=s;break}if(o===n){a=!0,n=i,r=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===r){a=!0,r=s,n=i;break}if(o===n){a=!0,n=s,r=i;break}o=o.sibling}if(!a)throw Error(Z(189))}}if(r.alternate!==n)throw Error(Z(190))}if(r.tag!==3)throw Error(Z(188));return r.stateNode.current===r?t:e}function KW(t){return t=eJ(t),t!==null?GW(t):null}function GW(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=GW(t);if(e!==null)return e;t=t.sibling}return null}var YW=kn.unstable_scheduleCallback,ET=kn.unstable_cancelCallback,tJ=kn.unstable_shouldYield,rJ=kn.unstable_requestPaint,Xt=kn.unstable_now,nJ=kn.unstable_getCurrentPriorityLevel,OC=kn.unstable_ImmediatePriority,QW=kn.unstable_UserBlockingPriority,op=kn.unstable_NormalPriority,iJ=kn.unstable_LowPriority,XW=kn.unstable_IdlePriority,rm=null,Fi=null;function sJ(t){if(Fi&&typeof Fi.onCommitFiberRoot=="function")try{Fi.onCommitFiberRoot(rm,t,void 0,(t.current.flags&128)===128)}catch{}}var yi=Math.clz32?Math.clz32:lJ,aJ=Math.log,oJ=Math.LN2;function lJ(t){return t>>>=0,t===0?32:31-(aJ(t)/oJ|0)|0}var df=64,hf=4194304;function Vu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function lp(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,s=t.pingedLanes,a=r&268435455;if(a!==0){var o=a&~i;o!==0?n=Vu(o):(s&=a,s!==0&&(n=Vu(s)))}else a=r&~i,a!==0?n=Vu(a):s!==0&&(n=Vu(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-yi(e),i=1<<r,n|=t[r],e&=~i;return n}function cJ(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uJ(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-yi(s),o=1<<a,c=i[a];c===-1?(!(o&r)||o&n)&&(i[a]=cJ(o,e)):c<=e&&(t.expiredLanes|=o),s&=~o}}function F2(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function JW(){var t=df;return df<<=1,!(df&4194240)&&(df=64),t}function yv(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function ih(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-yi(e),t[e]=r}function dJ(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-yi(r),s=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~s}}function PC(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-yi(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var ft=0;function ZW(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var eV,TC,tV,rV,nV,L2=!1,ff=[],fa=null,pa=null,ma=null,yd=new Map,bd=new Map,Qs=[],hJ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function NT(t,e){switch(t){case"focusin":case"focusout":fa=null;break;case"dragenter":case"dragleave":pa=null;break;case"mouseover":case"mouseout":ma=null;break;case"pointerover":case"pointerout":yd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":bd.delete(e.pointerId)}}function Ou(t,e,r,n,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},e!==null&&(e=ah(e),e!==null&&TC(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function fJ(t,e,r,n,i){switch(e){case"focusin":return fa=Ou(fa,t,e,r,n,i),!0;case"dragenter":return pa=Ou(pa,t,e,r,n,i),!0;case"mouseover":return ma=Ou(ma,t,e,r,n,i),!0;case"pointerover":var s=i.pointerId;return yd.set(s,Ou(yd.get(s)||null,t,e,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,bd.set(s,Ou(bd.get(s)||null,t,e,r,n,i)),!0}return!1}function iV(t){var e=Ja(t.target);if(e!==null){var r=Yo(e);if(r!==null){if(e=r.tag,e===13){if(e=HW(r),e!==null){t.blockedOn=e,nV(t.priority,function(){tV(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ff(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=B2(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);D2=n,r.target.dispatchEvent(n),D2=null}else return e=ah(r),e!==null&&TC(e),t.blockedOn=r,!1;e.shift()}return!0}function jT(t,e,r){Ff(t)&&r.delete(e)}function pJ(){L2=!1,fa!==null&&Ff(fa)&&(fa=null),pa!==null&&Ff(pa)&&(pa=null),ma!==null&&Ff(ma)&&(ma=null),yd.forEach(jT),bd.forEach(jT)}function Pu(t,e){t.blockedOn===e&&(t.blockedOn=null,L2||(L2=!0,kn.unstable_scheduleCallback(kn.unstable_NormalPriority,pJ)))}function xd(t){function e(i){return Pu(i,t)}if(0<ff.length){Pu(ff[0],t);for(var r=1;r<ff.length;r++){var n=ff[r];n.blockedOn===t&&(n.blockedOn=null)}}for(fa!==null&&Pu(fa,t),pa!==null&&Pu(pa,t),ma!==null&&Pu(ma,t),yd.forEach(e),bd.forEach(e),r=0;r<Qs.length;r++)n=Qs[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Qs.length&&(r=Qs[0],r.blockedOn===null);)iV(r),r.blockedOn===null&&Qs.shift()}var Xl=Ts.ReactCurrentBatchConfig,cp=!0;function mJ(t,e,r,n){var i=ft,s=Xl.transition;Xl.transition=null;try{ft=1,IC(t,e,r,n)}finally{ft=i,Xl.transition=s}}function vJ(t,e,r,n){var i=ft,s=Xl.transition;Xl.transition=null;try{ft=4,IC(t,e,r,n)}finally{ft=i,Xl.transition=s}}function IC(t,e,r,n){if(cp){var i=B2(t,e,r,n);if(i===null)Ov(t,e,n,up,r),NT(t,n);else if(fJ(i,t,e,r,n))n.stopPropagation();else if(NT(t,n),e&4&&-1<hJ.indexOf(t)){for(;i!==null;){var s=ah(i);if(s!==null&&eV(s),s=B2(t,e,r,n),s===null&&Ov(t,e,n,up,r),s===i)break;i=s}i!==null&&n.stopPropagation()}else Ov(t,e,n,null,r)}}var up=null;function B2(t,e,r,n){if(up=null,t=CC(n),t=Ja(t),t!==null)if(e=Yo(t),e===null)t=null;else if(r=e.tag,r===13){if(t=HW(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return up=t,null}function sV(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(nJ()){case OC:return 1;case QW:return 4;case op:case iJ:return 16;case XW:return 536870912;default:return 16}default:return 16}}var ca=null,RC=null,Lf=null;function aV(){if(Lf)return Lf;var t,e=RC,r=e.length,n,i="value"in ca?ca.value:ca.textContent,s=i.length;for(t=0;t<r&&e[t]===i[t];t++);var a=r-t;for(n=1;n<=a&&e[r-n]===i[s-n];n++);return Lf=i.slice(t,1<n?1-n:void 0)}function Bf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function pf(){return!0}function CT(){return!1}function Dn(t){function e(r,n,i,s,a){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(r=t[o],this[o]=r?r(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?pf:CT,this.isPropagationStopped=CT,this}return At(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=pf)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=pf)},persist:function(){},isPersistent:pf}),e}var Uc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kC=Dn(Uc),sh=At({},Uc,{view:0,detail:0}),gJ=Dn(sh),bv,xv,Tu,nm=At({},sh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$C,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Tu&&(Tu&&t.type==="mousemove"?(bv=t.screenX-Tu.screenX,xv=t.screenY-Tu.screenY):xv=bv=0,Tu=t),bv)},movementY:function(t){return"movementY"in t?t.movementY:xv}}),OT=Dn(nm),yJ=At({},nm,{dataTransfer:0}),bJ=Dn(yJ),xJ=At({},sh,{relatedTarget:0}),wv=Dn(xJ),wJ=At({},Uc,{animationName:0,elapsedTime:0,pseudoElement:0}),_J=Dn(wJ),SJ=At({},Uc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),EJ=Dn(SJ),NJ=At({},Uc,{data:0}),PT=Dn(NJ),jJ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},CJ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},OJ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function PJ(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=OJ[t])?!!e[t]:!1}function $C(){return PJ}var TJ=At({},sh,{key:function(t){if(t.key){var e=jJ[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Bf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?CJ[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$C,charCode:function(t){return t.type==="keypress"?Bf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Bf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),IJ=Dn(TJ),RJ=At({},nm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),TT=Dn(RJ),kJ=At({},sh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$C}),$J=Dn(kJ),DJ=At({},Uc,{propertyName:0,elapsedTime:0,pseudoElement:0}),MJ=Dn(DJ),qJ=At({},nm,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),AJ=Dn(qJ),FJ=[9,13,27,32],DC=Ss&&"CompositionEvent"in window,Ju=null;Ss&&"documentMode"in document&&(Ju=document.documentMode);var LJ=Ss&&"TextEvent"in window&&!Ju,oV=Ss&&(!DC||Ju&&8<Ju&&11>=Ju),IT=" ",RT=!1;function lV(t,e){switch(t){case"keyup":return FJ.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cV(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Rl=!1;function BJ(t,e){switch(t){case"compositionend":return cV(e);case"keypress":return e.which!==32?null:(RT=!0,IT);case"textInput":return t=e.data,t===IT&&RT?null:t;default:return null}}function zJ(t,e){if(Rl)return t==="compositionend"||!DC&&lV(t,e)?(t=aV(),Lf=RC=ca=null,Rl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return oV&&e.locale!=="ko"?null:e.data;default:return null}}var UJ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kT(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!UJ[t.type]:e==="textarea"}function uV(t,e,r,n){BW(n),e=dp(e,"onChange"),0<e.length&&(r=new kC("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Zu=null,wd=null;function WJ(t){wV(t,0)}function im(t){var e=Dl(t);if($W(e))return t}function VJ(t,e){if(t==="change")return e}var dV=!1;if(Ss){var _v;if(Ss){var Sv="oninput"in document;if(!Sv){var $T=document.createElement("div");$T.setAttribute("oninput","return;"),Sv=typeof $T.oninput=="function"}_v=Sv}else _v=!1;dV=_v&&(!document.documentMode||9<document.documentMode)}function DT(){Zu&&(Zu.detachEvent("onpropertychange",hV),wd=Zu=null)}function hV(t){if(t.propertyName==="value"&&im(wd)){var e=[];uV(e,wd,t,CC(t)),VW(WJ,e)}}function HJ(t,e,r){t==="focusin"?(DT(),Zu=e,wd=r,Zu.attachEvent("onpropertychange",hV)):t==="focusout"&&DT()}function KJ(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return im(wd)}function GJ(t,e){if(t==="click")return im(e)}function YJ(t,e){if(t==="input"||t==="change")return im(e)}function QJ(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var xi=typeof Object.is=="function"?Object.is:QJ;function _d(t,e){if(xi(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!S2.call(e,i)||!xi(t[i],e[i]))return!1}return!0}function MT(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function qT(t,e){var r=MT(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=MT(r)}}function fV(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?fV(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function pV(){for(var t=window,e=ip();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=ip(t.document)}return e}function MC(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function XJ(t){var e=pV(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&fV(r.ownerDocument.documentElement,r)){if(n!==null&&MC(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!t.extend&&s>n&&(i=n,n=s,s=i),i=qT(r,s);var a=qT(r,n);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var JJ=Ss&&"documentMode"in document&&11>=document.documentMode,kl=null,z2=null,ed=null,U2=!1;function AT(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;U2||kl==null||kl!==ip(n)||(n=kl,"selectionStart"in n&&MC(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ed&&_d(ed,n)||(ed=n,n=dp(z2,"onSelect"),0<n.length&&(e=new kC("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=kl)))}function mf(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var $l={animationend:mf("Animation","AnimationEnd"),animationiteration:mf("Animation","AnimationIteration"),animationstart:mf("Animation","AnimationStart"),transitionend:mf("Transition","TransitionEnd")},Ev={},mV={};Ss&&(mV=document.createElement("div").style,"AnimationEvent"in window||(delete $l.animationend.animation,delete $l.animationiteration.animation,delete $l.animationstart.animation),"TransitionEvent"in window||delete $l.transitionend.transition);function sm(t){if(Ev[t])return Ev[t];if(!$l[t])return t;var e=$l[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in mV)return Ev[t]=e[r];return t}var vV=sm("animationend"),gV=sm("animationiteration"),yV=sm("animationstart"),bV=sm("transitionend"),xV=new Map,FT="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Da(t,e){xV.set(t,e),Go(e,[t])}for(var Nv=0;Nv<FT.length;Nv++){var jv=FT[Nv],ZJ=jv.toLowerCase(),eZ=jv[0].toUpperCase()+jv.slice(1);Da(ZJ,"on"+eZ)}Da(vV,"onAnimationEnd");Da(gV,"onAnimationIteration");Da(yV,"onAnimationStart");Da("dblclick","onDoubleClick");Da("focusin","onFocus");Da("focusout","onBlur");Da(bV,"onTransitionEnd");xc("onMouseEnter",["mouseout","mouseover"]);xc("onMouseLeave",["mouseout","mouseover"]);xc("onPointerEnter",["pointerout","pointerover"]);xc("onPointerLeave",["pointerout","pointerover"]);Go("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Go("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Go("onBeforeInput",["compositionend","keypress","textInput","paste"]);Go("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Go("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Go("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tZ=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hu));function LT(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,ZX(n,e,void 0,t),t.currentTarget=null}function wV(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var a=n.length-1;0<=a;a--){var o=n[a],c=o.instance,u=o.currentTarget;if(o=o.listener,c!==s&&i.isPropagationStopped())break e;LT(i,o,u),s=c}else for(a=0;a<n.length;a++){if(o=n[a],c=o.instance,u=o.currentTarget,o=o.listener,c!==s&&i.isPropagationStopped())break e;LT(i,o,u),s=c}}}if(ap)throw t=A2,ap=!1,A2=null,t}function Ct(t,e){var r=e[G2];r===void 0&&(r=e[G2]=new Set);var n=t+"__bubble";r.has(n)||(_V(e,t,2,!1),r.add(n))}function Cv(t,e,r){var n=0;e&&(n|=4),_V(r,t,n,e)}var vf="_reactListening"+Math.random().toString(36).slice(2);function Sd(t){if(!t[vf]){t[vf]=!0,PW.forEach(function(r){r!=="selectionchange"&&(tZ.has(r)||Cv(r,!1,t),Cv(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[vf]||(e[vf]=!0,Cv("selectionchange",!1,e))}}function _V(t,e,r,n){switch(sV(e)){case 1:var i=mJ;break;case 4:i=vJ;break;default:i=IC}r=i.bind(null,e,r,t),i=void 0,!q2||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function Ov(t,e,r,n,i){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var o=n.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=n.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;a=a.return}for(;o!==null;){if(a=Ja(o),a===null)return;if(c=a.tag,c===5||c===6){n=s=a;continue e}o=o.parentNode}}n=n.return}VW(function(){var u=s,d=CC(r),h=[];e:{var f=xV.get(t);if(f!==void 0){var p=kC,v=t;switch(t){case"keypress":if(Bf(r)===0)break e;case"keydown":case"keyup":p=IJ;break;case"focusin":v="focus",p=wv;break;case"focusout":v="blur",p=wv;break;case"beforeblur":case"afterblur":p=wv;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=OT;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=bJ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=$J;break;case vV:case gV:case yV:p=_J;break;case bV:p=MJ;break;case"scroll":p=gJ;break;case"wheel":p=AJ;break;case"copy":case"cut":case"paste":p=EJ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=TT}var y=(e&4)!==0,x=!y&&t==="scroll",g=y?f!==null?f+"Capture":null:f;y=[];for(var m=u,w;m!==null;){w=m;var b=w.stateNode;if(w.tag===5&&b!==null&&(w=b,g!==null&&(b=gd(m,g),b!=null&&y.push(Ed(m,b,w)))),x)break;m=m.return}0<y.length&&(f=new p(f,v,null,r,d),h.push({event:f,listeners:y}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&r!==D2&&(v=r.relatedTarget||r.fromElement)&&(Ja(v)||v[Es]))break e;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(v=r.relatedTarget||r.toElement,p=u,v=v?Ja(v):null,v!==null&&(x=Yo(v),v!==x||v.tag!==5&&v.tag!==6)&&(v=null)):(p=null,v=u),p!==v)){if(y=OT,b="onMouseLeave",g="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(y=TT,b="onPointerLeave",g="onPointerEnter",m="pointer"),x=p==null?f:Dl(p),w=v==null?f:Dl(v),f=new y(b,m+"leave",p,r,d),f.target=x,f.relatedTarget=w,b=null,Ja(d)===u&&(y=new y(g,m+"enter",v,r,d),y.target=w,y.relatedTarget=x,b=y),x=b,p&&v)t:{for(y=p,g=v,m=0,w=y;w;w=Sl(w))m++;for(w=0,b=g;b;b=Sl(b))w++;for(;0<m-w;)y=Sl(y),m--;for(;0<w-m;)g=Sl(g),w--;for(;m--;){if(y===g||g!==null&&y===g.alternate)break t;y=Sl(y),g=Sl(g)}y=null}else y=null;p!==null&&BT(h,f,p,y,!1),v!==null&&x!==null&&BT(h,x,v,y,!0)}}e:{if(f=u?Dl(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var _=VJ;else if(kT(f))if(dV)_=YJ;else{_=KJ;var E=HJ}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(_=GJ);if(_&&(_=_(t,u))){uV(h,_,r,d);break e}E&&E(t,f,u),t==="focusout"&&(E=f._wrapperState)&&E.controlled&&f.type==="number"&&T2(f,"number",f.value)}switch(E=u?Dl(u):window,t){case"focusin":(kT(E)||E.contentEditable==="true")&&(kl=E,z2=u,ed=null);break;case"focusout":ed=z2=kl=null;break;case"mousedown":U2=!0;break;case"contextmenu":case"mouseup":case"dragend":U2=!1,AT(h,r,d);break;case"selectionchange":if(JJ)break;case"keydown":case"keyup":AT(h,r,d)}var j;if(DC)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Rl?lV(t,r)&&(S="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(S="onCompositionStart");S&&(oV&&r.locale!=="ko"&&(Rl||S!=="onCompositionStart"?S==="onCompositionEnd"&&Rl&&(j=aV()):(ca=d,RC="value"in ca?ca.value:ca.textContent,Rl=!0)),E=dp(u,S),0<E.length&&(S=new PT(S,t,null,r,d),h.push({event:S,listeners:E}),j?S.data=j:(j=cV(r),j!==null&&(S.data=j)))),(j=LJ?BJ(t,r):zJ(t,r))&&(u=dp(u,"onBeforeInput"),0<u.length&&(d=new PT("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:u}),d.data=j))}wV(h,e)})}function Ed(t,e,r){return{instance:t,listener:e,currentTarget:r}}function dp(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=gd(t,r),s!=null&&n.unshift(Ed(t,s,i)),s=gd(t,e),s!=null&&n.push(Ed(t,s,i))),t=t.return}return n}function Sl(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function BT(t,e,r,n,i){for(var s=e._reactName,a=[];r!==null&&r!==n;){var o=r,c=o.alternate,u=o.stateNode;if(c!==null&&c===n)break;o.tag===5&&u!==null&&(o=u,i?(c=gd(r,s),c!=null&&a.unshift(Ed(r,c,o))):i||(c=gd(r,s),c!=null&&a.push(Ed(r,c,o)))),r=r.return}a.length!==0&&t.push({event:e,listeners:a})}var rZ=/\r\n?/g,nZ=/\u0000|\uFFFD/g;function zT(t){return(typeof t=="string"?t:""+t).replace(rZ,`
`).replace(nZ,"")}function gf(t,e,r){if(e=zT(e),zT(t)!==e&&r)throw Error(Z(425))}function hp(){}var W2=null,V2=null;function H2(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var K2=typeof setTimeout=="function"?setTimeout:void 0,iZ=typeof clearTimeout=="function"?clearTimeout:void 0,UT=typeof Promise=="function"?Promise:void 0,sZ=typeof queueMicrotask=="function"?queueMicrotask:typeof UT<"u"?function(t){return UT.resolve(null).then(t).catch(aZ)}:K2;function aZ(t){setTimeout(function(){throw t})}function Pv(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),xd(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);xd(e)}function va(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function WT(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Wc=Math.random().toString(36).slice(2),$i="__reactFiber$"+Wc,Nd="__reactProps$"+Wc,Es="__reactContainer$"+Wc,G2="__reactEvents$"+Wc,oZ="__reactListeners$"+Wc,lZ="__reactHandles$"+Wc;function Ja(t){var e=t[$i];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Es]||r[$i]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=WT(t);t!==null;){if(r=t[$i])return r;t=WT(t)}return e}t=r,r=t.parentNode}return null}function ah(t){return t=t[$i]||t[Es],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Dl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Z(33))}function am(t){return t[Nd]||null}var Y2=[],Ml=-1;function Ma(t){return{current:t}}function Ot(t){0>Ml||(t.current=Y2[Ml],Y2[Ml]=null,Ml--)}function Nt(t,e){Ml++,Y2[Ml]=t.current,t.current=e}var Ta={},Lr=Ma(Ta),mn=Ma(!1),Oo=Ta;function wc(t,e){var r=t.type.contextTypes;if(!r)return Ta;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function vn(t){return t=t.childContextTypes,t!=null}function fp(){Ot(mn),Ot(Lr)}function VT(t,e,r){if(Lr.current!==Ta)throw Error(Z(168));Nt(Lr,e),Nt(mn,r)}function SV(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(Z(108,HX(t)||"Unknown",i));return At({},r,n)}function pp(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ta,Oo=Lr.current,Nt(Lr,t),Nt(mn,mn.current),!0}function HT(t,e,r){var n=t.stateNode;if(!n)throw Error(Z(169));r?(t=SV(t,e,Oo),n.__reactInternalMemoizedMergedChildContext=t,Ot(mn),Ot(Lr),Nt(Lr,t)):Ot(mn),Nt(mn,r)}var rs=null,om=!1,Tv=!1;function EV(t){rs===null?rs=[t]:rs.push(t)}function cZ(t){om=!0,EV(t)}function qa(){if(!Tv&&rs!==null){Tv=!0;var t=0,e=ft;try{var r=rs;for(ft=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}rs=null,om=!1}catch(i){throw rs!==null&&(rs=rs.slice(t+1)),YW(OC,qa),i}finally{ft=e,Tv=!1}}return null}var ql=[],Al=0,mp=null,vp=0,Vn=[],Hn=0,Po=null,ls=1,cs="";function Ya(t,e){ql[Al++]=vp,ql[Al++]=mp,mp=t,vp=e}function NV(t,e,r){Vn[Hn++]=ls,Vn[Hn++]=cs,Vn[Hn++]=Po,Po=t;var n=ls;t=cs;var i=32-yi(n)-1;n&=~(1<<i),r+=1;var s=32-yi(e)+i;if(30<s){var a=i-i%5;s=(n&(1<<a)-1).toString(32),n>>=a,i-=a,ls=1<<32-yi(e)+i|r<<i|n,cs=s+t}else ls=1<<s|r<<i|n,cs=t}function qC(t){t.return!==null&&(Ya(t,1),NV(t,1,0))}function AC(t){for(;t===mp;)mp=ql[--Al],ql[Al]=null,vp=ql[--Al],ql[Al]=null;for(;t===Po;)Po=Vn[--Hn],Vn[Hn]=null,cs=Vn[--Hn],Vn[Hn]=null,ls=Vn[--Hn],Vn[Hn]=null}var Rn=null,In=null,kt=!1,fi=null;function jV(t,e){var r=Gn(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function KT(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Rn=t,In=va(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Rn=t,In=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Po!==null?{id:ls,overflow:cs}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Gn(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Rn=t,In=null,!0):!1;default:return!1}}function Q2(t){return(t.mode&1)!==0&&(t.flags&128)===0}function X2(t){if(kt){var e=In;if(e){var r=e;if(!KT(t,e)){if(Q2(t))throw Error(Z(418));e=va(r.nextSibling);var n=Rn;e&&KT(t,e)?jV(n,r):(t.flags=t.flags&-4097|2,kt=!1,Rn=t)}}else{if(Q2(t))throw Error(Z(418));t.flags=t.flags&-4097|2,kt=!1,Rn=t}}}function GT(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Rn=t}function yf(t){if(t!==Rn)return!1;if(!kt)return GT(t),kt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!H2(t.type,t.memoizedProps)),e&&(e=In)){if(Q2(t))throw CV(),Error(Z(418));for(;e;)jV(t,e),e=va(e.nextSibling)}if(GT(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){In=va(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}In=null}}else In=Rn?va(t.stateNode.nextSibling):null;return!0}function CV(){for(var t=In;t;)t=va(t.nextSibling)}function _c(){In=Rn=null,kt=!1}function FC(t){fi===null?fi=[t]:fi.push(t)}var uZ=Ts.ReactCurrentBatchConfig;function Iu(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Z(309));var n=r.stateNode}if(!n)throw Error(Z(147,t));var i=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var o=i.refs;a===null?delete o[s]:o[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(Z(284));if(!r._owner)throw Error(Z(290,t))}return t}function bf(t,e){throw t=Object.prototype.toString.call(e),Error(Z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function YT(t){var e=t._init;return e(t._payload)}function OV(t){function e(g,m){if(t){var w=g.deletions;w===null?(g.deletions=[m],g.flags|=16):w.push(m)}}function r(g,m){if(!t)return null;for(;m!==null;)e(g,m),m=m.sibling;return null}function n(g,m){for(g=new Map;m!==null;)m.key!==null?g.set(m.key,m):g.set(m.index,m),m=m.sibling;return g}function i(g,m){return g=xa(g,m),g.index=0,g.sibling=null,g}function s(g,m,w){return g.index=w,t?(w=g.alternate,w!==null?(w=w.index,w<m?(g.flags|=2,m):w):(g.flags|=2,m)):(g.flags|=1048576,m)}function a(g){return t&&g.alternate===null&&(g.flags|=2),g}function o(g,m,w,b){return m===null||m.tag!==6?(m=qv(w,g.mode,b),m.return=g,m):(m=i(m,w),m.return=g,m)}function c(g,m,w,b){var _=w.type;return _===Il?d(g,m,w.props.children,b,w.key):m!==null&&(m.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Vs&&YT(_)===m.type)?(b=i(m,w.props),b.ref=Iu(g,m,w),b.return=g,b):(b=Gf(w.type,w.key,w.props,null,g.mode,b),b.ref=Iu(g,m,w),b.return=g,b)}function u(g,m,w,b){return m===null||m.tag!==4||m.stateNode.containerInfo!==w.containerInfo||m.stateNode.implementation!==w.implementation?(m=Av(w,g.mode,b),m.return=g,m):(m=i(m,w.children||[]),m.return=g,m)}function d(g,m,w,b,_){return m===null||m.tag!==7?(m=bo(w,g.mode,b,_),m.return=g,m):(m=i(m,w),m.return=g,m)}function h(g,m,w){if(typeof m=="string"&&m!==""||typeof m=="number")return m=qv(""+m,g.mode,w),m.return=g,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case lf:return w=Gf(m.type,m.key,m.props,null,g.mode,w),w.ref=Iu(g,null,m),w.return=g,w;case Tl:return m=Av(m,g.mode,w),m.return=g,m;case Vs:var b=m._init;return h(g,b(m._payload),w)}if(Wu(m)||ju(m))return m=bo(m,g.mode,w,null),m.return=g,m;bf(g,m)}return null}function f(g,m,w,b){var _=m!==null?m.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return _!==null?null:o(g,m,""+w,b);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case lf:return w.key===_?c(g,m,w,b):null;case Tl:return w.key===_?u(g,m,w,b):null;case Vs:return _=w._init,f(g,m,_(w._payload),b)}if(Wu(w)||ju(w))return _!==null?null:d(g,m,w,b,null);bf(g,w)}return null}function p(g,m,w,b,_){if(typeof b=="string"&&b!==""||typeof b=="number")return g=g.get(w)||null,o(m,g,""+b,_);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case lf:return g=g.get(b.key===null?w:b.key)||null,c(m,g,b,_);case Tl:return g=g.get(b.key===null?w:b.key)||null,u(m,g,b,_);case Vs:var E=b._init;return p(g,m,w,E(b._payload),_)}if(Wu(b)||ju(b))return g=g.get(w)||null,d(m,g,b,_,null);bf(m,b)}return null}function v(g,m,w,b){for(var _=null,E=null,j=m,S=m=0,C=null;j!==null&&S<w.length;S++){j.index>S?(C=j,j=null):C=j.sibling;var N=f(g,j,w[S],b);if(N===null){j===null&&(j=C);break}t&&j&&N.alternate===null&&e(g,j),m=s(N,m,S),E===null?_=N:E.sibling=N,E=N,j=C}if(S===w.length)return r(g,j),kt&&Ya(g,S),_;if(j===null){for(;S<w.length;S++)j=h(g,w[S],b),j!==null&&(m=s(j,m,S),E===null?_=j:E.sibling=j,E=j);return kt&&Ya(g,S),_}for(j=n(g,j);S<w.length;S++)C=p(j,g,S,w[S],b),C!==null&&(t&&C.alternate!==null&&j.delete(C.key===null?S:C.key),m=s(C,m,S),E===null?_=C:E.sibling=C,E=C);return t&&j.forEach(function(O){return e(g,O)}),kt&&Ya(g,S),_}function y(g,m,w,b){var _=ju(w);if(typeof _!="function")throw Error(Z(150));if(w=_.call(w),w==null)throw Error(Z(151));for(var E=_=null,j=m,S=m=0,C=null,N=w.next();j!==null&&!N.done;S++,N=w.next()){j.index>S?(C=j,j=null):C=j.sibling;var O=f(g,j,N.value,b);if(O===null){j===null&&(j=C);break}t&&j&&O.alternate===null&&e(g,j),m=s(O,m,S),E===null?_=O:E.sibling=O,E=O,j=C}if(N.done)return r(g,j),kt&&Ya(g,S),_;if(j===null){for(;!N.done;S++,N=w.next())N=h(g,N.value,b),N!==null&&(m=s(N,m,S),E===null?_=N:E.sibling=N,E=N);return kt&&Ya(g,S),_}for(j=n(g,j);!N.done;S++,N=w.next())N=p(j,g,S,N.value,b),N!==null&&(t&&N.alternate!==null&&j.delete(N.key===null?S:N.key),m=s(N,m,S),E===null?_=N:E.sibling=N,E=N);return t&&j.forEach(function(T){return e(g,T)}),kt&&Ya(g,S),_}function x(g,m,w,b){if(typeof w=="object"&&w!==null&&w.type===Il&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case lf:e:{for(var _=w.key,E=m;E!==null;){if(E.key===_){if(_=w.type,_===Il){if(E.tag===7){r(g,E.sibling),m=i(E,w.props.children),m.return=g,g=m;break e}}else if(E.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Vs&&YT(_)===E.type){r(g,E.sibling),m=i(E,w.props),m.ref=Iu(g,E,w),m.return=g,g=m;break e}r(g,E);break}else e(g,E);E=E.sibling}w.type===Il?(m=bo(w.props.children,g.mode,b,w.key),m.return=g,g=m):(b=Gf(w.type,w.key,w.props,null,g.mode,b),b.ref=Iu(g,m,w),b.return=g,g=b)}return a(g);case Tl:e:{for(E=w.key;m!==null;){if(m.key===E)if(m.tag===4&&m.stateNode.containerInfo===w.containerInfo&&m.stateNode.implementation===w.implementation){r(g,m.sibling),m=i(m,w.children||[]),m.return=g,g=m;break e}else{r(g,m);break}else e(g,m);m=m.sibling}m=Av(w,g.mode,b),m.return=g,g=m}return a(g);case Vs:return E=w._init,x(g,m,E(w._payload),b)}if(Wu(w))return v(g,m,w,b);if(ju(w))return y(g,m,w,b);bf(g,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,m!==null&&m.tag===6?(r(g,m.sibling),m=i(m,w),m.return=g,g=m):(r(g,m),m=qv(w,g.mode,b),m.return=g,g=m),a(g)):r(g,m)}return x}var Sc=OV(!0),PV=OV(!1),gp=Ma(null),yp=null,Fl=null,LC=null;function BC(){LC=Fl=yp=null}function zC(t){var e=gp.current;Ot(gp),t._currentValue=e}function J2(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Jl(t,e){yp=t,LC=Fl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(fn=!0),t.firstContext=null)}function Jn(t){var e=t._currentValue;if(LC!==t)if(t={context:t,memoizedValue:e,next:null},Fl===null){if(yp===null)throw Error(Z(308));Fl=t,yp.dependencies={lanes:0,firstContext:t}}else Fl=Fl.next=t;return e}var Za=null;function UC(t){Za===null?Za=[t]:Za.push(t)}function TV(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,UC(e)):(r.next=i.next,i.next=r),e.interleaved=r,Ns(t,n)}function Ns(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Hs=!1;function WC(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function IV(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function hs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ga(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,nt&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,Ns(t,r)}return i=n.interleaved,i===null?(e.next=e,UC(n)):(e.next=i.next,i.next=e),n.interleaved=e,Ns(t,r)}function zf(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,PC(t,r)}}function QT(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=a:s=s.next=a,r=r.next}while(r!==null);s===null?i=s=e:s=s.next=e}else i=s=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function bp(t,e,r,n){var i=t.updateQueue;Hs=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var c=o,u=c.next;c.next=null,a===null?s=u:a.next=u,a=c;var d=t.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==a&&(o===null?d.firstBaseUpdate=u:o.next=u,d.lastBaseUpdate=c))}if(s!==null){var h=i.baseState;a=0,d=u=c=null,o=s;do{var f=o.lane,p=o.eventTime;if((n&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var v=t,y=o;switch(f=e,p=r,y.tag){case 1:if(v=y.payload,typeof v=="function"){h=v.call(p,h,f);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=y.payload,f=typeof v=="function"?v.call(p,h,f):v,f==null)break e;h=At({},h,f);break e;case 2:Hs=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[o]:f.push(o))}else p={eventTime:p,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(u=d=p,c=h):d=d.next=p,a|=f;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;f=o,o=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(d===null&&(c=h),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Io|=a,t.lanes=a,t.memoizedState=h}}function XT(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(Z(191,i));i.call(n)}}}var oh={},Li=Ma(oh),jd=Ma(oh),Cd=Ma(oh);function eo(t){if(t===oh)throw Error(Z(174));return t}function VC(t,e){switch(Nt(Cd,e),Nt(jd,t),Nt(Li,oh),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:R2(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=R2(e,t)}Ot(Li),Nt(Li,e)}function Ec(){Ot(Li),Ot(jd),Ot(Cd)}function RV(t){eo(Cd.current);var e=eo(Li.current),r=R2(e,t.type);e!==r&&(Nt(jd,t),Nt(Li,r))}function HC(t){jd.current===t&&(Ot(Li),Ot(jd))}var Dt=Ma(0);function xp(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Iv=[];function KC(){for(var t=0;t<Iv.length;t++)Iv[t]._workInProgressVersionPrimary=null;Iv.length=0}var Uf=Ts.ReactCurrentDispatcher,Rv=Ts.ReactCurrentBatchConfig,To=0,Mt=null,hr=null,yr=null,wp=!1,td=!1,Od=0,dZ=0;function Dr(){throw Error(Z(321))}function GC(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!xi(t[r],e[r]))return!1;return!0}function YC(t,e,r,n,i,s){if(To=s,Mt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Uf.current=t===null||t.memoizedState===null?mZ:vZ,t=r(n,i),td){s=0;do{if(td=!1,Od=0,25<=s)throw Error(Z(301));s+=1,yr=hr=null,e.updateQueue=null,Uf.current=gZ,t=r(n,i)}while(td)}if(Uf.current=_p,e=hr!==null&&hr.next!==null,To=0,yr=hr=Mt=null,wp=!1,e)throw Error(Z(300));return t}function QC(){var t=Od!==0;return Od=0,t}function Pi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yr===null?Mt.memoizedState=yr=t:yr=yr.next=t,yr}function Zn(){if(hr===null){var t=Mt.alternate;t=t!==null?t.memoizedState:null}else t=hr.next;var e=yr===null?Mt.memoizedState:yr.next;if(e!==null)yr=e,hr=t;else{if(t===null)throw Error(Z(310));hr=t,t={memoizedState:hr.memoizedState,baseState:hr.baseState,baseQueue:hr.baseQueue,queue:hr.queue,next:null},yr===null?Mt.memoizedState=yr=t:yr=yr.next=t}return yr}function Pd(t,e){return typeof e=="function"?e(t):e}function kv(t){var e=Zn(),r=e.queue;if(r===null)throw Error(Z(311));r.lastRenderedReducer=t;var n=hr,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}n.baseQueue=i=s,r.pending=null}if(i!==null){s=i.next,n=n.baseState;var o=a=null,c=null,u=s;do{var d=u.lane;if((To&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(o=c=h,a=n):c=c.next=h,Mt.lanes|=d,Io|=d}u=u.next}while(u!==null&&u!==s);c===null?a=n:c.next=o,xi(n,e.memoizedState)||(fn=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do s=i.lane,Mt.lanes|=s,Io|=s,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function $v(t){var e=Zn(),r=e.queue;if(r===null)throw Error(Z(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,s=e.memoizedState;if(i!==null){r.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);xi(s,e.memoizedState)||(fn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function kV(){}function $V(t,e){var r=Mt,n=Zn(),i=e(),s=!xi(n.memoizedState,i);if(s&&(n.memoizedState=i,fn=!0),n=n.queue,XC(qV.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||yr!==null&&yr.memoizedState.tag&1){if(r.flags|=2048,Td(9,MV.bind(null,r,n,i,e),void 0,null),br===null)throw Error(Z(349));To&30||DV(r,e,i)}return i}function DV(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Mt.updateQueue,e===null?(e={lastEffect:null,stores:null},Mt.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function MV(t,e,r,n){e.value=r,e.getSnapshot=n,AV(e)&&FV(t)}function qV(t,e,r){return r(function(){AV(e)&&FV(t)})}function AV(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!xi(t,r)}catch{return!0}}function FV(t){var e=Ns(t,1);e!==null&&bi(e,t,1,-1)}function JT(t){var e=Pi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Pd,lastRenderedState:t},e.queue=t,t=t.dispatch=pZ.bind(null,Mt,t),[e.memoizedState,t]}function Td(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Mt.updateQueue,e===null?(e={lastEffect:null,stores:null},Mt.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function LV(){return Zn().memoizedState}function Wf(t,e,r,n){var i=Pi();Mt.flags|=t,i.memoizedState=Td(1|e,r,void 0,n===void 0?null:n)}function lm(t,e,r,n){var i=Zn();n=n===void 0?null:n;var s=void 0;if(hr!==null){var a=hr.memoizedState;if(s=a.destroy,n!==null&&GC(n,a.deps)){i.memoizedState=Td(e,r,s,n);return}}Mt.flags|=t,i.memoizedState=Td(1|e,r,s,n)}function ZT(t,e){return Wf(8390656,8,t,e)}function XC(t,e){return lm(2048,8,t,e)}function BV(t,e){return lm(4,2,t,e)}function zV(t,e){return lm(4,4,t,e)}function UV(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function WV(t,e,r){return r=r!=null?r.concat([t]):null,lm(4,4,UV.bind(null,e,t),r)}function JC(){}function VV(t,e){var r=Zn();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&GC(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function HV(t,e){var r=Zn();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&GC(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function KV(t,e,r){return To&21?(xi(r,e)||(r=JW(),Mt.lanes|=r,Io|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,fn=!0),t.memoizedState=r)}function hZ(t,e){var r=ft;ft=r!==0&&4>r?r:4,t(!0);var n=Rv.transition;Rv.transition={};try{t(!1),e()}finally{ft=r,Rv.transition=n}}function GV(){return Zn().memoizedState}function fZ(t,e,r){var n=ba(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},YV(t))QV(e,r);else if(r=TV(t,e,r,n),r!==null){var i=Xr();bi(r,t,n,i),XV(r,e,n)}}function pZ(t,e,r){var n=ba(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(YV(t))QV(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,r);if(i.hasEagerState=!0,i.eagerState=o,xi(o,a)){var c=e.interleaved;c===null?(i.next=i,UC(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}r=TV(t,e,i,n),r!==null&&(i=Xr(),bi(r,t,n,i),XV(r,e,n))}}function YV(t){var e=t.alternate;return t===Mt||e!==null&&e===Mt}function QV(t,e){td=wp=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function XV(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,PC(t,r)}}var _p={readContext:Jn,useCallback:Dr,useContext:Dr,useEffect:Dr,useImperativeHandle:Dr,useInsertionEffect:Dr,useLayoutEffect:Dr,useMemo:Dr,useReducer:Dr,useRef:Dr,useState:Dr,useDebugValue:Dr,useDeferredValue:Dr,useTransition:Dr,useMutableSource:Dr,useSyncExternalStore:Dr,useId:Dr,unstable_isNewReconciler:!1},mZ={readContext:Jn,useCallback:function(t,e){return Pi().memoizedState=[t,e===void 0?null:e],t},useContext:Jn,useEffect:ZT,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Wf(4194308,4,UV.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Wf(4194308,4,t,e)},useInsertionEffect:function(t,e){return Wf(4,2,t,e)},useMemo:function(t,e){var r=Pi();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Pi();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=fZ.bind(null,Mt,t),[n.memoizedState,t]},useRef:function(t){var e=Pi();return t={current:t},e.memoizedState=t},useState:JT,useDebugValue:JC,useDeferredValue:function(t){return Pi().memoizedState=t},useTransition:function(){var t=JT(!1),e=t[0];return t=hZ.bind(null,t[1]),Pi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Mt,i=Pi();if(kt){if(r===void 0)throw Error(Z(407));r=r()}else{if(r=e(),br===null)throw Error(Z(349));To&30||DV(n,e,r)}i.memoizedState=r;var s={value:r,getSnapshot:e};return i.queue=s,ZT(qV.bind(null,n,s,t),[t]),n.flags|=2048,Td(9,MV.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=Pi(),e=br.identifierPrefix;if(kt){var r=cs,n=ls;r=(n&~(1<<32-yi(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Od++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=dZ++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},vZ={readContext:Jn,useCallback:VV,useContext:Jn,useEffect:XC,useImperativeHandle:WV,useInsertionEffect:BV,useLayoutEffect:zV,useMemo:HV,useReducer:kv,useRef:LV,useState:function(){return kv(Pd)},useDebugValue:JC,useDeferredValue:function(t){var e=Zn();return KV(e,hr.memoizedState,t)},useTransition:function(){var t=kv(Pd)[0],e=Zn().memoizedState;return[t,e]},useMutableSource:kV,useSyncExternalStore:$V,useId:GV,unstable_isNewReconciler:!1},gZ={readContext:Jn,useCallback:VV,useContext:Jn,useEffect:XC,useImperativeHandle:WV,useInsertionEffect:BV,useLayoutEffect:zV,useMemo:HV,useReducer:$v,useRef:LV,useState:function(){return $v(Pd)},useDebugValue:JC,useDeferredValue:function(t){var e=Zn();return hr===null?e.memoizedState=t:KV(e,hr.memoizedState,t)},useTransition:function(){var t=$v(Pd)[0],e=Zn().memoizedState;return[t,e]},useMutableSource:kV,useSyncExternalStore:$V,useId:GV,unstable_isNewReconciler:!1};function ci(t,e){if(t&&t.defaultProps){e=At({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Z2(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:At({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var cm={isMounted:function(t){return(t=t._reactInternals)?Yo(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Xr(),i=ba(t),s=hs(n,i);s.payload=e,r!=null&&(s.callback=r),e=ga(t,s,i),e!==null&&(bi(e,t,i,n),zf(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Xr(),i=ba(t),s=hs(n,i);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=ga(t,s,i),e!==null&&(bi(e,t,i,n),zf(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Xr(),n=ba(t),i=hs(r,n);i.tag=2,e!=null&&(i.callback=e),e=ga(t,i,n),e!==null&&(bi(e,t,n,r),zf(e,t,n))}};function eI(t,e,r,n,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,a):e.prototype&&e.prototype.isPureReactComponent?!_d(r,n)||!_d(i,s):!0}function JV(t,e,r){var n=!1,i=Ta,s=e.contextType;return typeof s=="object"&&s!==null?s=Jn(s):(i=vn(e)?Oo:Lr.current,n=e.contextTypes,s=(n=n!=null)?wc(t,i):Ta),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=cm,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function tI(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&cm.enqueueReplaceState(e,e.state,null)}function ej(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},WC(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Jn(s):(s=vn(e)?Oo:Lr.current,i.context=wc(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Z2(t,e,s,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&cm.enqueueReplaceState(i,i.state,null),bp(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Nc(t,e){try{var r="",n=e;do r+=VX(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Dv(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function tj(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var yZ=typeof WeakMap=="function"?WeakMap:Map;function ZV(t,e,r){r=hs(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Ep||(Ep=!0,dj=n),tj(t,e)},r}function eH(t,e,r){r=hs(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){tj(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){tj(t,e),typeof n!="function"&&(ya===null?ya=new Set([this]):ya.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function rI(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new yZ;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=RZ.bind(null,t,e,r),e.then(t,t))}function nI(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function iI(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=hs(-1,1),e.tag=2,ga(r,e,1))),r.lanes|=1),t)}var bZ=Ts.ReactCurrentOwner,fn=!1;function Hr(t,e,r,n){e.child=t===null?PV(e,null,r,n):Sc(e,t.child,r,n)}function sI(t,e,r,n,i){r=r.render;var s=e.ref;return Jl(e,i),n=YC(t,e,r,n,s,i),r=QC(),t!==null&&!fn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,js(t,e,i)):(kt&&r&&qC(e),e.flags|=1,Hr(t,e,n,i),e.child)}function aI(t,e,r,n,i){if(t===null){var s=r.type;return typeof s=="function"&&!aO(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,tH(t,e,s,n,i)):(t=Gf(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(r=r.compare,r=r!==null?r:_d,r(a,n)&&t.ref===e.ref)return js(t,e,i)}return e.flags|=1,t=xa(s,n),t.ref=e.ref,t.return=e,e.child=t}function tH(t,e,r,n,i){if(t!==null){var s=t.memoizedProps;if(_d(s,n)&&t.ref===e.ref)if(fn=!1,e.pendingProps=n=s,(t.lanes&i)!==0)t.flags&131072&&(fn=!0);else return e.lanes=t.lanes,js(t,e,i)}return rj(t,e,r,n,i)}function rH(t,e,r){var n=e.pendingProps,i=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Nt(Bl,Cn),Cn|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Nt(Bl,Cn),Cn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,Nt(Bl,Cn),Cn|=n}else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,Nt(Bl,Cn),Cn|=n;return Hr(t,e,i,r),e.child}function nH(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function rj(t,e,r,n,i){var s=vn(r)?Oo:Lr.current;return s=wc(e,s),Jl(e,i),r=YC(t,e,r,n,s,i),n=QC(),t!==null&&!fn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,js(t,e,i)):(kt&&n&&qC(e),e.flags|=1,Hr(t,e,r,i),e.child)}function oI(t,e,r,n,i){if(vn(r)){var s=!0;pp(e)}else s=!1;if(Jl(e,i),e.stateNode===null)Vf(t,e),JV(e,r,n),ej(e,r,n,i),n=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var c=a.context,u=r.contextType;typeof u=="object"&&u!==null?u=Jn(u):(u=vn(r)?Oo:Lr.current,u=wc(e,u));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==n||c!==u)&&tI(e,a,n,u),Hs=!1;var f=e.memoizedState;a.state=f,bp(e,n,a,i),c=e.memoizedState,o!==n||f!==c||mn.current||Hs?(typeof d=="function"&&(Z2(e,r,d,n),c=e.memoizedState),(o=Hs||eI(e,r,o,n,f,c,u))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),a.props=n,a.state=c,a.context=u,n=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,IV(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:ci(e.type,o),a.props=u,h=e.pendingProps,f=a.context,c=r.contextType,typeof c=="object"&&c!==null?c=Jn(c):(c=vn(r)?Oo:Lr.current,c=wc(e,c));var p=r.getDerivedStateFromProps;(d=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==h||f!==c)&&tI(e,a,n,c),Hs=!1,f=e.memoizedState,a.state=f,bp(e,n,a,i);var v=e.memoizedState;o!==h||f!==v||mn.current||Hs?(typeof p=="function"&&(Z2(e,r,p,n),v=e.memoizedState),(u=Hs||eI(e,r,u,n,f,v,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,v,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,v,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=v),a.props=n,a.state=v,a.context=c,n=u):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return nj(t,e,r,n,s,i)}function nj(t,e,r,n,i,s){nH(t,e);var a=(e.flags&128)!==0;if(!n&&!a)return i&&HT(e,r,!1),js(t,e,s);n=e.stateNode,bZ.current=e;var o=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&a?(e.child=Sc(e,t.child,null,s),e.child=Sc(e,null,o,s)):Hr(t,e,o,s),e.memoizedState=n.state,i&&HT(e,r,!0),e.child}function iH(t){var e=t.stateNode;e.pendingContext?VT(t,e.pendingContext,e.pendingContext!==e.context):e.context&&VT(t,e.context,!1),VC(t,e.containerInfo)}function lI(t,e,r,n,i){return _c(),FC(i),e.flags|=256,Hr(t,e,r,n),e.child}var ij={dehydrated:null,treeContext:null,retryLane:0};function sj(t){return{baseLanes:t,cachePool:null,transitions:null}}function sH(t,e,r){var n=e.pendingProps,i=Dt.current,s=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Nt(Dt,i&1),t===null)return X2(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,t=n.fallback,s?(n=e.mode,s=e.child,a={mode:"hidden",children:a},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=hm(a,n,0,null),t=bo(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=sj(r),e.memoizedState=ij,t):ZC(e,a));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return xZ(t,e,a,n,o,i,r);if(s){s=n.fallback,a=e.mode,i=t.child,o=i.sibling;var c={mode:"hidden",children:n.children};return!(a&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=xa(i,c),n.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=xa(o,s):(s=bo(s,a,r,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,a=t.child.memoizedState,a=a===null?sj(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~r,e.memoizedState=ij,n}return s=t.child,t=s.sibling,n=xa(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function ZC(t,e){return e=hm({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function xf(t,e,r,n){return n!==null&&FC(n),Sc(e,t.child,null,r),t=ZC(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function xZ(t,e,r,n,i,s,a){if(r)return e.flags&256?(e.flags&=-257,n=Dv(Error(Z(422))),xf(t,e,a,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,i=e.mode,n=hm({mode:"visible",children:n.children},i,0,null),s=bo(s,i,a,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&Sc(e,t.child,null,a),e.child.memoizedState=sj(a),e.memoizedState=ij,s);if(!(e.mode&1))return xf(t,e,a,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var o=n.dgst;return n=o,s=Error(Z(419)),n=Dv(s,n,void 0),xf(t,e,a,n)}if(o=(a&t.childLanes)!==0,fn||o){if(n=br,n!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ns(t,i),bi(n,t,i,-1))}return sO(),n=Dv(Error(Z(421))),xf(t,e,a,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=kZ.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,In=va(i.nextSibling),Rn=e,kt=!0,fi=null,t!==null&&(Vn[Hn++]=ls,Vn[Hn++]=cs,Vn[Hn++]=Po,ls=t.id,cs=t.overflow,Po=e),e=ZC(e,n.children),e.flags|=4096,e)}function cI(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),J2(t.return,e,r)}function Mv(t,e,r,n,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function aH(t,e,r){var n=e.pendingProps,i=n.revealOrder,s=n.tail;if(Hr(t,e,n.children,r),n=Dt.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&cI(t,r,e);else if(t.tag===19)cI(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Nt(Dt,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&xp(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),Mv(e,!1,i,r,s);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&xp(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}Mv(e,!0,r,null,s);break;case"together":Mv(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Vf(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function js(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Io|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Z(153));if(e.child!==null){for(t=e.child,r=xa(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=xa(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function wZ(t,e,r){switch(e.tag){case 3:iH(e),_c();break;case 5:RV(e);break;case 1:vn(e.type)&&pp(e);break;case 4:VC(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;Nt(gp,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Nt(Dt,Dt.current&1),e.flags|=128,null):r&e.child.childLanes?sH(t,e,r):(Nt(Dt,Dt.current&1),t=js(t,e,r),t!==null?t.sibling:null);Nt(Dt,Dt.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return aH(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Nt(Dt,Dt.current),n)break;return null;case 22:case 23:return e.lanes=0,rH(t,e,r)}return js(t,e,r)}var oH,aj,lH,cH;oH=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};aj=function(){};lH=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,eo(Li.current);var s=null;switch(r){case"input":i=O2(t,i),n=O2(t,n),s=[];break;case"select":i=At({},i,{value:void 0}),n=At({},n,{value:void 0}),s=[];break;case"textarea":i=I2(t,i),n=I2(t,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=hp)}k2(r,n);var a;r=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(a in o)o.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(md.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in n){var c=n[u];if(o=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&c!==o&&(c!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in c)c.hasOwnProperty(a)&&o[a]!==c[a]&&(r||(r={}),r[a]=c[a])}else r||(s||(s=[]),s.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(md.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Ct("scroll",t),s||o===c||(s=[])):(s=s||[]).push(u,c))}r&&(s=s||[]).push("style",r);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};cH=function(t,e,r,n){r!==n&&(e.flags|=4)};function Ru(t,e){if(!kt)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Mr(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function _Z(t,e,r){var n=e.pendingProps;switch(AC(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mr(e),null;case 1:return vn(e.type)&&fp(),Mr(e),null;case 3:return n=e.stateNode,Ec(),Ot(mn),Ot(Lr),KC(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(yf(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,fi!==null&&(pj(fi),fi=null))),aj(t,e),Mr(e),null;case 5:HC(e);var i=eo(Cd.current);if(r=e.type,t!==null&&e.stateNode!=null)lH(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(Z(166));return Mr(e),null}if(t=eo(Li.current),yf(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[$i]=e,n[Nd]=s,t=(e.mode&1)!==0,r){case"dialog":Ct("cancel",n),Ct("close",n);break;case"iframe":case"object":case"embed":Ct("load",n);break;case"video":case"audio":for(i=0;i<Hu.length;i++)Ct(Hu[i],n);break;case"source":Ct("error",n);break;case"img":case"image":case"link":Ct("error",n),Ct("load",n);break;case"details":Ct("toggle",n);break;case"input":yT(n,s),Ct("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},Ct("invalid",n);break;case"textarea":xT(n,s),Ct("invalid",n)}k2(r,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?n.textContent!==o&&(s.suppressHydrationWarning!==!0&&gf(n.textContent,o,t),i=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&gf(n.textContent,o,t),i=["children",""+o]):md.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&Ct("scroll",n)}switch(r){case"input":cf(n),bT(n,s,!0);break;case"textarea":cf(n),wT(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=hp)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=qW(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(r,{is:n.is}):(t=a.createElement(r),r==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,r),t[$i]=e,t[Nd]=n,oH(t,e,!1,!1),e.stateNode=t;e:{switch(a=$2(r,n),r){case"dialog":Ct("cancel",t),Ct("close",t),i=n;break;case"iframe":case"object":case"embed":Ct("load",t),i=n;break;case"video":case"audio":for(i=0;i<Hu.length;i++)Ct(Hu[i],t);i=n;break;case"source":Ct("error",t),i=n;break;case"img":case"image":case"link":Ct("error",t),Ct("load",t),i=n;break;case"details":Ct("toggle",t),i=n;break;case"input":yT(t,n),i=O2(t,n),Ct("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=At({},n,{value:void 0}),Ct("invalid",t);break;case"textarea":xT(t,n),i=I2(t,n),Ct("invalid",t);break;default:i=n}k2(r,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var c=o[s];s==="style"?LW(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&AW(t,c)):s==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&vd(t,c):typeof c=="number"&&vd(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(md.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Ct("scroll",t):c!=null&&SC(t,s,c,a))}switch(r){case"input":cf(t),bT(t,n,!1);break;case"textarea":cf(t),wT(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Pa(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?Gl(t,!!n.multiple,s,!1):n.defaultValue!=null&&Gl(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=hp)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Mr(e),null;case 6:if(t&&e.stateNode!=null)cH(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(Z(166));if(r=eo(Cd.current),eo(Li.current),yf(e)){if(n=e.stateNode,r=e.memoizedProps,n[$i]=e,(s=n.nodeValue!==r)&&(t=Rn,t!==null))switch(t.tag){case 3:gf(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&gf(n.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[$i]=e,e.stateNode=n}return Mr(e),null;case 13:if(Ot(Dt),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(kt&&In!==null&&e.mode&1&&!(e.flags&128))CV(),_c(),e.flags|=98560,s=!1;else if(s=yf(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(Z(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Z(317));s[$i]=e}else _c(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Mr(e),s=!1}else fi!==null&&(pj(fi),fi=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Dt.current&1?fr===0&&(fr=3):sO())),e.updateQueue!==null&&(e.flags|=4),Mr(e),null);case 4:return Ec(),aj(t,e),t===null&&Sd(e.stateNode.containerInfo),Mr(e),null;case 10:return zC(e.type._context),Mr(e),null;case 17:return vn(e.type)&&fp(),Mr(e),null;case 19:if(Ot(Dt),s=e.memoizedState,s===null)return Mr(e),null;if(n=(e.flags&128)!==0,a=s.rendering,a===null)if(n)Ru(s,!1);else{if(fr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=xp(t),a!==null){for(e.flags|=128,Ru(s,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Nt(Dt,Dt.current&1|2),e.child}t=t.sibling}s.tail!==null&&Xt()>jc&&(e.flags|=128,n=!0,Ru(s,!1),e.lanes=4194304)}else{if(!n)if(t=xp(a),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Ru(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!kt)return Mr(e),null}else 2*Xt()-s.renderingStartTime>jc&&r!==1073741824&&(e.flags|=128,n=!0,Ru(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(r=s.last,r!==null?r.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Xt(),e.sibling=null,r=Dt.current,Nt(Dt,n?r&1|2:r&1),e):(Mr(e),null);case 22:case 23:return iO(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Cn&1073741824&&(Mr(e),e.subtreeFlags&6&&(e.flags|=8192)):Mr(e),null;case 24:return null;case 25:return null}throw Error(Z(156,e.tag))}function SZ(t,e){switch(AC(e),e.tag){case 1:return vn(e.type)&&fp(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ec(),Ot(mn),Ot(Lr),KC(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return HC(e),null;case 13:if(Ot(Dt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Z(340));_c()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ot(Dt),null;case 4:return Ec(),null;case 10:return zC(e.type._context),null;case 22:case 23:return iO(),null;case 24:return null;default:return null}}var wf=!1,Ar=!1,EZ=typeof WeakSet=="function"?WeakSet:Set,me=null;function Ll(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Wt(t,e,n)}else r.current=null}function oj(t,e,r){try{r()}catch(n){Wt(t,e,n)}}var uI=!1;function NZ(t,e){if(W2=cp,t=pV(),MC(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var a=0,o=-1,c=-1,u=0,d=0,h=t,f=null;t:for(;;){for(var p;h!==r||i!==0&&h.nodeType!==3||(o=a+i),h!==s||n!==0&&h.nodeType!==3||(c=a+n),h.nodeType===3&&(a+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===t)break t;if(f===r&&++u===i&&(o=a),f===s&&++d===n&&(c=a),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}r=o===-1||c===-1?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(V2={focusedElem:t,selectionRange:r},cp=!1,me=e;me!==null;)if(e=me,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,me=t;else for(;me!==null;){e=me;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var y=v.memoizedProps,x=v.memoizedState,g=e.stateNode,m=g.getSnapshotBeforeUpdate(e.elementType===e.type?y:ci(e.type,y),x);g.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Z(163))}}catch(b){Wt(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,me=t;break}me=e.return}return v=uI,uI=!1,v}function rd(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&oj(e,r,s)}i=i.next}while(i!==n)}}function um(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function lj(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function uH(t){var e=t.alternate;e!==null&&(t.alternate=null,uH(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[$i],delete e[Nd],delete e[G2],delete e[oZ],delete e[lZ])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function dH(t){return t.tag===5||t.tag===3||t.tag===4}function dI(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||dH(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function cj(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=hp));else if(n!==4&&(t=t.child,t!==null))for(cj(t,e,r),t=t.sibling;t!==null;)cj(t,e,r),t=t.sibling}function uj(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(uj(t,e,r),t=t.sibling;t!==null;)uj(t,e,r),t=t.sibling}var Or=null,hi=!1;function Bs(t,e,r){for(r=r.child;r!==null;)hH(t,e,r),r=r.sibling}function hH(t,e,r){if(Fi&&typeof Fi.onCommitFiberUnmount=="function")try{Fi.onCommitFiberUnmount(rm,r)}catch{}switch(r.tag){case 5:Ar||Ll(r,e);case 6:var n=Or,i=hi;Or=null,Bs(t,e,r),Or=n,hi=i,Or!==null&&(hi?(t=Or,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Or.removeChild(r.stateNode));break;case 18:Or!==null&&(hi?(t=Or,r=r.stateNode,t.nodeType===8?Pv(t.parentNode,r):t.nodeType===1&&Pv(t,r),xd(t)):Pv(Or,r.stateNode));break;case 4:n=Or,i=hi,Or=r.stateNode.containerInfo,hi=!0,Bs(t,e,r),Or=n,hi=i;break;case 0:case 11:case 14:case 15:if(!Ar&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&oj(r,e,a),i=i.next}while(i!==n)}Bs(t,e,r);break;case 1:if(!Ar&&(Ll(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){Wt(r,e,o)}Bs(t,e,r);break;case 21:Bs(t,e,r);break;case 22:r.mode&1?(Ar=(n=Ar)||r.memoizedState!==null,Bs(t,e,r),Ar=n):Bs(t,e,r);break;default:Bs(t,e,r)}}function hI(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new EZ),e.forEach(function(n){var i=$Z.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function oi(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var s=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:Or=o.stateNode,hi=!1;break e;case 3:Or=o.stateNode.containerInfo,hi=!0;break e;case 4:Or=o.stateNode.containerInfo,hi=!0;break e}o=o.return}if(Or===null)throw Error(Z(160));hH(s,a,i),Or=null,hi=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){Wt(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)fH(e,t),e=e.sibling}function fH(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(oi(e,t),Ci(t),n&4){try{rd(3,t,t.return),um(3,t)}catch(y){Wt(t,t.return,y)}try{rd(5,t,t.return)}catch(y){Wt(t,t.return,y)}}break;case 1:oi(e,t),Ci(t),n&512&&r!==null&&Ll(r,r.return);break;case 5:if(oi(e,t),Ci(t),n&512&&r!==null&&Ll(r,r.return),t.flags&32){var i=t.stateNode;try{vd(i,"")}catch(y){Wt(t,t.return,y)}}if(n&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=r!==null?r.memoizedProps:s,o=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&DW(i,s),$2(o,a);var u=$2(o,s);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];d==="style"?LW(i,h):d==="dangerouslySetInnerHTML"?AW(i,h):d==="children"?vd(i,h):SC(i,d,h,u)}switch(o){case"input":P2(i,s);break;case"textarea":MW(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?Gl(i,!!s.multiple,p,!1):f!==!!s.multiple&&(s.defaultValue!=null?Gl(i,!!s.multiple,s.defaultValue,!0):Gl(i,!!s.multiple,s.multiple?[]:"",!1))}i[Nd]=s}catch(y){Wt(t,t.return,y)}}break;case 6:if(oi(e,t),Ci(t),n&4){if(t.stateNode===null)throw Error(Z(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(y){Wt(t,t.return,y)}}break;case 3:if(oi(e,t),Ci(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{xd(e.containerInfo)}catch(y){Wt(t,t.return,y)}break;case 4:oi(e,t),Ci(t);break;case 13:oi(e,t),Ci(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(rO=Xt())),n&4&&hI(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(Ar=(u=Ar)||d,oi(e,t),Ar=u):oi(e,t),Ci(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(me=t,d=t.child;d!==null;){for(h=me=d;me!==null;){switch(f=me,p=f.child,f.tag){case 0:case 11:case 14:case 15:rd(4,f,f.return);break;case 1:Ll(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){n=f,r=f.return;try{e=n,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(y){Wt(n,r,y)}}break;case 5:Ll(f,f.return);break;case 22:if(f.memoizedState!==null){pI(h);continue}}p!==null?(p.return=f,me=p):pI(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=h.stateNode,c=h.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=FW("display",a))}catch(y){Wt(t,t.return,y)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(y){Wt(t,t.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:oi(e,t),Ci(t),n&4&&hI(t);break;case 21:break;default:oi(e,t),Ci(t)}}function Ci(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(dH(r)){var n=r;break e}r=r.return}throw Error(Z(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(vd(i,""),n.flags&=-33);var s=dI(t);uj(t,s,i);break;case 3:case 4:var a=n.stateNode.containerInfo,o=dI(t);cj(t,o,a);break;default:throw Error(Z(161))}}catch(c){Wt(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function jZ(t,e,r){me=t,pH(t)}function pH(t,e,r){for(var n=(t.mode&1)!==0;me!==null;){var i=me,s=i.child;if(i.tag===22&&n){var a=i.memoizedState!==null||wf;if(!a){var o=i.alternate,c=o!==null&&o.memoizedState!==null||Ar;o=wf;var u=Ar;if(wf=a,(Ar=c)&&!u)for(me=i;me!==null;)a=me,c=a.child,a.tag===22&&a.memoizedState!==null?mI(i):c!==null?(c.return=a,me=c):mI(i);for(;s!==null;)me=s,pH(s),s=s.sibling;me=i,wf=o,Ar=u}fI(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,me=s):fI(t)}}function fI(t){for(;me!==null;){var e=me;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ar||um(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Ar)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:ci(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&XT(e,s,n);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}XT(e,a,r)}break;case 5:var o=e.stateNode;if(r===null&&e.flags&4){r=o;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&xd(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Z(163))}Ar||e.flags&512&&lj(e)}catch(f){Wt(e,e.return,f)}}if(e===t){me=null;break}if(r=e.sibling,r!==null){r.return=e.return,me=r;break}me=e.return}}function pI(t){for(;me!==null;){var e=me;if(e===t){me=null;break}var r=e.sibling;if(r!==null){r.return=e.return,me=r;break}me=e.return}}function mI(t){for(;me!==null;){var e=me;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{um(4,e)}catch(c){Wt(e,r,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(c){Wt(e,i,c)}}var s=e.return;try{lj(e)}catch(c){Wt(e,s,c)}break;case 5:var a=e.return;try{lj(e)}catch(c){Wt(e,a,c)}}}catch(c){Wt(e,e.return,c)}if(e===t){me=null;break}var o=e.sibling;if(o!==null){o.return=e.return,me=o;break}me=e.return}}var CZ=Math.ceil,Sp=Ts.ReactCurrentDispatcher,eO=Ts.ReactCurrentOwner,Yn=Ts.ReactCurrentBatchConfig,nt=0,br=null,rr=null,Pr=0,Cn=0,Bl=Ma(0),fr=0,Id=null,Io=0,dm=0,tO=0,nd=null,un=null,rO=0,jc=1/0,ts=null,Ep=!1,dj=null,ya=null,_f=!1,ua=null,Np=0,id=0,hj=null,Hf=-1,Kf=0;function Xr(){return nt&6?Xt():Hf!==-1?Hf:Hf=Xt()}function ba(t){return t.mode&1?nt&2&&Pr!==0?Pr&-Pr:uZ.transition!==null?(Kf===0&&(Kf=JW()),Kf):(t=ft,t!==0||(t=window.event,t=t===void 0?16:sV(t.type)),t):1}function bi(t,e,r,n){if(50<id)throw id=0,hj=null,Error(Z(185));ih(t,r,n),(!(nt&2)||t!==br)&&(t===br&&(!(nt&2)&&(dm|=r),fr===4&&Xs(t,Pr)),gn(t,n),r===1&&nt===0&&!(e.mode&1)&&(jc=Xt()+500,om&&qa()))}function gn(t,e){var r=t.callbackNode;uJ(t,e);var n=lp(t,t===br?Pr:0);if(n===0)r!==null&&ET(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&ET(r),e===1)t.tag===0?cZ(vI.bind(null,t)):EV(vI.bind(null,t)),sZ(function(){!(nt&6)&&qa()}),r=null;else{switch(ZW(n)){case 1:r=OC;break;case 4:r=QW;break;case 16:r=op;break;case 536870912:r=XW;break;default:r=op}r=_H(r,mH.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function mH(t,e){if(Hf=-1,Kf=0,nt&6)throw Error(Z(327));var r=t.callbackNode;if(Zl()&&t.callbackNode!==r)return null;var n=lp(t,t===br?Pr:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=jp(t,n);else{e=n;var i=nt;nt|=2;var s=gH();(br!==t||Pr!==e)&&(ts=null,jc=Xt()+500,yo(t,e));do try{TZ();break}catch(o){vH(t,o)}while(!0);BC(),Sp.current=s,nt=i,rr!==null?e=0:(br=null,Pr=0,e=fr)}if(e!==0){if(e===2&&(i=F2(t),i!==0&&(n=i,e=fj(t,i))),e===1)throw r=Id,yo(t,0),Xs(t,n),gn(t,Xt()),r;if(e===6)Xs(t,n);else{if(i=t.current.alternate,!(n&30)&&!OZ(i)&&(e=jp(t,n),e===2&&(s=F2(t),s!==0&&(n=s,e=fj(t,s))),e===1))throw r=Id,yo(t,0),Xs(t,n),gn(t,Xt()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(Z(345));case 2:Qa(t,un,ts);break;case 3:if(Xs(t,n),(n&130023424)===n&&(e=rO+500-Xt(),10<e)){if(lp(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){Xr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=K2(Qa.bind(null,t,un,ts),e);break}Qa(t,un,ts);break;case 4:if(Xs(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var a=31-yi(n);s=1<<a,a=e[a],a>i&&(i=a),n&=~s}if(n=i,n=Xt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*CZ(n/1960))-n,10<n){t.timeoutHandle=K2(Qa.bind(null,t,un,ts),n);break}Qa(t,un,ts);break;case 5:Qa(t,un,ts);break;default:throw Error(Z(329))}}}return gn(t,Xt()),t.callbackNode===r?mH.bind(null,t):null}function fj(t,e){var r=nd;return t.current.memoizedState.isDehydrated&&(yo(t,e).flags|=256),t=jp(t,e),t!==2&&(e=un,un=r,e!==null&&pj(e)),t}function pj(t){un===null?un=t:un.push.apply(un,t)}function OZ(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!xi(s(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Xs(t,e){for(e&=~tO,e&=~dm,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-yi(e),n=1<<r;t[r]=-1,e&=~n}}function vI(t){if(nt&6)throw Error(Z(327));Zl();var e=lp(t,0);if(!(e&1))return gn(t,Xt()),null;var r=jp(t,e);if(t.tag!==0&&r===2){var n=F2(t);n!==0&&(e=n,r=fj(t,n))}if(r===1)throw r=Id,yo(t,0),Xs(t,e),gn(t,Xt()),r;if(r===6)throw Error(Z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Qa(t,un,ts),gn(t,Xt()),null}function nO(t,e){var r=nt;nt|=1;try{return t(e)}finally{nt=r,nt===0&&(jc=Xt()+500,om&&qa())}}function Ro(t){ua!==null&&ua.tag===0&&!(nt&6)&&Zl();var e=nt;nt|=1;var r=Yn.transition,n=ft;try{if(Yn.transition=null,ft=1,t)return t()}finally{ft=n,Yn.transition=r,nt=e,!(nt&6)&&qa()}}function iO(){Cn=Bl.current,Ot(Bl)}function yo(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,iZ(r)),rr!==null)for(r=rr.return;r!==null;){var n=r;switch(AC(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&fp();break;case 3:Ec(),Ot(mn),Ot(Lr),KC();break;case 5:HC(n);break;case 4:Ec();break;case 13:Ot(Dt);break;case 19:Ot(Dt);break;case 10:zC(n.type._context);break;case 22:case 23:iO()}r=r.return}if(br=t,rr=t=xa(t.current,null),Pr=Cn=e,fr=0,Id=null,tO=dm=Io=0,un=nd=null,Za!==null){for(e=0;e<Za.length;e++)if(r=Za[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var a=s.next;s.next=i,n.next=a}r.pending=n}Za=null}return t}function vH(t,e){do{var r=rr;try{if(BC(),Uf.current=_p,wp){for(var n=Mt.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}wp=!1}if(To=0,yr=hr=Mt=null,td=!1,Od=0,eO.current=null,r===null||r.return===null){fr=1,Id=e,rr=null;break}e:{var s=t,a=r.return,o=r,c=e;if(e=Pr,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=o,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=nI(a);if(p!==null){p.flags&=-257,iI(p,a,o,s,e),p.mode&1&&rI(s,u,e),e=p,c=u;var v=e.updateQueue;if(v===null){var y=new Set;y.add(c),e.updateQueue=y}else v.add(c);break e}else{if(!(e&1)){rI(s,u,e),sO();break e}c=Error(Z(426))}}else if(kt&&o.mode&1){var x=nI(a);if(x!==null){!(x.flags&65536)&&(x.flags|=256),iI(x,a,o,s,e),FC(Nc(c,o));break e}}s=c=Nc(c,o),fr!==4&&(fr=2),nd===null?nd=[s]:nd.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=ZV(s,c,e);QT(s,g);break e;case 1:o=c;var m=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof m.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ya===null||!ya.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var b=eH(s,o,e);QT(s,b);break e}}s=s.return}while(s!==null)}bH(r)}catch(_){e=_,rr===r&&r!==null&&(rr=r=r.return);continue}break}while(!0)}function gH(){var t=Sp.current;return Sp.current=_p,t===null?_p:t}function sO(){(fr===0||fr===3||fr===2)&&(fr=4),br===null||!(Io&268435455)&&!(dm&268435455)||Xs(br,Pr)}function jp(t,e){var r=nt;nt|=2;var n=gH();(br!==t||Pr!==e)&&(ts=null,yo(t,e));do try{PZ();break}catch(i){vH(t,i)}while(!0);if(BC(),nt=r,Sp.current=n,rr!==null)throw Error(Z(261));return br=null,Pr=0,fr}function PZ(){for(;rr!==null;)yH(rr)}function TZ(){for(;rr!==null&&!tJ();)yH(rr)}function yH(t){var e=wH(t.alternate,t,Cn);t.memoizedProps=t.pendingProps,e===null?bH(t):rr=e,eO.current=null}function bH(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=SZ(r,e),r!==null){r.flags&=32767,rr=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{fr=6,rr=null;return}}else if(r=_Z(r,e,Cn),r!==null){rr=r;return}if(e=e.sibling,e!==null){rr=e;return}rr=e=t}while(e!==null);fr===0&&(fr=5)}function Qa(t,e,r){var n=ft,i=Yn.transition;try{Yn.transition=null,ft=1,IZ(t,e,r,n)}finally{Yn.transition=i,ft=n}return null}function IZ(t,e,r,n){do Zl();while(ua!==null);if(nt&6)throw Error(Z(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(Z(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(dJ(t,s),t===br&&(rr=br=null,Pr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||_f||(_f=!0,_H(op,function(){return Zl(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=Yn.transition,Yn.transition=null;var a=ft;ft=1;var o=nt;nt|=4,eO.current=null,NZ(t,r),fH(r,t),XJ(V2),cp=!!W2,V2=W2=null,t.current=r,jZ(r),rJ(),nt=o,ft=a,Yn.transition=s}else t.current=r;if(_f&&(_f=!1,ua=t,Np=i),s=t.pendingLanes,s===0&&(ya=null),sJ(r.stateNode),gn(t,Xt()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Ep)throw Ep=!1,t=dj,dj=null,t;return Np&1&&t.tag!==0&&Zl(),s=t.pendingLanes,s&1?t===hj?id++:(id=0,hj=t):id=0,qa(),null}function Zl(){if(ua!==null){var t=ZW(Np),e=Yn.transition,r=ft;try{if(Yn.transition=null,ft=16>t?16:t,ua===null)var n=!1;else{if(t=ua,ua=null,Np=0,nt&6)throw Error(Z(331));var i=nt;for(nt|=4,me=t.current;me!==null;){var s=me,a=s.child;if(me.flags&16){var o=s.deletions;if(o!==null){for(var c=0;c<o.length;c++){var u=o[c];for(me=u;me!==null;){var d=me;switch(d.tag){case 0:case 11:case 15:rd(8,d,s)}var h=d.child;if(h!==null)h.return=d,me=h;else for(;me!==null;){d=me;var f=d.sibling,p=d.return;if(uH(d),d===u){me=null;break}if(f!==null){f.return=p,me=f;break}me=p}}}var v=s.alternate;if(v!==null){var y=v.child;if(y!==null){v.child=null;do{var x=y.sibling;y.sibling=null,y=x}while(y!==null)}}me=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,me=a;else e:for(;me!==null;){if(s=me,s.flags&2048)switch(s.tag){case 0:case 11:case 15:rd(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,me=g;break e}me=s.return}}var m=t.current;for(me=m;me!==null;){a=me;var w=a.child;if(a.subtreeFlags&2064&&w!==null)w.return=a,me=w;else e:for(a=m;me!==null;){if(o=me,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:um(9,o)}}catch(_){Wt(o,o.return,_)}if(o===a){me=null;break e}var b=o.sibling;if(b!==null){b.return=o.return,me=b;break e}me=o.return}}if(nt=i,qa(),Fi&&typeof Fi.onPostCommitFiberRoot=="function")try{Fi.onPostCommitFiberRoot(rm,t)}catch{}n=!0}return n}finally{ft=r,Yn.transition=e}}return!1}function gI(t,e,r){e=Nc(r,e),e=ZV(t,e,1),t=ga(t,e,1),e=Xr(),t!==null&&(ih(t,1,e),gn(t,e))}function Wt(t,e,r){if(t.tag===3)gI(t,t,r);else for(;e!==null;){if(e.tag===3){gI(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ya===null||!ya.has(n))){t=Nc(r,t),t=eH(e,t,1),e=ga(e,t,1),t=Xr(),e!==null&&(ih(e,1,t),gn(e,t));break}}e=e.return}}function RZ(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Xr(),t.pingedLanes|=t.suspendedLanes&r,br===t&&(Pr&r)===r&&(fr===4||fr===3&&(Pr&130023424)===Pr&&500>Xt()-rO?yo(t,0):tO|=r),gn(t,e)}function xH(t,e){e===0&&(t.mode&1?(e=hf,hf<<=1,!(hf&130023424)&&(hf=4194304)):e=1);var r=Xr();t=Ns(t,e),t!==null&&(ih(t,e,r),gn(t,r))}function kZ(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),xH(t,r)}function $Z(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(Z(314))}n!==null&&n.delete(e),xH(t,r)}var wH;wH=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||mn.current)fn=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return fn=!1,wZ(t,e,r);fn=!!(t.flags&131072)}else fn=!1,kt&&e.flags&1048576&&NV(e,vp,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Vf(t,e),t=e.pendingProps;var i=wc(e,Lr.current);Jl(e,r),i=YC(null,e,n,t,i,r);var s=QC();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,vn(n)?(s=!0,pp(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,WC(e),i.updater=cm,e.stateNode=i,i._reactInternals=e,ej(e,n,t,r),e=nj(null,e,n,!0,s,r)):(e.tag=0,kt&&s&&qC(e),Hr(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Vf(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=MZ(n),t=ci(n,t),i){case 0:e=rj(null,e,n,t,r);break e;case 1:e=oI(null,e,n,t,r);break e;case 11:e=sI(null,e,n,t,r);break e;case 14:e=aI(null,e,n,ci(n.type,t),r);break e}throw Error(Z(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:ci(n,i),rj(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:ci(n,i),oI(t,e,n,i,r);case 3:e:{if(iH(e),t===null)throw Error(Z(387));n=e.pendingProps,s=e.memoizedState,i=s.element,IV(t,e),bp(e,n,null,r);var a=e.memoizedState;if(n=a.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Nc(Error(Z(423)),e),e=lI(t,e,n,r,i);break e}else if(n!==i){i=Nc(Error(Z(424)),e),e=lI(t,e,n,r,i);break e}else for(In=va(e.stateNode.containerInfo.firstChild),Rn=e,kt=!0,fi=null,r=PV(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(_c(),n===i){e=js(t,e,r);break e}Hr(t,e,n,r)}e=e.child}return e;case 5:return RV(e),t===null&&X2(e),n=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,H2(n,i)?a=null:s!==null&&H2(n,s)&&(e.flags|=32),nH(t,e),Hr(t,e,a,r),e.child;case 6:return t===null&&X2(e),null;case 13:return sH(t,e,r);case 4:return VC(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Sc(e,null,n,r):Hr(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:ci(n,i),sI(t,e,n,i,r);case 7:return Hr(t,e,e.pendingProps,r),e.child;case 8:return Hr(t,e,e.pendingProps.children,r),e.child;case 12:return Hr(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,Nt(gp,n._currentValue),n._currentValue=a,s!==null)if(xi(s.value,a)){if(s.children===i.children&&!mn.current){e=js(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var c=o.firstContext;c!==null;){if(c.context===n){if(s.tag===1){c=hs(-1,r&-r),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=r,c=s.alternate,c!==null&&(c.lanes|=r),J2(s.return,r,e),o.lanes|=r;break}c=c.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(Z(341));a.lanes|=r,o=a.alternate,o!==null&&(o.lanes|=r),J2(a,r,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Hr(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,Jl(e,r),i=Jn(i),n=n(i),e.flags|=1,Hr(t,e,n,r),e.child;case 14:return n=e.type,i=ci(n,e.pendingProps),i=ci(n.type,i),aI(t,e,n,i,r);case 15:return tH(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:ci(n,i),Vf(t,e),e.tag=1,vn(n)?(t=!0,pp(e)):t=!1,Jl(e,r),JV(e,n,i),ej(e,n,i,r),nj(null,e,n,!0,t,r);case 19:return aH(t,e,r);case 22:return rH(t,e,r)}throw Error(Z(156,e.tag))};function _H(t,e){return YW(t,e)}function DZ(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gn(t,e,r,n){return new DZ(t,e,r,n)}function aO(t){return t=t.prototype,!(!t||!t.isReactComponent)}function MZ(t){if(typeof t=="function")return aO(t)?1:0;if(t!=null){if(t=t.$$typeof,t===NC)return 11;if(t===jC)return 14}return 2}function xa(t,e){var r=t.alternate;return r===null?(r=Gn(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Gf(t,e,r,n,i,s){var a=2;if(n=t,typeof t=="function")aO(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Il:return bo(r.children,i,s,e);case EC:a=8,i|=8;break;case E2:return t=Gn(12,r,e,i|2),t.elementType=E2,t.lanes=s,t;case N2:return t=Gn(13,r,e,i),t.elementType=N2,t.lanes=s,t;case j2:return t=Gn(19,r,e,i),t.elementType=j2,t.lanes=s,t;case RW:return hm(r,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case TW:a=10;break e;case IW:a=9;break e;case NC:a=11;break e;case jC:a=14;break e;case Vs:a=16,n=null;break e}throw Error(Z(130,t==null?t:typeof t,""))}return e=Gn(a,r,e,i),e.elementType=t,e.type=n,e.lanes=s,e}function bo(t,e,r,n){return t=Gn(7,t,n,e),t.lanes=r,t}function hm(t,e,r,n){return t=Gn(22,t,n,e),t.elementType=RW,t.lanes=r,t.stateNode={isHidden:!1},t}function qv(t,e,r){return t=Gn(6,t,null,e),t.lanes=r,t}function Av(t,e,r){return e=Gn(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function qZ(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yv(0),this.expirationTimes=yv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yv(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function oO(t,e,r,n,i,s,a,o,c){return t=new qZ(t,e,r,o,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Gn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},WC(s),t}function AZ(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Tl,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function SH(t){if(!t)return Ta;t=t._reactInternals;e:{if(Yo(t)!==t||t.tag!==1)throw Error(Z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(vn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Z(171))}if(t.tag===1){var r=t.type;if(vn(r))return SV(t,r,e)}return e}function EH(t,e,r,n,i,s,a,o,c){return t=oO(r,n,!0,t,i,s,a,o,c),t.context=SH(null),r=t.current,n=Xr(),i=ba(r),s=hs(n,i),s.callback=e??null,ga(r,s,i),t.current.lanes=i,ih(t,i,n),gn(t,n),t}function fm(t,e,r,n){var i=e.current,s=Xr(),a=ba(i);return r=SH(r),e.context===null?e.context=r:e.pendingContext=r,e=hs(s,a),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=ga(i,e,a),t!==null&&(bi(t,i,a,s),zf(t,i,a)),a}function Cp(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function yI(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function lO(t,e){yI(t,e),(t=t.alternate)&&yI(t,e)}function FZ(){return null}var NH=typeof reportError=="function"?reportError:function(t){console.error(t)};function cO(t){this._internalRoot=t}pm.prototype.render=cO.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Z(409));fm(t,e,null,null)};pm.prototype.unmount=cO.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ro(function(){fm(null,t,null,null)}),e[Es]=null}};function pm(t){this._internalRoot=t}pm.prototype.unstable_scheduleHydration=function(t){if(t){var e=rV();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Qs.length&&e!==0&&e<Qs[r].priority;r++);Qs.splice(r,0,t),r===0&&iV(t)}};function uO(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function mm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function bI(){}function LZ(t,e,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var u=Cp(a);s.call(u)}}var a=EH(e,n,t,0,null,!1,!1,"",bI);return t._reactRootContainer=a,t[Es]=a.current,Sd(t.nodeType===8?t.parentNode:t),Ro(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var o=n;n=function(){var u=Cp(c);o.call(u)}}var c=oO(t,0,!1,null,null,!1,!1,"",bI);return t._reactRootContainer=c,t[Es]=c.current,Sd(t.nodeType===8?t.parentNode:t),Ro(function(){fm(e,c,r,n)}),c}function vm(t,e,r,n,i){var s=r._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var o=i;i=function(){var c=Cp(a);o.call(c)}}fm(e,a,t,i)}else a=LZ(r,e,t,i,n);return Cp(a)}eV=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Vu(e.pendingLanes);r!==0&&(PC(e,r|1),gn(e,Xt()),!(nt&6)&&(jc=Xt()+500,qa()))}break;case 13:Ro(function(){var n=Ns(t,1);if(n!==null){var i=Xr();bi(n,t,1,i)}}),lO(t,1)}};TC=function(t){if(t.tag===13){var e=Ns(t,134217728);if(e!==null){var r=Xr();bi(e,t,134217728,r)}lO(t,134217728)}};tV=function(t){if(t.tag===13){var e=ba(t),r=Ns(t,e);if(r!==null){var n=Xr();bi(r,t,e,n)}lO(t,e)}};rV=function(){return ft};nV=function(t,e){var r=ft;try{return ft=t,e()}finally{ft=r}};M2=function(t,e,r){switch(e){case"input":if(P2(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=am(n);if(!i)throw Error(Z(90));$W(n),P2(n,i)}}}break;case"textarea":MW(t,r);break;case"select":e=r.value,e!=null&&Gl(t,!!r.multiple,e,!1)}};UW=nO;WW=Ro;var BZ={usingClientEntryPoint:!1,Events:[ah,Dl,am,BW,zW,nO]},ku={findFiberByHostInstance:Ja,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zZ={bundleType:ku.bundleType,version:ku.version,rendererPackageName:ku.rendererPackageName,rendererConfig:ku.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ts.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=KW(t),t===null?null:t.stateNode},findFiberByHostInstance:ku.findFiberByHostInstance||FZ,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sf.isDisabled&&Sf.supportsFiber)try{rm=Sf.inject(zZ),Fi=Sf}catch{}}$n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BZ;$n.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!uO(e))throw Error(Z(200));return AZ(t,e,null,r)};$n.createRoot=function(t,e){if(!uO(t))throw Error(Z(299));var r=!1,n="",i=NH;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=oO(t,1,!1,null,null,r,!1,n,i),t[Es]=e.current,Sd(t.nodeType===8?t.parentNode:t),new cO(e)};$n.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Z(188)):(t=Object.keys(t).join(","),Error(Z(268,t)));return t=KW(e),t=t===null?null:t.stateNode,t};$n.flushSync=function(t){return Ro(t)};$n.hydrate=function(t,e,r){if(!mm(e))throw Error(Z(200));return vm(null,t,e,!0,r)};$n.hydrateRoot=function(t,e,r){if(!uO(t))throw Error(Z(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",a=NH;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=EH(e,null,t,1,r??null,i,!1,s,a),t[Es]=e.current,Sd(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new pm(e)};$n.render=function(t,e,r){if(!mm(e))throw Error(Z(200));return vm(null,t,e,!1,r)};$n.unmountComponentAtNode=function(t){if(!mm(t))throw Error(Z(40));return t._reactRootContainer?(Ro(function(){vm(null,null,t,!1,function(){t._reactRootContainer=null,t[Es]=null})}),!0):!1};$n.unstable_batchedUpdates=nO;$n.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!mm(r))throw Error(Z(200));if(t==null||t._reactInternals===void 0)throw Error(Z(38));return vm(t,e,r,!1,n)};$n.version="18.3.1-next-f1338f8080-20240426";function jH(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(jH)}catch(t){console.error(t)}}jH(),jW.exports=$n;var UZ=jW.exports,xI=UZ;_2.createRoot=xI.createRoot,_2.hydrateRoot=xI.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Rd(){return Rd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Rd.apply(this,arguments)}var da;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(da||(da={}));const wI="popstate";function WZ(t){t===void 0&&(t={});function e(n,i){let{pathname:s,search:a,hash:o}=n.location;return mj("",{pathname:s,search:a,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:Op(i)}return HZ(e,r,null,t)}function qt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function dO(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function VZ(){return Math.random().toString(36).substr(2,8)}function _I(t,e){return{usr:t.state,key:t.key,idx:e}}function mj(t,e,r,n){return r===void 0&&(r=null),Rd({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Vc(e):e,{state:r,key:e&&e.key||n||VZ()})}function Op(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Vc(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function HZ(t,e,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:s=!1}=n,a=i.history,o=da.Pop,c=null,u=d();u==null&&(u=0,a.replaceState(Rd({},a.state,{idx:u}),""));function d(){return(a.state||{idx:null}).idx}function h(){o=da.Pop;let x=d(),g=x==null?null:x-u;u=x,c&&c({action:o,location:y.location,delta:g})}function f(x,g){o=da.Push;let m=mj(y.location,x,g);u=d()+1;let w=_I(m,u),b=y.createHref(m);try{a.pushState(w,"",b)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;i.location.assign(b)}s&&c&&c({action:o,location:y.location,delta:1})}function p(x,g){o=da.Replace;let m=mj(y.location,x,g);u=d();let w=_I(m,u),b=y.createHref(m);a.replaceState(w,"",b),s&&c&&c({action:o,location:y.location,delta:0})}function v(x){let g=i.location.origin!=="null"?i.location.origin:i.location.href,m=typeof x=="string"?x:Op(x);return m=m.replace(/ $/,"%20"),qt(g,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,g)}let y={get action(){return o},get location(){return t(i,a)},listen(x){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(wI,h),c=x,()=>{i.removeEventListener(wI,h),c=null}},createHref(x){return e(i,x)},createURL:v,encodeLocation(x){let g=v(x);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:f,replace:p,go(x){return a.go(x)}};return y}var SI;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(SI||(SI={}));function KZ(t,e,r){return r===void 0&&(r="/"),GZ(t,e,r)}function GZ(t,e,r,n){let i=typeof e=="string"?Vc(e):e,s=Cc(i.pathname||"/",r);if(s==null)return null;let a=CH(t);YZ(a);let o=null;for(let c=0;o==null&&c<a.length;++c){let u=aee(s);o=iee(a[c],u)}return o}function CH(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(s,a,o)=>{let c={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};c.relativePath.startsWith("/")&&(qt(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=wa([n,c.relativePath]),d=r.concat(c);s.children&&s.children.length>0&&(qt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),CH(s.children,e,d,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:ree(u,s.index),routesMeta:d})};return t.forEach((s,a)=>{var o;if(s.path===""||!((o=s.path)!=null&&o.includes("?")))i(s,a);else for(let c of OH(s.path))i(s,a,c)}),e}function OH(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,i=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let a=OH(n.join("/")),o=[];return o.push(...a.map(c=>c===""?s:[s,c].join("/"))),i&&o.push(...a),o.map(c=>t.startsWith("/")&&c===""?"/":c)}function YZ(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:nee(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const QZ=/^:[\w-]+$/,XZ=3,JZ=2,ZZ=1,eee=10,tee=-2,EI=t=>t==="*";function ree(t,e){let r=t.split("/"),n=r.length;return r.some(EI)&&(n+=tee),e&&(n+=JZ),r.filter(i=>!EI(i)).reduce((i,s)=>i+(QZ.test(s)?XZ:s===""?ZZ:eee),n)}function nee(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function iee(t,e,r){let{routesMeta:n}=t,i={},s="/",a=[];for(let o=0;o<n.length;++o){let c=n[o],u=o===n.length-1,d=s==="/"?e:e.slice(s.length)||"/",h=vj({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),f=c.route;if(!h)return null;Object.assign(i,h.params),a.push({params:i,pathname:wa([s,h.pathname]),pathnameBase:dee(wa([s,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(s=wa([s,h.pathnameBase]))}return a}function vj(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=see(t.path,t.caseSensitive,t.end),i=e.match(r);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:n.reduce((u,d,h)=>{let{paramName:f,isOptional:p}=d;if(f==="*"){let y=o[h]||"";a=s.slice(0,s.length-y.length).replace(/(.)\/+$/,"$1")}const v=o[h];return p&&!v?u[f]=void 0:u[f]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:a,pattern:t}}function see(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),dO(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,c)=>(n.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function aee(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return dO(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Cc(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}const oee=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lee=t=>oee.test(t);function cee(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:i=""}=typeof t=="string"?Vc(t):t,s;if(r)if(lee(r))s=r;else{if(r.includes("//")){let a=r;r=r.replace(/\/\/+/g,"/"),dO(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+r))}r.startsWith("/")?s=NI(r.substring(1),"/"):s=NI(r,e)}else s=e;return{pathname:s,search:hee(n),hash:fee(i)}}function NI(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function Fv(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function uee(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function hO(t,e){let r=uee(t);return e?r.map((n,i)=>i===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function fO(t,e,r,n){n===void 0&&(n=!1);let i;typeof t=="string"?i=Vc(t):(i=Rd({},t),qt(!i.pathname||!i.pathname.includes("?"),Fv("?","pathname","search",i)),qt(!i.pathname||!i.pathname.includes("#"),Fv("#","pathname","hash",i)),qt(!i.search||!i.search.includes("#"),Fv("#","search","hash",i)));let s=t===""||i.pathname==="",a=s?"/":i.pathname,o;if(a==null)o=r;else{let h=e.length-1;if(!n&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),h-=1;i.pathname=f.join("/")}o=h>=0?e[h]:"/"}let c=cee(i,o),u=a&&a!=="/"&&a.endsWith("/"),d=(s||a===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const wa=t=>t.join("/").replace(/\/\/+/g,"/"),dee=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),hee=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,fee=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function pee(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const PH=["post","put","patch","delete"];new Set(PH);const mee=["get",...PH];new Set(mee);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kd(){return kd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},kd.apply(this,arguments)}const gm=P.createContext(null),TH=P.createContext(null),Is=P.createContext(null),ym=P.createContext(null),Rs=P.createContext({outlet:null,matches:[],isDataRoute:!1}),IH=P.createContext(null);function vee(t,e){let{relative:r}=e===void 0?{}:e;Hc()||qt(!1);let{basename:n,navigator:i}=P.useContext(Is),{hash:s,pathname:a,search:o}=bm(t,{relative:r}),c=a;return n!=="/"&&(c=a==="/"?n:wa([n,a])),i.createHref({pathname:c,search:o,hash:s})}function Hc(){return P.useContext(ym)!=null}function ks(){return Hc()||qt(!1),P.useContext(ym).location}function RH(t){P.useContext(Is).static||P.useLayoutEffect(t)}function zr(){let{isDataRoute:t}=P.useContext(Rs);return t?Pee():gee()}function gee(){Hc()||qt(!1);let t=P.useContext(gm),{basename:e,future:r,navigator:n}=P.useContext(Is),{matches:i}=P.useContext(Rs),{pathname:s}=ks(),a=JSON.stringify(hO(i,r.v7_relativeSplatPath)),o=P.useRef(!1);return RH(()=>{o.current=!0}),P.useCallback(function(u,d){if(d===void 0&&(d={}),!o.current)return;if(typeof u=="number"){n.go(u);return}let h=fO(u,JSON.parse(a),s,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:wa([e,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[e,n,a,s,t])}function Vi(){let{matches:t}=P.useContext(Rs),e=t[t.length-1];return e?e.params:{}}function bm(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=P.useContext(Is),{matches:i}=P.useContext(Rs),{pathname:s}=ks(),a=JSON.stringify(hO(i,n.v7_relativeSplatPath));return P.useMemo(()=>fO(t,JSON.parse(a),s,r==="path"),[t,a,s,r])}function yee(t,e){return bee(t,e)}function bee(t,e,r,n){Hc()||qt(!1);let{navigator:i}=P.useContext(Is),{matches:s}=P.useContext(Rs),a=s[s.length-1],o=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let u=ks(),d;if(e){var h;let x=typeof e=="string"?Vc(e):e;c==="/"||(h=x.pathname)!=null&&h.startsWith(c)||qt(!1),d=x}else d=u;let f=d.pathname||"/",p=f;if(c!=="/"){let x=c.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(x.length).join("/")}let v=KZ(t,{pathname:p}),y=Eee(v&&v.map(x=>Object.assign({},x,{params:Object.assign({},o,x.params),pathname:wa([c,i.encodeLocation?i.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?c:wa([c,i.encodeLocation?i.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),s,r,n);return e&&y?P.createElement(ym.Provider,{value:{location:kd({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:da.Pop}},y):y}function xee(){let t=Oee(),e=pee(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),r?P.createElement("pre",{style:i},r):null,null)}const wee=P.createElement(xee,null);class _ee extends P.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?P.createElement(Rs.Provider,{value:this.props.routeContext},P.createElement(IH.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function See(t){let{routeContext:e,match:r,children:n}=t,i=P.useContext(gm);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),P.createElement(Rs.Provider,{value:e},n)}function Eee(t,e,r,n){var i;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var s;if(!r)return null;if(r.errors)t=r.matches;else if((s=n)!=null&&s.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let a=t,o=(i=r)==null?void 0:i.errors;if(o!=null){let d=a.findIndex(h=>h.route.id&&(o==null?void 0:o[h.route.id])!==void 0);d>=0||qt(!1),a=a.slice(0,Math.min(a.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<a.length;d++){let h=a[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:p}=r,v=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||v){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((d,h,f)=>{let p,v=!1,y=null,x=null;r&&(p=o&&h.route.id?o[h.route.id]:void 0,y=h.route.errorElement||wee,c&&(u<0&&f===0?(Tee("route-fallback"),v=!0,x=null):u===f&&(v=!0,x=h.route.hydrateFallbackElement||null)));let g=e.concat(a.slice(0,f+1)),m=()=>{let w;return p?w=y:v?w=x:h.route.Component?w=P.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=d,P.createElement(See,{match:h,routeContext:{outlet:d,matches:g,isDataRoute:r!=null},children:w})};return r&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?P.createElement(_ee,{location:r.location,revalidation:r.revalidation,component:y,error:p,children:m(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):m()},null)}var kH=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(kH||{}),$H=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}($H||{});function Nee(t){let e=P.useContext(gm);return e||qt(!1),e}function jee(t){let e=P.useContext(TH);return e||qt(!1),e}function Cee(t){let e=P.useContext(Rs);return e||qt(!1),e}function DH(t){let e=Cee(),r=e.matches[e.matches.length-1];return r.route.id||qt(!1),r.route.id}function Oee(){var t;let e=P.useContext(IH),r=jee(),n=DH();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function Pee(){let{router:t}=Nee(kH.UseNavigateStable),e=DH($H.UseNavigateStable),r=P.useRef(!1);return RH(()=>{r.current=!0}),P.useCallback(function(i,s){s===void 0&&(s={}),r.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,kd({fromRouteId:e},s)))},[t,e])}const jI={};function Tee(t,e,r){jI[t]||(jI[t]=!0)}function Iee(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function MH(t){let{to:e,replace:r,state:n,relative:i}=t;Hc()||qt(!1);let{future:s,static:a}=P.useContext(Is),{matches:o}=P.useContext(Rs),{pathname:c}=ks(),u=zr(),d=fO(e,hO(o,s.v7_relativeSplatPath),c,i==="path"),h=JSON.stringify(d);return P.useEffect(()=>u(JSON.parse(h),{replace:r,state:n,relative:i}),[u,h,i,r,n]),null}function ot(t){qt(!1)}function Ree(t){let{basename:e="/",children:r=null,location:n,navigationType:i=da.Pop,navigator:s,static:a=!1,future:o}=t;Hc()&&qt(!1);let c=e.replace(/^\/*/,"/"),u=P.useMemo(()=>({basename:c,navigator:s,static:a,future:kd({v7_relativeSplatPath:!1},o)}),[c,o,s,a]);typeof n=="string"&&(n=Vc(n));let{pathname:d="/",search:h="",hash:f="",state:p=null,key:v="default"}=n,y=P.useMemo(()=>{let x=Cc(d,c);return x==null?null:{location:{pathname:x,search:h,hash:f,state:p,key:v},navigationType:i}},[c,d,h,f,p,v,i]);return y==null?null:P.createElement(Is.Provider,{value:u},P.createElement(ym.Provider,{children:r,value:y}))}function CI(t){let{children:e,location:r}=t;return yee(gj(e),r)}new Promise(()=>{});function gj(t,e){e===void 0&&(e=[]);let r=[];return P.Children.forEach(t,(n,i)=>{if(!P.isValidElement(n))return;let s=[...e,i];if(n.type===P.Fragment){r.push.apply(r,gj(n.props.children,s));return}n.type!==ot&&qt(!1),!n.props.index||!n.props.children||qt(!1);let a={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=gj(n.props.children,s)),r.push(a)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pp(){return Pp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Pp.apply(this,arguments)}function qH(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,s;for(s=0;s<n.length;s++)i=n[s],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function kee(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function $ee(t,e){return t.button===0&&(!e||e==="_self")&&!kee(t)}function yj(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let n=t[r];return e.concat(Array.isArray(n)?n.map(i=>[r,i]):[[r,n]])},[]))}function Dee(t,e){let r=yj(t);return e&&e.forEach((n,i)=>{r.has(i)||e.getAll(i).forEach(s=>{r.append(i,s)})}),r}const Mee=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],qee=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],Aee="6";try{window.__reactRouterVersion=Aee}catch{}const Fee=P.createContext({isTransitioning:!1}),Lee="startTransition",OI=RX[Lee];function Bee(t){let{basename:e,children:r,future:n,window:i}=t,s=P.useRef();s.current==null&&(s.current=WZ({window:i,v5Compat:!0}));let a=s.current,[o,c]=P.useState({action:a.action,location:a.location}),{v7_startTransition:u}=n||{},d=P.useCallback(h=>{u&&OI?OI(()=>c(h)):c(h)},[c,u]);return P.useLayoutEffect(()=>a.listen(d),[a,d]),P.useEffect(()=>Iee(n),[n]),P.createElement(Ree,{basename:e,children:r,location:o.location,navigationType:o.action,navigator:a,future:n})}const zee=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Uee=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,oe=P.forwardRef(function(e,r){let{onClick:n,relative:i,reloadDocument:s,replace:a,state:o,target:c,to:u,preventScrollReset:d,viewTransition:h}=e,f=qH(e,Mee),{basename:p}=P.useContext(Is),v,y=!1;if(typeof u=="string"&&Uee.test(u)&&(v=u,zee))try{let w=new URL(window.location.href),b=u.startsWith("//")?new URL(w.protocol+u):new URL(u),_=Cc(b.pathname,p);b.origin===w.origin&&_!=null?u=_+b.search+b.hash:y=!0}catch{}let x=vee(u,{relative:i}),g=Hee(u,{replace:a,state:o,target:c,preventScrollReset:d,relative:i,viewTransition:h});function m(w){n&&n(w),w.defaultPrevented||g(w)}return P.createElement("a",Pp({},f,{href:v||x,onClick:y||s?n:m,ref:r,target:c}))}),Wee=P.forwardRef(function(e,r){let{"aria-current":n="page",caseSensitive:i=!1,className:s="",end:a=!1,style:o,to:c,viewTransition:u,children:d}=e,h=qH(e,qee),f=bm(c,{relative:h.relative}),p=ks(),v=P.useContext(TH),{navigator:y,basename:x}=P.useContext(Is),g=v!=null&&Kee(f)&&u===!0,m=y.encodeLocation?y.encodeLocation(f).pathname:f.pathname,w=p.pathname,b=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;i||(w=w.toLowerCase(),b=b?b.toLowerCase():null,m=m.toLowerCase()),b&&x&&(b=Cc(b,x)||b);const _=m!=="/"&&m.endsWith("/")?m.length-1:m.length;let E=w===m||!a&&w.startsWith(m)&&w.charAt(_)==="/",j=b!=null&&(b===m||!a&&b.startsWith(m)&&b.charAt(m.length)==="/"),S={isActive:E,isPending:j,isTransitioning:g},C=E?n:void 0,N;typeof s=="function"?N=s(S):N=[s,E?"active":null,j?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let O=typeof o=="function"?o(S):o;return P.createElement(oe,Pp({},h,{"aria-current":C,className:N,ref:r,style:O,to:c,viewTransition:u}),typeof d=="function"?d(S):d)});var bj;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(bj||(bj={}));var PI;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(PI||(PI={}));function Vee(t){let e=P.useContext(gm);return e||qt(!1),e}function Hee(t,e){let{target:r,replace:n,state:i,preventScrollReset:s,relative:a,viewTransition:o}=e===void 0?{}:e,c=zr(),u=ks(),d=bm(t,{relative:a});return P.useCallback(h=>{if($ee(h,r)){h.preventDefault();let f=n!==void 0?n:Op(u)===Op(d);c(t,{replace:f,state:i,preventScrollReset:s,relative:a,viewTransition:o})}},[u,c,d,n,i,r,t,s,a,o])}function pO(t){let e=P.useRef(yj(t)),r=P.useRef(!1),n=ks(),i=P.useMemo(()=>Dee(n.search,r.current?null:e.current),[n.search]),s=zr(),a=P.useCallback((o,c)=>{const u=yj(typeof o=="function"?o(i):o);r.current=!0,s("?"+u,c)},[s,i]);return[i,a]}function Kee(t,e){e===void 0&&(e={});let r=P.useContext(Fee);r==null&&qt(!1);let{basename:n}=Vee(bj.useViewTransitionState),i=bm(t,{relative:e.relative});if(!r.isTransitioning)return!1;let s=Cc(r.currentLocation.pathname,n)||r.currentLocation.pathname,a=Cc(r.nextLocation.pathname,n)||r.nextLocation.pathname;return vj(i.pathname,a)!=null||vj(i.pathname,s)!=null}var Qo=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Gee={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},Zs,vC,nW,Yee=(nW=class{constructor(){pe(this,Zs,Gee);pe(this,vC,!1)}setTimeoutProvider(t){se(this,Zs,t)}setTimeout(t,e){return R(this,Zs).setTimeout(t,e)}clearTimeout(t){R(this,Zs).clearTimeout(t)}setInterval(t,e){return R(this,Zs).setInterval(t,e)}clearInterval(t){R(this,Zs).clearInterval(t)}},Zs=new WeakMap,vC=new WeakMap,nW),to=new Yee;function Qee(t){setTimeout(t,0)}var ko=typeof window>"u"||"Deno"in globalThis;function qr(){}function Xee(t,e){return typeof t=="function"?t(e):t}function xj(t){return typeof t=="number"&&t>=0&&t!==1/0}function AH(t,e){return Math.max(t+(e||0)-Date.now(),0)}function _a(t,e){return typeof t=="function"?t(e):t}function Un(t,e){return typeof t=="function"?t(e):t}function TI(t,e){const{type:r="all",exact:n,fetchStatus:i,predicate:s,queryKey:a,stale:o}=t;if(a){if(n){if(e.queryHash!==mO(a,e.options))return!1}else if(!$d(e.queryKey,a))return!1}if(r!=="all"){const c=e.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof o=="boolean"&&e.isStale()!==o||i&&i!==e.state.fetchStatus||s&&!s(e))}function II(t,e){const{exact:r,status:n,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(r){if($o(e.options.mutationKey)!==$o(s))return!1}else if(!$d(e.options.mutationKey,s))return!1}return!(n&&e.state.status!==n||i&&!i(e))}function mO(t,e){return((e==null?void 0:e.queryKeyHashFn)||$o)(t)}function $o(t){return JSON.stringify(t,(e,r)=>wj(r)?Object.keys(r).sort().reduce((n,i)=>(n[i]=r[i],n),{}):r)}function $d(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(r=>$d(t[r],e[r])):!1}var Jee=Object.prototype.hasOwnProperty;function vO(t,e){if(t===e)return t;const r=RI(t)&&RI(e);if(!r&&!(wj(t)&&wj(e)))return e;const i=(r?t:Object.keys(t)).length,s=r?e:Object.keys(e),a=s.length,o=r?new Array(a):{};let c=0;for(let u=0;u<a;u++){const d=r?u:s[u],h=t[d],f=e[d];if(h===f){o[d]=h,(r?u<i:Jee.call(t,d))&&c++;continue}if(h===null||f===null||typeof h!="object"||typeof f!="object"){o[d]=f;continue}const p=vO(h,f);o[d]=p,p===h&&c++}return i===a&&c===i?t:o}function Dd(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(t[r]!==e[r])return!1;return!0}function RI(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function wj(t){if(!kI(t))return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(!kI(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function kI(t){return Object.prototype.toString.call(t)==="[object Object]"}function Zee(t){return new Promise(e=>{to.setTimeout(e,t)})}function _j(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?vO(t,e):e}function ete(t,e,r=0){const n=[...t,e];return r&&n.length>r?n.slice(1):n}function tte(t,e,r=0){const n=[e,...t];return r&&n.length>r?n.slice(0,-1):n}var gO=Symbol();function FH(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===gO?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function yO(t,e){return typeof t=="function"?t(...e):!!t}function rte(t,e,r){let n=!1,i;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(i??(i=e()),n||(n=!0,i.aborted?r():i.addEventListener("abort",r,{once:!0})),i)}),t}var lo,ea,sc,iW,nte=(iW=class extends Qo{constructor(){super();pe(this,lo);pe(this,ea);pe(this,sc);se(this,sc,e=>{if(!ko&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){R(this,ea)||this.setEventListener(R(this,sc))}onUnsubscribe(){var e;this.hasListeners()||((e=R(this,ea))==null||e.call(this),se(this,ea,void 0))}setEventListener(e){var r;se(this,sc,e),(r=R(this,ea))==null||r.call(this),se(this,ea,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){R(this,lo)!==e&&(se(this,lo,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(r=>{r(e)})}isFocused(){var e;return typeof R(this,lo)=="boolean"?R(this,lo):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},lo=new WeakMap,ea=new WeakMap,sc=new WeakMap,iW),bO=new nte;function Sj(){let t,e;const r=new Promise((i,s)=>{t=i,e=s});r.status="pending",r.catch(()=>{});function n(i){Object.assign(r,i),delete r.resolve,delete r.reject}return r.resolve=i=>{n({status:"fulfilled",value:i}),t(i)},r.reject=i=>{n({status:"rejected",reason:i}),e(i)},r}var ite=Qee;function ste(){let t=[],e=0,r=o=>{o()},n=o=>{o()},i=ite;const s=o=>{e?t.push(o):i(()=>{r(o)})},a=()=>{const o=t;t=[],o.length&&i(()=>{n(()=>{o.forEach(c=>{r(c)})})})};return{batch:o=>{let c;e++;try{c=o()}finally{e--,e||a()}return c},batchCalls:o=>(...c)=>{s(()=>{o(...c)})},schedule:s,setNotifyFunction:o=>{r=o},setBatchNotifyFunction:o=>{n=o},setScheduler:o=>{i=o}}}var Gt=ste(),ac,ta,oc,sW,ate=(sW=class extends Qo{constructor(){super();pe(this,ac,!0);pe(this,ta);pe(this,oc);se(this,oc,e=>{if(!ko&&window.addEventListener){const r=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){R(this,ta)||this.setEventListener(R(this,oc))}onUnsubscribe(){var e;this.hasListeners()||((e=R(this,ta))==null||e.call(this),se(this,ta,void 0))}setEventListener(e){var r;se(this,oc,e),(r=R(this,ta))==null||r.call(this),se(this,ta,e(this.setOnline.bind(this)))}setOnline(e){R(this,ac)!==e&&(se(this,ac,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return R(this,ac)}},ac=new WeakMap,ta=new WeakMap,oc=new WeakMap,sW),Tp=new ate;function ote(t){return Math.min(1e3*2**t,3e4)}function LH(t){return(t??"online")==="online"?Tp.isOnline():!0}var Ej=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function BH(t){let e=!1,r=0,n;const i=Sj(),s=()=>i.status!=="pending",a=y=>{var x;if(!s()){const g=new Ej(y);f(g),(x=t.onCancel)==null||x.call(t,g)}},o=()=>{e=!0},c=()=>{e=!1},u=()=>bO.isFocused()&&(t.networkMode==="always"||Tp.isOnline())&&t.canRun(),d=()=>LH(t.networkMode)&&t.canRun(),h=y=>{s()||(n==null||n(),i.resolve(y))},f=y=>{s()||(n==null||n(),i.reject(y))},p=()=>new Promise(y=>{var x;n=g=>{(s()||u())&&y(g)},(x=t.onPause)==null||x.call(t)}).then(()=>{var y;n=void 0,s()||(y=t.onContinue)==null||y.call(t)}),v=()=>{if(s())return;let y;const x=r===0?t.initialPromise:void 0;try{y=x??t.fn()}catch(g){y=Promise.reject(g)}Promise.resolve(y).then(h).catch(g=>{var E;if(s())return;const m=t.retry??(ko?0:3),w=t.retryDelay??ote,b=typeof w=="function"?w(r,g):w,_=m===!0||typeof m=="number"&&r<m||typeof m=="function"&&m(r,g);if(e||!_){f(g);return}r++,(E=t.onFail)==null||E.call(t,r,g),Zee(b).then(()=>u()?void 0:p()).then(()=>{e?f(g):v()})})};return{promise:i,status:()=>i.status,cancel:a,continue:()=>(n==null||n(),i),cancelRetry:o,continueRetry:c,canStart:d,start:()=>(d()?v():p().then(v),i)}}var co,aW,zH=(aW=class{constructor(){pe(this,co)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),xj(this.gcTime)&&se(this,co,to.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(ko?1/0:5*60*1e3))}clearGcTimeout(){R(this,co)&&(to.clearTimeout(R(this,co)),se(this,co,void 0))}},co=new WeakMap,aW),uo,lc,Bn,ho,gr,Yd,fo,ui,es,oW,lte=(oW=class extends zH{constructor(e){super();pe(this,ui);pe(this,uo);pe(this,lc);pe(this,Bn);pe(this,ho);pe(this,gr);pe(this,Yd);pe(this,fo);se(this,fo,!1),se(this,Yd,e.defaultOptions),this.setOptions(e.options),this.observers=[],se(this,ho,e.client),se(this,Bn,R(this,ho).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,se(this,uo,DI(this.options)),this.state=e.state??R(this,uo),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=R(this,gr))==null?void 0:e.promise}setOptions(e){if(this.options={...R(this,Yd),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=DI(this.options);r.data!==void 0&&(this.setState($I(r.data,r.dataUpdatedAt)),se(this,uo,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&R(this,Bn).remove(this)}setData(e,r){const n=_j(this.state.data,e,this.options);return Te(this,ui,es).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(e,r){Te(this,ui,es).call(this,{type:"setState",state:e,setStateOptions:r})}cancel(e){var n,i;const r=(n=R(this,gr))==null?void 0:n.promise;return(i=R(this,gr))==null||i.cancel(e),r?r.then(qr).catch(qr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(R(this,uo))}isActive(){return this.observers.some(e=>Un(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===gO||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>_a(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!AH(this.state.dataUpdatedAt,e)}onFocus(){var r;const e=this.observers.find(n=>n.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(r=R(this,gr))==null||r.continue()}onOnline(){var r;const e=this.observers.find(n=>n.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(r=R(this,gr))==null||r.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),R(this,Bn).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(R(this,gr)&&(R(this,fo)?R(this,gr).cancel({revert:!0}):R(this,gr).cancelRetry()),this.scheduleGc()),R(this,Bn).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Te(this,ui,es).call(this,{type:"invalidate"})}async fetch(e,r){var c,u,d,h,f,p,v,y,x,g,m,w;if(this.state.fetchStatus!=="idle"&&((c=R(this,gr))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(R(this,gr))return R(this,gr).continueRetry(),R(this,gr).promise}if(e&&this.setOptions(e),!this.options.queryFn){const b=this.observers.find(_=>_.options.queryFn);b&&this.setOptions(b.options)}const n=new AbortController,i=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(se(this,fo,!0),n.signal)})},s=()=>{const b=FH(this.options,r),E=(()=>{const j={client:R(this,ho),queryKey:this.queryKey,meta:this.meta};return i(j),j})();return se(this,fo,!1),this.options.persister?this.options.persister(b,E,this):b(E)},o=(()=>{const b={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:R(this,ho),state:this.state,fetchFn:s};return i(b),b})();(u=this.options.behavior)==null||u.onFetch(o,this),se(this,lc,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=o.fetchOptions)==null?void 0:d.meta))&&Te(this,ui,es).call(this,{type:"fetch",meta:(h=o.fetchOptions)==null?void 0:h.meta}),se(this,gr,BH({initialPromise:r==null?void 0:r.initialPromise,fn:o.fetchFn,onCancel:b=>{b instanceof Ej&&b.revert&&this.setState({...R(this,lc),fetchStatus:"idle"}),n.abort()},onFail:(b,_)=>{Te(this,ui,es).call(this,{type:"failed",failureCount:b,error:_})},onPause:()=>{Te(this,ui,es).call(this,{type:"pause"})},onContinue:()=>{Te(this,ui,es).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0}));try{const b=await R(this,gr).start();if(b===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(b),(p=(f=R(this,Bn).config).onSuccess)==null||p.call(f,b,this),(y=(v=R(this,Bn).config).onSettled)==null||y.call(v,b,this.state.error,this),b}catch(b){if(b instanceof Ej){if(b.silent)return R(this,gr).promise;if(b.revert){if(this.state.data===void 0)throw b;return this.state.data}}throw Te(this,ui,es).call(this,{type:"error",error:b}),(g=(x=R(this,Bn).config).onError)==null||g.call(x,b,this),(w=(m=R(this,Bn).config).onSettled)==null||w.call(m,this.state.data,b,this),b}finally{this.scheduleGc()}}},uo=new WeakMap,lc=new WeakMap,Bn=new WeakMap,ho=new WeakMap,gr=new WeakMap,Yd=new WeakMap,fo=new WeakMap,ui=new WeakSet,es=function(e){const r=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...UH(n.data,this.options),fetchMeta:e.meta??null};case"success":const i={...n,...$I(e.data,e.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return se(this,lc,e.manual?i:void 0),i;case"error":const s=e.error;return{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=r(this.state),Gt.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),R(this,Bn).notify({query:this,type:"updated",action:e})})},oW);function UH(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:LH(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function $I(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function DI(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=e!==void 0,n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var an,Ze,Qd,Ur,po,cc,ns,ra,Xd,uc,dc,mo,vo,na,hc,lt,Ku,Nj,jj,Cj,Oj,Pj,Tj,Ij,WH,lW,xO=(lW=class extends Qo{constructor(e,r){super();pe(this,lt);pe(this,an);pe(this,Ze);pe(this,Qd);pe(this,Ur);pe(this,po);pe(this,cc);pe(this,ns);pe(this,ra);pe(this,Xd);pe(this,uc);pe(this,dc);pe(this,mo);pe(this,vo);pe(this,na);pe(this,hc,new Set);this.options=r,se(this,an,e),se(this,ra,null),se(this,ns,Sj()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(R(this,Ze).addObserver(this),MI(R(this,Ze),this.options)?Te(this,lt,Ku).call(this):this.updateResult(),Te(this,lt,Oj).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Rj(R(this,Ze),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Rj(R(this,Ze),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Te(this,lt,Pj).call(this),Te(this,lt,Tj).call(this),R(this,Ze).removeObserver(this)}setOptions(e){const r=this.options,n=R(this,Ze);if(this.options=R(this,an).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Un(this.options.enabled,R(this,Ze))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Te(this,lt,Ij).call(this),R(this,Ze).setOptions(this.options),r._defaulted&&!Dd(this.options,r)&&R(this,an).getQueryCache().notify({type:"observerOptionsUpdated",query:R(this,Ze),observer:this});const i=this.hasListeners();i&&qI(R(this,Ze),n,this.options,r)&&Te(this,lt,Ku).call(this),this.updateResult(),i&&(R(this,Ze)!==n||Un(this.options.enabled,R(this,Ze))!==Un(r.enabled,R(this,Ze))||_a(this.options.staleTime,R(this,Ze))!==_a(r.staleTime,R(this,Ze)))&&Te(this,lt,Nj).call(this);const s=Te(this,lt,jj).call(this);i&&(R(this,Ze)!==n||Un(this.options.enabled,R(this,Ze))!==Un(r.enabled,R(this,Ze))||s!==R(this,na))&&Te(this,lt,Cj).call(this,s)}getOptimisticResult(e){const r=R(this,an).getQueryCache().build(R(this,an),e),n=this.createResult(r,e);return ute(this,n)&&(se(this,Ur,n),se(this,cc,this.options),se(this,po,R(this,Ze).state)),n}getCurrentResult(){return R(this,Ur)}trackResult(e,r){return new Proxy(e,{get:(n,i)=>(this.trackProp(i),r==null||r(i),i==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&R(this,ns).status==="pending"&&R(this,ns).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,i))})}trackProp(e){R(this,hc).add(e)}getCurrentQuery(){return R(this,Ze)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const r=R(this,an).defaultQueryOptions(e),n=R(this,an).getQueryCache().build(R(this,an),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(e){return Te(this,lt,Ku).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),R(this,Ur)))}createResult(e,r){var C;const n=R(this,Ze),i=this.options,s=R(this,Ur),a=R(this,po),o=R(this,cc),u=e!==n?e.state:R(this,Qd),{state:d}=e;let h={...d},f=!1,p;if(r._optimisticResults){const N=this.hasListeners(),O=!N&&MI(e,r),T=N&&qI(e,n,r,i);(O||T)&&(h={...h,...UH(d.data,e.options)}),r._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:v,errorUpdatedAt:y,status:x}=h;p=h.data;let g=!1;if(r.placeholderData!==void 0&&p===void 0&&x==="pending"){let N;s!=null&&s.isPlaceholderData&&r.placeholderData===(o==null?void 0:o.placeholderData)?(N=s.data,g=!0):N=typeof r.placeholderData=="function"?r.placeholderData((C=R(this,dc))==null?void 0:C.state.data,R(this,dc)):r.placeholderData,N!==void 0&&(x="success",p=_j(s==null?void 0:s.data,N,r),f=!0)}if(r.select&&p!==void 0&&!g)if(s&&p===(a==null?void 0:a.data)&&r.select===R(this,Xd))p=R(this,uc);else try{se(this,Xd,r.select),p=r.select(p),p=_j(s==null?void 0:s.data,p,r),se(this,uc,p),se(this,ra,null)}catch(N){se(this,ra,N)}R(this,ra)&&(v=R(this,ra),p=R(this,uc),y=Date.now(),x="error");const m=h.fetchStatus==="fetching",w=x==="pending",b=x==="error",_=w&&m,E=p!==void 0,S={status:x,fetchStatus:h.fetchStatus,isPending:w,isSuccess:x==="success",isError:b,isInitialLoading:_,isLoading:_,data:p,dataUpdatedAt:h.dataUpdatedAt,error:v,errorUpdatedAt:y,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>u.dataUpdateCount||h.errorUpdateCount>u.errorUpdateCount,isFetching:m,isRefetching:m&&!w,isLoadingError:b&&!E,isPaused:h.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:b&&E,isStale:wO(e,r),refetch:this.refetch,promise:R(this,ns),isEnabled:Un(r.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const N=I=>{S.status==="error"?I.reject(S.error):S.data!==void 0&&I.resolve(S.data)},O=()=>{const I=se(this,ns,S.promise=Sj());N(I)},T=R(this,ns);switch(T.status){case"pending":e.queryHash===n.queryHash&&N(T);break;case"fulfilled":(S.status==="error"||S.data!==T.value)&&O();break;case"rejected":(S.status!=="error"||S.error!==T.reason)&&O();break}}return S}updateResult(){const e=R(this,Ur),r=this.createResult(R(this,Ze),this.options);if(se(this,po,R(this,Ze).state),se(this,cc,this.options),R(this,po).data!==void 0&&se(this,dc,R(this,Ze)),Dd(r,e))return;se(this,Ur,r);const n=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,s=typeof i=="function"?i():i;if(s==="all"||!s&&!R(this,hc).size)return!0;const a=new Set(s??R(this,hc));return this.options.throwOnError&&a.add("error"),Object.keys(R(this,Ur)).some(o=>{const c=o;return R(this,Ur)[c]!==e[c]&&a.has(c)})};Te(this,lt,WH).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Te(this,lt,Oj).call(this)}},an=new WeakMap,Ze=new WeakMap,Qd=new WeakMap,Ur=new WeakMap,po=new WeakMap,cc=new WeakMap,ns=new WeakMap,ra=new WeakMap,Xd=new WeakMap,uc=new WeakMap,dc=new WeakMap,mo=new WeakMap,vo=new WeakMap,na=new WeakMap,hc=new WeakMap,lt=new WeakSet,Ku=function(e){Te(this,lt,Ij).call(this);let r=R(this,Ze).fetch(this.options,e);return e!=null&&e.throwOnError||(r=r.catch(qr)),r},Nj=function(){Te(this,lt,Pj).call(this);const e=_a(this.options.staleTime,R(this,Ze));if(ko||R(this,Ur).isStale||!xj(e))return;const n=AH(R(this,Ur).dataUpdatedAt,e)+1;se(this,mo,to.setTimeout(()=>{R(this,Ur).isStale||this.updateResult()},n))},jj=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(R(this,Ze)):this.options.refetchInterval)??!1},Cj=function(e){Te(this,lt,Tj).call(this),se(this,na,e),!(ko||Un(this.options.enabled,R(this,Ze))===!1||!xj(R(this,na))||R(this,na)===0)&&se(this,vo,to.setInterval(()=>{(this.options.refetchIntervalInBackground||bO.isFocused())&&Te(this,lt,Ku).call(this)},R(this,na)))},Oj=function(){Te(this,lt,Nj).call(this),Te(this,lt,Cj).call(this,Te(this,lt,jj).call(this))},Pj=function(){R(this,mo)&&(to.clearTimeout(R(this,mo)),se(this,mo,void 0))},Tj=function(){R(this,vo)&&(to.clearInterval(R(this,vo)),se(this,vo,void 0))},Ij=function(){const e=R(this,an).getQueryCache().build(R(this,an),this.options);if(e===R(this,Ze))return;const r=R(this,Ze);se(this,Ze,e),se(this,Qd,e.state),this.hasListeners()&&(r==null||r.removeObserver(this),e.addObserver(this))},WH=function(e){Gt.batch(()=>{e.listeners&&this.listeners.forEach(r=>{r(R(this,Ur))}),R(this,an).getQueryCache().notify({query:R(this,Ze),type:"observerResultsUpdated"})})},lW);function cte(t,e){return Un(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function MI(t,e){return cte(t,e)||t.state.data!==void 0&&Rj(t,e,e.refetchOnMount)}function Rj(t,e,r){if(Un(e.enabled,t)!==!1&&_a(e.staleTime,t)!=="static"){const n=typeof r=="function"?r(t):r;return n==="always"||n!==!1&&wO(t,e)}return!1}function qI(t,e,r,n){return(t!==e||Un(n.enabled,t)===!1)&&(!r.suspense||t.state.status!=="error")&&wO(t,r)}function wO(t,e){return Un(e.enabled,t)!==!1&&t.isStaleByTime(_a(e.staleTime,t))}function ute(t,e){return!Dd(t.getCurrentResult(),e)}function AI(t){return{onFetch:(e,r)=>{var d,h,f,p,v;const n=e.options,i=(f=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,s=((p=e.state.data)==null?void 0:p.pages)||[],a=((v=e.state.data)==null?void 0:v.pageParams)||[];let o={pages:[],pageParams:[]},c=0;const u=async()=>{let y=!1;const x=w=>{rte(w,()=>e.signal,()=>y=!0)},g=FH(e.options,e.fetchOptions),m=async(w,b,_)=>{if(y)return Promise.reject();if(b==null&&w.pages.length)return Promise.resolve(w);const j=(()=>{const O={client:e.client,queryKey:e.queryKey,pageParam:b,direction:_?"backward":"forward",meta:e.options.meta};return x(O),O})(),S=await g(j),{maxPages:C}=e.options,N=_?tte:ete;return{pages:N(w.pages,S,C),pageParams:N(w.pageParams,b,C)}};if(i&&s.length){const w=i==="backward",b=w?dte:FI,_={pages:s,pageParams:a},E=b(n,_);o=await m(_,E,w)}else{const w=t??s.length;do{const b=c===0?a[0]??n.initialPageParam:FI(n,o);if(c>0&&b==null)break;o=await m(o,b),c++}while(c<w)}return o};e.options.persister?e.fetchFn=()=>{var y,x;return(x=(y=e.options).persister)==null?void 0:x.call(y,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r)}:e.fetchFn=u}}}function FI(t,{pages:e,pageParams:r}){const n=e.length-1;return e.length>0?t.getNextPageParam(e[n],e,r[n],r):void 0}function dte(t,{pages:e,pageParams:r}){var n;return e.length>0?(n=t.getPreviousPageParam)==null?void 0:n.call(t,e[0],e,r[0],r):void 0}var Jd,Ii,Wr,go,Ri,Ws,cW,hte=(cW=class extends zH{constructor(e){super();pe(this,Ri);pe(this,Jd);pe(this,Ii);pe(this,Wr);pe(this,go);se(this,Jd,e.client),this.mutationId=e.mutationId,se(this,Wr,e.mutationCache),se(this,Ii,[]),this.state=e.state||VH(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){R(this,Ii).includes(e)||(R(this,Ii).push(e),this.clearGcTimeout(),R(this,Wr).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){se(this,Ii,R(this,Ii).filter(r=>r!==e)),this.scheduleGc(),R(this,Wr).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){R(this,Ii).length||(this.state.status==="pending"?this.scheduleGc():R(this,Wr).remove(this))}continue(){var e;return((e=R(this,go))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var a,o,c,u,d,h,f,p,v,y,x,g,m,w,b,_,E,j,S,C;const r=()=>{Te(this,Ri,Ws).call(this,{type:"continue"})},n={client:R(this,Jd),meta:this.options.meta,mutationKey:this.options.mutationKey};se(this,go,BH({fn:()=>this.options.mutationFn?this.options.mutationFn(e,n):Promise.reject(new Error("No mutationFn found")),onFail:(N,O)=>{Te(this,Ri,Ws).call(this,{type:"failed",failureCount:N,error:O})},onPause:()=>{Te(this,Ri,Ws).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>R(this,Wr).canRun(this)}));const i=this.state.status==="pending",s=!R(this,go).canStart();try{if(i)r();else{Te(this,Ri,Ws).call(this,{type:"pending",variables:e,isPaused:s}),await((o=(a=R(this,Wr).config).onMutate)==null?void 0:o.call(a,e,this,n));const O=await((u=(c=this.options).onMutate)==null?void 0:u.call(c,e,n));O!==this.state.context&&Te(this,Ri,Ws).call(this,{type:"pending",context:O,variables:e,isPaused:s})}const N=await R(this,go).start();return await((h=(d=R(this,Wr).config).onSuccess)==null?void 0:h.call(d,N,e,this.state.context,this,n)),await((p=(f=this.options).onSuccess)==null?void 0:p.call(f,N,e,this.state.context,n)),await((y=(v=R(this,Wr).config).onSettled)==null?void 0:y.call(v,N,null,this.state.variables,this.state.context,this,n)),await((g=(x=this.options).onSettled)==null?void 0:g.call(x,N,null,e,this.state.context,n)),Te(this,Ri,Ws).call(this,{type:"success",data:N}),N}catch(N){try{await((w=(m=R(this,Wr).config).onError)==null?void 0:w.call(m,N,e,this.state.context,this,n))}catch(O){Promise.reject(O)}try{await((_=(b=this.options).onError)==null?void 0:_.call(b,N,e,this.state.context,n))}catch(O){Promise.reject(O)}try{await((j=(E=R(this,Wr).config).onSettled)==null?void 0:j.call(E,void 0,N,this.state.variables,this.state.context,this,n))}catch(O){Promise.reject(O)}try{await((C=(S=this.options).onSettled)==null?void 0:C.call(S,void 0,N,e,this.state.context,n))}catch(O){Promise.reject(O)}throw Te(this,Ri,Ws).call(this,{type:"error",error:N}),N}finally{R(this,Wr).runNext(this)}}},Jd=new WeakMap,Ii=new WeakMap,Wr=new WeakMap,go=new WeakMap,Ri=new WeakSet,Ws=function(e){const r=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Gt.batch(()=>{R(this,Ii).forEach(n=>{n.onMutationUpdate(e)}),R(this,Wr).notify({mutation:this,type:"updated",action:e})})},cW);function VH(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var is,di,Zd,uW,fte=(uW=class extends Qo{constructor(e={}){super();pe(this,is);pe(this,di);pe(this,Zd);this.config=e,se(this,is,new Set),se(this,di,new Map),se(this,Zd,0)}build(e,r,n){const i=new hte({client:e,mutationCache:this,mutationId:++af(this,Zd)._,options:e.defaultMutationOptions(r),state:n});return this.add(i),i}add(e){R(this,is).add(e);const r=Ef(e);if(typeof r=="string"){const n=R(this,di).get(r);n?n.push(e):R(this,di).set(r,[e])}this.notify({type:"added",mutation:e})}remove(e){if(R(this,is).delete(e)){const r=Ef(e);if(typeof r=="string"){const n=R(this,di).get(r);if(n)if(n.length>1){const i=n.indexOf(e);i!==-1&&n.splice(i,1)}else n[0]===e&&R(this,di).delete(r)}}this.notify({type:"removed",mutation:e})}canRun(e){const r=Ef(e);if(typeof r=="string"){const n=R(this,di).get(r),i=n==null?void 0:n.find(s=>s.state.status==="pending");return!i||i===e}else return!0}runNext(e){var n;const r=Ef(e);if(typeof r=="string"){const i=(n=R(this,di).get(r))==null?void 0:n.find(s=>s!==e&&s.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Gt.batch(()=>{R(this,is).forEach(e=>{this.notify({type:"removed",mutation:e})}),R(this,is).clear(),R(this,di).clear()})}getAll(){return Array.from(R(this,is))}find(e){const r={exact:!0,...e};return this.getAll().find(n=>II(r,n))}findAll(e={}){return this.getAll().filter(r=>II(e,r))}notify(e){Gt.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){const e=this.getAll().filter(r=>r.state.isPaused);return Gt.batch(()=>Promise.all(e.map(r=>r.continue().catch(qr))))}},is=new WeakMap,di=new WeakMap,Zd=new WeakMap,uW);function Ef(t){var e;return(e=t.options.scope)==null?void 0:e.id}var ss,ia,on,as,_s,Yf,kj,dW,pte=(dW=class extends Qo{constructor(e,r){super();pe(this,_s);pe(this,ss);pe(this,ia);pe(this,on);pe(this,as);se(this,ss,e),this.setOptions(r),this.bindMethods(),Te(this,_s,Yf).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var n;const r=this.options;this.options=R(this,ss).defaultMutationOptions(e),Dd(this.options,r)||R(this,ss).getMutationCache().notify({type:"observerOptionsUpdated",mutation:R(this,on),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&$o(r.mutationKey)!==$o(this.options.mutationKey)?this.reset():((n=R(this,on))==null?void 0:n.state.status)==="pending"&&R(this,on).setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||(e=R(this,on))==null||e.removeObserver(this)}onMutationUpdate(e){Te(this,_s,Yf).call(this),Te(this,_s,kj).call(this,e)}getCurrentResult(){return R(this,ia)}reset(){var e;(e=R(this,on))==null||e.removeObserver(this),se(this,on,void 0),Te(this,_s,Yf).call(this),Te(this,_s,kj).call(this)}mutate(e,r){var n;return se(this,as,r),(n=R(this,on))==null||n.removeObserver(this),se(this,on,R(this,ss).getMutationCache().build(R(this,ss),this.options)),R(this,on).addObserver(this),R(this,on).execute(e)}},ss=new WeakMap,ia=new WeakMap,on=new WeakMap,as=new WeakMap,_s=new WeakSet,Yf=function(){var r;const e=((r=R(this,on))==null?void 0:r.state)??VH();se(this,ia,{...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset})},kj=function(e){Gt.batch(()=>{var r,n,i,s,a,o,c,u;if(R(this,as)&&this.hasListeners()){const d=R(this,ia).variables,h=R(this,ia).context,f={client:R(this,ss),meta:this.options.meta,mutationKey:this.options.mutationKey};if((e==null?void 0:e.type)==="success"){try{(n=(r=R(this,as)).onSuccess)==null||n.call(r,e.data,d,h,f)}catch(p){Promise.reject(p)}try{(s=(i=R(this,as)).onSettled)==null||s.call(i,e.data,null,d,h,f)}catch(p){Promise.reject(p)}}else if((e==null?void 0:e.type)==="error"){try{(o=(a=R(this,as)).onError)==null||o.call(a,e.error,d,h,f)}catch(p){Promise.reject(p)}try{(u=(c=R(this,as)).onSettled)==null||u.call(c,void 0,e.error,d,h,f)}catch(p){Promise.reject(p)}}}this.listeners.forEach(d=>{d(R(this,ia))})})},dW);function LI(t,e){const r=new Set(e);return t.filter(n=>!r.has(n))}function mte(t,e,r){const n=t.slice(0);return n[e]=r,n}var fc,jn,pc,mc,zn,sa,eh,th,rh,Ir,$j,Dj,Mj,qj,Aj,hW,vte=(hW=class extends Qo{constructor(e,r,n){super();pe(this,Ir);pe(this,fc);pe(this,jn);pe(this,pc);pe(this,mc);pe(this,zn);pe(this,sa);pe(this,eh);pe(this,th);pe(this,rh,[]);se(this,fc,e),se(this,mc,n),se(this,pc,[]),se(this,zn,[]),se(this,jn,[]),this.setQueries(r)}onSubscribe(){this.listeners.size===1&&R(this,zn).forEach(e=>{e.subscribe(r=>{Te(this,Ir,qj).call(this,e,r)})})}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,R(this,zn).forEach(e=>{e.destroy()})}setQueries(e,r){se(this,pc,e),se(this,mc,r),Gt.batch(()=>{const n=R(this,zn),i=Te(this,Ir,Mj).call(this,R(this,pc));i.forEach(h=>h.observer.setOptions(h.defaultedQueryOptions));const s=i.map(h=>h.observer),a=s.map(h=>h.getCurrentResult()),o=n.length!==s.length,c=s.some((h,f)=>h!==n[f]),u=o||c,d=u?!0:a.some((h,f)=>{const p=R(this,jn)[f];return!p||!Dd(h,p)});!u&&!d||(u&&(se(this,rh,i),se(this,zn,s)),se(this,jn,a),this.hasListeners()&&(u&&(LI(n,s).forEach(h=>{h.destroy()}),LI(s,n).forEach(h=>{h.subscribe(f=>{Te(this,Ir,qj).call(this,h,f)})})),Te(this,Ir,Aj).call(this)))})}getCurrentResult(){return R(this,jn)}getQueries(){return R(this,zn).map(e=>e.getCurrentQuery())}getObservers(){return R(this,zn)}getOptimisticResult(e,r){const n=Te(this,Ir,Mj).call(this,e),i=n.map(s=>s.observer.getOptimisticResult(s.defaultedQueryOptions));return[i,s=>Te(this,Ir,Dj).call(this,s??i,r),()=>Te(this,Ir,$j).call(this,i,n)]}},fc=new WeakMap,jn=new WeakMap,pc=new WeakMap,mc=new WeakMap,zn=new WeakMap,sa=new WeakMap,eh=new WeakMap,th=new WeakMap,rh=new WeakMap,Ir=new WeakSet,$j=function(e,r){return r.map((n,i)=>{const s=e[i];return n.defaultedQueryOptions.notifyOnChangeProps?s:n.observer.trackResult(s,a=>{r.forEach(o=>{o.observer.trackProp(a)})})})},Dj=function(e,r){return r?((!R(this,sa)||R(this,jn)!==R(this,th)||r!==R(this,eh))&&(se(this,eh,r),se(this,th,R(this,jn)),se(this,sa,vO(R(this,sa),r(e)))),R(this,sa)):e},Mj=function(e){const r=new Map;R(this,zn).forEach(i=>{const s=i.options.queryHash;if(!s)return;const a=r.get(s);a?a.push(i):r.set(s,[i])});const n=[];return e.forEach(i=>{var c;const s=R(this,fc).defaultQueryOptions(i),o=((c=r.get(s.queryHash))==null?void 0:c.shift())??new xO(R(this,fc),s);n.push({defaultedQueryOptions:s,observer:o})}),n},qj=function(e,r){const n=R(this,zn).indexOf(e);n!==-1&&(se(this,jn,mte(R(this,jn),n,r)),Te(this,Ir,Aj).call(this))},Aj=function(){var e;if(this.hasListeners()){const r=R(this,sa),n=Te(this,Ir,$j).call(this,R(this,jn),R(this,rh)),i=Te(this,Ir,Dj).call(this,n,(e=R(this,mc))==null?void 0:e.combine);r!==i&&Gt.batch(()=>{this.listeners.forEach(s=>{s(R(this,jn))})})}},hW),ki,fW,gte=(fW=class extends Qo{constructor(e={}){super();pe(this,ki);this.config=e,se(this,ki,new Map)}build(e,r,n){const i=r.queryKey,s=r.queryHash??mO(i,r);let a=this.get(s);return a||(a=new lte({client:e,queryKey:i,queryHash:s,options:e.defaultQueryOptions(r),state:n,defaultOptions:e.getQueryDefaults(i)}),this.add(a)),a}add(e){R(this,ki).has(e.queryHash)||(R(this,ki).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=R(this,ki).get(e.queryHash);r&&(e.destroy(),r===e&&R(this,ki).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Gt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return R(this,ki).get(e)}getAll(){return[...R(this,ki).values()]}find(e){const r={exact:!0,...e};return this.getAll().find(n=>TI(r,n))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(n=>TI(e,n)):r}notify(e){Gt.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){Gt.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Gt.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},ki=new WeakMap,fW),zt,aa,oa,vc,gc,la,yc,bc,pW,yte=(pW=class{constructor(t={}){pe(this,zt);pe(this,aa);pe(this,oa);pe(this,vc);pe(this,gc);pe(this,la);pe(this,yc);pe(this,bc);se(this,zt,t.queryCache||new gte),se(this,aa,t.mutationCache||new fte),se(this,oa,t.defaultOptions||{}),se(this,vc,new Map),se(this,gc,new Map),se(this,la,0)}mount(){af(this,la)._++,R(this,la)===1&&(se(this,yc,bO.subscribe(async t=>{t&&(await this.resumePausedMutations(),R(this,zt).onFocus())})),se(this,bc,Tp.subscribe(async t=>{t&&(await this.resumePausedMutations(),R(this,zt).onOnline())})))}unmount(){var t,e;af(this,la)._--,R(this,la)===0&&((t=R(this,yc))==null||t.call(this),se(this,yc,void 0),(e=R(this,bc))==null||e.call(this),se(this,bc,void 0))}isFetching(t){return R(this,zt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return R(this,aa).findAll({...t,status:"pending"}).length}getQueryData(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=R(this,zt).get(e.queryHash))==null?void 0:r.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),r=R(this,zt).build(this,e),n=r.state.data;return n===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime(_a(e.staleTime,r))&&this.prefetchQuery(e),Promise.resolve(n))}getQueriesData(t){return R(this,zt).findAll(t).map(({queryKey:e,state:r})=>{const n=r.data;return[e,n]})}setQueryData(t,e,r){const n=this.defaultQueryOptions({queryKey:t}),i=R(this,zt).get(n.queryHash),s=i==null?void 0:i.state.data,a=Xee(e,s);if(a!==void 0)return R(this,zt).build(this,n).setData(a,{...r,manual:!0})}setQueriesData(t,e,r){return Gt.batch(()=>R(this,zt).findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,r)]))}getQueryState(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=R(this,zt).get(e.queryHash))==null?void 0:r.state}removeQueries(t){const e=R(this,zt);Gt.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=R(this,zt);return Gt.batch(()=>(r.findAll(t).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const r={revert:!0,...e},n=Gt.batch(()=>R(this,zt).findAll(t).map(i=>i.cancel(r)));return Promise.all(n).then(qr).catch(qr)}invalidateQueries(t,e={}){return Gt.batch(()=>(R(this,zt).findAll(t).forEach(r=>{r.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const r={...e,cancelRefetch:e.cancelRefetch??!0},n=Gt.batch(()=>R(this,zt).findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,r);return r.throwOnError||(s=s.catch(qr)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(n).then(qr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const r=R(this,zt).build(this,e);return r.isStaleByTime(_a(e.staleTime,r))?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(qr).catch(qr)}fetchInfiniteQuery(t){return t.behavior=AI(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(qr).catch(qr)}ensureInfiniteQueryData(t){return t.behavior=AI(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Tp.isOnline()?R(this,aa).resumePausedMutations():Promise.resolve()}getQueryCache(){return R(this,zt)}getMutationCache(){return R(this,aa)}getDefaultOptions(){return R(this,oa)}setDefaultOptions(t){se(this,oa,t)}setQueryDefaults(t,e){R(this,vc).set($o(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...R(this,vc).values()],r={};return e.forEach(n=>{$d(t,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(t,e){R(this,gc).set($o(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...R(this,gc).values()],r={};return e.forEach(n=>{$d(t,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const e={...R(this,oa).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=mO(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===gO&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...R(this,oa).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){R(this,zt).clear(),R(this,aa).clear()}},zt=new WeakMap,aa=new WeakMap,oa=new WeakMap,vc=new WeakMap,gc=new WeakMap,la=new WeakMap,yc=new WeakMap,bc=new WeakMap,pW),HH=P.createContext(void 0),ct=t=>{const e=P.useContext(HH);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},bte=({client:t,children:e})=>(P.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),l.jsx(HH.Provider,{value:t,children:e})),KH=P.createContext(!1),GH=()=>P.useContext(KH);KH.Provider;function xte(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var wte=P.createContext(xte()),YH=()=>P.useContext(wte),QH=(t,e,r)=>{const n=r!=null&&r.state.error&&typeof t.throwOnError=="function"?yO(t.throwOnError,[r.state.error,r]):t.throwOnError;(t.suspense||t.experimental_prefetchInRender||n)&&(e.isReset()||(t.retryOnMount=!1))},XH=t=>{P.useEffect(()=>{t.clearReset()},[t])},JH=({result:t,errorResetBoundary:e,throwOnError:r,query:n,suspense:i})=>t.isError&&!e.isReset()&&!t.isFetching&&n&&(i&&t.data===void 0||yO(r,[t.error,n])),ZH=t=>{if(t.suspense){const r=i=>i==="static"?i:Math.max(i??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...i)=>r(n(...i)):r(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},eK=(t,e)=>t.isLoading&&t.isFetching&&!e,Fj=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,Ip=(t,e,r)=>e.fetchOptimistic(t).catch(()=>{r.clearReset()});function Lj({queries:t,...e},r){const n=ct(),i=GH(),s=YH(),a=P.useMemo(()=>t.map(y=>{const x=n.defaultQueryOptions(y);return x._optimisticResults=i?"isRestoring":"optimistic",x}),[t,n,i]);a.forEach(y=>{ZH(y);const x=n.getQueryCache().get(y.queryHash);QH(y,s,x)}),XH(s);const[o]=P.useState(()=>new vte(n,a,e)),[c,u,d]=o.getOptimisticResult(a,e.combine),h=!i&&e.subscribed!==!1;P.useSyncExternalStore(P.useCallback(y=>h?o.subscribe(Gt.batchCalls(y)):qr,[o,h]),()=>o.getCurrentResult(),()=>o.getCurrentResult()),P.useEffect(()=>{o.setQueries(a,e)},[a,e,o]);const p=c.some((y,x)=>Fj(a[x],y))?c.flatMap((y,x)=>{const g=a[x];if(g){const m=new xO(n,g);if(Fj(g,y))return Ip(g,m,s);eK(y,i)&&Ip(g,m,s)}return[]}):[];if(p.length>0)throw Promise.all(p);const v=c.find((y,x)=>{const g=a[x];return g&&JH({result:y,errorResetBoundary:s,throwOnError:g.throwOnError,query:n.getQueryCache().get(g.queryHash),suspense:g.suspense})});if(v!=null&&v.error)throw v.error;return u(d())}function _te(t,e,r){var f,p,v,y;const n=GH(),i=YH(),s=ct(),a=s.defaultQueryOptions(t);(p=(f=s.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||p.call(f,a);const o=s.getQueryCache().get(a.queryHash);a._optimisticResults=n?"isRestoring":"optimistic",ZH(a),QH(a,i,o),XH(i);const c=!s.getQueryCache().get(a.queryHash),[u]=P.useState(()=>new e(s,a)),d=u.getOptimisticResult(a),h=!n&&t.subscribed!==!1;if(P.useSyncExternalStore(P.useCallback(x=>{const g=h?u.subscribe(Gt.batchCalls(x)):qr;return u.updateResult(),g},[u,h]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),P.useEffect(()=>{u.setOptions(a)},[a,u]),Fj(a,d))throw Ip(a,u,i);if(JH({result:d,errorResetBoundary:i,throwOnError:a.throwOnError,query:o,suspense:a.suspense}))throw d.error;if((y=(v=s.getDefaultOptions().queries)==null?void 0:v._experimental_afterQuery)==null||y.call(v,a,d),a.experimental_prefetchInRender&&!ko&&eK(d,n)){const x=c?Ip(a,u,i):o==null?void 0:o.promise;x==null||x.catch(qr).finally(()=>{u.updateResult()})}return a.notifyOnChangeProps?d:u.trackResult(d)}function rt(t,e){return _te(t,xO)}function it(t,e){const r=ct(),[n]=P.useState(()=>new pte(r,t));P.useEffect(()=>{n.setOptions(t)},[n,t]);const i=P.useSyncExternalStore(P.useCallback(a=>n.subscribe(Gt.batchCalls(a)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),s=P.useCallback((a,o)=>{n.mutate(a,o).catch(qr)},[n]);if(i.error&&yO(n.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:s,mutateAsync:i.mutate}}function _O(){const t=window.prmConfig||{};return P.useMemo(()=>({isLoggedIn:t.isLoggedIn||!1,userId:t.userId||null,loginUrl:t.loginUrl||"/wp-login.php",logoutUrl:t.logoutUrl||"/wp-login.php?action=logout",isLoading:!1}),[t.isLoggedIn,t.userId,t.loginUrl,t.logoutUrl])}function tK(t,e){return function(){return t.apply(e,arguments)}}const{toString:Ste}=Object.prototype,{getPrototypeOf:SO}=Object,{iterator:xm,toStringTag:rK}=Symbol,wm=(t=>e=>{const r=Ste.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Si=t=>(t=t.toLowerCase(),e=>wm(e)===t),_m=t=>e=>typeof e===t,{isArray:Kc}=Array,Oc=_m("undefined");function lh(t){return t!==null&&!Oc(t)&&t.constructor!==null&&!Oc(t.constructor)&&yn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const nK=Si("ArrayBuffer");function Ete(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&nK(t.buffer),e}const Nte=_m("string"),yn=_m("function"),iK=_m("number"),ch=t=>t!==null&&typeof t=="object",jte=t=>t===!0||t===!1,Qf=t=>{if(wm(t)!=="object")return!1;const e=SO(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(rK in t)&&!(xm in t)},Cte=t=>{if(!ch(t)||lh(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},Ote=Si("Date"),Pte=Si("File"),Tte=Si("Blob"),Ite=Si("FileList"),Rte=t=>ch(t)&&yn(t.pipe),kte=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||yn(t.append)&&((e=wm(t))==="formdata"||e==="object"&&yn(t.toString)&&t.toString()==="[object FormData]"))},$te=Si("URLSearchParams"),[Dte,Mte,qte,Ate]=["ReadableStream","Request","Response","Headers"].map(Si),Fte=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function uh(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,i;if(typeof t!="object"&&(t=[t]),Kc(t))for(n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else{if(lh(t))return;const s=r?Object.getOwnPropertyNames(t):Object.keys(t),a=s.length;let o;for(n=0;n<a;n++)o=s[n],e.call(null,t[o],o,t)}}function sK(t,e){if(lh(t))return null;e=e.toLowerCase();const r=Object.keys(t);let n=r.length,i;for(;n-- >0;)if(i=r[n],e===i.toLowerCase())return i;return null}const ro=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,aK=t=>!Oc(t)&&t!==ro;function Bj(){const{caseless:t,skipUndefined:e}=aK(this)&&this||{},r={},n=(i,s)=>{const a=t&&sK(r,s)||s;Qf(r[a])&&Qf(i)?r[a]=Bj(r[a],i):Qf(i)?r[a]=Bj({},i):Kc(i)?r[a]=i.slice():(!e||!Oc(i))&&(r[a]=i)};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&uh(arguments[i],n);return r}const Lte=(t,e,r,{allOwnKeys:n}={})=>(uh(e,(i,s)=>{r&&yn(i)?t[s]=tK(i,r):t[s]=i},{allOwnKeys:n}),t),Bte=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),zte=(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},Ute=(t,e,r,n)=>{let i,s,a;const o={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)a=i[s],(!n||n(a,t,e))&&!o[a]&&(e[a]=t[a],o[a]=!0);t=r!==!1&&SO(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},Wte=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;const n=t.indexOf(e,r);return n!==-1&&n===r},Vte=t=>{if(!t)return null;if(Kc(t))return t;let e=t.length;if(!iK(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},Hte=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&SO(Uint8Array)),Kte=(t,e)=>{const n=(t&&t[xm]).call(t);let i;for(;(i=n.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},Gte=(t,e)=>{let r;const n=[];for(;(r=t.exec(e))!==null;)n.push(r);return n},Yte=Si("HTMLFormElement"),Qte=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,i){return n.toUpperCase()+i}),BI=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),Xte=Si("RegExp"),oK=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),n={};uh(r,(i,s)=>{let a;(a=e(i,s,t))!==!1&&(n[s]=a||i)}),Object.defineProperties(t,n)},Jte=t=>{oK(t,(e,r)=>{if(yn(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=t[r];if(yn(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Zte=(t,e)=>{const r={},n=i=>{i.forEach(s=>{r[s]=!0})};return Kc(t)?n(t):n(String(t).split(e)),r},ere=()=>{},tre=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function rre(t){return!!(t&&yn(t.append)&&t[rK]==="FormData"&&t[xm])}const nre=t=>{const e=new Array(10),r=(n,i)=>{if(ch(n)){if(e.indexOf(n)>=0)return;if(lh(n))return n;if(!("toJSON"in n)){e[i]=n;const s=Kc(n)?[]:{};return uh(n,(a,o)=>{const c=r(a,i+1);!Oc(c)&&(s[o]=c)}),e[i]=void 0,s}}return n};return r(t,0)},ire=Si("AsyncFunction"),sre=t=>t&&(ch(t)||yn(t))&&yn(t.then)&&yn(t.catch),lK=((t,e)=>t?setImmediate:e?((r,n)=>(ro.addEventListener("message",({source:i,data:s})=>{i===ro&&s===r&&n.length&&n.shift()()},!1),i=>{n.push(i),ro.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",yn(ro.postMessage)),are=typeof queueMicrotask<"u"?queueMicrotask.bind(ro):typeof process<"u"&&process.nextTick||lK,ore=t=>t!=null&&yn(t[xm]),L={isArray:Kc,isArrayBuffer:nK,isBuffer:lh,isFormData:kte,isArrayBufferView:Ete,isString:Nte,isNumber:iK,isBoolean:jte,isObject:ch,isPlainObject:Qf,isEmptyObject:Cte,isReadableStream:Dte,isRequest:Mte,isResponse:qte,isHeaders:Ate,isUndefined:Oc,isDate:Ote,isFile:Pte,isBlob:Tte,isRegExp:Xte,isFunction:yn,isStream:Rte,isURLSearchParams:$te,isTypedArray:Hte,isFileList:Ite,forEach:uh,merge:Bj,extend:Lte,trim:Fte,stripBOM:Bte,inherits:zte,toFlatObject:Ute,kindOf:wm,kindOfTest:Si,endsWith:Wte,toArray:Vte,forEachEntry:Kte,matchAll:Gte,isHTMLForm:Yte,hasOwnProperty:BI,hasOwnProp:BI,reduceDescriptors:oK,freezeMethods:Jte,toObjectSet:Zte,toCamelCase:Qte,noop:ere,toFiniteNumber:tre,findKey:sK,global:ro,isContextDefined:aK,isSpecCompliantForm:rre,toJSONObject:nre,isAsyncFn:ire,isThenable:sre,setImmediate:lK,asap:are,isIterable:ore};function Fe(t,e,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}L.inherits(Fe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:L.toJSONObject(this.config),code:this.code,status:this.status}}});const cK=Fe.prototype,uK={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{uK[t]={value:t}});Object.defineProperties(Fe,uK);Object.defineProperty(cK,"isAxiosError",{value:!0});Fe.from=(t,e,r,n,i,s)=>{const a=Object.create(cK);L.toFlatObject(t,a,function(d){return d!==Error.prototype},u=>u!=="isAxiosError");const o=t&&t.message?t.message:"Error",c=e==null&&t?t.code:e;return Fe.call(a,o,c,r,n,i),t&&a.cause==null&&Object.defineProperty(a,"cause",{value:t,configurable:!0}),a.name=t&&t.name||"Error",s&&Object.assign(a,s),a};const lre=null;function zj(t){return L.isPlainObject(t)||L.isArray(t)}function dK(t){return L.endsWith(t,"[]")?t.slice(0,-2):t}function zI(t,e,r){return t?t.concat(e).map(function(i,s){return i=dK(i),!r&&s?"["+i+"]":i}).join(r?".":""):e}function cre(t){return L.isArray(t)&&!t.some(zj)}const ure=L.toFlatObject(L,{},null,function(e){return/^is[A-Z]/.test(e)});function Sm(t,e,r){if(!L.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,r=L.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,x){return!L.isUndefined(x[y])});const n=r.metaTokens,i=r.visitor||d,s=r.dots,a=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&L.isSpecCompliantForm(e);if(!L.isFunction(i))throw new TypeError("visitor must be a function");function u(v){if(v===null)return"";if(L.isDate(v))return v.toISOString();if(L.isBoolean(v))return v.toString();if(!c&&L.isBlob(v))throw new Fe("Blob is not supported. Use a Buffer instead.");return L.isArrayBuffer(v)||L.isTypedArray(v)?c&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function d(v,y,x){let g=v;if(v&&!x&&typeof v=="object"){if(L.endsWith(y,"{}"))y=n?y:y.slice(0,-2),v=JSON.stringify(v);else if(L.isArray(v)&&cre(v)||(L.isFileList(v)||L.endsWith(y,"[]"))&&(g=L.toArray(v)))return y=dK(y),g.forEach(function(w,b){!(L.isUndefined(w)||w===null)&&e.append(a===!0?zI([y],b,s):a===null?y:y+"[]",u(w))}),!1}return zj(v)?!0:(e.append(zI(x,y,s),u(v)),!1)}const h=[],f=Object.assign(ure,{defaultVisitor:d,convertValue:u,isVisitable:zj});function p(v,y){if(!L.isUndefined(v)){if(h.indexOf(v)!==-1)throw Error("Circular reference detected in "+y.join("."));h.push(v),L.forEach(v,function(g,m){(!(L.isUndefined(g)||g===null)&&i.call(e,g,L.isString(m)?m.trim():m,y,f))===!0&&p(g,y?y.concat(m):[m])}),h.pop()}}if(!L.isObject(t))throw new TypeError("data must be an object");return p(t),e}function UI(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function EO(t,e){this._pairs=[],t&&Sm(t,this,e)}const hK=EO.prototype;hK.append=function(e,r){this._pairs.push([e,r])};hK.toString=function(e){const r=e?function(n){return e.call(this,n,UI)}:UI;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};function dre(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function fK(t,e,r){if(!e)return t;const n=r&&r.encode||dre;L.isFunction(r)&&(r={serialize:r});const i=r&&r.serialize;let s;if(i?s=i(e,r):s=L.isURLSearchParams(e)?e.toString():new EO(e,r).toString(n),s){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class WI{constructor(){this.handlers=[]}use(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){L.forEach(this.handlers,function(n){n!==null&&e(n)})}}const pK={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},hre=typeof URLSearchParams<"u"?URLSearchParams:EO,fre=typeof FormData<"u"?FormData:null,pre=typeof Blob<"u"?Blob:null,mre={isBrowser:!0,classes:{URLSearchParams:hre,FormData:fre,Blob:pre},protocols:["http","https","file","blob","url","data"]},NO=typeof window<"u"&&typeof document<"u",Uj=typeof navigator=="object"&&navigator||void 0,vre=NO&&(!Uj||["ReactNative","NativeScript","NS"].indexOf(Uj.product)<0),gre=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",yre=NO&&window.location.href||"http://localhost",bre=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:NO,hasStandardBrowserEnv:vre,hasStandardBrowserWebWorkerEnv:gre,navigator:Uj,origin:yre},Symbol.toStringTag,{value:"Module"})),Fr={...bre,...mre};function xre(t,e){return Sm(t,new Fr.classes.URLSearchParams,{visitor:function(r,n,i,s){return Fr.isNode&&L.isBuffer(r)?(this.append(n,r.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...e})}function wre(t){return L.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function _re(t){const e={},r=Object.keys(t);let n;const i=r.length;let s;for(n=0;n<i;n++)s=r[n],e[s]=t[s];return e}function mK(t){function e(r,n,i,s){let a=r[s++];if(a==="__proto__")return!0;const o=Number.isFinite(+a),c=s>=r.length;return a=!a&&L.isArray(i)?i.length:a,c?(L.hasOwnProp(i,a)?i[a]=[i[a],n]:i[a]=n,!o):((!i[a]||!L.isObject(i[a]))&&(i[a]=[]),e(r,n,i[a],s)&&L.isArray(i[a])&&(i[a]=_re(i[a])),!o)}if(L.isFormData(t)&&L.isFunction(t.entries)){const r={};return L.forEachEntry(t,(n,i)=>{e(wre(n),i,r,0)}),r}return null}function Sre(t,e,r){if(L.isString(t))try{return(e||JSON.parse)(t),L.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}const dh={transitional:pK,adapter:["xhr","http","fetch"],transformRequest:[function(e,r){const n=r.getContentType()||"",i=n.indexOf("application/json")>-1,s=L.isObject(e);if(s&&L.isHTMLForm(e)&&(e=new FormData(e)),L.isFormData(e))return i?JSON.stringify(mK(e)):e;if(L.isArrayBuffer(e)||L.isBuffer(e)||L.isStream(e)||L.isFile(e)||L.isBlob(e)||L.isReadableStream(e))return e;if(L.isArrayBufferView(e))return e.buffer;if(L.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return xre(e,this.formSerializer).toString();if((o=L.isFileList(e))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Sm(o?{"files[]":e}:e,c&&new c,this.formSerializer)}}return s||i?(r.setContentType("application/json",!1),Sre(e)):e}],transformResponse:[function(e){const r=this.transitional||dh.transitional,n=r&&r.forcedJSONParsing,i=this.responseType==="json";if(L.isResponse(e)||L.isReadableStream(e))return e;if(e&&L.isString(e)&&(n&&!this.responseType||i)){const a=!(r&&r.silentJSONParsing)&&i;try{return JSON.parse(e,this.parseReviver)}catch(o){if(a)throw o.name==="SyntaxError"?Fe.from(o,Fe.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Fr.classes.FormData,Blob:Fr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};L.forEach(["delete","get","head","post","put","patch"],t=>{dh.headers[t]={}});const Ere=L.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Nre=t=>{const e={};let r,n,i;return t&&t.split(`
`).forEach(function(a){i=a.indexOf(":"),r=a.substring(0,i).trim().toLowerCase(),n=a.substring(i+1).trim(),!(!r||e[r]&&Ere[r])&&(r==="set-cookie"?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)}),e},VI=Symbol("internals");function $u(t){return t&&String(t).trim().toLowerCase()}function Xf(t){return t===!1||t==null?t:L.isArray(t)?t.map(Xf):String(t)}function jre(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}const Cre=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Lv(t,e,r,n,i){if(L.isFunction(n))return n.call(this,e,r);if(i&&(e=r),!!L.isString(e)){if(L.isString(n))return e.indexOf(n)!==-1;if(L.isRegExp(n))return n.test(e)}}function Ore(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,n)=>r.toUpperCase()+n)}function Pre(t,e){const r=L.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(i,s,a){return this[n].call(this,e,i,s,a)},configurable:!0})})}let bn=class{constructor(e){e&&this.set(e)}set(e,r,n){const i=this;function s(o,c,u){const d=$u(c);if(!d)throw new Error("header name must be a non-empty string");const h=L.findKey(i,d);(!h||i[h]===void 0||u===!0||u===void 0&&i[h]!==!1)&&(i[h||c]=Xf(o))}const a=(o,c)=>L.forEach(o,(u,d)=>s(u,d,c));if(L.isPlainObject(e)||e instanceof this.constructor)a(e,r);else if(L.isString(e)&&(e=e.trim())&&!Cre(e))a(Nre(e),r);else if(L.isObject(e)&&L.isIterable(e)){let o={},c,u;for(const d of e){if(!L.isArray(d))throw TypeError("Object iterator must return a key-value pair");o[u=d[0]]=(c=o[u])?L.isArray(c)?[...c,d[1]]:[c,d[1]]:d[1]}a(o,r)}else e!=null&&s(r,e,n);return this}get(e,r){if(e=$u(e),e){const n=L.findKey(this,e);if(n){const i=this[n];if(!r)return i;if(r===!0)return jre(i);if(L.isFunction(r))return r.call(this,i,n);if(L.isRegExp(r))return r.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=$u(e),e){const n=L.findKey(this,e);return!!(n&&this[n]!==void 0&&(!r||Lv(this,this[n],n,r)))}return!1}delete(e,r){const n=this;let i=!1;function s(a){if(a=$u(a),a){const o=L.findKey(n,a);o&&(!r||Lv(n,n[o],o,r))&&(delete n[o],i=!0)}}return L.isArray(e)?e.forEach(s):s(e),i}clear(e){const r=Object.keys(this);let n=r.length,i=!1;for(;n--;){const s=r[n];(!e||Lv(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const r=this,n={};return L.forEach(this,(i,s)=>{const a=L.findKey(n,s);if(a){r[a]=Xf(i),delete r[s];return}const o=e?Ore(s):String(s).trim();o!==s&&delete r[s],r[o]=Xf(i),n[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return L.forEach(this,(n,i)=>{n!=null&&n!==!1&&(r[i]=e&&L.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const n=new this(e);return r.forEach(i=>n.set(i)),n}static accessor(e){const n=(this[VI]=this[VI]={accessors:{}}).accessors,i=this.prototype;function s(a){const o=$u(a);n[o]||(Pre(i,a),n[o]=!0)}return L.isArray(e)?e.forEach(s):s(e),this}};bn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);L.reduceDescriptors(bn.prototype,({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[r]=n}}});L.freezeMethods(bn);function Bv(t,e){const r=this||dh,n=e||r,i=bn.from(n.headers);let s=n.data;return L.forEach(t,function(o){s=o.call(r,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function vK(t){return!!(t&&t.__CANCEL__)}function Gc(t,e,r){Fe.call(this,t??"canceled",Fe.ERR_CANCELED,e,r),this.name="CanceledError"}L.inherits(Gc,Fe,{__CANCEL__:!0});function gK(t,e,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):e(new Fe("Request failed with status code "+r.status,[Fe.ERR_BAD_REQUEST,Fe.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function Tre(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function Ire(t,e){t=t||10;const r=new Array(t),n=new Array(t);let i=0,s=0,a;return e=e!==void 0?e:1e3,function(c){const u=Date.now(),d=n[s];a||(a=u),r[i]=c,n[i]=u;let h=s,f=0;for(;h!==i;)f+=r[h++],h=h%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),u-a<e)return;const p=d&&u-d;return p?Math.round(f*1e3/p):void 0}}function Rre(t,e){let r=0,n=1e3/e,i,s;const a=(u,d=Date.now())=>{r=d,i=null,s&&(clearTimeout(s),s=null),t(...u)};return[(...u)=>{const d=Date.now(),h=d-r;h>=n?a(u,d):(i=u,s||(s=setTimeout(()=>{s=null,a(i)},n-h)))},()=>i&&a(i)]}const Rp=(t,e,r=3)=>{let n=0;const i=Ire(50,250);return Rre(s=>{const a=s.loaded,o=s.lengthComputable?s.total:void 0,c=a-n,u=i(c),d=a<=o;n=a;const h={loaded:a,total:o,progress:o?a/o:void 0,bytes:c,rate:u||void 0,estimated:u&&o&&d?(o-a)/u:void 0,event:s,lengthComputable:o!=null,[e?"download":"upload"]:!0};t(h)},r)},HI=(t,e)=>{const r=t!=null;return[n=>e[0]({lengthComputable:r,total:t,loaded:n}),e[1]]},KI=t=>(...e)=>L.asap(()=>t(...e)),kre=Fr.hasStandardBrowserEnv?((t,e)=>r=>(r=new URL(r,Fr.origin),t.protocol===r.protocol&&t.host===r.host&&(e||t.port===r.port)))(new URL(Fr.origin),Fr.navigator&&/(msie|trident)/i.test(Fr.navigator.userAgent)):()=>!0,$re=Fr.hasStandardBrowserEnv?{write(t,e,r,n,i,s,a){if(typeof document>"u")return;const o=[`${t}=${encodeURIComponent(e)}`];L.isNumber(r)&&o.push(`expires=${new Date(r).toUTCString()}`),L.isString(n)&&o.push(`path=${n}`),L.isString(i)&&o.push(`domain=${i}`),s===!0&&o.push("secure"),L.isString(a)&&o.push(`SameSite=${a}`),document.cookie=o.join("; ")},read(t){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function Dre(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Mre(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function yK(t,e,r){let n=!Dre(e);return t&&(n||r==!1)?Mre(t,e):e}const GI=t=>t instanceof bn?{...t}:t;function Do(t,e){e=e||{};const r={};function n(u,d,h,f){return L.isPlainObject(u)&&L.isPlainObject(d)?L.merge.call({caseless:f},u,d):L.isPlainObject(d)?L.merge({},d):L.isArray(d)?d.slice():d}function i(u,d,h,f){if(L.isUndefined(d)){if(!L.isUndefined(u))return n(void 0,u,h,f)}else return n(u,d,h,f)}function s(u,d){if(!L.isUndefined(d))return n(void 0,d)}function a(u,d){if(L.isUndefined(d)){if(!L.isUndefined(u))return n(void 0,u)}else return n(void 0,d)}function o(u,d,h){if(h in e)return n(u,d);if(h in t)return n(void 0,u)}const c={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(u,d,h)=>i(GI(u),GI(d),h,!0)};return L.forEach(Object.keys({...t,...e}),function(d){const h=c[d]||i,f=h(t[d],e[d],d);L.isUndefined(f)&&h!==o||(r[d]=f)}),r}const bK=t=>{const e=Do({},t);let{data:r,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:s,headers:a,auth:o}=e;if(e.headers=a=bn.from(a),e.url=fK(yK(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),o&&a.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),L.isFormData(r)){if(Fr.hasStandardBrowserEnv||Fr.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(L.isFunction(r.getHeaders)){const c=r.getHeaders(),u=["content-type","content-length"];Object.entries(c).forEach(([d,h])=>{u.includes(d.toLowerCase())&&a.set(d,h)})}}if(Fr.hasStandardBrowserEnv&&(n&&L.isFunction(n)&&(n=n(e)),n||n!==!1&&kre(e.url))){const c=i&&s&&$re.read(s);c&&a.set(i,c)}return e},qre=typeof XMLHttpRequest<"u",Are=qre&&function(t){return new Promise(function(r,n){const i=bK(t);let s=i.data;const a=bn.from(i.headers).normalize();let{responseType:o,onUploadProgress:c,onDownloadProgress:u}=i,d,h,f,p,v;function y(){p&&p(),v&&v(),i.cancelToken&&i.cancelToken.unsubscribe(d),i.signal&&i.signal.removeEventListener("abort",d)}let x=new XMLHttpRequest;x.open(i.method.toUpperCase(),i.url,!0),x.timeout=i.timeout;function g(){if(!x)return;const w=bn.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders()),_={data:!o||o==="text"||o==="json"?x.responseText:x.response,status:x.status,statusText:x.statusText,headers:w,config:t,request:x};gK(function(j){r(j),y()},function(j){n(j),y()},_),x=null}"onloadend"in x?x.onloadend=g:x.onreadystatechange=function(){!x||x.readyState!==4||x.status===0&&!(x.responseURL&&x.responseURL.indexOf("file:")===0)||setTimeout(g)},x.onabort=function(){x&&(n(new Fe("Request aborted",Fe.ECONNABORTED,t,x)),x=null)},x.onerror=function(b){const _=b&&b.message?b.message:"Network Error",E=new Fe(_,Fe.ERR_NETWORK,t,x);E.event=b||null,n(E),x=null},x.ontimeout=function(){let b=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const _=i.transitional||pK;i.timeoutErrorMessage&&(b=i.timeoutErrorMessage),n(new Fe(b,_.clarifyTimeoutError?Fe.ETIMEDOUT:Fe.ECONNABORTED,t,x)),x=null},s===void 0&&a.setContentType(null),"setRequestHeader"in x&&L.forEach(a.toJSON(),function(b,_){x.setRequestHeader(_,b)}),L.isUndefined(i.withCredentials)||(x.withCredentials=!!i.withCredentials),o&&o!=="json"&&(x.responseType=i.responseType),u&&([f,v]=Rp(u,!0),x.addEventListener("progress",f)),c&&x.upload&&([h,p]=Rp(c),x.upload.addEventListener("progress",h),x.upload.addEventListener("loadend",p)),(i.cancelToken||i.signal)&&(d=w=>{x&&(n(!w||w.type?new Gc(null,t,x):w),x.abort(),x=null)},i.cancelToken&&i.cancelToken.subscribe(d),i.signal&&(i.signal.aborted?d():i.signal.addEventListener("abort",d)));const m=Tre(i.url);if(m&&Fr.protocols.indexOf(m)===-1){n(new Fe("Unsupported protocol "+m+":",Fe.ERR_BAD_REQUEST,t));return}x.send(s||null)})},Fre=(t,e)=>{const{length:r}=t=t?t.filter(Boolean):[];if(e||r){let n=new AbortController,i;const s=function(u){if(!i){i=!0,o();const d=u instanceof Error?u:this.reason;n.abort(d instanceof Fe?d:new Gc(d instanceof Error?d.message:d))}};let a=e&&setTimeout(()=>{a=null,s(new Fe(`timeout ${e} of ms exceeded`,Fe.ETIMEDOUT))},e);const o=()=>{t&&(a&&clearTimeout(a),a=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(s):u.removeEventListener("abort",s)}),t=null)};t.forEach(u=>u.addEventListener("abort",s));const{signal:c}=n;return c.unsubscribe=()=>L.asap(o),c}},Lre=function*(t,e){let r=t.byteLength;if(r<e){yield t;return}let n=0,i;for(;n<r;)i=n+e,yield t.slice(n,i),n=i},Bre=async function*(t,e){for await(const r of zre(t))yield*Lre(r,e)},zre=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:r,value:n}=await e.read();if(r)break;yield n}}finally{await e.cancel()}},YI=(t,e,r,n)=>{const i=Bre(t,e);let s=0,a,o=c=>{a||(a=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:u,value:d}=await i.next();if(u){o(),c.close();return}let h=d.byteLength;if(r){let f=s+=h;r(f)}c.enqueue(new Uint8Array(d))}catch(u){throw o(u),u}},cancel(c){return o(c),i.return()}},{highWaterMark:2})},QI=64*1024,{isFunction:Nf}=L,Ure=(({Request:t,Response:e})=>({Request:t,Response:e}))(L.global),{ReadableStream:XI,TextEncoder:JI}=L.global,ZI=(t,...e)=>{try{return!!t(...e)}catch{return!1}},Wre=t=>{t=L.merge.call({skipUndefined:!0},Ure,t);const{fetch:e,Request:r,Response:n}=t,i=e?Nf(e):typeof fetch=="function",s=Nf(r),a=Nf(n);if(!i)return!1;const o=i&&Nf(XI),c=i&&(typeof JI=="function"?(v=>y=>v.encode(y))(new JI):async v=>new Uint8Array(await new r(v).arrayBuffer())),u=s&&o&&ZI(()=>{let v=!1;const y=new r(Fr.origin,{body:new XI,method:"POST",get duplex(){return v=!0,"half"}}).headers.has("Content-Type");return v&&!y}),d=a&&o&&ZI(()=>L.isReadableStream(new n("").body)),h={stream:d&&(v=>v.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(v=>{!h[v]&&(h[v]=(y,x)=>{let g=y&&y[v];if(g)return g.call(y);throw new Fe(`Response type '${v}' is not supported`,Fe.ERR_NOT_SUPPORT,x)})});const f=async v=>{if(v==null)return 0;if(L.isBlob(v))return v.size;if(L.isSpecCompliantForm(v))return(await new r(Fr.origin,{method:"POST",body:v}).arrayBuffer()).byteLength;if(L.isArrayBufferView(v)||L.isArrayBuffer(v))return v.byteLength;if(L.isURLSearchParams(v)&&(v=v+""),L.isString(v))return(await c(v)).byteLength},p=async(v,y)=>{const x=L.toFiniteNumber(v.getContentLength());return x??f(y)};return async v=>{let{url:y,method:x,data:g,signal:m,cancelToken:w,timeout:b,onDownloadProgress:_,onUploadProgress:E,responseType:j,headers:S,withCredentials:C="same-origin",fetchOptions:N}=bK(v),O=e||fetch;j=j?(j+"").toLowerCase():"text";let T=Fre([m,w&&w.toAbortSignal()],b),I=null;const D=T&&T.unsubscribe&&(()=>{T.unsubscribe()});let F;try{if(E&&u&&x!=="get"&&x!=="head"&&(F=await p(S,g))!==0){let W=new r(y,{method:"POST",body:g,duplex:"half"}),K;if(L.isFormData(g)&&(K=W.headers.get("content-type"))&&S.setContentType(K),W.body){const[ue,ge]=HI(F,Rp(KI(E)));g=YI(W.body,QI,ue,ge)}}L.isString(C)||(C=C?"include":"omit");const M=s&&"credentials"in r.prototype,V={...N,signal:T,method:x.toUpperCase(),headers:S.normalize().toJSON(),body:g,duplex:"half",credentials:M?C:void 0};I=s&&new r(y,V);let q=await(s?O(I,N):O(y,V));const H=d&&(j==="stream"||j==="response");if(d&&(_||H&&D)){const W={};["status","statusText","headers"].forEach($e=>{W[$e]=q[$e]});const K=L.toFiniteNumber(q.headers.get("content-length")),[ue,ge]=_&&HI(K,Rp(KI(_),!0))||[];q=new n(YI(q.body,QI,ue,()=>{ge&&ge(),D&&D()}),W)}j=j||"text";let B=await h[L.findKey(h,j)||"text"](q,v);return!H&&D&&D(),await new Promise((W,K)=>{gK(W,K,{data:B,headers:bn.from(q.headers),status:q.status,statusText:q.statusText,config:v,request:I})})}catch(M){throw D&&D(),M&&M.name==="TypeError"&&/Load failed|fetch/i.test(M.message)?Object.assign(new Fe("Network Error",Fe.ERR_NETWORK,v,I),{cause:M.cause||M}):Fe.from(M,M&&M.code,v,I)}}},Vre=new Map,xK=t=>{let e=t&&t.env||{};const{fetch:r,Request:n,Response:i}=e,s=[n,i,r];let a=s.length,o=a,c,u,d=Vre;for(;o--;)c=s[o],u=d.get(c),u===void 0&&d.set(c,u=o?new Map:Wre(e)),d=u;return u};xK();const jO={http:lre,xhr:Are,fetch:{get:xK}};L.forEach(jO,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const eR=t=>`- ${t}`,Hre=t=>L.isFunction(t)||t===null||t===!1;function Kre(t,e){t=L.isArray(t)?t:[t];const{length:r}=t;let n,i;const s={};for(let a=0;a<r;a++){n=t[a];let o;if(i=n,!Hre(n)&&(i=jO[(o=String(n)).toLowerCase()],i===void 0))throw new Fe(`Unknown adapter '${o}'`);if(i&&(L.isFunction(i)||(i=i.get(e))))break;s[o||"#"+a]=i}if(!i){const a=Object.entries(s).map(([c,u])=>`adapter ${c} `+(u===!1?"is not supported by the environment":"is not available in the build"));let o=r?a.length>1?`since :
`+a.map(eR).join(`
`):" "+eR(a[0]):"as no adapter specified";throw new Fe("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return i}const wK={getAdapter:Kre,adapters:jO};function zv(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Gc(null,t)}function tR(t){return zv(t),t.headers=bn.from(t.headers),t.data=Bv.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),wK.getAdapter(t.adapter||dh.adapter,t)(t).then(function(n){return zv(t),n.data=Bv.call(t,t.transformResponse,n),n.headers=bn.from(n.headers),n},function(n){return vK(n)||(zv(t),n&&n.response&&(n.response.data=Bv.call(t,t.transformResponse,n.response),n.response.headers=bn.from(n.response.headers))),Promise.reject(n)})}const _K="1.13.2",Em={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Em[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const rR={};Em.transitional=function(e,r,n){function i(s,a){return"[Axios v"+_K+"] Transitional option '"+s+"'"+a+(n?". "+n:"")}return(s,a,o)=>{if(e===!1)throw new Fe(i(a," has been removed"+(r?" in "+r:"")),Fe.ERR_DEPRECATED);return r&&!rR[a]&&(rR[a]=!0,console.warn(i(a," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(s,a,o):!0}};Em.spelling=function(e){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function Gre(t,e,r){if(typeof t!="object")throw new Fe("options must be an object",Fe.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let i=n.length;for(;i-- >0;){const s=n[i],a=e[s];if(a){const o=t[s],c=o===void 0||a(o,s,t);if(c!==!0)throw new Fe("option "+s+" must be "+c,Fe.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Fe("Unknown option "+s,Fe.ERR_BAD_OPTION)}}const Jf={assertOptions:Gre,validators:Em},Oi=Jf.validators;let xo=class{constructor(e){this.defaults=e||{},this.interceptors={request:new WI,response:new WI}}async request(e,r){try{return await this._request(e,r)}catch(n){if(n instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?s&&!String(n.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+s):n.stack=s}catch{}}throw n}}_request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=Do(this.defaults,r);const{transitional:n,paramsSerializer:i,headers:s}=r;n!==void 0&&Jf.assertOptions(n,{silentJSONParsing:Oi.transitional(Oi.boolean),forcedJSONParsing:Oi.transitional(Oi.boolean),clarifyTimeoutError:Oi.transitional(Oi.boolean)},!1),i!=null&&(L.isFunction(i)?r.paramsSerializer={serialize:i}:Jf.assertOptions(i,{encode:Oi.function,serialize:Oi.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),Jf.assertOptions(r,{baseUrl:Oi.spelling("baseURL"),withXsrfToken:Oi.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let a=s&&L.merge(s.common,s[r.method]);s&&L.forEach(["delete","get","head","post","put","patch","common"],v=>{delete s[v]}),r.headers=bn.concat(a,s);const o=[];let c=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(r)===!1||(c=c&&y.synchronous,o.unshift(y.fulfilled,y.rejected))});const u=[];this.interceptors.response.forEach(function(y){u.push(y.fulfilled,y.rejected)});let d,h=0,f;if(!c){const v=[tR.bind(this),void 0];for(v.unshift(...o),v.push(...u),f=v.length,d=Promise.resolve(r);h<f;)d=d.then(v[h++],v[h++]);return d}f=o.length;let p=r;for(;h<f;){const v=o[h++],y=o[h++];try{p=v(p)}catch(x){y.call(this,x);break}}try{d=tR.call(this,p)}catch(v){return Promise.reject(v)}for(h=0,f=u.length;h<f;)d=d.then(u[h++],u[h++]);return d}getUri(e){e=Do(this.defaults,e);const r=yK(e.baseURL,e.url,e.allowAbsoluteUrls);return fK(r,e.params,e.paramsSerializer)}};L.forEach(["delete","get","head","options"],function(e){xo.prototype[e]=function(r,n){return this.request(Do(n||{},{method:e,url:r,data:(n||{}).data}))}});L.forEach(["post","put","patch"],function(e){function r(n){return function(s,a,o){return this.request(Do(o||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:a}))}}xo.prototype[e]=r(),xo.prototype[e+"Form"]=r(!0)});let Yre=class SK{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(s){r=s});const n=this;this.promise.then(i=>{if(!n._listeners)return;let s=n._listeners.length;for(;s-- >0;)n._listeners[s](i);n._listeners=null}),this.promise.then=i=>{let s;const a=new Promise(o=>{n.subscribe(o),s=o}).then(i);return a.cancel=function(){n.unsubscribe(s)},a},e(function(s,a,o){n.reason||(n.reason=new Gc(s,a,o),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const e=new AbortController,r=n=>{e.abort(n)};return this.subscribe(r),e.signal.unsubscribe=()=>this.unsubscribe(r),e.signal}static source(){let e;return{token:new SK(function(i){e=i}),cancel:e}}};function Qre(t){return function(r){return t.apply(null,r)}}function Xre(t){return L.isObject(t)&&t.isAxiosError===!0}const Wj={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Wj).forEach(([t,e])=>{Wj[e]=t});function EK(t){const e=new xo(t),r=tK(xo.prototype.request,e);return L.extend(r,xo.prototype,e,{allOwnKeys:!0}),L.extend(r,e,null,{allOwnKeys:!0}),r.create=function(i){return EK(Do(t,i))},r}const Zt=EK(dh);Zt.Axios=xo;Zt.CanceledError=Gc;Zt.CancelToken=Yre;Zt.isCancel=vK;Zt.VERSION=_K;Zt.toFormData=Sm;Zt.AxiosError=Fe;Zt.Cancel=Zt.CanceledError;Zt.all=function(e){return Promise.all(e)};Zt.spread=Qre;Zt.isAxiosError=Xre;Zt.mergeConfig=Do;Zt.AxiosHeaders=bn;Zt.formToJSON=t=>mK(L.isHTMLForm(t)?new FormData(t):t);Zt.getAdapter=wK.getAdapter;Zt.HttpStatusCode=Wj;Zt.default=Zt;const{Axios:H1e,AxiosError:K1e,CanceledError:G1e,isCancel:Y1e,CancelToken:Q1e,VERSION:X1e,all:J1e,Cancel:Z1e,isAxiosError:ewe,spread:twe,toFormData:rwe,AxiosHeaders:nwe,HttpStatusCode:iwe,formToJSON:swe,getAdapter:awe,mergeConfig:owe}=Zt,Vj=window.prmConfig||{},le=Zt.create({baseURL:Vj.apiUrl||"/wp-json",headers:{"Content-Type":"application/json","X-WP-Nonce":Vj.nonce||""}});le.interceptors.request.use(t=>{var e;return(e=window.prmConfig)!=null&&e.nonce&&(t.headers["X-WP-Nonce"]=window.prmConfig.nonce),t});le.interceptors.response.use(t=>t,t=>{var e,r;return((e=t.response)==null?void 0:e.status)===401&&(window.location.href=Vj.loginUrl||"/wp-login.php"),((r=t.response)==null?void 0:r.status)===403&&console.error("Access denied:",t.response.data),Promise.reject(t)});const Be={getPeople:t=>le.get("/wp/v2/people",{params:t}),getPerson:(t,e={})=>le.get(`/wp/v2/people/${t}`,{params:e}),createPerson:t=>le.post("/wp/v2/people",t),updatePerson:(t,e)=>le.put(`/wp/v2/people/${t}`,e),deletePerson:(t,e={})=>le.delete(`/wp/v2/people/${t}`,{params:e}),getCompanies:t=>le.get("/wp/v2/companies",{params:t}),getCompany:(t,e={})=>le.get(`/wp/v2/companies/${t}`,{params:e}),createCompany:t=>le.post("/wp/v2/companies",t),updateCompany:(t,e)=>le.put(`/wp/v2/companies/${t}`,e),deleteCompany:(t,e={})=>le.delete(`/wp/v2/companies/${t}`,{params:e}),getDates:t=>le.get("/wp/v2/important-dates",{params:t}),getDate:t=>le.get(`/wp/v2/important-dates/${t}`),createDate:t=>le.post("/wp/v2/important-dates",t),updateDate:(t,e)=>le.put(`/wp/v2/important-dates/${t}`,e),deleteDate:t=>le.delete(`/wp/v2/important-dates/${t}`),getPersonLabels:()=>le.get("/wp/v2/person_label"),getCompanyLabels:()=>le.get("/wp/v2/company_label"),getRelationshipTypes:()=>le.get("/wp/v2/relationship_type",{params:{per_page:100,_fields:"id,name,slug,acf"}}),createRelationshipType:t=>le.post("/wp/v2/relationship_type",t),updateRelationshipType:(t,e)=>le.post(`/wp/v2/relationship_type/${t}`,e),deleteRelationshipType:t=>le.delete(`/wp/v2/relationship_type/${t}?force=true`),restoreRelationshipTypeDefaults:()=>le.post("/prm/v1/relationship-types/restore-defaults"),getDateTypes:()=>le.get("/wp/v2/date_type",{params:{per_page:100}}),uploadMedia:t=>{const e=new FormData;return e.append("file",t),le.post("/wp/v2/media",e,{headers:{"Content-Type":"multipart/form-data"}})}},Re={getDashboard:()=>le.get("/prm/v1/dashboard"),sideloadGravatar:(t,e)=>le.post(`/prm/v1/people/${t}/gravatar`,{email:e}),getCurrentUser:()=>le.get("/prm/v1/user/me"),getUsers:()=>le.get("/prm/v1/users"),approveUser:t=>le.post(`/prm/v1/users/${t}/approve`),denyUser:t=>le.post(`/prm/v1/users/${t}/deny`),deleteUser:t=>le.delete(`/prm/v1/users/${t}`),search:t=>le.get("/prm/v1/search",{params:{q:t}}),getReminders:(t=30)=>le.get("/prm/v1/reminders",{params:{days_ahead:t}}),triggerReminders:()=>le.post("/prm/v1/reminders/trigger"),rescheduleCronJobs:()=>le.post("/prm/v1/reminders/reschedule-cron"),getNotificationChannels:()=>le.get("/prm/v1/user/notification-channels"),updateNotificationChannels:t=>le.post("/prm/v1/user/notification-channels",{channels:t}),updateSlackWebhook:t=>le.post("/prm/v1/user/slack-webhook",{webhook:t}),updateNotificationTime:t=>le.post("/prm/v1/user/notification-time",{time:t}),getSlackStatus:()=>le.get("/prm/v1/user/slack-status"),disconnectSlack:()=>le.post("/prm/v1/slack/disconnect"),getSlackChannels:()=>le.get("/prm/v1/slack/channels"),getSlackTargets:()=>le.get("/prm/v1/slack/targets"),updateSlackTargets:t=>le.post("/prm/v1/slack/targets",{targets:t}),getPersonDates:t=>le.get(`/prm/v1/people/${t}/dates`),getPersonTimeline:t=>le.get(`/prm/v1/people/${t}/timeline`),getPersonNotes:t=>le.get(`/prm/v1/people/${t}/notes`),createNote:(t,e)=>le.post(`/prm/v1/people/${t}/notes`,{content:e}),updateNote:(t,e)=>le.put(`/prm/v1/notes/${t}`,{content:e}),deleteNote:t=>le.delete(`/prm/v1/notes/${t}`),getPersonActivities:t=>le.get(`/prm/v1/people/${t}/activities`),createActivity:(t,e)=>le.post(`/prm/v1/people/${t}/activities`,e),updateActivity:(t,e)=>le.put(`/prm/v1/activities/${t}`,e),deleteActivity:t=>le.delete(`/prm/v1/activities/${t}`),getAllTodos:(t=!1)=>le.get("/prm/v1/todos",{params:{completed:t}}),getInvestments:t=>le.get(`/prm/v1/investments/${t}`),getPersonTodos:t=>le.get(`/prm/v1/people/${t}/todos`),createTodo:(t,e)=>le.post(`/prm/v1/people/${t}/todos`,e),updateTodo:(t,e)=>le.put(`/prm/v1/todos/${t}`,e),deleteTodo:t=>le.delete(`/prm/v1/todos/${t}`),getCompanyPeople:t=>le.get(`/prm/v1/companies/${t}/people`),setCompanyLogo:(t,e)=>le.post(`/prm/v1/companies/${t}/logo`,{media_id:e}),uploadPersonPhoto:(t,e)=>{const r=new FormData;return r.append("file",e),le.post(`/prm/v1/people/${t}/photo`,r,{headers:{"Content-Type":"multipart/form-data"}})},uploadCompanyLogo:(t,e)=>{const r=new FormData;return r.append("file",e),le.post(`/prm/v1/companies/${t}/logo/upload`,r,{headers:{"Content-Type":"multipart/form-data"}})},getAppPasswords:t=>le.get(`/wp/v2/users/${t}/application-passwords`),createAppPassword:(t,e)=>le.post(`/wp/v2/users/${t}/application-passwords`,{name:e,app_id:"caelis-carddav"}),deleteAppPassword:(t,e)=>le.delete(`/wp/v2/users/${t}/application-passwords/${e}`),getCardDAVUrls:()=>le.get("/prm/v1/carddav/urls")};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Jre={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zre=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ve=(t,e)=>{const r=P.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:o="",children:c,...u},d)=>P.createElement("svg",{ref:d,...Jre,width:i,height:i,stroke:n,strokeWidth:a?Number(s)*24/Number(i):s,className:["lucide",`lucide-${Zre(t)}`,o].join(" "),...u},[...e.map(([h,f])=>P.createElement(h,f)),...Array.isArray(c)?c:[c]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=ve("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ene=ve("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tne=ve("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xn=ve("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uv=ve("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rne=ve("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=ve("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NK=ve("Cake",[["path",{d:"M20 21v-8a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v8",key:"1w3rig"}],["path",{d:"M4 16s.5-1 2-1 2.5 2 4 2 2.5-2 4-2 2.5 2 4 2 2-1 2-1",key:"n2jgmb"}],["path",{d:"M2 21h20",key:"1nyx9w"}],["path",{d:"M7 8v3",key:"1qtyvj"}],["path",{d:"M12 8v3",key:"hwp4zt"}],["path",{d:"M17 8v3",key:"1i6e5u"}],["path",{d:"M7 4h0.01",key:"hsw7lv"}],["path",{d:"M12 4h0.01",key:"1e3d8f"}],["path",{d:"M17 4h0.01",key:"p7cxgy"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=ve("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sd=ve("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nR=ve("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pc=ve("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hj=ve("CheckSquare2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bi=ve("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iR=ve("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kp=ve("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kj=ve("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nne=ve("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jK=ve("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ine=ve("Command",[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sne=ve("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gj=ve("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hh=ve("FileCode",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"m10 13-2 2 2 2",key:"17smn8"}],["path",{d:"m14 17 2-2-2-2",key:"14mezr"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CO=ve("FileSpreadsheet",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nm=ve("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yj=ve("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ane=ve("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sR=ve("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zf=ve("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const one=ve("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lne=ve("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CK=ve("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OK=ve("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mo=ve("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cne=ve("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OO=ve("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const une=ve("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dne=ve("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PK=ve("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hne=ve("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=ve("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PO=ve("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=ve("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fne=ve("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TK=ve("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=ve("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qo=ve("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IK=ve("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RK=ve("ShieldAlert",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pne=ve("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kK=ve("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $K=ve("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tc=ve("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ic=ve("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DK=ve("StickyNote",[["path",{d:"M15.5 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h14a2 2 0 0 0 2-2V8.5L15.5 3Z",key:"1wis1t"}],["path",{d:"M15 3v6h6",key:"edgan2"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const On=ve("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $p=ve("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ao=ve("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mne=ve("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ia=ve("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zi=ve("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MK=ve("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aR=ve("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Br=ve("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vne=ve("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gne=ve("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Rc="Caelis";function rn(t){P.useEffect(()=>{var e;if(t){const r=((e=window.prmConfig)==null?void 0:e.siteName)||Rc;document.title=`${t} - ${r}`}},[t])}function yne(t){const e=t.match(/\/(?:people|companies|dates)\/(\d+)/);return e?e[1]:null}function qK(t=null){const e=ks();P.useEffect(()=>{var i;let r=t;if(!r){const s=e.pathname,a=yne(s);s==="/"?r="Dashboard":s==="/login"?r="Login":s.startsWith("/people")?s==="/people"||s==="/people/"?r="People":s==="/people/new"?r="New person":s.endsWith("/edit")?r="Edit person":a?r="Person":r="People":s.startsWith("/companies")?s==="/companies"||s==="/companies/"?r="Organizations":s==="/companies/new"?r="New organization":s.endsWith("/edit")?r="Edit organization":a?r="Organization":r="Organizations":s.startsWith("/dates")?s==="/dates"||s==="/dates/"?r="Events":s==="/dates/new"?r="New date":s.endsWith("/edit")?r="Edit date":r="Events":s.startsWith("/settings")?r="Settings":r=Rc}const n=((i=window.prmConfig)==null?void 0:i.siteName)||Rc;document.title=`${r} - ${n}`},[e.pathname,t])}function bne(){return rt({queryKey:["dashboard"],queryFn:async()=>(await Re.getDashboard()).data})}function xne(t=30){return rt({queryKey:["reminders",t],queryFn:async()=>(await Re.getReminders(t)).data})}function AK(t=!1){return rt({queryKey:["todos",t],queryFn:async()=>(await Re.getAllTodos(t)).data})}function FK(){const t=ct();return it({mutationFn:({todoId:e,data:r})=>Re.updateTodo(e,r),onSuccess:()=>{t.invalidateQueries({queryKey:["todos"]}),t.invalidateQueries({queryKey:["dashboard"]})}})}function wne(){const t=ct();return it({mutationFn:e=>Re.deleteTodo(e),onSuccess:()=>{t.invalidateQueries({queryKey:["todos"]}),t.invalidateQueries({queryKey:["dashboard"]})}})}function _ne(t){const e=typeof t=="string"?t:"",r=e.length>=2;return rt({queryKey:["search",e],queryFn:async()=>r?(await Re.search(e)).data:{people:[],companies:[]},enabled:r})}function pn(t){if(!t)return"";const e=document.createElement("textarea");return e.innerHTML=t,e.value}function Ut(t){var r;if(!t)return"";const e=((r=t.title)==null?void 0:r.rendered)||t.title||t.name||"";return pn(e)}function wo(t){var r,n;if(!t)return"";if(t.name&&typeof t.name=="string"&&!((r=t.title)!=null&&r.rendered))return pn(t.name);const e=((n=t.title)==null?void 0:n.rendered)||t.title||t.name||"";return pn(e)}function os(t,e={}){const r=["gender"],n=["contact_info","addresses","work_history","relationships","photo_gallery"],i={...t};return r.forEach(s=>{i[s]===""&&(i[s]=null)}),n.forEach(s=>{Array.isArray(i[s])||(i[s]=[])}),Object.assign(i,e),i}const Et={all:["people"],lists:()=>[...Et.all,"list"],list:t=>[...Et.lists(),t],details:()=>[...Et.all,"detail"],detail:t=>[...Et.details(),t],timeline:t=>[...Et.detail(t),"timeline"],dates:t=>[...Et.detail(t),"dates"]};function LK(t){var i,s,a,o,c,u,d,h,f,p,v,y,x,g,m,w,b;const e=((a=(s=(i=t._embedded)==null?void 0:i["wp:featuredmedia"])==null?void 0:s[0])==null?void 0:a.source_url)||((f=(h=(d=(u=(c=(o=t._embedded)==null?void 0:o["wp:featuredmedia"])==null?void 0:c[0])==null?void 0:u.media_details)==null?void 0:d.sizes)==null?void 0:h.thumbnail)==null?void 0:f.source_url)||null,r=((x=(y=(v=(p=t._embedded)==null?void 0:p["wp:term"])==null?void 0:v.flat())==null?void 0:y.filter(_=>(_==null?void 0:_.taxonomy)==="person_label"))==null?void 0:x.map(_=>_.name))||[],n=pn(((g=t.title)==null?void 0:g.rendered)||"");return{...t,id:t.id,name:n,first_name:((m=t.acf)==null?void 0:m.first_name)||"",last_name:((w=t.acf)==null?void 0:w.last_name)||"",is_favorite:((b=t.acf)==null?void 0:b.is_favorite)||!1,is_deceased:t.is_deceased||!1,thumbnail:e,labels:r}}function Xo(t={}){return rt({queryKey:Et.list(t),queryFn:async()=>{const e=[];let r=1;const n=100;for(;;){const i=await Be.getPeople({per_page:n,page:r,_embed:!0,...t}),s=i.data.map(LK);if(e.push(...s),s.length<n)break;const a=parseInt(i.headers["x-wp-totalpages"]||i.headers["X-WP-TotalPages"]||"0",10);if(a>0&&r>=a)break;r++}return e}})}function Jo(t){return rt({queryKey:Et.detail(t),queryFn:async()=>{const e=await Be.getPerson(t,{_embed:!0});return LK(e.data)},enabled:!!t})}function Sne(t){return rt({queryKey:Et.timeline(t),queryFn:async()=>(await Re.getPersonTimeline(t)).data,enabled:!!t})}function Ene(t){return rt({queryKey:Et.dates(t),queryFn:async()=>(await Re.getPersonDates(t)).data,enabled:!!t})}function Nne(){const t=ct();return it({mutationFn:e=>Be.createPerson(e),onSuccess:()=>{t.invalidateQueries({queryKey:Et.lists()})}})}function Yc(){const t=ct();return it({mutationFn:({id:e,data:r})=>Be.updatePerson(e,r),onSuccess:(e,{id:r,data:n})=>{var i;t.invalidateQueries({queryKey:Et.detail(r)}),t.invalidateQueries({queryKey:Et.lists()}),(i=n==null?void 0:n.acf)!=null&&i.relationships&&(Array.isArray(n.acf.relationships)?n.acf.relationships:[]).forEach(a=>{const o=a.related_person;o&&t.invalidateQueries({queryKey:Et.detail(o)})})}})}function jne(){const t=ct();return it({mutationFn:e=>Be.deletePerson(e,{force:!0}),onSuccess:()=>{t.invalidateQueries({queryKey:Et.lists()}),t.invalidateQueries({queryKey:Et.details()})}})}function Cne(){const t=ct();return it({mutationFn:({personId:e,content:r})=>Re.createNote(e,r),onSuccess:(e,{personId:r})=>{t.invalidateQueries({queryKey:Et.timeline(r)})}})}function One(){const t=ct();return it({mutationFn:({noteId:e,personId:r})=>Re.deleteNote(e),onSuccess:(e,{personId:r})=>{t.invalidateQueries({queryKey:Et.timeline(r)})}})}function TO(){const t=ct();return it({mutationFn:({personId:e,data:r})=>Re.createActivity(e,r),onSuccess:(e,{personId:r})=>{t.invalidateQueries({queryKey:Et.timeline(r)})}})}function Pne(){const t=ct();return it({mutationFn:({activityId:e,data:r,personId:n})=>Re.updateActivity(e,r),onSuccess:(e,{personId:r})=>{r&&t.invalidateQueries({queryKey:Et.timeline(r)})}})}function Tne(){const t=ct();return it({mutationFn:({activityId:e,personId:r})=>Re.deleteActivity(e),onSuccess:(e,{personId:r})=>{r&&t.invalidateQueries({queryKey:Et.timeline(r)})}})}function BK(){const t=ct();return it({mutationFn:({personId:e,data:r})=>Re.createTodo(e,r),onSuccess:(e,{personId:r})=>{t.invalidateQueries({queryKey:Et.timeline(r)})}})}function Ine(){const t=ct();return it({mutationFn:({todoId:e,data:r,personId:n})=>Re.updateTodo(e,r),onSuccess:(e,{personId:r})=>{r&&t.invalidateQueries({queryKey:Et.timeline(r)})}})}function Rne(){const t=ct();return it({mutationFn:({todoId:e,personId:r})=>Re.deleteTodo(e),onSuccess:(e,{personId:r})=>{r&&t.invalidateQueries({queryKey:Et.timeline(r)})}})}function kne(){const t=ct();return it({mutationFn:({dateId:e,personId:r})=>Be.deleteDate(e),onSuccess:(e,{personId:r})=>{r&&(t.invalidateQueries({queryKey:Et.dates(r)}),t.invalidateQueries({queryKey:Et.detail(r)})),t.invalidateQueries({queryKey:["reminders"]})}})}function zK({isOpen:t,onClose:e}){const[r,n]=P.useState(""),[i,s]=P.useState(""),[a,o]=P.useState(""),[c,u]=P.useState(!1),[d,h]=P.useState(""),{data:f=[],isLoading:p}=Xo(),v=BK(),y=ct(),x=P.useMemo(()=>{const E=d.toLowerCase().trim();let j=f;return E&&(j=f.filter(S=>{var C,N,O;return((C=S.name)==null?void 0:C.toLowerCase().includes(E))||((N=S.first_name)==null?void 0:N.toLowerCase().includes(E))||((O=S.last_name)==null?void 0:O.toLowerCase().includes(E))})),[...j].sort((S,C)=>(S.name||"").localeCompare(C.name||""))},[f,d]),g=P.useMemo(()=>f.find(E=>E.id===parseInt(a)),[f,a]),m=()=>new Date().toISOString().split("T")[0];if(P.useEffect(()=>{t&&(n(""),s(m()),o(""),h(""),u(!1))},[t]),!t)return null;const w=async E=>{if(E.preventDefault(),!(!r.trim()||!a))try{await v.mutateAsync({personId:parseInt(a),data:{content:r.trim(),due_date:i||null,is_completed:!1}}),y.invalidateQueries({queryKey:["todos"]}),e()}catch(j){console.error("Failed to create todo:",j)}},b=()=>{e()},_=E=>{if(!E)return"";try{return new Date(E).toISOString().split("T")[0]}catch{return""}};return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[l.jsx("h2",{className:"text-lg font-semibold",children:"Add todo"}),l.jsx("button",{onClick:b,className:"text-gray-400 hover:text-gray-600",disabled:v.isPending,children:l.jsx(Br,{className:"w-5 h-5"})})]}),l.jsxs("form",{onSubmit:w,className:"p-4",children:[l.jsxs("div",{className:"mb-4",children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Person ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("div",{className:"relative",children:[l.jsxs("button",{type:"button",onClick:()=>u(!c),className:"w-full flex items-center justify-between px-3 py-2 border border-gray-300 rounded-md bg-white text-left focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:v.isPending,children:[g?l.jsxs("div",{className:"flex items-center gap-2",children:[g.thumbnail?l.jsx("img",{src:g.thumbnail,alt:g.name,className:"w-6 h-6 rounded-full object-cover"}):l.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center",children:l.jsx(Ia,{className:"w-4 h-4 text-gray-500"})}),l.jsx("span",{className:"text-gray-900",children:g.name})]}):l.jsx("span",{className:"text-gray-400",children:"Select a person..."}),l.jsx(kp,{className:`w-4 h-4 text-gray-400 transition-transform ${c?"rotate-180":""}`})]}),c&&l.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-hidden",children:[l.jsx("div",{className:"p-2 border-b border-gray-100",children:l.jsxs("div",{className:"relative",children:[l.jsx(qo,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),l.jsx("input",{type:"text",value:d,onChange:E=>h(E.target.value),placeholder:"Search people...",className:"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-primary-500",autoFocus:!0})]})}),l.jsx("div",{className:"overflow-y-auto max-h-48",children:p?l.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"Loading..."}):x.length>0?x.map(E=>l.jsxs("button",{type:"button",onClick:()=>{o(String(E.id)),u(!1),h("")},className:`w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-gray-50 transition-colors ${a===String(E.id)?"bg-primary-50":""}`,children:[E.thumbnail?l.jsx("img",{src:E.thumbnail,alt:E.name,className:"w-6 h-6 rounded-full object-cover"}):l.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center",children:l.jsx(Ia,{className:"w-4 h-4 text-gray-500"})}),l.jsx("span",{className:"text-sm text-gray-900 truncate",children:E.name})]},E.id)):l.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"No people found"})})]})]})]}),l.jsxs("div",{className:"mb-4",children:[l.jsxs("label",{htmlFor:"todo-content",className:"block text-sm font-medium text-gray-700 mb-2",children:["Description ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("textarea",{id:"todo-content",value:r,onChange:E=>n(E.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"What needs to be done?",disabled:v.isPending})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{htmlFor:"todo-due-date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Due date (optional)"}),l.jsx("input",{id:"todo-due-date",type:"date",value:_(i),onChange:E=>s(E.target.value||""),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:v.isPending})]}),l.jsxs("div",{className:"flex justify-end gap-2",children:[l.jsx("button",{type:"button",onClick:b,className:"btn-secondary",disabled:v.isPending,children:"Cancel"}),l.jsx("button",{type:"submit",className:"btn-primary",disabled:v.isPending||!r.trim()||!a,children:v.isPending?"Adding...":"Add todo"})]})]})]})})}const $ne=[{name:"Dashboard",href:"/",icon:lne},{name:"People",href:"/people",icon:zi},{name:"Organizations",href:"/companies",icon:pr},{name:"Dates",href:"/dates",icon:fs},{name:"Todos",href:"/todos",icon:Bi},{name:"Settings",href:"/settings",icon:IK}];function oR({mobile:t=!1,onClose:e}){const{logoutUrl:r}=_O();return l.jsxs("div",{className:"flex flex-col h-full bg-white border-r border-gray-200",children:[l.jsxs("div",{className:"flex items-center justify-between h-16 px-4 border-b border-gray-200",children:[l.jsxs(oe,{to:"/",className:"flex items-center gap-2 text-xl font-bold text-primary-600",children:[l.jsx(kK,{className:"w-5 h-5"}),Rc]}),t&&l.jsx("button",{onClick:e,className:"p-2 -mr-2",children:l.jsx(Br,{className:"w-5 h-5"})})]}),l.jsx("nav",{className:"flex-1 px-2 py-4 space-y-1 overflow-y-auto",children:$ne.map(n=>l.jsxs(Wee,{to:n.href,onClick:t?e:void 0,className:({isActive:i})=>`flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors ${i?"bg-primary-50 text-primary-700":"text-gray-700 hover:bg-gray-50"}`,children:[l.jsx(n.icon,{className:"w-5 h-5 mr-3"}),n.name]},n.name))}),l.jsx("div",{className:"p-4 border-t border-gray-200",children:l.jsxs("a",{href:r,className:"flex items-center px-3 py-2 text-sm font-medium text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[l.jsx(cne,{className:"w-5 h-5 mr-3"}),"Log Out"]})})]})}function Dne(){var a;const[t,e]=P.useState(!1),r=P.useRef(null),{data:n,isLoading:i}=rt({queryKey:["current-user"],queryFn:async()=>(await Re.getCurrentUser()).data});if(P.useEffect(()=>{const o=c=>{r.current&&!r.current.contains(c.target)&&e(!1)};if(t)return document.addEventListener("mousedown",o),()=>{document.removeEventListener("mousedown",o)}},[t]),i||!n)return l.jsx("div",{className:"flex items-center ml-auto",children:l.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full animate-pulse"})});const s=((a=n.name)==null?void 0:a.split(" ").map(o=>o[0]).join("").toUpperCase().slice(0,2))||"?";return l.jsxs("div",{className:"relative ml-auto",ref:r,children:[l.jsxs("button",{onClick:()=>e(!t),className:"flex items-center gap-2 p-1 rounded-full hover:bg-gray-100 transition-colors","aria-label":"User menu",children:[n.avatar_url?l.jsx("img",{src:n.avatar_url,alt:n.name,className:"w-8 h-8 rounded-full object-cover"}):l.jsx("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:l.jsx("span",{className:"text-sm font-medium text-primary-700",children:s})}),l.jsx(kp,{className:`w-4 h-4 text-gray-500 transition-transform ${t?"rotate-180":""}`})]}),t&&l.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:l.jsxs("div",{className:"py-1",children:[l.jsxs("a",{href:n.profile_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",onClick:()=>e(!1),children:[l.jsx(Ia,{className:"w-4 h-4 mr-2"}),l.jsx("span",{className:"hidden md:inline",children:"Edit profile"})]}),n.is_admin&&l.jsxs("a",{href:n.admin_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",onClick:()=>e(!1),children:[l.jsx(IK,{className:"w-4 h-4 mr-2"}),l.jsx("span",{className:"hidden md:inline",children:"WordPress admin"})]})]})})]})}function Mne({isOpen:t,onClose:e}){const[r,n]=P.useState(""),[i,s]=P.useState(0),a=zr(),o=P.useRef(null),c=r.trim(),{data:u,isLoading:d}=_ne(c),h=u||{people:[],companies:[]},f=[...(h.people||[]).map(g=>({...g,type:"person"})),...(h.companies||[]).map(g=>({...g,type:"company"}))],p=f.length>0,v=r.trim().length>=2;P.useEffect(()=>{t&&(n(""),s(0),setTimeout(()=>{var g;return(g=o.current)==null?void 0:g.focus()},50))},[t]),P.useEffect(()=>{s(0)},[u]);const y=g=>{if(g.key==="Escape"){e();return}if(!(!v||!p)){if(g.key==="ArrowDown")g.preventDefault(),s(m=>Math.min(m+1,f.length-1));else if(g.key==="ArrowUp")g.preventDefault(),s(m=>Math.max(m-1,0));else if(g.key==="Enter"){g.preventDefault();const m=f[i];m&&x(m.type,m.id)}}},x=(g,m)=>{e(),g==="person"?a(`/people/${m}`):g==="company"&&a(`/companies/${m}`)};return t?l.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[l.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:e}),l.jsx("div",{className:"relative min-h-screen flex items-start justify-center pt-[15vh] px-4",children:l.jsxs("div",{className:"relative w-full max-w-xl bg-white rounded-xl shadow-2xl overflow-hidden",children:[l.jsxs("div",{className:"flex items-center px-4 border-b border-gray-200",children:[l.jsx(qo,{className:"w-5 h-5 text-gray-400 flex-shrink-0"}),l.jsx("input",{ref:o,type:"text",value:r,onChange:g=>n(g.target.value),onKeyDown:y,placeholder:"Search people & organizations...",className:"flex-1 px-4 py-4 text-lg outline-none placeholder:text-gray-400",autoComplete:"off"}),l.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-400",children:[l.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 rounded text-gray-500 font-mono",children:"esc"}),l.jsx("span",{children:"to close"})]})]}),l.jsx("div",{className:"max-h-96 overflow-y-auto",children:v?d?l.jsxs("div",{className:"px-4 py-8 text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto"}),l.jsx("p",{className:"mt-3 text-sm text-gray-500",children:"Searching..."})]}):p?l.jsxs("div",{className:"py-2",children:[h.people&&h.people.length>0&&l.jsxs("div",{className:"px-2",children:[l.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"People"}),h.people.map((g,m)=>{const b=i===m;return l.jsxs("button",{onClick:()=>x("person",g.id),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors text-left ${b?"bg-primary-50 text-primary-900":"hover:bg-gray-50"}`,children:[g.thumbnail?l.jsx("img",{src:g.thumbnail,alt:g.name,className:"w-8 h-8 rounded-full object-cover"}):l.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center",children:l.jsx(Ia,{className:"w-4 h-4 text-gray-500"})}),l.jsx("span",{className:"text-sm font-medium flex-1 truncate",children:g.name}),b&&l.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 rounded text-xs text-gray-500 font-mono",children:""})]},g.id)})]}),h.companies&&h.companies.length>0&&l.jsxs("div",{className:"px-2 mt-2",children:[l.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Organizations"}),h.companies.map((g,m)=>{var _;const w=(((_=h.people)==null?void 0:_.length)||0)+m,b=i===w;return l.jsxs("button",{onClick:()=>x("company",g.id),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors text-left ${b?"bg-primary-50 text-primary-900":"hover:bg-gray-50"}`,children:[g.thumbnail?l.jsx("img",{src:g.thumbnail,alt:g.name,className:"w-8 h-8 rounded object-contain bg-white"}):l.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded flex items-center justify-center",children:l.jsx(pr,{className:"w-4 h-4 text-gray-500"})}),l.jsx("span",{className:"text-sm font-medium flex-1 truncate",children:g.name}),b&&l.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 rounded text-xs text-gray-500 font-mono",children:""})]},g.id)})]})]}):l.jsx("div",{className:"px-4 py-8 text-center text-gray-500",children:l.jsxs("p",{className:"text-sm",children:['No results found for "',r,'"']})}):l.jsxs("div",{className:"px-4 py-8 text-center text-gray-500",children:[l.jsx(qo,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),l.jsx("p",{className:"text-sm",children:"Type at least 2 characters to search"})]})}),l.jsx("div",{className:"px-4 py-3 bg-gray-50 border-t border-gray-200 flex items-center justify-between text-xs text-gray-500",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx("kbd",{className:"px-1.5 py-0.5 bg-white border border-gray-200 rounded font-mono",children:""}),l.jsx("kbd",{className:"px-1.5 py-0.5 bg-white border border-gray-200 rounded font-mono",children:""}),l.jsx("span",{children:"to navigate"})]}),l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx("kbd",{className:"px-1.5 py-0.5 bg-white border border-gray-200 rounded font-mono",children:""}),l.jsx("span",{children:"to select"})]})]})})]})})]}):null}function qne({onAddTodo:t}){const[e,r]=P.useState(!1),n=P.useRef(null),i=zr();P.useEffect(()=>{const o=c=>{n.current&&!n.current.contains(c.target)&&r(!1)};if(e)return document.addEventListener("mousedown",o),()=>{document.removeEventListener("mousedown",o)}},[e]);const s=o=>{r(!1),i(o)},a=()=>{r(!1),t()};return l.jsxs("div",{className:"relative",ref:n,children:[l.jsx("button",{onClick:()=>r(!e),className:"flex items-center justify-center w-9 h-9 rounded-lg bg-primary-600 hover:bg-primary-700 text-white transition-colors","aria-label":"Quick add",title:"Quick add",children:l.jsx(Vt,{className:"w-5 h-5"})}),e&&l.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:l.jsxs("div",{className:"py-1",children:[l.jsxs("button",{onClick:()=>s("/people/new"),className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors text-left",children:[l.jsx(Ia,{className:"w-4 h-4 mr-3 text-gray-400"}),"New Person"]}),l.jsxs("button",{onClick:()=>s("/companies/new"),className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors text-left",children:[l.jsx(pr,{className:"w-4 h-4 mr-3 text-gray-400"}),"New Organization"]}),l.jsxs("button",{onClick:a,className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors text-left",children:[l.jsx(Bi,{className:"w-4 h-4 mr-3 text-gray-400"}),"New Todo"]}),l.jsxs("button",{onClick:()=>s("/dates/new"),className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors text-left",children:[l.jsx(fs,{className:"w-4 h-4 mr-3 text-gray-400"}),"New Date"]})]})})]})}function Ane({onMenuClick:t,onAddTodo:e,onOpenSearch:r}){const n=ks(),i=()=>{const s=n.pathname;return s==="/"?"Dashboard":s.startsWith("/people")?"People":s.startsWith("/companies")?"Organizations":s.startsWith("/dates")?"Important Dates":s.startsWith("/todos")?"Todos":s.startsWith("/settings")?"Settings":""};return l.jsxs("header",{className:"sticky top-0 z-10 flex items-center h-16 px-4 bg-white border-b border-gray-200 lg:px-6",children:[l.jsx("button",{onClick:t,className:"p-2 -ml-2 lg:hidden",children:l.jsx(dne,{className:"w-5 h-5"})}),l.jsx("h1",{className:"ml-2 text-lg font-semibold lg:ml-0",children:i()}),l.jsx("div",{className:"flex-1"}),l.jsxs("button",{onClick:r,className:"flex items-center gap-2 px-3 py-1.5 rounded-lg border border-gray-200 hover:bg-gray-50 text-gray-500 transition-colors","aria-label":"Search",title:"Search (K)",children:[l.jsx(qo,{className:"w-4 h-4"}),l.jsx("span",{className:"hidden sm:inline text-sm",children:"Search..."}),l.jsxs("kbd",{className:"hidden sm:flex items-center gap-0.5 px-1.5 py-0.5 bg-gray-100 rounded text-xs text-gray-500 font-mono",children:[l.jsx(ine,{className:"w-3 h-3"}),"K"]})]}),l.jsx("div",{className:"ml-2",children:l.jsx(qne,{onAddTodo:e})}),l.jsx("div",{className:"ml-2",children:l.jsx(Dne,{})})]})}function Fne({children:t}){const[e,r]=P.useState(!1),[n,i]=P.useState(!1),[s,a]=P.useState(!1);return qK(),P.useEffect(()=>{const o=c=>{(c.metaKey||c.ctrlKey)&&c.key==="k"&&(c.preventDefault(),a(!0))};return document.addEventListener("keydown",o),()=>document.removeEventListener("keydown",o)},[]),l.jsxs("div",{className:"flex h-screen bg-gray-50",children:[l.jsx("div",{className:"hidden lg:flex lg:w-64 lg:flex-col",children:l.jsx(oR,{})}),e&&l.jsxs("div",{className:"fixed inset-0 z-40 lg:hidden",children:[l.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:()=>r(!1)}),l.jsx("div",{className:"fixed inset-y-0 left-0 flex flex-col w-64 bg-white",children:l.jsx(oR,{mobile:!0,onClose:()=>r(!1)})})]}),l.jsxs("div",{className:"flex flex-col flex-1 min-w-0",children:[l.jsx(Ane,{onMenuClick:()=>r(!0),onAddTodo:()=>i(!0),onOpenSearch:()=>a(!0)}),l.jsx("main",{className:"flex-1 overflow-y-auto p-4 lg:p-6",children:t})]}),l.jsx(Mne,{isOpen:s,onClose:()=>a(!1)}),l.jsx(zK,{isOpen:n,onClose:()=>i(!1)})]})}function tt(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function Ps(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function Lne(t,e){const r=tt(t);return isNaN(e)?Ps(t,NaN):(e&&r.setDate(r.getDate()+e),r)}const UK=6048e5,Bne=864e5,WK=6e4,VK=36e5,jf=43200,lR=1440;let zne={};function fh(){return zne}function Fo(t,e){var o,c,u,d;const r=fh(),n=(e==null?void 0:e.weekStartsOn)??((c=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,i=tt(t),s=i.getDay(),a=(s<n?7:0)+s-n;return i.setDate(i.getDate()-a),i.setHours(0,0,0,0),i}function Dp(t){return Fo(t,{weekStartsOn:1})}function HK(t){const e=tt(t),r=e.getFullYear(),n=Ps(t,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const i=Dp(n),s=Ps(t,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);const a=Dp(s);return e.getTime()>=i.getTime()?r+1:e.getTime()>=a.getTime()?r:r-1}function Mp(t){const e=tt(t);return e.setHours(0,0,0,0),e}function qp(t){const e=tt(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function Une(t,e){const r=Mp(t),n=Mp(e),i=+r-qp(r),s=+n-qp(n);return Math.round((i-s)/Bne)}function Wne(t){const e=HK(t),r=Ps(t,0);return r.setFullYear(e,0,4),r.setHours(0,0,0,0),Dp(r)}function ec(t,e){const r=tt(t),n=tt(e),i=r.getTime()-n.getTime();return i<0?-1:i>0?1:i}function jm(t){return Ps(t,Date.now())}function KK(t,e){const r=Mp(t),n=Mp(e);return+r==+n}function Vne(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Hne(t){if(!Vne(t)&&typeof t!="number")return!1;const e=tt(t);return!isNaN(Number(e))}function Kne(t,e){const r=tt(t),n=tt(e),i=r.getFullYear()-n.getFullYear(),s=r.getMonth()-n.getMonth();return i*12+s}function Gne(t,e){const r=tt(t),n=tt(e);return r.getFullYear()-n.getFullYear()}function Yne(t){return e=>{const n=(t?Math[t]:Math.trunc)(e);return n===0?0:n}}function Qne(t,e){return+tt(t)-+tt(e)}function Xne(t){const e=tt(t);return e.setHours(23,59,59,999),e}function Jne(t){const e=tt(t),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(23,59,59,999),e}function Zne(t){const e=tt(t);return+Xne(e)==+Jne(e)}function eie(t,e){const r=tt(t),n=tt(e),i=ec(r,n),s=Math.abs(Kne(r,n));let a;if(s<1)a=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-i*s);let o=ec(r,n)===-i;Zne(tt(t))&&s===1&&ec(t,n)===1&&(o=!1),a=i*(s-Number(o))}return a===0?0:a}function tie(t,e,r){const n=Qne(t,e)/1e3;return Yne(r==null?void 0:r.roundingMethod)(n)}function Wv(t,e){const r=tt(t),n=tt(e),i=ec(r,n),s=Math.abs(Gne(r,n));r.setFullYear(1584),n.setFullYear(1584);const a=ec(r,n)===-i,o=i*(s-+a);return o===0?0:o}function rie(t){const e=tt(t),r=Ps(t,0);return r.setFullYear(e.getFullYear(),0,1),r.setHours(0,0,0,0),r}const nie={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},iie=(t,e,r)=>{let n;const i=nie[t];return typeof i=="string"?n=i:e===1?n=i.one:n=i.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function Vv(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const sie={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},aie={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},oie={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},lie={date:Vv({formats:sie,defaultWidth:"full"}),time:Vv({formats:aie,defaultWidth:"full"}),dateTime:Vv({formats:oie,defaultWidth:"full"})},cie={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},uie=(t,e,r,n)=>cie[t];function Du(t){return(e,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let i;if(n==="formatting"&&t.formattingValues){const a=t.defaultFormattingWidth||t.defaultWidth,o=r!=null&&r.width?String(r.width):a;i=t.formattingValues[o]||t.formattingValues[a]}else{const a=t.defaultWidth,o=r!=null&&r.width?String(r.width):t.defaultWidth;i=t.values[o]||t.values[a]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const die={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},hie={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},fie={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},pie={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},mie={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},vie={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},gie=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},yie={ordinalNumber:gie,era:Du({values:die,defaultWidth:"wide"}),quarter:Du({values:hie,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Du({values:fie,defaultWidth:"wide"}),day:Du({values:pie,defaultWidth:"wide"}),dayPeriod:Du({values:mie,defaultWidth:"wide",formattingValues:vie,defaultFormattingWidth:"wide"})};function Mu(t){return(e,r={})=>{const n=r.width,i=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const a=s[0],o=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(o)?xie(o,h=>h.test(a)):bie(o,h=>h.test(a));let u;u=t.valueCallback?t.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;const d=e.slice(a.length);return{value:u,rest:d}}}function bie(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function xie(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function wie(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const i=n[0],s=e.match(t.parsePattern);if(!s)return null;let a=t.valueCallback?t.valueCallback(s[0]):s[0];a=r.valueCallback?r.valueCallback(a):a;const o=e.slice(i.length);return{value:a,rest:o}}}const _ie=/^(\d+)(th|st|nd|rd)?/i,Sie=/\d+/i,Eie={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Nie={any:[/^b/i,/^(a|c)/i]},jie={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Cie={any:[/1/i,/2/i,/3/i,/4/i]},Oie={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Pie={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Tie={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Iie={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Rie={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},kie={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},$ie={ordinalNumber:wie({matchPattern:_ie,parsePattern:Sie,valueCallback:t=>parseInt(t,10)}),era:Mu({matchPatterns:Eie,defaultMatchWidth:"wide",parsePatterns:Nie,defaultParseWidth:"any"}),quarter:Mu({matchPatterns:jie,defaultMatchWidth:"wide",parsePatterns:Cie,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Mu({matchPatterns:Oie,defaultMatchWidth:"wide",parsePatterns:Pie,defaultParseWidth:"any"}),day:Mu({matchPatterns:Tie,defaultMatchWidth:"wide",parsePatterns:Iie,defaultParseWidth:"any"}),dayPeriod:Mu({matchPatterns:Rie,defaultMatchWidth:"any",parsePatterns:kie,defaultParseWidth:"any"})},GK={code:"en-US",formatDistance:iie,formatLong:lie,formatRelative:uie,localize:yie,match:$ie,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Die(t){const e=tt(t);return Une(e,rie(e))+1}function Mie(t){const e=tt(t),r=+Dp(e)-+Wne(e);return Math.round(r/UK)+1}function YK(t,e){var d,h,f,p;const r=tt(t),n=r.getFullYear(),i=fh(),s=(e==null?void 0:e.firstWeekContainsDate)??((h=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??i.firstWeekContainsDate??((p=(f=i.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??1,a=Ps(t,0);a.setFullYear(n+1,0,s),a.setHours(0,0,0,0);const o=Fo(a,e),c=Ps(t,0);c.setFullYear(n,0,s),c.setHours(0,0,0,0);const u=Fo(c,e);return r.getTime()>=o.getTime()?n+1:r.getTime()>=u.getTime()?n:n-1}function qie(t,e){var o,c,u,d;const r=fh(),n=(e==null?void 0:e.firstWeekContainsDate)??((c=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,i=YK(t,e),s=Ps(t,0);return s.setFullYear(i,0,n),s.setHours(0,0,0,0),Fo(s,e)}function Aie(t,e){const r=tt(t),n=+Fo(r,e)-+qie(r,e);return Math.round(n/UK)+1}function dt(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const zs={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return dt(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):dt(r+1,2)},d(t,e){return dt(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return dt(t.getHours()%12||12,e.length)},H(t,e){return dt(t.getHours(),e.length)},m(t,e){return dt(t.getMinutes(),e.length)},s(t,e){return dt(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),i=Math.trunc(n*Math.pow(10,r-3));return dt(i,e.length)}},El={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},cR={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),i=n>0?n:1-n;return r.ordinalNumber(i,{unit:"year"})}return zs.y(t,e)},Y:function(t,e,r,n){const i=YK(t,n),s=i>0?i:1-i;if(e==="YY"){const a=s%100;return dt(a,2)}return e==="Yo"?r.ordinalNumber(s,{unit:"year"}):dt(s,e.length)},R:function(t,e){const r=HK(t);return dt(r,e.length)},u:function(t,e){const r=t.getFullYear();return dt(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return dt(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return dt(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return zs.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return dt(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const i=Aie(t,n);return e==="wo"?r.ordinalNumber(i,{unit:"week"}):dt(i,e.length)},I:function(t,e,r){const n=Mie(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):dt(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):zs.d(t,e)},D:function(t,e,r){const n=Die(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):dt(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const i=t.getDay(),s=(i-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return dt(s,2);case"eo":return r.ordinalNumber(s,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});case"eeee":default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const i=t.getDay(),s=(i-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return dt(s,e.length);case"co":return r.ordinalNumber(s,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});case"cccc":default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),i=n===0?7:n;switch(e){case"i":return String(i);case"ii":return dt(i,e.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let i;switch(n===12?i=El.noon:n===0?i=El.midnight:i=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let i;switch(n>=17?i=El.evening:n>=12?i=El.afternoon:n>=4?i=El.morning:i=El.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return zs.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):zs.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):dt(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):dt(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):zs.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):zs.s(t,e)},S:function(t,e){return zs.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return dR(n);case"XXXX":case"XX":return Xa(n);case"XXXXX":case"XXX":default:return Xa(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return dR(n);case"xxxx":case"xx":return Xa(n);case"xxxxx":case"xxx":default:return Xa(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+uR(n,":");case"OOOO":default:return"GMT"+Xa(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+uR(n,":");case"zzzz":default:return"GMT"+Xa(n,":")}},t:function(t,e,r){const n=Math.trunc(t.getTime()/1e3);return dt(n,e.length)},T:function(t,e,r){const n=t.getTime();return dt(n,e.length)}};function uR(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),i=Math.trunc(n/60),s=n%60;return s===0?r+String(i):r+String(i)+e+dt(s,2)}function dR(t,e){return t%60===0?(t>0?"-":"+")+dt(Math.abs(t)/60,2):Xa(t,e)}function Xa(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),i=dt(Math.trunc(n/60),2),s=dt(n%60,2);return r+i+e+s}const hR=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},QK=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Fie=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],i=r[2];if(!i)return hR(t,e);let s;switch(n){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",hR(n,e)).replace("{{time}}",QK(i,e))},Lie={p:QK,P:Fie},Bie=/^D+$/,zie=/^Y+$/,Uie=["D","DD","YY","YYYY"];function Wie(t){return Bie.test(t)}function Vie(t){return zie.test(t)}function Hie(t,e,r){const n=Kie(t,e,r);if(console.warn(n),Uie.includes(t))throw new RangeError(n)}function Kie(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Gie=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Yie=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Qie=/^'([^]*?)'?$/,Xie=/''/g,Jie=/[a-zA-Z]/;function dn(t,e,r){var d,h,f,p;const n=fh(),i=n.locale??GK,s=n.firstWeekContainsDate??((h=(d=n.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,a=n.weekStartsOn??((p=(f=n.locale)==null?void 0:f.options)==null?void 0:p.weekStartsOn)??0,o=tt(t);if(!Hne(o))throw new RangeError("Invalid time value");let c=e.match(Yie).map(v=>{const y=v[0];if(y==="p"||y==="P"){const x=Lie[y];return x(v,i.formatLong)}return v}).join("").match(Gie).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const y=v[0];if(y==="'")return{isToken:!1,value:Zie(v)};if(cR[y])return{isToken:!0,value:v};if(y.match(Jie))throw new RangeError("Format string contains an unescaped latin alphabet character `"+y+"`");return{isToken:!1,value:v}});i.localize.preprocessor&&(c=i.localize.preprocessor(o,c));const u={firstWeekContainsDate:s,weekStartsOn:a,locale:i};return c.map(v=>{if(!v.isToken)return v.value;const y=v.value;(Vie(y)||Wie(y))&&Hie(y,e,String(t));const x=cR[y[0]];return x(o,y,i.localize,u)}).join("")}function Zie(t){const e=t.match(Qie);return e?e[1].replace(Xie,"'"):t}function ese(t,e,r){const n=fh(),i=(r==null?void 0:r.locale)??n.locale??GK,s=2520,a=ec(t,e);if(isNaN(a))throw new RangeError("Invalid time value");const o=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:a});let c,u;a>0?(c=tt(e),u=tt(t)):(c=tt(t),u=tt(e));const d=tie(u,c),h=(qp(u)-qp(c))/1e3,f=Math.round((d-h)/60);let p;if(f<2)return r!=null&&r.includeSeconds?d<5?i.formatDistance("lessThanXSeconds",5,o):d<10?i.formatDistance("lessThanXSeconds",10,o):d<20?i.formatDistance("lessThanXSeconds",20,o):d<40?i.formatDistance("halfAMinute",0,o):d<60?i.formatDistance("lessThanXMinutes",1,o):i.formatDistance("xMinutes",1,o):f===0?i.formatDistance("lessThanXMinutes",1,o):i.formatDistance("xMinutes",f,o);if(f<45)return i.formatDistance("xMinutes",f,o);if(f<90)return i.formatDistance("aboutXHours",1,o);if(f<lR){const v=Math.round(f/60);return i.formatDistance("aboutXHours",v,o)}else{if(f<s)return i.formatDistance("xDays",1,o);if(f<jf){const v=Math.round(f/lR);return i.formatDistance("xDays",v,o)}else if(f<jf*2)return p=Math.round(f/jf),i.formatDistance("aboutXMonths",p,o)}if(p=eie(u,c),p<12){const v=Math.round(f/jf);return i.formatDistance("xMonths",v,o)}else{const v=p%12,y=Math.trunc(p/12);return v<3?i.formatDistance("aboutXYears",y,o):v<9?i.formatDistance("overXYears",y,o):i.formatDistance("almostXYears",y+1,o)}}function tse(t,e){return ese(t,jm(t),e)}function rse(t,e){const r=tt(t),n=tt(e);return r.getTime()>n.getTime()}function nse(t,e,r){const n=Fo(t,r),i=Fo(e,r);return+n==+i}function ise(t,e){return nse(t,jm(t),e)}function XK(t){return KK(t,jm(t))}function JK(t,e){return Lne(t,-e)}function ZK(t){return KK(t,JK(jm(t),1))}function Md(t,e){const n=lse(t);let i;if(n.date){const c=cse(n.date,2);i=use(c.restDateString,c.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);const s=i.getTime();let a=0,o;if(n.time&&(a=dse(n.time),isNaN(a)))return new Date(NaN);if(n.timezone){if(o=hse(n.timezone),isNaN(o))return new Date(NaN)}else{const c=new Date(s+a),u=new Date(0);return u.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),u.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),u}return new Date(s+a+o)}const Cf={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},sse=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,ase=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,ose=/^([+-])(\d{2})(?::?(\d{2}))?$/;function lse(t){const e={},r=t.split(Cf.dateTimeDelimiter);let n;if(r.length>2)return e;if(/:/.test(r[0])?n=r[0]:(e.date=r[0],n=r[1],Cf.timeZoneDelimiter.test(e.date)&&(e.date=t.split(Cf.timeZoneDelimiter)[0],n=t.substr(e.date.length,t.length))),n){const i=Cf.timezone.exec(n);i?(e.time=n.replace(i[1],""),e.timezone=i[1]):e.time=n}return e}function cse(t,e){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),n=t.match(r);if(!n)return{year:NaN,restDateString:""};const i=n[1]?parseInt(n[1]):null,s=n[2]?parseInt(n[2]):null;return{year:s===null?i:s*100,restDateString:t.slice((n[1]||n[2]).length)}}function use(t,e){if(e===null)return new Date(NaN);const r=t.match(sse);if(!r)return new Date(NaN);const n=!!r[4],i=qu(r[1]),s=qu(r[2])-1,a=qu(r[3]),o=qu(r[4]),c=qu(r[5])-1;if(n)return gse(e,o,c)?fse(e,o,c):new Date(NaN);{const u=new Date(0);return!mse(e,s,a)||!vse(e,i)?new Date(NaN):(u.setUTCFullYear(e,s,Math.max(i,a)),u)}}function qu(t){return t?parseInt(t):1}function dse(t){const e=t.match(ase);if(!e)return NaN;const r=Hv(e[1]),n=Hv(e[2]),i=Hv(e[3]);return yse(r,n,i)?r*VK+n*WK+i*1e3:NaN}function Hv(t){return t&&parseFloat(t.replace(",","."))||0}function hse(t){if(t==="Z")return 0;const e=t.match(ose);if(!e)return 0;const r=e[1]==="+"?-1:1,n=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return bse(n,i)?r*(n*VK+i*WK):NaN}function fse(t,e,r){const n=new Date(0);n.setUTCFullYear(t,0,4);const i=n.getUTCDay()||7,s=(e-1)*7+r+1-i;return n.setUTCDate(n.getUTCDate()+s),n}const pse=[31,null,31,30,31,30,31,31,30,31,30,31];function eG(t){return t%400===0||t%4===0&&t%100!==0}function mse(t,e,r){return e>=0&&e<=11&&r>=1&&r<=(pse[e]||(eG(t)?29:28))}function vse(t,e){return e>=1&&e<=(eG(t)?366:365)}function gse(t,e,r){return e>=1&&e<=53&&r>=0&&r<=6}function yse(t,e,r){return t===24?e===0&&r===0:r>=0&&r<60&&e>=0&&e<60&&t>=0&&t<25}function bse(t,e){return e>=0&&e<=59}function xse(t){if(!t||t.length===0)return{todos:[],today:[],yesterday:[],thisWeek:[],older:[]};const e={todos:[],today:[],yesterday:[],thisWeek:[],older:[]};return t.forEach(r=>{if(r.type==="todo"){e.todos.push(r);return}const n=Md(r.created),i=r.activity_date?Md(r.activity_date):n;XK(i)?e.today.push(r):ZK(i)?e.yesterday.push(r):ise(i)?e.thisWeek.push(r):e.older.push(r)}),e.todos.sort((r,n)=>{if(r.is_completed&&!n.is_completed)return 1;if(!r.is_completed&&n.is_completed)return-1;if(!r.is_completed&&!n.is_completed){if(r.due_date&&n.due_date)return new Date(r.due_date)-new Date(n.due_date);if(r.due_date&&!n.due_date)return-1;if(!r.due_date&&n.due_date)return 1}return new Date(n.created)-new Date(r.created)}),e}function wse(t){if(!t)return"";try{const e=Md(t),r=tse(e,{addSuffix:!0});return XK(e)?r:ZK(e)?"Yesterday":dn(e,"MMM d, yyyy")}catch{return t}}function _se(t){return{call:"Phone",email:"Mail",chat:"MessageCircle",meeting:"Users",coffee:"Coffee",lunch:"Utensils",note:"FileText"}[t]||"Circle"}function Sse(t){return{call:"Phone call",email:"Email",chat:"Chat",meeting:"Meeting",coffee:"Coffee",lunch:"Lunch",note:"Note"}[t]||t||"Activity"}function ph(t){if(!t.due_date||t.is_completed)return!1;try{const e=Md(t.due_date),r=new Date;return r.setHours(0,0,0,0),e.setHours(0,0,0,0),e<r}catch{return!1}}function Ese(t){const e=[];return t.is_completed?e.push("opacity-60","line-through"):ph(t)&&e.push("text-red-600","font-medium"),e.join(" ")}function IO({isOpen:t,onClose:e,todo:r,onComplete:n,onCompleteAsActivity:i}){return!t||!r?null:l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[l.jsx("h2",{className:"text-lg font-semibold",children:"Complete todo"}),l.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:l.jsx(Br,{className:"w-5 h-5"})})]}),l.jsxs("div",{className:"p-4",children:[l.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:['"',r.content,'"']}),l.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"How would you like to complete this todo?"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("button",{onClick:n,className:"w-full flex items-center justify-center gap-2 px-4 py-3 border-2 border-gray-200 rounded-lg hover:border-primary-300 hover:bg-primary-50 transition-colors text-left",children:[l.jsx(Bi,{className:"w-5 h-5 text-primary-600 flex-shrink-0"}),l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"font-medium text-gray-900",children:"Just complete"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Mark the todo as done"})]})]}),l.jsxs("button",{onClick:i,className:"w-full flex items-center justify-center gap-2 px-4 py-3 border-2 border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-colors text-left",children:[l.jsx(Nm,{className:"w-5 h-5 text-blue-600 flex-shrink-0"}),l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"font-medium text-gray-900",children:"Complete & log activity"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Record this as an activity on the timeline"})]})]})]})]}),l.jsx("div",{className:"flex justify-end p-4 border-t bg-gray-50 rounded-b-lg",children:l.jsx("button",{type:"button",onClick:e,className:"btn-secondary",children:"Cancel"})})]})})}const Kv=[{id:"call",label:"Phone call",icon:PO},{id:"email",label:"Email",icon:OO},{id:"chat",label:"Chat",icon:PK},{id:"meeting",label:"Meeting",icon:zi},{id:"coffee",label:"Coffee",icon:jK},{id:"lunch",label:"Lunch",icon:MK},{id:"note",label:"Other",icon:Nm}];function RO({isOpen:t,onClose:e,onSubmit:r,isLoading:n,personId:i,initialData:s=null,activity:a=null}){const[o,c]=P.useState("call"),[u,d]=P.useState(""),[h,f]=P.useState(""),[p,v]=P.useState([]),[y,x]=P.useState(!1),[g,m]=P.useState(""),{data:w}=Xo(),b=!!a;if(P.useEffect(()=>{if(t){const D=new Date().toISOString().split("T")[0];a?(d(a.activity_date||D),f(a.content||""),v(a.participants||[]),c(a.activity_type||"note")):s?(d(s.activity_date||D),f(s.content||""),v(s.participants||[]),c(s.activity_type||"note")):(d(D),f(""),v([]),c("call"))}},[t,s,a]),!t)return null;const _=(w||[]).filter(D=>D.id.toString()!==(i==null?void 0:i.toString())),E=_.filter(D=>{var F;return(F=D.name)==null?void 0:F.toLowerCase().includes(g.toLowerCase())}),j=D=>{D.preventDefault(),h.trim()&&(r({activity_type:o,activity_date:u||null,content:h.trim(),participants:p}),f(""),v([]),d(new Date().toISOString().split("T")[0]))},S=()=>{f(""),v([]),d(""),x(!1),m(""),e()},C=D=>{v(F=>F.includes(D)?F.filter(M=>M!==D):[...F,D])},N=D=>{v(F=>F.filter(M=>M!==D))},O=()=>_.filter(D=>p.includes(D.id)),T=D=>{if(!D)return"";try{return new Date(D).toISOString().split("T")[0]}catch{return""}};return(Kv.find(D=>D.id===o)||Kv[0]).icon,l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4 max-h-[90vh] overflow-y-auto",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b sticky top-0 bg-white z-10",children:[l.jsx("h2",{className:"text-lg font-semibold",children:b?"Edit activity":"Add activity"}),l.jsx("button",{onClick:S,className:"text-gray-400 hover:text-gray-600",disabled:n,children:l.jsx(Br,{className:"w-5 h-5"})})]}),l.jsxs("form",{onSubmit:j,className:"p-4",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Activity type"}),l.jsx("div",{className:"grid grid-cols-3 gap-2",children:Kv.map(D=>{const F=D.icon,M=o===D.id;return l.jsxs("button",{type:"button",onClick:()=>c(D.id),className:`flex flex-col items-center justify-center p-3 border-2 rounded-lg transition-colors ${M?"border-primary-600 bg-primary-50 text-primary-700":"border-gray-200 hover:border-gray-300 text-gray-700"}`,disabled:n,children:[l.jsx(F,{className:"w-5 h-5 mb-1"}),l.jsx("span",{className:"text-xs",children:D.label})]},D.id)})})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{htmlFor:"activity-date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Date"}),l.jsx("input",{id:"activity-date",type:"date",value:T(u),onChange:D=>d(D.target.value||""),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{htmlFor:"activity-content",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),l.jsx("textarea",{id:"activity-content",value:h,onChange:D=>f(D.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"What happened?",disabled:n,autoFocus:!0})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Participants (optional)"}),O().length>0&&l.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:O().map(D=>l.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-primary-100 text-primary-700 rounded-full text-sm",children:[D.name,l.jsx("button",{type:"button",onClick:()=>N(D.id),className:"hover:text-primary-900",disabled:n,children:l.jsx(Br,{className:"w-3 h-3"})})]},D.id))}),l.jsxs("div",{className:"relative",children:[l.jsx("button",{type:"button",onClick:()=>x(!y),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-left text-sm text-gray-500 hover:border-gray-400",disabled:n,children:p.length===0?"Add participants...":"Add more participants..."}),y&&l.jsxs("div",{className:"absolute z-20 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:[l.jsx("div",{className:"p-2 border-b",children:l.jsx("input",{type:"text",placeholder:"Search people...",value:g,onChange:D=>m(D.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded",autoFocus:!0})}),l.jsx("div",{className:"max-h-48 overflow-y-auto",children:E.length===0?l.jsx("div",{className:"p-3 text-sm text-gray-500 text-center",children:"No people found"}):E.map(D=>{var M;const F=p.includes(D.id);return l.jsxs("button",{type:"button",onClick:()=>C(D.id),className:`w-full px-3 py-2 text-left text-sm hover:bg-gray-50 flex items-center gap-2 ${F?"bg-primary-50":""}`,children:[l.jsx("input",{type:"checkbox",checked:F,onChange:()=>{},className:"mr-1"}),D.thumbnail?l.jsx("img",{src:D.thumbnail,alt:D.name,className:"w-6 h-6 rounded-full"}):l.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center",children:l.jsx("span",{className:"text-xs text-gray-500",children:((M=D.first_name)==null?void 0:M[0])||"?"})}),l.jsx("span",{children:D.name})]},D.id)})})]})]})]}),l.jsxs("div",{className:"flex justify-end gap-2",children:[l.jsx("button",{type:"button",onClick:S,className:"btn-secondary",disabled:n,children:"Cancel"}),l.jsx("button",{type:"submit",className:"btn-primary",disabled:n||!h.trim(),children:n?b?"Saving...":"Adding...":b?"Save":"Add activity"})]})]})]})})}function Us({title:t,value:e,icon:r,href:n}){return l.jsx(oe,{to:n,className:"card p-6 hover:shadow-md transition-shadow",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-500",children:t}),l.jsx("p",{className:"mt-1 text-3xl font-semibold",children:e})]}),l.jsx("div",{className:"p-3 bg-primary-50 rounded-lg",children:l.jsx(r,{className:"w-6 h-6 text-primary-600"})})]})})}function fR({person:t,hideStar:e=!1}){var r,n;return l.jsxs(oe,{to:`/people/${t.id}`,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 transition-colors",children:[t.thumbnail?l.jsx("img",{src:t.thumbnail,alt:t.name,loading:"lazy",className:"w-10 h-10 rounded-full object-cover"}):l.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center",children:l.jsx("span",{className:"text-sm font-medium text-gray-500",children:((r=t.first_name)==null?void 0:r[0])||"?"})}),l.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[l.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:t.name}),((n=t.labels)==null?void 0:n.length)>0&&l.jsx("p",{className:"text-xs text-gray-500 truncate",children:t.labels.join(", ")})]}),t.is_favorite&&!e&&l.jsx(Ic,{className:"w-4 h-4 text-yellow-400 fill-current"})]})}function Nse({reminder:t}){var a,o,c;const e=t.days_until;let r="bg-gray-100 text-gray-700";e===0?r="bg-green-100 text-green-700":e<=3?r="bg-orange-100 text-orange-700":e<=7&&(r="bg-yellow-100 text-yellow-700");const n=(o=(a=t.related_people)==null?void 0:a[0])==null?void 0:o.id,i=((c=t.related_people)==null?void 0:c.length)>0,s=l.jsxs(l.Fragment,{children:[l.jsx("div",{className:`px-2 py-1 rounded text-xs font-medium ${r}`,children:e===0?"Today":`${e}d`}),l.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[l.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.title}),l.jsx("p",{className:"text-xs text-gray-500",children:dn(new Date(t.next_occurrence),"MMMM d, yyyy")})]}),i&&l.jsx("div",{className:"flex -space-x-2 ml-3 flex-shrink-0",children:t.related_people.slice(0,3).map(u=>{var d;return u.thumbnail?l.jsx("img",{src:u.thumbnail,alt:u.name,loading:"lazy",className:"w-10 h-10 rounded-full border-2 border-white object-cover"},u.id):l.jsx("div",{className:"w-10 h-10 bg-gray-300 rounded-full border-2 border-white flex items-center justify-center",children:l.jsx("span",{className:"text-sm",children:(d=u.name)==null?void 0:d[0]})},u.id)})})]});return i&&n?l.jsx(oe,{to:`/people/${n}`,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 transition-colors",children:s}):l.jsx("div",{className:"flex items-center p-3 rounded-lg hover:bg-gray-50 transition-colors",children:s})}function jse({todo:t,onToggle:e}){var n;const r=ph(t);return l.jsxs(oe,{to:`/people/${t.person_id}`,className:"flex items-start p-3 rounded-lg hover:bg-gray-50 transition-colors group",children:[l.jsx("button",{onClick:i=>{i.preventDefault(),i.stopPropagation(),e(t)},className:"mt-0.5 mr-3 flex-shrink-0",title:t.is_completed?"Mark as incomplete":"Mark as complete",children:t.is_completed?l.jsx(Bi,{className:"w-5 h-5 text-primary-600"}):l.jsx(Tc,{className:`w-5 h-5 ${r?"text-red-600":"text-gray-400"}`})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:`text-sm font-medium ${t.is_completed?"line-through text-gray-400":r?"text-red-600":"text-gray-900"}`,children:t.content}),l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[t.person_thumbnail?l.jsx("img",{src:t.person_thumbnail,alt:t.person_name,loading:"lazy",className:"w-5 h-5 rounded-full object-cover"}):l.jsx("div",{className:"w-5 h-5 bg-gray-200 rounded-full flex items-center justify-center",children:l.jsx("span",{className:"text-xs text-gray-500",children:(n=t.person_name)==null?void 0:n[0]})}),l.jsx("span",{className:"text-xs text-gray-500 truncate",children:t.person_name})]})]}),t.due_date&&l.jsxs("div",{className:`ml-3 text-xs text-right flex-shrink-0 ${r&&!t.is_completed?"text-red-600 font-medium":"text-gray-500"}`,children:[l.jsx("div",{children:dn(new Date(t.due_date),"MMM d")}),r&&!t.is_completed&&l.jsx("div",{className:"text-red-600",children:"overdue"})]})]})}function Cse(){return l.jsxs("div",{className:"card p-12 text-center",children:[l.jsx("div",{className:"flex justify-center mb-4",children:l.jsx("div",{className:"p-4 bg-primary-50 rounded-full",children:l.jsx(kK,{className:"w-12 h-12 text-primary-600"})})}),l.jsxs("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:["Welcome to ",Rc,"!"]}),l.jsx("p",{className:"text-gray-600 mb-8 max-w-md mx-auto",children:"Get started by adding your first contact, organization, or important date. Your dashboard will populate as you add more information."}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[l.jsxs(oe,{to:"/people/new",className:"inline-flex items-center px-6 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[l.jsx(Vt,{className:"w-5 h-5 mr-2"}),"Add Your First Person"]}),l.jsxs(oe,{to:"/companies/new",className:"inline-flex items-center px-6 py-3 bg-white text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[l.jsx(Vt,{className:"w-5 h-5 mr-2"}),"Add Your First Organization"]})]})]})}function Ose(){var C,N,O;const{data:t,isLoading:e,error:r}=bne(),{data:n}=AK(!1),i=FK(),s=TO(),[a,o]=P.useState(null),[c,u]=P.useState(!1),[d,h]=P.useState(!1),[f,p]=P.useState(null),v=T=>{if(!T.is_completed){o(T),u(!0);return}i.mutate({todoId:T.id,data:{content:T.content,due_date:T.due_date,is_completed:!1}})},y=()=>{a&&(i.mutate({todoId:a.id,data:{content:a.content,due_date:a.due_date,is_completed:!0}}),u(!1),o(null))},x=()=>{if(!a)return;const T=new Date().toISOString().split("T")[0];p({content:a.content,activity_date:T,activity_type:"note",participants:[]}),u(!1),h(!0)},g=async T=>{if(a)try{await s.mutateAsync({personId:a.person_id,data:T}),await i.mutateAsync({todoId:a.id,data:{content:a.content,due_date:a.due_date,is_completed:!0}}),h(!1),o(null),p(null)}catch(I){console.error("Failed to create activity:",I),alert("Failed to create activity. Please try again.")}};if(e)return l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});if(r){const T=((C=r==null?void 0:r.response)==null?void 0:C.status)>=500||!(r!=null&&r.response);return l.jsx("div",{className:"card p-8 text-center",children:l.jsx("div",{className:"text-red-600 mb-2",children:T?l.jsxs(l.Fragment,{children:[l.jsx("p",{className:"font-medium mb-1",children:"Failed to load dashboard data"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Please check your connection and try refreshing the page."})]}):l.jsxs(l.Fragment,{children:[l.jsx("p",{className:"font-medium mb-1",children:"Unable to load dashboard"}),l.jsx("p",{className:"text-sm text-gray-600",children:((O=(N=r==null?void 0:r.response)==null?void 0:N.data)==null?void 0:O.message)||"An error occurred while loading your data."})]})})})}const{stats:m,recent_people:w,upcoming_reminders:b,favorites:_}=t||{};if(((m==null?void 0:m.total_people)||0)+((m==null?void 0:m.total_companies)||0)+((m==null?void 0:m.total_dates)||0)===0)return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[l.jsx(Us,{title:"Total people",value:0,icon:zi,href:"/people"}),l.jsx(Us,{title:"Organizations",value:0,icon:pr,href:"/companies"}),l.jsx(Us,{title:"Events",value:0,icon:fs,href:"/dates"}),l.jsx(Us,{title:"Open todos",value:0,icon:Bi,href:"/todos"})]}),l.jsx(Cse,{})]});const S=(n==null?void 0:n.slice(0,5))||[];return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[l.jsx(Us,{title:"Total people",value:(m==null?void 0:m.total_people)||0,icon:zi,href:"/people"}),l.jsx(Us,{title:"Organizations",value:(m==null?void 0:m.total_companies)||0,icon:pr,href:"/companies"}),l.jsx(Us,{title:"Events",value:(m==null?void 0:m.total_dates)||0,icon:fs,href:"/dates"}),l.jsx(Us,{title:"Open todos",value:(m==null?void 0:m.open_todos_count)||0,icon:Bi,href:"/todos"})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"card",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[l.jsxs("h2",{className:"font-semibold flex items-center",children:[l.jsx(fs,{className:"w-5 h-5 mr-2 text-gray-500"}),"Upcoming reminders"]}),l.jsxs(oe,{to:"/dates",className:"text-sm text-primary-600 hover:text-primary-700 flex items-center",children:["View all reminders",l.jsx(Uv,{className:"w-4 h-4 ml-1"})]})]}),l.jsx("div",{className:"divide-y divide-gray-100",children:(b==null?void 0:b.length)>0?b.map(T=>l.jsx(Nse,{reminder:T},T.id)):l.jsx("p",{className:"p-4 text-sm text-gray-500 text-center",children:"No upcoming reminders"})})]}),l.jsxs("div",{className:"card",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[l.jsxs("h2",{className:"font-semibold flex items-center",children:[l.jsx(Bi,{className:"w-5 h-5 mr-2 text-gray-500"}),"Open todos"]}),l.jsxs(oe,{to:"/todos",className:"text-sm text-primary-600 hover:text-primary-700 flex items-center",children:["View all todos",l.jsx(Uv,{className:"w-4 h-4 ml-1"})]})]}),l.jsx("div",{className:"divide-y divide-gray-100",children:S.length>0?S.map(T=>l.jsx(jse,{todo:T,onToggle:v},T.id)):l.jsx("p",{className:"p-4 text-sm text-gray-500 text-center",children:"No open todos"})})]})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"card",children:[l.jsx("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:l.jsxs("h2",{className:"font-semibold flex items-center",children:[l.jsx(Ic,{className:"w-5 h-5 mr-2 text-yellow-500 fill-current"}),"Favorites"]})}),(_==null?void 0:_.length)>0?l.jsx("div",{className:"divide-y divide-gray-100",children:_.slice(0,5).map(T=>l.jsx(fR,{person:T,hideStar:!0},T.id))}):l.jsx("p",{className:"p-4 text-sm text-gray-500 text-center",children:"No favorites yet"})]}),l.jsxs("div",{className:"card",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[l.jsxs("h2",{className:"font-semibold flex items-center",children:[l.jsx(zi,{className:"w-5 h-5 mr-2 text-gray-500"}),"Recently edited people"]}),l.jsxs(oe,{to:"/people",className:"text-sm text-primary-600 hover:text-primary-700 flex items-center",children:["View all people",l.jsx(Uv,{className:"w-4 h-4 ml-1"})]})]}),l.jsx("div",{className:"divide-y divide-gray-100",children:(w==null?void 0:w.length)>0?w.map(T=>l.jsx(fR,{person:T},T.id)):l.jsxs("p",{className:"p-4 text-sm text-gray-500 text-center",children:["No people yet. ",l.jsx(oe,{to:"/people/new",className:"text-primary-600",children:"Add someone"})]})})]})]}),l.jsx(IO,{isOpen:c,onClose:()=>{u(!1),o(null)},todo:a,onComplete:y,onCompleteAsActivity:x}),l.jsx(RO,{isOpen:d,onClose:()=>{h(!1),o(null),p(null)},onSubmit:g,isLoading:s.isPending,personId:a==null?void 0:a.person_id,initialData:f})]})}function pR(t){var i;const e=((i=t.acf)==null?void 0:i.work_history)||[];if(e.length===0)return null;const r=e.find(s=>s.is_current&&s.company);if(r)return r.company;const n=e.filter(s=>s.company).sort((s,a)=>{const o=s.start_date?new Date(s.start_date):new Date(0);return(a.start_date?new Date(a.start_date):new Date(0))-o});return n.length>0?n[0].company:null}function Pse({person:t,companyName:e,isDeceased:r}){var n,i;return l.jsx(oe,{to:`/people/${t.id}`,className:"card p-4 hover:shadow-md transition-shadow",children:l.jsxs("div",{className:"flex items-start",children:[t.thumbnail?l.jsx("img",{src:t.thumbnail,alt:t.name,loading:"lazy",className:"w-12 h-12 rounded-full object-cover"}):l.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center",children:l.jsx("span",{className:"text-lg font-medium text-gray-500",children:((n=t.first_name)==null?void 0:n[0])||"?"})}),l.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsxs("h3",{className:"text-sm font-medium text-gray-900 truncate",children:[t.name,r&&l.jsx("span",{className:"ml-1 text-gray-500",children:""})]}),t.is_favorite&&l.jsx(Ic,{className:"w-4 h-4 ml-1 text-yellow-400 fill-current flex-shrink-0"})]}),e&&l.jsx("p",{className:"text-xs text-gray-500 mt-0.5 truncate",children:e}),((i=t.labels)==null?void 0:i.length)>0&&l.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:t.labels.slice(0,3).map(s=>l.jsx("span",{className:"inline-flex px-2 py-0.5 text-xs rounded-full bg-gray-100 text-gray-600",children:s},s))})]})]})})}function Tse(){const[t,e]=P.useState(!1),[r,n]=P.useState(!1),[i,s]=P.useState([]),[a,o]=P.useState("first_name"),[c,u]=P.useState("asc"),d=P.useRef(null),h=P.useRef(null),{data:f,isLoading:p,error:v}=Xo(),{data:y}=rt({queryKey:["person-labels"],queryFn:async()=>(await Be.getPersonLabels()).data}),x=(y==null?void 0:y.map(C=>C.name))||[];P.useEffect(()=>{const C=N=>{h.current&&!h.current.contains(N.target)&&d.current&&!d.current.contains(N.target)&&e(!1)};return document.addEventListener("mousedown",C),()=>{document.removeEventListener("mousedown",C)}},[]);const g=P.useMemo(()=>{if(!f)return[];let C=[...f];return r&&(C=C.filter(N=>N.is_favorite)),i.length>0&&(C=C.filter(N=>{const O=N.labels||[];return i.some(T=>O.includes(T))})),C.sort((N,O)=>{var F,M,V,q,H,B,W,K;let T,I;if(a==="first_name"?(T=(((F=N.acf)==null?void 0:F.first_name)||N.first_name||"").toLowerCase(),I=(((M=O.acf)==null?void 0:M.first_name)||O.first_name||"").toLowerCase()):(T=(((V=N.acf)==null?void 0:V.last_name)||N.last_name||"").toLowerCase(),I=(((q=O.acf)==null?void 0:q.last_name)||O.last_name||"").toLowerCase()),T===I){const ue=a==="first_name"?(((H=N.acf)==null?void 0:H.last_name)||N.last_name||"").toLowerCase():(((B=N.acf)==null?void 0:B.first_name)||N.first_name||"").toLowerCase(),ge=a==="first_name"?(((W=O.acf)==null?void 0:W.last_name)||O.last_name||"").toLowerCase():(((K=O.acf)==null?void 0:K.first_name)||O.first_name||"").toLowerCase(),$e=ue.localeCompare(ge);return c==="asc"?$e:-$e}const D=T.localeCompare(I);return c==="asc"?D:-D})},[f,r,i,a,c]),m=r||i.length>0,w=C=>{s(N=>N.includes(C)?N.filter(O=>O!==C):[...N,C])},b=()=>{n(!1),s([])},_=P.useMemo(()=>{if(!g)return[];const C=g.map(N=>pR(N)).filter(Boolean);return[...new Set(C)]},[g]),{data:E}=rt({queryKey:["companies","batch",_.sort().join(",")],queryFn:async()=>_.length===0?[]:(await Be.getCompanies({per_page:100,include:_.join(",")})).data,enabled:_.length>0}),j=P.useMemo(()=>{const C={};return E&&E.forEach(N=>{C[N.id]=Ut(N)}),C},[E]),S=P.useMemo(()=>{const C={};return g.forEach(N=>{const O=pR(N);O&&j[O]&&(C[N.id]=j[O])}),C},[g,j]);return l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:l.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[l.jsxs("div",{className:"flex items-center gap-2 border border-gray-200 rounded-lg p-1",children:[l.jsxs("select",{value:a,onChange:C=>o(C.target.value),className:"text-sm border-0 bg-transparent focus:ring-0 focus:outline-none cursor-pointer",children:[l.jsx("option",{value:"first_name",children:"First name"}),l.jsx("option",{value:"last_name",children:"Last name"})]}),l.jsx("div",{className:"h-4 w-px bg-gray-300"}),l.jsx("button",{onClick:()=>u(c==="asc"?"desc":"asc"),className:"p-1 hover:bg-gray-100 rounded transition-colors",title:`Sort ${c==="asc"?"descending":"ascending"}`,children:c==="asc"?l.jsx(rne,{className:"w-4 h-4 text-gray-600"}):l.jsx(tne,{className:"w-4 h-4 text-gray-600"})})]}),l.jsxs("div",{className:"relative",ref:d,children:[l.jsxs("button",{onClick:()=>e(!t),className:`btn-secondary ${m?"bg-primary-50 text-primary-700 border-primary-200":""}`,children:[l.jsx(Yj,{className:"w-4 h-4 md:mr-2"}),l.jsx("span",{className:"hidden md:inline",children:"Filter"}),m&&l.jsx("span",{className:"ml-2 px-1.5 py-0.5 bg-primary-600 text-white text-xs rounded-full",children:i.length+(r?1:0)})]}),t&&l.jsx("div",{ref:h,className:"absolute top-full left-0 mt-2 w-64 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:l.jsxs("div",{className:"p-4 space-y-4",children:[l.jsx("div",{children:l.jsxs("label",{className:"flex items-center cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:r,onChange:C=>n(C.target.checked),className:"sr-only"}),l.jsx("div",{className:`flex items-center justify-center w-5 h-5 border-2 rounded mr-3 ${r?"bg-primary-600 border-primary-600":"border-gray-300"}`,children:r&&l.jsx(iR,{className:"w-3 h-3 text-white"})}),l.jsxs("div",{className:"flex items-center",children:[l.jsx(Ic,{className:"w-4 h-4 mr-2 text-yellow-400 fill-current"}),l.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Favorites only"})]})]})}),x.length>0&&l.jsxs("div",{children:[l.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Labels"}),l.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:x.map(C=>l.jsxs("label",{className:"flex items-center cursor-pointer hover:bg-gray-50 p-1 rounded",children:[l.jsx("input",{type:"checkbox",checked:i.includes(C),onChange:()=>w(C),className:"sr-only"}),l.jsx("div",{className:`flex items-center justify-center w-5 h-5 border-2 rounded mr-3 ${i.includes(C)?"bg-primary-600 border-primary-600":"border-gray-300"}`,children:i.includes(C)&&l.jsx(iR,{className:"w-3 h-3 text-white"})}),l.jsx("span",{className:"text-sm text-gray-700",children:C})]},C))})]}),m&&l.jsx("button",{onClick:b,className:"w-full text-sm text-primary-600 hover:text-primary-700 font-medium pt-2 border-t border-gray-200",children:"Clear all filters"})]})})]}),m&&l.jsxs("div",{className:"flex flex-wrap gap-2",children:[r&&l.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-primary-100 text-primary-800 rounded-full text-xs",children:[l.jsx(Ic,{className:"w-3 h-3"}),"Favorites",l.jsx("button",{onClick:()=>n(!1),className:"hover:text-primary-600",children:l.jsx(Br,{className:"w-3 h-3"})})]}),i.map(C=>l.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs",children:[C,l.jsx("button",{onClick:()=>w(C),className:"hover:text-gray-600",children:l.jsx(Br,{className:"w-3 h-3"})})]},C))]}),l.jsxs(oe,{to:"/people/new",className:"btn-primary",children:[l.jsx(Vt,{className:"w-4 h-4 md:mr-2"}),l.jsx("span",{className:"hidden md:inline",children:"Add person"})]})]})}),p&&l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}),v&&l.jsx("div",{className:"card p-6 text-center",children:l.jsx("p",{className:"text-red-600",children:"Failed to load people."})}),!p&&!v&&(f==null?void 0:f.length)===0&&l.jsxs("div",{className:"card p-12 text-center",children:[l.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(Vt,{className:"w-6 h-6 text-gray-400"})}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No people found"}),l.jsx("p",{className:"text-gray-500 mb-4",children:"Get started by adding your first person."}),l.jsxs(oe,{to:"/people/new",className:"btn-primary",children:[l.jsx(Vt,{className:"w-4 h-4 md:mr-2"}),l.jsx("span",{className:"hidden md:inline",children:"Add person"})]})]}),!p&&!v&&(g==null?void 0:g.length)>0&&l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:g.map(C=>l.jsx(Pse,{person:C,companyName:S[C.id],isDeceased:C.is_deceased},C.id))}),!p&&!v&&(f==null?void 0:f.length)>0&&(g==null?void 0:g.length)===0&&l.jsxs("div",{className:"card p-12 text-center",children:[l.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(Yj,{className:"w-6 h-6 text-gray-400"})}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No people match your filters"}),l.jsx("p",{className:"text-gray-500 mb-4",children:"Try adjusting your filters to see more results."}),l.jsx("button",{onClick:b,className:"btn-secondary",children:"Clear filters"})]})]})}const Ise="#0285FF",Rse=P.forwardRef(function({title:e="Bluesky",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=Ise),l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[l.jsx("title",{children:e}),l.jsx("path",{d:"M12 10.8c-1.087-2.114-4.046-6.053-6.798-7.995C2.566.944 1.561 1.266.902 1.565.139 1.908 0 3.08 0 3.768c0 .69.378 5.65.624 6.479.815 2.736 3.713 3.66 6.383 3.364.136-.02.275-.039.415-.056-.138.022-.276.04-.415.056-3.912.58-7.387 2.005-2.83 7.078 5.013 5.19 6.87-1.113 7.823-4.308.953 3.195 2.05 9.271 7.733 4.308 4.267-4.308 1.172-6.498-2.74-7.078a8.741 8.741 0 0 1-.415-.056c.14.017.279.036.415.056 2.67.297 5.568-.628 6.383-3.364.246-.828.624-5.79.624-6.478 0-.69-.139-1.861-.902-2.206-.659-.298-1.664-.62-4.3 1.24C16.046 4.748 13.087 8.687 12 10.8Z"})]})}),kse="#0866FF",$se=P.forwardRef(function({title:e="Facebook",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=kse),l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[l.jsx("title",{children:e}),l.jsx("path",{d:"M9.101 23.691v-7.98H6.627v-3.667h2.474v-1.58c0-4.085 1.848-5.978 5.858-5.978.401 0 .955.042 1.468.103a8.68 8.68 0 0 1 1.141.195v3.325a8.623 8.623 0 0 0-.653-.036 26.805 26.805 0 0 0-.733-.009c-.707 0-1.259.096-1.675.309a1.686 1.686 0 0 0-.679.622c-.258.42-.374.995-.374 1.752v1.297h3.919l-.386 2.103-.287 1.564h-3.246v8.245C19.396 23.238 24 18.179 24 12.044c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.628 3.874 10.35 9.101 11.647Z"})]})}),Dse="#FF0069",Mse=P.forwardRef(function({title:e="Instagram",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=Dse),l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[l.jsx("title",{children:e}),l.jsx("path",{d:"M7.0301.084c-1.2768.0602-2.1487.264-2.911.5634-.7888.3075-1.4575.72-2.1228 1.3877-.6652.6677-1.075 1.3368-1.3802 2.127-.2954.7638-.4956 1.6365-.552 2.914-.0564 1.2775-.0689 1.6882-.0626 4.947.0062 3.2586.0206 3.6671.0825 4.9473.061 1.2765.264 2.1482.5635 2.9107.308.7889.72 1.4573 1.388 2.1228.6679.6655 1.3365 1.0743 2.1285 1.38.7632.295 1.6361.4961 2.9134.552 1.2773.056 1.6884.069 4.9462.0627 3.2578-.0062 3.668-.0207 4.9478-.0814 1.28-.0607 2.147-.2652 2.9098-.5633.7889-.3086 1.4578-.72 2.1228-1.3881.665-.6682 1.0745-1.3378 1.3795-2.1284.2957-.7632.4966-1.636.552-2.9124.056-1.2809.0692-1.6898.063-4.948-.0063-3.2583-.021-3.6668-.0817-4.9465-.0607-1.2797-.264-2.1487-.5633-2.9117-.3084-.7889-.72-1.4568-1.3876-2.1228C21.2982 1.33 20.628.9208 19.8378.6165 19.074.321 18.2017.1197 16.9244.0645 15.6471.0093 15.236-.005 11.977.0014 8.718.0076 8.31.0215 7.0301.0839m.1402 21.6932c-1.17-.0509-1.8053-.2453-2.2287-.408-.5606-.216-.96-.4771-1.3819-.895-.422-.4178-.6811-.8186-.9-1.378-.1644-.4234-.3624-1.058-.4171-2.228-.0595-1.2645-.072-1.6442-.079-4.848-.007-3.2037.0053-3.583.0607-4.848.05-1.169.2456-1.805.408-2.2282.216-.5613.4762-.96.895-1.3816.4188-.4217.8184-.6814 1.3783-.9003.423-.1651 1.0575-.3614 2.227-.4171 1.2655-.06 1.6447-.072 4.848-.079 3.2033-.007 3.5835.005 4.8495.0608 1.169.0508 1.8053.2445 2.228.408.5608.216.96.4754 1.3816.895.4217.4194.6816.8176.9005 1.3787.1653.4217.3617 1.056.4169 2.2263.0602 1.2655.0739 1.645.0796 4.848.0058 3.203-.0055 3.5834-.061 4.848-.051 1.17-.245 1.8055-.408 2.2294-.216.5604-.4763.96-.8954 1.3814-.419.4215-.8181.6811-1.3783.9-.4224.1649-1.0577.3617-2.2262.4174-1.2656.0595-1.6448.072-4.8493.079-3.2045.007-3.5825-.006-4.848-.0608M16.953 5.5864A1.44 1.44 0 1 0 18.39 4.144a1.44 1.44 0 0 0-1.437 1.4424M5.8385 12.012c.0067 3.4032 2.7706 6.1557 6.173 6.1493 3.4026-.0065 6.157-2.7701 6.1506-6.1733-.0065-3.4032-2.771-6.1565-6.174-6.1498-3.403.0067-6.156 2.771-6.1496 6.1738M8 12.0077a4 4 0 1 1 4.008 3.9921A3.9996 3.9996 0 0 1 8 12.0077"})]})}),qse="#000000",Ase=P.forwardRef(function({title:e="Threads",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=qse),l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[l.jsx("title",{children:e}),l.jsx("path",{d:"M12.186 24h-.007c-3.581-.024-6.334-1.205-8.184-3.509C2.35 18.44 1.5 15.586 1.472 12.01v-.017c.03-3.579.879-6.43 2.525-8.482C5.845 1.205 8.6.024 12.18 0h.014c2.746.02 5.043.725 6.826 2.098 1.677 1.29 2.858 3.13 3.509 5.467l-2.04.569c-1.104-3.96-3.898-5.984-8.304-6.015-2.91.022-5.11.936-6.54 2.717C4.307 6.504 3.616 8.914 3.589 12c.027 3.086.718 5.496 2.057 7.164 1.43 1.783 3.631 2.698 6.54 2.717 2.623-.02 4.358-.631 5.8-2.045 1.647-1.613 1.618-3.593 1.09-4.798-.31-.71-.873-1.3-1.634-1.75-.192 1.352-.622 2.446-1.284 3.272-.886 1.102-2.14 1.704-3.73 1.79-1.202.065-2.361-.218-3.259-.801-1.063-.689-1.685-1.74-1.752-2.964-.065-1.19.408-2.285 1.33-3.082.88-.76 2.119-1.207 3.583-1.291a13.853 13.853 0 0 1 3.02.142c-.126-.742-.375-1.332-.75-1.757-.513-.586-1.308-.883-2.359-.89h-.029c-.844 0-1.992.232-2.721 1.32L7.734 7.847c.98-1.454 2.568-2.256 4.478-2.256h.044c3.194.02 5.097 1.975 5.287 5.388.108.046.216.094.321.142 1.49.7 2.58 1.761 3.154 3.07.797 1.82.871 4.79-1.548 7.158-1.85 1.81-4.094 2.628-7.277 2.65Zm1.003-11.69c-.242 0-.487.007-.739.021-1.836.103-2.98.946-2.916 2.143.067 1.256 1.452 1.839 2.784 1.767 1.224-.065 2.818-.543 3.086-3.71a10.5 10.5 0 0 0-2.215-.221z"})]})}),Fse="#000000",Lse=P.forwardRef(function({title:e="X",color:r="currentColor",size:n=24,...i},s){return r==="default"&&(r=Fse),l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,fill:r,viewBox:"0 0 24 24",ref:s,...i,children:[l.jsx("title",{children:e}),l.jsx("path",{d:"M18.901 1.153h3.68l-8.04 9.19L24 22.846h-7.406l-5.8-7.584-6.638 7.584H.474l8.6-9.83L0 1.154h7.594l5.243 6.932ZM17.61 20.644h2.039L6.486 3.24H4.298Z"})]})}),Bse={Phone:PO,Mail:OO,Users:zi,Coffee:jK,Utensils:MK,FileText:Nm,Circle:Kj};function zse({timeline:t,onEdit:e,onDelete:r,onToggleTodo:n,personId:i,allPeople:s=[]}){const a=P.useMemo(()=>xse(t||[]),[t]),o=f=>s.find(p=>p.id.toString()===f.toString()),c=f=>{if(f.type==="todo")return f.is_completed?Hj:Tc;if(f.type==="activity"&&f.activity_type){const p=_se(f.activity_type);return Bse[p]||Kj}return f.type==="note"?Nm:Kj},u=f=>{const p=c(f),v=f.type==="todo",y=f.type==="activity";f.type;const x=f.activity_date||f.created,g=wse(x),m=Ese(f),w=v&&ph(f);return l.jsxs("div",{className:`relative ${v?"pl-0":"pl-8"} pb-6 group`,children:[!v&&l.jsx("div",{className:"absolute left-0 top-1",children:l.jsx("div",{className:`w-4 h-4 rounded-full border-2 ${y?"bg-blue-500 border-blue-500":"bg-gray-400 border-gray-400"}`})}),l.jsx("div",{className:`${m}`,children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1 min-w-0",children:[!v&&l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx(p,{className:`w-4 h-4 flex-shrink-0 ${y?"text-blue-600":"text-gray-500"}`}),y&&f.activity_type&&l.jsx("span",{className:"text-xs font-medium text-gray-600",children:Sse(f.activity_type)}),l.jsx("span",{className:"text-xs text-gray-400",children:""}),l.jsx("span",{className:"text-xs text-gray-500",children:g})]}),l.jsxs("div",{className:"flex items-start gap-2",children:[v&&l.jsx("button",{onClick:()=>n&&n(f),className:"mt-0.5 flex-shrink-0",title:f.is_completed?"Mark as incomplete":"Mark as complete",children:f.is_completed?l.jsx(Hj,{className:`w-5 h-5 ${w?"text-red-600":"text-primary-600"}`}):l.jsx(Tc,{className:`w-5 h-5 ${w?"text-red-600":"text-gray-400"}`})}),l.jsx("p",{className:`text-sm flex-1 ${f.is_completed?"line-through opacity-60":""}`,children:f.content})]}),y&&f.participants&&f.participants.length>0&&l.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[l.jsx("span",{className:"text-xs text-gray-500",children:"With:"}),f.participants.map(b=>{const _=o(b);return _?l.jsxs(oe,{to:`/people/${b}`,className:"inline-flex items-center gap-1 text-xs text-primary-600 hover:text-primary-700 hover:underline",children:[l.jsx(OK,{className:"w-3 h-3"}),_.name]},b):null})]}),v&&f.due_date&&l.jsx("div",{className:"mt-2",children:l.jsxs("span",{className:`text-xs ${w?"text-red-600 font-medium":"text-gray-500"}`,children:["Due: ",dn(new Date(f.due_date),"MMM d, yyyy"),w&&" (overdue)"]})})]}),l.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[e&&l.jsx("button",{onClick:()=>e(f),className:"p-1 hover:bg-gray-100 rounded",title:"Edit",children:l.jsx(Ks,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),r&&l.jsx("button",{onClick:()=>r(f),className:"p-1 hover:bg-red-50 rounded",title:"Delete",children:l.jsx(On,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]})})]},f.id)},d=(f,p)=>!p||p.length===0?null:l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3 uppercase tracking-wide",children:f}),l.jsx("div",{className:"relative pl-4 border-l-2 border-gray-200",children:p.map(u)})]});return a.today.length>0||a.yesterday.length>0||a.thisWeek.length>0||a.older.length>0?l.jsxs("div",{className:"space-y-6",children:[d("Today",a.today),d("Yesterday",a.yesterday),d("This week",a.thisWeek),d("Older",a.older)]}):l.jsx("div",{className:"text-center py-8",children:l.jsx("p",{className:"text-sm text-gray-500",children:"No timeline items yet."})})}function Use({isOpen:t,onClose:e,onSubmit:r,isLoading:n}){const[i,s]=P.useState("");if(!t)return null;const a=c=>{c.preventDefault(),i.trim()&&(r(i),s(""))},o=()=>{s(""),e()};return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[l.jsx("h2",{className:"text-lg font-semibold",children:"Add note"}),l.jsx("button",{onClick:o,className:"text-gray-400 hover:text-gray-600",disabled:n,children:l.jsx(Br,{className:"w-5 h-5"})})]}),l.jsxs("form",{onSubmit:a,className:"p-4",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{htmlFor:"note-content",className:"block text-sm font-medium text-gray-700 mb-2",children:"Note"}),l.jsx("textarea",{id:"note-content",value:i,onChange:c=>s(c.target.value),rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter your note...",disabled:n,autoFocus:!0})]}),l.jsxs("div",{className:"flex justify-end gap-2",children:[l.jsx("button",{type:"button",onClick:o,className:"btn-secondary",disabled:n,children:"Cancel"}),l.jsx("button",{type:"submit",className:"btn-primary",disabled:n||!i.trim(),children:n?"Adding...":"Add note"})]})]})]})})}function tG({isOpen:t,onClose:e,onSubmit:r,isLoading:n,todo:i=null}){const[s,a]=P.useState(""),[o,c]=P.useState(""),[u,d]=P.useState(!1),h=()=>new Date().toISOString().split("T")[0];if(P.useEffect(()=>{i?(a(i.content||""),c(i.due_date||""),d(i.is_completed||!1)):(a(""),c(h()),d(!1))},[i,t]),!t)return null;const f=y=>{y.preventDefault(),s.trim()&&(r({content:s.trim(),due_date:o||null,is_completed:u}),i||(a(""),c(h()),d(!1)))},p=()=>{i||(a(""),c(h()),d(!1)),e()},v=y=>{if(!y)return"";try{return new Date(y).toISOString().split("T")[0]}catch{return""}};return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[l.jsx("h2",{className:"text-lg font-semibold",children:i?"Edit todo":"Add todo"}),l.jsx("button",{onClick:p,className:"text-gray-400 hover:text-gray-600",disabled:n,children:l.jsx(Br,{className:"w-5 h-5"})})]}),l.jsxs("form",{onSubmit:f,className:"p-4",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{htmlFor:"todo-content",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),l.jsx("textarea",{id:"todo-content",value:s,onChange:y=>a(y.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"What needs to be done?",disabled:n,autoFocus:!0})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{htmlFor:"todo-due-date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Due date (optional)"}),l.jsx("input",{id:"todo-due-date",type:"date",value:v(o),onChange:y=>c(y.target.value||""),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:n})]}),i&&l.jsx("div",{className:"mb-4",children:l.jsxs("label",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",checked:u,onChange:y=>d(y.target.checked),className:"mr-2",disabled:n}),l.jsx("span",{className:"text-sm text-gray-700",children:"Completed"})]})}),l.jsxs("div",{className:"flex justify-end gap-2",children:[l.jsx("button",{type:"button",onClick:p,className:"btn-secondary",disabled:n,children:"Cancel"}),l.jsx("button",{type:"submit",className:"btn-primary",disabled:n||!s.trim(),children:n?i?"Saving...":"Adding...":i?"Save":"Add todo"})]})]})]})})}function sn(t){return t?String(t).replace(/\\/g,"\\\\").replace(/;/g,"\\;").replace(/,/g,"\\,").replace(/\n/g,"\\n"):""}function Wse(t){return t?t.replace(/[^\d+]/g,""):""}function mR(t){if(!t)return"";const e=new Date(t);if(isNaN(e.getTime()))return"";const r=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0");return`${r}${n}${i}`}function Vse(t,e={}){if(!t||!Array.isArray(t))return{title:"",org:""};const r=t.find(i=>i.is_current);if(r){const i=r.company&&e[r.company]?e[r.company].name||e[r.company]:"";return{title:r.job_title||"",org:i}}const n=[...t].filter(i=>i.start_date).sort((i,s)=>new Date(s.start_date)-new Date(i.start_date));if(n.length>0){const i=n[0].company&&e[n[0].company]?e[n[0].company].name||e[n[0].company]:"";return{title:n[0].job_title||"",org:i}}return{title:"",org:""}}function Hse(t,e={}){if(!t)throw new Error("Person data is required");const{companyMap:r={},personDates:n=[]}=e,i=t.acf||{},s=[];s.push("BEGIN:VCARD"),s.push("VERSION:3.0");const a=i.first_name||"",o=i.last_name||"",c=t.name||`${a} ${o}`.trim()||"Unknown";s.push(`FN:${sn(c)}`),s.push(`N:${sn(o)};${sn(a)};;;`),i.nickname&&s.push(`NICKNAME:${sn(i.nickname)}`),i.contact_info&&Array.isArray(i.contact_info)&&i.contact_info.forEach(h=>{if(!h.contact_value)return;const f=sn(h.contact_value),p=h.contact_label?sn(h.contact_label):"";switch(h.contact_type){case"email":const v=p?`EMAIL;TYPE=INTERNET,${p.toUpperCase()}`:"EMAIL;TYPE=INTERNET";s.push(`${v}:${f}`);break;case"phone":case"mobile":const y=h.contact_type==="mobile"?"CELL":"VOICE",x=p?`TEL;TYPE=${y},${p.toUpperCase()}`:`TEL;TYPE=${y}`,g=Wse(h.contact_value);g&&s.push(`${x}:${g}`);break;case"website":case"linkedin":case"twitter":case"instagram":case"facebook":let m=h.contact_value;m.match(/^https?:\/\//i)||(m=`https://${m}`);const w=h.contact_type==="linkedin"?"PROFILE":"WORK",b=p?`URL;TYPE=${w},${p.toUpperCase()}`:`URL;TYPE=${w}`;s.push(`${b}:${sn(m)}`);break}}),i.addresses&&Array.isArray(i.addresses)&&i.addresses.forEach(h=>{const f=h.address_label?`ADR;TYPE=${h.address_label.toUpperCase()}`:"ADR;TYPE=HOME",p=sn(h.street||""),v=sn(h.city||""),y=sn(h.state||""),x=sn(h.postal_code||""),g=sn(h.country||"");(p||v||y||x||g)&&s.push(`${f}:;;${p};${v};${y};${x};${g}`)});const{title:u,org:d}=Vse(i.work_history,r);if(d&&s.push(`ORG:${sn(d)}`),u&&s.push(`TITLE:${sn(u)}`),n&&Array.isArray(n)){const h=n.find(f=>{const p=Array.isArray(f.date_type)?f.date_type[0]:f.date_type;return(p==null?void 0:p.toLowerCase())==="birthday"});if(h!=null&&h.date_value){const f=mR(h.date_value);f&&s.push(`BDAY:${f}`)}}if(t.thumbnail,t.modified){const h=mR(t.modified);h&&s.push(`REV:${h}T000000Z`)}return s.push("END:VCARD"),s.join(`\r
`)}function Kse(t,e={}){const{filename:r,...n}=e,i=Hse(t,n),s=new Blob([i],{type:"text/vcard;charset=utf-8"}),a=URL.createObjectURL(s),o=document.createElement("a");o.href=a,o.download=r||`${t.name||"contact"}.vcf`.replace(/[^a-z0-9.-]/gi,"_"),document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(a)}const Gse=({className:t})=>l.jsx("svg",{className:t,viewBox:"0 0 382 382",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",children:l.jsx("path",{d:`M347.445,0H34.555C15.471,0,0,15.471,0,34.555v312.889C0,366.529,15.471,382,34.555,382h312.889
      C366.529,382,382,366.529,382,347.444V34.555C382,15.471,366.529,0,347.445,0z M118.207,329.844c0,5.554-4.502,10.056-10.056,10.056
      H65.345c-5.554,0-10.056-4.502-10.056-10.056V150.403c0-5.554,4.502-10.056,10.056-10.056h42.806
      c5.554,0,10.056,4.502,10.056,10.056V329.844z M86.748,123.432c-22.459,0-40.666-18.207-40.666-40.666S64.289,42.1,86.748,42.1
      s40.666,18.207,40.666,40.666S109.208,123.432,86.748,123.432z M341.91,330.654c0,5.106-4.14,9.246-9.246,9.246H286.73
      c-5.106,0-9.246-4.14-9.246-9.246v-84.168c0-12.556,3.683-55.021-32.813-55.021c-28.309,0-34.051,29.066-35.204,42.11v97.079
      c0,5.106-4.139,9.246-9.246,9.246h-44.426c-5.106,0-9.246-4.14-9.246-9.246V149.593c0-5.106,4.14-9.246,9.246-9.246h44.426
      c5.106,0,9.246,4.14,9.246,9.246v15.655c10.497-15.753,26.097-27.912,59.312-27.912c73.552,0,73.131,68.716,73.131,106.472
      L341.91,330.654L341.91,330.654z`})});function Of(t){if(!t)return null;switch(t){case"male":return"";case"female":return"";case"non_binary":case"other":case"prefer_not_to_say":return"";default:return null}}function Yse(){var HP,KP,GP,YP,QP,XP,JP,ZP,eT,tT,rT,nT,iT,sT,aT;const{id:t}=Vi(),e=zr(),r=ct(),{data:n,isLoading:i,error:s}=Jo(t),{data:a}=Sne(t),{data:o}=Ene(t),c=jne(),u=One(),d=kne(),h=Yc(),f=Cne(),p=TO(),v=Pne(),y=BK(),x=Ine(),g=Tne(),m=Rne(),{data:w}=Xo(),{data:b=[]}=rt({queryKey:["investments",t],queryFn:async()=>(await Re.getInvestments(t)).data,enabled:!!t}),[_,E]=P.useState(!1),[j,S]=P.useState(""),[C,N]=P.useState(!1),O=P.useRef(null),[T,I]=P.useState(!1),[D,F]=P.useState(!1),[M,V]=P.useState(!1),[q,H]=P.useState(null),[B,W]=P.useState(null),[K,ue]=P.useState(null),[ge,$e]=P.useState(!1),[ye,Oe]=P.useState(null),{data:De}=rt({queryKey:["person-labels"],queryFn:async()=>(await Be.getPersonLabels()).data}),Ve=De||[],vt=(n==null?void 0:n.labels)||[],st=((YP=(GP=(KP=(HP=n==null?void 0:n._embedded)==null?void 0:HP["wp:term"])==null?void 0:KP.flat())==null?void 0:GP.filter($=>($==null?void 0:$.taxonomy)==="person_label"))==null?void 0:YP.map($=>$.id))||[],X=Ve.filter($=>!vt.includes($.name));rn((n==null?void 0:n.name)||((QP=n==null?void 0:n.title)==null?void 0:QP.rendered)||(n==null?void 0:n.title)||"Person");const _e=o==null?void 0:o.find($=>{const Y=Array.isArray($.date_type)?$.date_type[0]:$.date_type;return(Y==null?void 0:Y.toLowerCase())==="birthday"}),qe=_e!=null&&_e.date_value?new Date(_e.date_value):null,He=o==null?void 0:o.find($=>{const Y=Array.isArray($.date_type)?$.date_type[0]:$.date_type;return(Y==null?void 0:Y.toLowerCase())==="died"}),Pt=He!=null&&He.date_value?new Date(He.date_value):null,be=!!Pt,Le=qe?Wv(be?Pt:new Date,qe):null,jt=o?[...o].sort(($,Y)=>{const G=$.date_value?new Date($.date_value):new Date(0),Ce=Y.date_value?new Date(Y.date_value):new Date(0);return G-Ce}):[],Tt=async()=>{if(window.confirm("Are you sure you want to delete this person?"))try{await c.mutateAsync(t),e("/people")}catch($){console.error("Failed to delete person:",$),alert("Failed to delete person. Please try again.")}},k=$=>{if(!$)return"";let Y=$.replace(/[\u200B-\u200D\uFEFF\u200E\u200F\u202A-\u202E]/g,"");const G=Y.startsWith("+");return Y=Y.replace(/\D/g,""),G?`+${Y}`:Y},A=async $=>{var Ce;if(!window.confirm("Are you sure you want to delete this contact detail?"))return;const Y=[...((Ce=n.acf)==null?void 0:Ce.contact_info)||[]];Y.splice($,1);const G=os(n.acf,{contact_info:Y});await h.mutateAsync({id:t,data:{acf:G}})},z=async $=>{var Ce;if(!window.confirm("Are you sure you want to delete this address?"))return;const Y=[...((Ce=n.acf)==null?void 0:Ce.addresses)||[]];Y.splice($,1);const G=os(n.acf,{addresses:Y});await h.mutateAsync({id:t,data:{acf:G}})},ie=async $=>{var Qi,ai,Xi,nf,oT,lT;if(!window.confirm("Are you sure you want to delete this relationship?"))return;const Y=(ai=(Qi=n.acf)==null?void 0:Qi.relationships)==null?void 0:ai[$];if(!Y)return;const G=Y.related_person,Ce=Y.relationship_type;let Ue=!0;G&&Ce&&(Ue=window.confirm("Do you also want to delete the inverse relationship from the other person?"));let at=null;if(!Ue&&G&&Ce)try{const[ji,sf]=await Promise.all([Be.getPerson(G,{_embed:!0}),Be.getRelationshipTypes()]),dv={};sf.data.forEach(Eu=>{dv[Eu.id]=Eu});const Ln=dv[Ce],Ha=(Xi=Ln==null?void 0:Ln.acf)==null?void 0:Xi.inverse_relationship_type;if(Ha){const Nu=(((nf=ji.data.acf)==null?void 0:nf.relationships)||[]).find(Ji=>{var cT,uT;const fX=typeof Ji.related_person=="object"?(cT=Ji.related_person)==null?void 0:cT.ID:Ji.related_person,pX=typeof Ji.relationship_type=="object"?(uT=Ji.relationship_type)==null?void 0:uT.term_id:Ji.relationship_type;return fX===parseInt(t)&&pX===Ha});Nu&&(at={related_person:parseInt(t),relationship_type:Ha,relationship_label:Nu.relationship_label||""})}}catch(ji){console.error("Failed to fetch inverse relationship:",ji)}const ut=[...((oT=n.acf)==null?void 0:oT.relationships)||[]];ut.splice($,1);const Ls=os(n.acf,{relationships:ut});if(await h.mutateAsync({id:t,data:{acf:Ls}}),!Ue&&at&&G){await new Promise(ji=>setTimeout(ji,500));try{const ji=await Be.getPerson(G,{_embed:!0}),sf=((lT=ji.data.acf)==null?void 0:lT.relationships)||[];if(!sf.some(Ln=>{var Nu,Ji;const Ha=typeof Ln.related_person=="object"?(Nu=Ln.related_person)==null?void 0:Nu.ID:Ln.related_person,Eu=typeof Ln.relationship_type=="object"?(Ji=Ln.relationship_type)==null?void 0:Ji.term_id:Ln.relationship_type;return Ha===at.related_person&&Eu===at.relationship_type})){const Ln=[...sf,at],Ha=os(ji.data.acf,{relationships:Ln});await Be.updatePerson(G,{acf:Ha})}}catch(ji){console.error("Failed to restore inverse relationship:",ji)}}r.invalidateQueries({queryKey:["person",t]}),G&&r.invalidateQueries({queryKey:["person",G]}),r.invalidateQueries({queryKey:["people"]})},J=async $=>{window.confirm("Are you sure you want to delete this important date?")&&await d.mutateAsync({dateId:$,personId:t})},Q=async $=>{window.confirm("Are you sure you want to delete this note?")&&await u.mutateAsync({noteId:$,personId:t})},fe=async $=>{try{await f.mutateAsync({personId:t,content:$}),I(!1)}catch(Y){console.error("Failed to create note:",Y),alert("Failed to create note. Please try again.")}},ze=async $=>{try{B?(await v.mutateAsync({activityId:B.id,data:$,personId:t}),W(null)):(await p.mutateAsync({personId:t,data:$}),K&&(await x.mutateAsync({todoId:K.id,data:{content:K.content,due_date:K.due_date,is_completed:!0},personId:t}),ue(null),Oe(null))),F(!1)}catch(Y){console.error("Failed to save activity:",Y),alert("Failed to save activity. Please try again.")}},Ge=async $=>{try{await y.mutateAsync({personId:t,data:$}),V(!1),H(null)}catch(Y){console.error("Failed to create todo:",Y),alert("Failed to create todo. Please try again.")}},It=async $=>{if(q)try{await x.mutateAsync({todoId:q.id,data:$,personId:t}),V(!1),H(null)}catch(Y){console.error("Failed to update todo:",Y),alert("Failed to update todo. Please try again.")}},xe=async $=>{if(!$.is_completed){ue($),$e(!0);return}try{await x.mutateAsync({todoId:$.id,data:{content:$.content,due_date:$.due_date,is_completed:!1},personId:t})}catch(Y){console.error("Failed to toggle todo:",Y),alert("Failed to update todo. Please try again.")}},ne=async()=>{if(K)try{await x.mutateAsync({todoId:K.id,data:{content:K.content,due_date:K.due_date,is_completed:!0},personId:t}),$e(!1),ue(null)}catch($){console.error("Failed to complete todo:",$),alert("Failed to complete todo. Please try again.")}},de=()=>{if(!K)return;const $=new Date().toISOString().split("T")[0];Oe({content:K.content,activity_date:$,activity_type:"note",participants:[]}),$e(!1),F(!0)},ce=async $=>{window.confirm("Are you sure you want to delete this activity?")&&await g.mutateAsync({activityId:$,personId:t})},Se=async $=>{window.confirm("Are you sure you want to delete this todo?")&&await m.mutateAsync({todoId:$,personId:t})},Je=$=>{$.type==="todo"?(H($),V(!0)):$.type==="activity"&&(W($),F(!0))},Fn=$=>{$.type==="note"?Q($.id):$.type==="activity"?ce($.id):$.type==="todo"&&Se($.id)},si=async $=>{var Ce;if(!window.confirm("Are you sure you want to delete this work history item?"))return;const Y=[...((Ce=n.acf)==null?void 0:Ce.work_history)||[]];Y.splice($,1);const G=os(n.acf,{work_history:Y});await h.mutateAsync({id:t,data:{acf:G}})},bl=async $=>{var Ce,Ue,at;const Y=(at=(Ue=(Ce=n==null?void 0:n._embedded)==null?void 0:Ce["wp:term"])==null?void 0:Ue.flat())==null?void 0:at.find(ut=>(ut==null?void 0:ut.taxonomy)==="person_label"&&(ut==null?void 0:ut.name)===$);if(!Y)return;const G=st.filter(ut=>ut!==Y.id);await h.mutateAsync({id:t,data:{person_label:G}})},Jh=async()=>{if(!j)return;const $=Ve.find(G=>G.id.toString()===j);if(!$)return;const Y=[...st,$.id];await h.mutateAsync({id:t,data:{person_label:Y}}),S(""),E(!1)},Zh=async $=>{var G;const Y=(G=$.target.files)==null?void 0:G[0];if(Y){if(!Y.type.startsWith("image/")){alert("Please select an image file");return}if(Y.size>5*1024*1024){alert("Image size must be less than 5MB");return}N(!0);try{await Re.uploadPersonPhoto(t,Y),r.invalidateQueries({queryKey:["person",t]}),r.invalidateQueries({queryKey:["people"]})}catch(Ce){console.error("Failed to upload photo:",Ce),alert("Failed to upload photo. Please try again.")}finally{N(!1),O.current&&(O.current.value="")}}},cv=()=>{if(n)try{Kse(n,{companyMap:bt,personDates:o||[]})}catch($){console.error("Failed to export vCard:",$),alert("Failed to export vCard. Please try again.")}},xl=((JP=(XP=n==null?void 0:n.acf)==null?void 0:XP.work_history)==null?void 0:JP.map($=>$.company).filter(Boolean))||[],uv=Lj({queries:xl.map($=>({queryKey:["company",$],queryFn:async()=>(await Be.getCompany($,{_embed:!0})).data,enabled:!!$}))}),Yi=((eT=(ZP=n==null?void 0:n.acf)==null?void 0:ZP.relationships)==null?void 0:eT.map($=>$.related_person).filter(Boolean))||[],wl=Lj({queries:Yi.map($=>({queryKey:["person-dates",$],queryFn:async()=>(await Re.getPersonDates($)).data,enabled:!!$}))}),te=P.useMemo(()=>{const $={};return wl.forEach((Y,G)=>{if(Y.data&&Yi[G]){const Ce=Yi[G],Ue=Y.data.find(at=>{const ut=Array.isArray(at.date_type)?at.date_type[0]:at.date_type;return(ut==null?void 0:ut.toLowerCase())==="birthday"});if(Ue!=null&&Ue.date_value){const at=new Date(Ue.date_value);$[Ce]=Wv(new Date,at)}else $[Ce]=-1}}),$},[wl,Yi]),je=P.useMemo(()=>{const $={};return wl.forEach((Y,G)=>{if(Y.data&&Yi[G]){const Ce=Yi[G],Ue=Y.data.some(at=>{const ut=Array.isArray(at.date_type)?at.date_type[0]:at.date_type;return(ut==null?void 0:ut.toLowerCase())==="died"});$[Ce]=Ue}}),$},[wl,Yi]),Ie=P.useMemo(()=>{var $;return($=n==null?void 0:n.acf)!=null&&$.relationships?[...n.acf.relationships].sort((Y,G)=>{const Ce=te[Y.related_person]??-1,Ue=te[G.related_person]??-1;return Ce===-1&&Ue===-1?0:Ce===-1?1:Ue===-1?-1:Ue-Ce}):[]},[(tT=n==null?void 0:n.acf)==null?void 0:tT.relationships,te]),bt={};uv.forEach(($,Y)=>{var G,Ce,Ue,at,ut,Ls,Qi,ai,Xi;if($.data){const nf=xl[Y];bt[nf]={name:Ut($.data),logo:((Ue=(Ce=(G=$.data._embedded)==null?void 0:G["wp:featuredmedia"])==null?void 0:Ce[0])==null?void 0:Ue.source_url)||((Xi=(ai=(Qi=(Ls=(ut=(at=$.data._embedded)==null?void 0:at["wp:featuredmedia"])==null?void 0:ut[0])==null?void 0:Ls.media_details)==null?void 0:Qi.sizes)==null?void 0:ai.thumbnail)==null?void 0:Xi.source_url)||null}}});const $r=P.useMemo(()=>{var $;return($=n==null?void 0:n.acf)!=null&&$.work_history?[...n.acf.work_history].map((Y,G)=>({...Y,originalIndex:G})).sort((Y,G)=>{if(Y.is_current&&!G.is_current)return-1;if(!Y.is_current&&G.is_current)return 1;const Ce=Y.start_date?new Date(Y.start_date):new Date(0);return(G.start_date?new Date(G.start_date):new Date(0))-Ce}):[]},[(rT=n==null?void 0:n.acf)==null?void 0:rT.work_history]),ef=P.useMemo(()=>a?a.filter(Y=>Y.type==="todo").sort((Y,G)=>{if(Y.is_completed&&!G.is_completed)return 1;if(!Y.is_completed&&G.is_completed)return-1;if(!Y.is_completed&&!G.is_completed){if(Y.due_date&&G.due_date)return new Date(Y.due_date)-new Date(G.due_date);if(Y.due_date&&!G.due_date)return-1;if(!Y.due_date&&G.due_date)return 1}return new Date(G.created)-new Date(Y.created)}):[],[a]);if(P.useEffect(()=>{(n==null?void 0:n.status)==="trash"&&e("/people",{replace:!0})},[n,e]),i)return l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});if(s||!n)return l.jsxs("div",{className:"card p-6 text-center",children:[l.jsx("p",{className:"text-red-600",children:"Failed to load person."}),l.jsx(oe,{to:"/people",className:"btn-secondary mt-4",children:"Back to people"})]});if(n.status==="trash")return null;const Qt=n.acf||{},_l=["facebook","linkedin","instagram","twitter","bluesky","threads","website"],tf=((nT=Qt.contact_info)==null?void 0:nT.filter($=>_l.includes($.contact_type)))||[],Su={linkedin:1,twitter:2,bluesky:3,threads:4,instagram:5,facebook:6,website:7},rf=[...tf].sort(($,Y)=>{const G=Su[$.contact_type]||99,Ce=Su[Y.contact_type]||99;return G-Ce}),dX=$=>{switch($){case"facebook":return $se;case"linkedin":return Gse;case"instagram":return Mse;case"twitter":return Lse;case"bluesky":return Rse;case"threads":return Ase;case"website":return Zf;default:return Zf}},hX=$=>{switch($){case"facebook":return"text-[#1877F2]";case"linkedin":return"text-[#0077B7]";case"instagram":return"text-[#E4405F]";case"twitter":return"text-[#1DA1F2]";case"bluesky":return"text-[#00A8E8]";case"threads":return"text-[#000000]";case"website":return"text-gray-600";default:return"text-gray-600"}};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs(oe,{to:"/people",className:"flex items-center text-gray-600 hover:text-gray-900",children:[l.jsx(xn,{className:"w-4 h-4 md:mr-2"}),l.jsx("span",{className:"hidden md:inline",children:"Back to people"})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:cv,className:"btn-secondary",children:[l.jsx(Gj,{className:"w-4 h-4 md:mr-2"}),l.jsx("span",{className:"hidden md:inline",children:"Export vCard"})]}),l.jsxs(oe,{to:`/people/${t}/edit`,className:"btn-secondary",children:[l.jsx($K,{className:"w-4 h-4 md:mr-2"}),l.jsx("span",{className:"hidden md:inline",children:"Edit"})]}),l.jsxs("button",{onClick:Tt,className:"btn-danger",children:[l.jsx(On,{className:"w-4 h-4 md:mr-2"}),l.jsx("span",{className:"hidden md:inline",children:"Delete"})]})]})]}),l.jsxs("div",{className:"card p-6 relative",children:[l.jsx("div",{className:"absolute top-4 right-4",children:l.jsx(oe,{to:`/people/${t}/family-tree`,className:"btn-secondary text-sm",children:"View family tree"})}),l.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4",children:[l.jsxs("div",{className:"relative group",children:[n.thumbnail?l.jsx("img",{src:n.thumbnail,alt:n.name,className:"w-28 h-28 rounded-full object-cover"}):l.jsx("div",{className:"w-28 h-28 bg-gray-200 rounded-full flex items-center justify-center",children:l.jsx("span",{className:"text-3xl font-medium text-gray-500",children:((iT=n.first_name)==null?void 0:iT[0])||"?"})}),l.jsx("div",{className:"absolute inset-0 rounded-full bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 flex items-center justify-center cursor-pointer",onClick:()=>{var $;return($=O.current)==null?void 0:$.click()},children:C?l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"}):l.jsx(sd,{className:"w-6 h-6 text-white opacity-0 group-hover:opacity-100 transition-opacity"})}),l.jsx("input",{ref:O,type:"file",accept:"image/*",onChange:Zh,className:"hidden",disabled:C})]}),l.jsxs("div",{className:"flex-1 space-y-3",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("h1",{className:"text-2xl font-bold",children:[n.name,be&&l.jsx("span",{className:"ml-1 text-gray-500",children:""})]}),n.is_favorite&&l.jsx(Ic,{className:"w-5 h-5 text-yellow-400 fill-current"})]}),Qt.nickname&&l.jsxs("p",{className:"text-gray-500",children:['"',Qt.nickname,'"']}),be&&Pt&&Le!==null&&l.jsxs("p",{className:"text-gray-500 text-sm",children:[Of(Qt.gender)&&l.jsx("span",{className:"mr-1",children:Of(Qt.gender)}),"Died ",dn(Pt,"MMMM d, yyyy")," at age ",Le]}),!be&&Le!==null&&l.jsxs("p",{className:"text-gray-500 text-sm",children:[Of(Qt.gender)&&l.jsx("span",{className:"mr-1",children:Of(Qt.gender)}),Le," years old"]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[n.labels&&n.labels.length>0&&n.labels.map(($,Y)=>l.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700 group/label",children:[$,l.jsx("button",{onClick:()=>bl($),className:"opacity-0 group-hover/label:opacity-100 transition-opacity hover:bg-gray-200 rounded-full p-0.5",title:"Remove label",children:l.jsx(Br,{className:"w-3 h-3"})})]},Y)),_?l.jsxs("div",{className:"inline-flex items-center gap-2",children:[l.jsxs("select",{value:j,onChange:$=>S($.target.value),className:"text-xs border border-gray-300 rounded px-2 py-1",autoFocus:!0,disabled:X.length===0,children:[l.jsx("option",{value:"",children:"Select a label..."}),X.map($=>l.jsx("option",{value:$.id,children:$.name},$.id))]}),l.jsx("button",{onClick:Jh,disabled:!j,className:"text-xs px-2 py-1 bg-primary-600 text-white rounded hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Add"}),l.jsx("button",{onClick:()=>{E(!1),S("")},className:"text-xs px-2 py-1 bg-gray-200 text-gray-700 rounded hover:bg-gray-300",children:"Cancel"})]}):X.length>0&&l.jsxs("button",{onClick:()=>E(!0),className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors",children:[l.jsx(Vt,{className:"w-3 h-3 mr-1"}),"Add label"]})]}),rf.length>0&&l.jsx("div",{className:"flex items-center gap-3 mt-4",children:rf.map(($,Y)=>{const G=dX($.contact_type),Ce=hX($.contact_type);let Ue=$.contact_value;return Ue.match(/^https?:\/\//i)||(Ue=`https://${Ue}`),l.jsx("a",{href:Ue,target:"_blank",rel:"noopener noreferrer",className:`flex-shrink-0 hover:opacity-80 transition-opacity ${Ce}`,title:`${$.contact_type.charAt(0).toUpperCase()+$.contact_type.slice(1)}: ${$.contact_value}`,children:l.jsx(G,{className:"w-5 h-5"})},Y)})})]})]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[!be&&l.jsxs("div",{className:"card p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h2",{className:"font-semibold",children:"Contact information"}),l.jsxs(oe,{to:`/people/${t}/contact/new`,className:"btn-secondary text-sm",children:[l.jsx(Vt,{className:"w-4 h-4 md:mr-1"}),l.jsx("span",{className:"hidden md:inline",children:"Add contact detail"})]})]}),((sT=Qt.contact_info)==null?void 0:sT.filter($=>!_l.includes($.contact_type)).length)>0?l.jsx("div",{className:"space-y-2",children:(()=>{const $={email:1,phone:2,mobile:2,calendar:3,other:4};return Qt.contact_info.filter(G=>!_l.includes(G.contact_type)).map((G,Ce)=>({...G,originalIndex:Ce})).sort((G,Ce)=>{const Ue=$[G.contact_type]||99,at=$[Ce.contact_type]||99;return Ue!==at?Ue-at:G.originalIndex-Ce.originalIndex}).map((G,Ce)=>{Qt.contact_info.indexOf(G);const Ue=G.contact_type==="email"?OO:G.contact_type==="phone"||G.contact_type==="mobile"?PO:G.contact_type==="calendar"?fs:Zf,at=G.contact_type==="email",ut=G.contact_type==="phone"||G.contact_type==="mobile",Ls=G.contact_type==="mobile",Qi=G.contact_type==="calendar";let ai=null,Xi=null;return at?ai=`mailto:${G.contact_value}`:ut?ai=`tel:${k(G.contact_value)}`:Qi&&(ai=G.contact_value,Xi="_blank"),l.jsx("div",{className:"group",children:l.jsxs("div",{className:"flex items-center rounded-md -mx-2 px-2 py-1.5 group-hover:bg-gray-50 transition-colors",children:[l.jsx(Ue,{className:"w-4 h-4 text-gray-400 mr-3 flex-shrink-0"}),l.jsxs("div",{className:"flex-1 min-w-0 flex items-center gap-2",children:[l.jsxs("span",{className:"text-sm text-gray-500",children:[G.contact_label||G.contact_type,": "]}),ai?l.jsx("a",{href:ai,target:Xi||void 0,rel:Xi==="_blank"?"noopener noreferrer":void 0,className:"text-primary-600 hover:text-primary-700 hover:underline",children:G.contact_value}):l.jsx("span",{children:G.contact_value}),Ls&&l.jsx("a",{href:`https://wa.me/${k(G.contact_value)}`,target:"_blank",rel:"noopener noreferrer",className:"flex-shrink-0 hover:opacity-80 transition-opacity",title:"Open WhatsApp",children:l.jsx(PK,{className:"w-4 h-4 text-[#25D366]"})})]}),l.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[l.jsx(oe,{to:`/people/${t}/contact/${G.originalIndex}/edit`,className:"p-1 hover:bg-gray-100 rounded",title:"Edit contact detail",children:l.jsx(Ks,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),l.jsx("button",{onClick:()=>A(G.originalIndex),className:"p-1 hover:bg-red-50 rounded",title:"Delete contact detail",children:l.jsx(On,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]})},G.originalIndex)})})()}):l.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No contact information yet."})]}),l.jsxs("div",{className:"card p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h2",{className:"font-semibold",children:"Events"}),l.jsxs(oe,{to:`/dates/new?person=${t}`,className:"btn-secondary text-sm",children:[l.jsx(Vt,{className:"w-4 h-4 md:mr-1"}),l.jsx("span",{className:"hidden md:inline",children:"Add Important Date"})]})]}),jt.length>0?l.jsx("div",{className:"space-y-3",children:jt.map($=>{const Y=Array.isArray($.date_type)?$.date_type[0]:$.date_type,G=(Y==null?void 0:Y.toLowerCase())||"",Ce=G.includes("died"),Ue=G.includes("wedding")||G.includes("marriage")?one:G.includes("birthday")?ane:fs;return l.jsxs("div",{className:"flex items-start group",children:[l.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center mr-3",children:Ce?l.jsx("span",{className:"text-gray-500 text-lg font-semibold",children:""}):l.jsx(Ue,{className:"w-4 h-4 text-gray-500"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"text-sm font-medium",children:$.title}),l.jsx("p",{className:"text-xs text-gray-500",children:$.date_value&&dn(new Date($.date_value),"MMMM d, yyyy")}),Y&&l.jsx("p",{className:"text-xs text-gray-400 capitalize",children:Y})]}),l.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx(oe,{to:`/dates/${$.id}/edit`,className:"p-1 hover:bg-gray-100 rounded",title:"Edit date",children:l.jsx(Ks,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),l.jsx("button",{onClick:()=>J($.id),className:"p-1 hover:bg-red-50 rounded",title:"Delete date",children:l.jsx(On,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]},$.id)})}):l.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No important dates yet."})]}),l.jsxs("div",{className:"card p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h2",{className:"font-semibold",children:"Timeline"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>I(!0),className:"btn-secondary text-sm",children:[l.jsx(Vt,{className:"w-4 h-4 md:mr-1"}),l.jsx("span",{className:"hidden md:inline",children:"Note"})]}),l.jsxs("button",{onClick:()=>F(!0),className:"btn-secondary text-sm",children:[l.jsx(Vt,{className:"w-4 h-4 md:mr-1"}),l.jsx("span",{className:"hidden md:inline",children:"Activity"})]})]})]}),l.jsx(zse,{timeline:a||[],onEdit:Je,onDelete:Fn,onToggleTodo:xe,personId:t,allPeople:w||[]})]}),l.jsxs("div",{className:"card p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h2",{className:"font-semibold",children:"Work history"}),l.jsxs(oe,{to:`/people/${t}/work-history/new`,className:"btn-secondary text-sm",children:[l.jsx(Vt,{className:"w-4 h-4 md:mr-1"}),l.jsx("span",{className:"hidden md:inline",children:"Add work history"})]})]}),($r==null?void 0:$r.length)>0?l.jsx("div",{className:"space-y-4",children:$r.map(($,Y)=>{const G=$.company?bt[$.company]:null,Ce=$.originalIndex;return l.jsxs("div",{className:"flex items-start group",children:[G!=null&&G.logo?l.jsx("img",{src:G.logo,alt:G.name,className:"w-20 h-20 rounded-lg object-contain bg-white mr-3 flex-shrink-0"}):l.jsx("div",{className:"w-20 h-20 bg-white rounded-lg flex items-center justify-center mr-3 flex-shrink-0 border border-gray-200",children:l.jsx(pr,{className:"w-10 h-10 text-gray-500"})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"font-medium",children:$.job_title}),$.company&&G&&l.jsx(oe,{to:`/companies/${$.company}`,className:"text-sm text-primary-600 hover:underline",children:G.name}),l.jsxs("p",{className:"text-sm text-gray-500",children:[$.start_date&&dn(new Date($.start_date),"MMM yyyy")," - ",$.is_current?"Present":$.end_date?dn(new Date($.end_date),"MMM yyyy"):""]}),$.description&&l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:$.description})]}),l.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[l.jsx(oe,{to:`/people/${t}/work-history/${Ce}/edit`,className:"p-1 hover:bg-gray-100 rounded",title:"Edit work history",children:l.jsx(Ks,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),l.jsx("button",{onClick:()=>si(Ce),className:"p-1 hover:bg-red-50 rounded",title:"Delete work history",children:l.jsx(On,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]},Ce)})}):l.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No work history yet."})]}),b.length>0&&l.jsxs("div",{className:"card p-6",children:[l.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[l.jsx($p,{className:"w-5 h-5 mr-2"}),"Investments"]}),l.jsx("div",{className:"space-y-3",children:b.map($=>l.jsxs(oe,{to:`/companies/${$.id}`,className:"flex items-center p-2 rounded-lg hover:bg-gray-50 transition-colors group",children:[$.thumbnail?l.jsx("img",{src:$.thumbnail,alt:$.name,className:"w-12 h-12 rounded-lg object-contain bg-white border border-gray-200"}):l.jsx("div",{className:"w-12 h-12 bg-white rounded-lg flex items-center justify-center border border-gray-200",children:l.jsx(pr,{className:"w-6 h-6 text-gray-400"})}),l.jsxs("div",{className:"ml-3",children:[l.jsx("p",{className:"text-sm font-medium group-hover:text-primary-600",children:$.name}),$.industry&&l.jsx("p",{className:"text-xs text-gray-500",children:$.industry})]})]},$.id))})]}),l.jsx(Use,{isOpen:T,onClose:()=>I(!1),onSubmit:fe,isLoading:f.isPending}),l.jsx(RO,{isOpen:D,onClose:()=>{F(!1),W(null),ue(null),Oe(null)},onSubmit:ze,isLoading:B?v.isPending:p.isPending,personId:t,initialData:ye,activity:B}),l.jsx(IO,{isOpen:ge,onClose:()=>{$e(!1),ue(null)},todo:K,onComplete:ne,onCompleteAsActivity:de}),l.jsx(tG,{isOpen:M,onClose:()=>{V(!1),H(null)},onSubmit:q?It:Ge,isLoading:q?x.isPending:y.isPending,todo:q})]}),l.jsxs("div",{className:"space-y-6",children:[(Qt.how_we_met||Qt.met_date)&&l.jsxs("div",{className:"card p-6",children:[l.jsx("h2",{className:"font-semibold mb-3",children:"How we met"}),Qt.met_date&&l.jsxs("p",{className:"text-sm text-gray-500 mb-2",children:[l.jsx(fs,{className:"w-4 h-4 inline mr-1"}),dn(new Date(Qt.met_date),"MMMM d, yyyy")]}),Qt.how_we_met&&l.jsx("p",{className:"text-sm",children:Qt.how_we_met})]}),l.jsxs("div",{className:"card p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h2",{className:"font-semibold",children:"Todos"}),l.jsxs("button",{onClick:()=>{H(null),V(!0)},className:"btn-secondary text-sm",children:[l.jsx(Vt,{className:"w-4 h-4 md:mr-1"}),l.jsx("span",{className:"hidden md:inline",children:"Add todo"})]})]}),ef.length>0?l.jsx("div",{className:"space-y-2",children:ef.map($=>{const Y=ph($);return l.jsxs("div",{className:"flex items-start p-2 rounded hover:bg-gray-50 group",children:[l.jsx("button",{onClick:()=>xe($),className:"mt-0.5 mr-2 flex-shrink-0",title:$.is_completed?"Mark as incomplete":"Mark as complete",children:$.is_completed?l.jsx(Hj,{className:"w-5 h-5 text-primary-600"}):l.jsx(Tc,{className:`w-5 h-5 ${Y?"text-red-600":"text-gray-400"}`})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:`text-sm ${$.is_completed?"line-through text-gray-400":Y?"text-red-600":""}`,children:$.content}),$.due_date&&l.jsxs("p",{className:`text-xs mt-0.5 ${Y&&!$.is_completed?"text-red-600 font-medium":"text-gray-500"}`,children:["Due: ",dn(new Date($.due_date),"MMM d, yyyy"),Y&&!$.is_completed&&" (overdue)"]})]}),l.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[l.jsx("button",{onClick:()=>{H($),V(!0)},className:"p-1 hover:bg-gray-100 rounded",title:"Edit todo",children:l.jsx(Ks,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),l.jsx("button",{onClick:()=>Se($.id),className:"p-1 hover:bg-red-50 rounded",title:"Delete todo",children:l.jsx(On,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]},$.id)})}):l.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No todos yet."})]}),l.jsxs("div",{className:"card p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h2",{className:"font-semibold",children:"Relationships"}),l.jsxs(oe,{to:`/people/${t}/relationship/new`,className:"btn-secondary text-sm",children:[l.jsx(Vt,{className:"w-4 h-4 md:mr-1"}),l.jsx("span",{className:"hidden md:inline",children:"Add relationship"})]})]}),(Ie==null?void 0:Ie.length)>0?l.jsx("div",{className:"space-y-2",children:Ie.map(($,Y)=>{var Ce,Ue,at;const G=((Ue=(Ce=n==null?void 0:n.acf)==null?void 0:Ce.relationships)==null?void 0:Ue.findIndex(ut=>ut.related_person===$.related_person&&ut.relationship_type===$.relationship_type))??Y;return l.jsxs("div",{className:"flex items-center p-2 rounded hover:bg-gray-50 group",children:[l.jsxs(oe,{to:`/people/${$.related_person}`,className:"flex items-center flex-1 min-w-0",children:[$.person_thumbnail?l.jsx("img",{src:$.person_thumbnail,alt:pn($.person_name)||"",className:"w-8 h-8 rounded-full object-cover mr-2"}):l.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full mr-2 flex items-center justify-center",children:l.jsx("span",{className:"text-xs font-medium text-gray-500",children:((at=pn($.person_name))==null?void 0:at[0])||"?"})}),l.jsxs("div",{children:[l.jsxs("p",{className:"text-sm font-medium",children:[pn($.person_name)||`Person #${$.related_person}`,je[$.related_person]&&l.jsx("span",{className:"text-gray-400 ml-1",title:"Deceased",children:""})]}),l.jsx("p",{className:"text-xs text-gray-500",children:pn($.relationship_name||$.relationship_label)})]})]}),l.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[l.jsx(oe,{to:`/people/${t}/relationship/${G}/edit`,className:"p-1 hover:bg-gray-100 rounded",title:"Edit relationship",children:l.jsx(Ks,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),l.jsx("button",{onClick:()=>ie(G),className:"p-1 hover:bg-red-50 rounded",title:"Delete relationship",children:l.jsx(On,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]},Y)})}):l.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No relationships yet."})]}),!be&&l.jsxs("div",{className:"card p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h2",{className:"font-semibold",children:"Addresses"}),l.jsxs(oe,{to:`/people/${t}/address/new`,className:"btn-secondary text-sm",children:[l.jsx(Vt,{className:"w-4 h-4 md:mr-1"}),l.jsx("span",{className:"hidden md:inline",children:"Add address"})]})]}),((aT=Qt.addresses)==null?void 0:aT.length)>0?l.jsx("div",{className:"space-y-4",children:Qt.addresses.map(($,Y)=>{const G=[];$.street&&G.push($.street);const Ce=[$.postal_code,$.city].filter(Boolean).join(" ");Ce&&G.push(Ce);const Ue=[$.state,$.country].filter(Boolean).join(", ");Ue&&G.push(Ue);const at=[$.street,$.postal_code,$.city,$.state,$.country].filter(Boolean).join(", "),ut=`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(at)}`;return l.jsx("div",{className:"group",children:l.jsxs("div",{className:"flex items-start rounded-md -mx-2 px-2 py-1.5 group-hover:bg-gray-50 transition-colors",children:[l.jsx(une,{className:"w-4 h-4 text-gray-400 mr-3 mt-0.5 flex-shrink-0"}),l.jsxs("div",{className:"flex-1 min-w-0",children:[$.address_label&&l.jsx("span",{className:"text-sm text-gray-500 block mb-1",children:$.address_label}),l.jsx("a",{href:ut,target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:text-primary-700 hover:underline text-sm",children:G.map((Ls,Qi)=>l.jsx("span",{className:"block",children:Ls},Qi))})]}),l.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[l.jsx(oe,{to:`/people/${t}/address/${Y}/edit`,className:"p-1 hover:bg-gray-100 rounded",title:"Edit address",children:l.jsx(Ks,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),l.jsx("button",{onClick:()=>z(Y),className:"p-1 hover:bg-red-50 rounded",title:"Delete address",children:l.jsx(On,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]})},Y)})}):l.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No addresses yet."})]})]})]})]})}var mh=t=>t.type==="checkbox",no=t=>t instanceof Date,ln=t=>t==null;const rG=t=>typeof t=="object";var nr=t=>!ln(t)&&!Array.isArray(t)&&rG(t)&&!no(t),nG=t=>nr(t)&&t.target?mh(t.target)?t.target.checked:t.target.value:t,Qse=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,iG=(t,e)=>t.has(Qse(e)),Xse=t=>{const e=t.constructor&&t.constructor.prototype;return nr(e)&&e.hasOwnProperty("isPrototypeOf")},kO=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function dr(t){if(t instanceof Date)return new Date(t);const e=typeof FileList<"u"&&t instanceof FileList;if(kO&&(t instanceof Blob||e))return t;const r=Array.isArray(t);if(!r&&!(nr(t)&&Xse(t)))return t;const n=r?[]:Object.create(Object.getPrototypeOf(t));for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=dr(t[i]));return n}var Cm=t=>/^\w*$/.test(t),Kt=t=>t===void 0,$O=t=>Array.isArray(t)?t.filter(Boolean):[],DO=t=>$O(t.replace(/["|']|\]/g,"").split(/\.|\[/)),he=(t,e,r)=>{if(!e||!nr(t))return r;const n=(Cm(e)?[e]:DO(e)).reduce((i,s)=>ln(i)?i:i[s],t);return Kt(n)||n===t?Kt(t[e])?r:t[e]:n},Pn=t=>typeof t=="boolean",Qr=t=>typeof t=="function",xt=(t,e,r)=>{let n=-1;const i=Cm(e)?[e]:DO(e),s=i.length,a=s-1;for(;++n<s;){const o=i[n];let c=r;if(n!==a){const u=t[o];c=nr(u)||Array.isArray(u)?u:isNaN(+i[n+1])?{}:[]}if(o==="__proto__"||o==="constructor"||o==="prototype")return;t[o]=c,t=t[o]}};const Ap={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},vi={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Zi={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},sG=Ae.createContext(null);sG.displayName="HookFormContext";const MO=()=>Ae.useContext(sG);var aG=(t,e,r,n=!0)=>{const i={defaultValues:e._defaultValues};for(const s in t)Object.defineProperty(i,s,{get:()=>{const a=s;return e._proxyFormState[a]!==vi.all&&(e._proxyFormState[a]=!n||vi.all),r&&(r[a]=!0),t[a]}});return i};const qO=typeof window<"u"?Ae.useLayoutEffect:Ae.useEffect;function Jse(t){const e=MO(),{control:r=e.control,disabled:n,name:i,exact:s}=t||{},[a,o]=Ae.useState(r._formState),c=Ae.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return qO(()=>r._subscribe({name:i,formState:c.current,exact:s,callback:u=>{!n&&o({...r._formState,...u})}}),[i,n,s]),Ae.useEffect(()=>{c.current.isValid&&r._setValid(!0)},[r]),Ae.useMemo(()=>aG(a,r,c.current,!1),[a,r])}var Tn=t=>typeof t=="string",Qj=(t,e,r,n,i)=>Tn(t)?(n&&e.watch.add(t),he(r,t,i)):Array.isArray(t)?t.map(s=>(n&&e.watch.add(s),he(r,s))):(n&&(e.watchAll=!0),r),Xj=t=>ln(t)||!rG(t);function gi(t,e,r=new WeakSet){if(Xj(t)||Xj(e))return Object.is(t,e);if(no(t)&&no(e))return t.getTime()===e.getTime();const n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;if(r.has(t)||r.has(e))return!0;r.add(t),r.add(e);for(const s of n){const a=t[s];if(!i.includes(s))return!1;if(s!=="ref"){const o=e[s];if(no(a)&&no(o)||nr(a)&&nr(o)||Array.isArray(a)&&Array.isArray(o)?!gi(a,o,r):!Object.is(a,o))return!1}}return!0}function Zse(t){const e=MO(),{control:r=e.control,name:n,defaultValue:i,disabled:s,exact:a,compute:o}=t||{},c=Ae.useRef(i),u=Ae.useRef(o),d=Ae.useRef(void 0),h=Ae.useRef(r),f=Ae.useRef(n);u.current=o;const[p,v]=Ae.useState(()=>{const b=r._getWatch(n,c.current);return u.current?u.current(b):b}),y=Ae.useCallback(b=>{const _=Qj(n,r._names,b||r._formValues,!1,c.current);return u.current?u.current(_):_},[r._formValues,r._names,n]),x=Ae.useCallback(b=>{if(!s){const _=Qj(n,r._names,b||r._formValues,!1,c.current);if(u.current){const E=u.current(_);gi(E,d.current)||(v(E),d.current=E)}else v(_)}},[r._formValues,r._names,s,n]);qO(()=>((h.current!==r||!gi(f.current,n))&&(h.current=r,f.current=n,x()),r._subscribe({name:n,formState:{values:!0},exact:a,callback:b=>{x(b.values)}})),[r,a,n,x]),Ae.useEffect(()=>r._removeUnmounted());const g=h.current!==r,m=f.current,w=Ae.useMemo(()=>{if(s)return null;const b=!g&&!gi(m,n);return g||b?y():null},[s,g,n,m,y]);return w!==null?w:p}function eae(t){const e=MO(),{name:r,disabled:n,control:i=e.control,shouldUnregister:s,defaultValue:a,exact:o=!0}=t,c=iG(i._names.array,r),u=Ae.useMemo(()=>he(i._formValues,r,he(i._defaultValues,r,a)),[i,r,a]),d=Zse({control:i,name:r,defaultValue:u,exact:o}),h=Jse({control:i,name:r,exact:o}),f=Ae.useRef(t),p=Ae.useRef(void 0),v=Ae.useRef(i.register(r,{...t.rules,value:d,...Pn(t.disabled)?{disabled:t.disabled}:{}}));f.current=t;const y=Ae.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!he(h.errors,r)},isDirty:{enumerable:!0,get:()=>!!he(h.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!he(h.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!he(h.validatingFields,r)},error:{enumerable:!0,get:()=>he(h.errors,r)}}),[h,r]),x=Ae.useCallback(b=>v.current.onChange({target:{value:nG(b),name:r},type:Ap.CHANGE}),[r]),g=Ae.useCallback(()=>v.current.onBlur({target:{value:he(i._formValues,r),name:r},type:Ap.BLUR}),[r,i._formValues]),m=Ae.useCallback(b=>{const _=he(i._fields,r);_&&_._f&&b&&(_._f.ref={focus:()=>Qr(b.focus)&&b.focus(),select:()=>Qr(b.select)&&b.select(),setCustomValidity:E=>Qr(b.setCustomValidity)&&b.setCustomValidity(E),reportValidity:()=>Qr(b.reportValidity)&&b.reportValidity()})},[i._fields,r]),w=Ae.useMemo(()=>({name:r,value:d,...Pn(n)||h.disabled?{disabled:h.disabled||n}:{},onChange:x,onBlur:g,ref:m}),[r,n,h.disabled,x,g,m,d]);return Ae.useEffect(()=>{const b=i._options.shouldUnregister||s,_=p.current;_&&_!==r&&!c&&i.unregister(_),i.register(r,{...f.current.rules,...Pn(f.current.disabled)?{disabled:f.current.disabled}:{}});const E=(j,S)=>{const C=he(i._fields,j);C&&C._f&&(C._f.mount=S)};if(E(r,!0),b){const j=dr(he(i._options.defaultValues,r,f.current.defaultValue));xt(i._defaultValues,r,j),Kt(he(i._formValues,r))&&xt(i._formValues,r,j)}return!c&&i.register(r),p.current=r,()=>{(c?b&&!i._state.action:b)?i.unregister(r):E(r,!1)}},[r,i,c,s]),Ae.useEffect(()=>{i._setDisabledField({disabled:n,name:r})},[n,r,i]),Ae.useMemo(()=>({field:w,formState:h,fieldState:y}),[w,h,y])}const Fp=t=>t.render(eae(t));var tae=(t,e,r,n,i)=>e?{...r[t],types:{...r[t]&&r[t].types?r[t].types:{},[n]:i||!0}}:{},ad=t=>Array.isArray(t)?t:[t],vR=()=>{let t=[];return{get observers(){return t},next:i=>{for(const s of t)s.next&&s.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(s=>s!==i)}}),unsubscribe:()=>{t=[]}}};function oG(t,e){const r={};for(const n in t)if(t.hasOwnProperty(n)){const i=t[n],s=e[n];if(i&&nr(i)&&s){const a=oG(i,s);nr(a)&&(r[n]=a)}else t[n]&&(r[n]=s)}return r}var Vr=t=>nr(t)&&!Object.keys(t).length,AO=t=>t.type==="file",Lp=t=>{if(!kO)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},lG=t=>t.type==="select-multiple",FO=t=>t.type==="radio",rae=t=>FO(t)||mh(t),Gv=t=>Lp(t)&&t.isConnected;function nae(t,e){const r=e.slice(0,-1).length;let n=0;for(;n<r;)t=Kt(t)?n++:t[e[n++]];return t}function iae(t){for(const e in t)if(t.hasOwnProperty(e)&&!Kt(t[e]))return!1;return!0}function tr(t,e){const r=Array.isArray(e)?e:Cm(e)?[e]:DO(e),n=r.length===1?t:nae(t,r),i=r.length-1,s=r[i];return n&&delete n[s],i!==0&&(nr(n)&&Vr(n)||Array.isArray(n)&&iae(n))&&tr(t,r.slice(0,-1)),t}var sae=t=>{for(const e in t)if(Qr(t[e]))return!0;return!1};function cG(t){return Array.isArray(t)||nr(t)&&!sae(t)}function Jj(t,e={}){for(const r in t){const n=t[r];cG(n)?(e[r]=Array.isArray(n)?[]:{},Jj(n,e[r])):Kt(n)||(e[r]=!0)}return e}function Pl(t,e,r){r||(r=Jj(e));for(const n in t){const i=t[n];if(cG(i))Kt(e)||Xj(r[n])?r[n]=Jj(i,Array.isArray(i)?[]:{}):Pl(i,ln(e)?{}:e[n],r[n]);else{const s=e[n];r[n]=!gi(i,s)}}return r}const gR={value:!1,isValid:!1},yR={value:!0,isValid:!0};var uG=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Kt(t[0].attributes.value)?Kt(t[0].value)||t[0].value===""?yR:{value:t[0].value,isValid:!0}:yR:gR}return gR},dG=(t,{valueAsNumber:e,valueAsDate:r,setValueAs:n})=>Kt(t)?t:e?t===""?NaN:t&&+t:r&&Tn(t)?new Date(t):n?n(t):t;const bR={isValid:!1,value:null};var hG=t=>Array.isArray(t)?t.reduce((e,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:e,bR):bR;function xR(t){const e=t.ref;return AO(e)?e.files:FO(e)?hG(t.refs).value:lG(e)?[...e.selectedOptions].map(({value:r})=>r):mh(e)?uG(t.refs).value:dG(Kt(e.value)?t.ref.value:e.value,t)}var aae=(t,e,r,n)=>{const i={};for(const s of t){const a=he(e,s);a&&xt(i,s,a._f)}return{criteriaMode:r,names:[...t],fields:i,shouldUseNativeValidation:n}},Bp=t=>t instanceof RegExp,Au=t=>Kt(t)?t:Bp(t)?t.source:nr(t)?Bp(t.value)?t.value.source:t.value:t,wR=t=>({isOnSubmit:!t||t===vi.onSubmit,isOnBlur:t===vi.onBlur,isOnChange:t===vi.onChange,isOnAll:t===vi.all,isOnTouch:t===vi.onTouched});const _R="AsyncFunction";var oae=t=>!!t&&!!t.validate&&!!(Qr(t.validate)&&t.validate.constructor.name===_R||nr(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===_R)),lae=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),SR=(t,e,r)=>!r&&(e.watchAll||e.watch.has(t)||[...e.watch].some(n=>t.startsWith(n)&&/^\.\w+/.test(t.slice(n.length))));const od=(t,e,r,n)=>{for(const i of r||Object.keys(t)){const s=he(t,i);if(s){const{_f:a,...o}=s;if(a){if(a.refs&&a.refs[0]&&e(a.refs[0],i)&&!n)return!0;if(a.ref&&e(a.ref,a.name)&&!n)return!0;if(od(o,e))break}else if(nr(o)&&od(o,e))break}}};function ER(t,e,r){const n=he(t,r);if(n||Cm(r))return{error:n,name:r};const i=r.split(".");for(;i.length;){const s=i.join("."),a=he(e,s),o=he(t,s);if(a&&!Array.isArray(a)&&r!==s)return{name:r};if(o&&o.type)return{name:s,error:o};if(o&&o.root&&o.root.type)return{name:`${s}.root`,error:o.root};i.pop()}return{name:r}}var cae=(t,e,r,n)=>{r(t);const{name:i,...s}=t;return Vr(s)||Object.keys(s).length>=Object.keys(e).length||Object.keys(s).find(a=>e[a]===(!n||vi.all))},uae=(t,e,r)=>!t||!e||t===e||ad(t).some(n=>n&&(r?n===e:n.startsWith(e)||e.startsWith(n))),dae=(t,e,r,n,i)=>i.isOnAll?!1:!r&&i.isOnTouch?!(e||t):(r?n.isOnBlur:i.isOnBlur)?!t:(r?n.isOnChange:i.isOnChange)?t:!0,hae=(t,e)=>!$O(he(t,e)).length&&tr(t,e),fae=(t,e,r)=>{const n=ad(he(t,r));return xt(n,"root",e[r]),xt(t,r,n),t};function NR(t,e,r="validate"){if(Tn(t)||Array.isArray(t)&&t.every(Tn)||Pn(t)&&!t)return{type:r,message:Tn(t)?t:"",ref:e}}var Nl=t=>nr(t)&&!Bp(t)?t:{value:t,message:""},jR=async(t,e,r,n,i,s)=>{const{ref:a,refs:o,required:c,maxLength:u,minLength:d,min:h,max:f,pattern:p,validate:v,name:y,valueAsNumber:x,mount:g}=t._f,m=he(r,y);if(!g||e.has(y))return{};const w=o?o[0]:a,b=T=>{i&&w.reportValidity&&(w.setCustomValidity(Pn(T)?"":T||""),w.reportValidity())},_={},E=FO(a),j=mh(a),S=E||j,C=(x||AO(a))&&Kt(a.value)&&Kt(m)||Lp(a)&&a.value===""||m===""||Array.isArray(m)&&!m.length,N=tae.bind(null,y,n,_),O=(T,I,D,F=Zi.maxLength,M=Zi.minLength)=>{const V=T?I:D;_[y]={type:T?F:M,message:V,ref:a,...N(T?F:M,V)}};if(s?!Array.isArray(m)||!m.length:c&&(!S&&(C||ln(m))||Pn(m)&&!m||j&&!uG(o).isValid||E&&!hG(o).isValid)){const{value:T,message:I}=Tn(c)?{value:!!c,message:c}:Nl(c);if(T&&(_[y]={type:Zi.required,message:I,ref:w,...N(Zi.required,I)},!n))return b(I),_}if(!C&&(!ln(h)||!ln(f))){let T,I;const D=Nl(f),F=Nl(h);if(!ln(m)&&!isNaN(m)){const M=a.valueAsNumber||m&&+m;ln(D.value)||(T=M>D.value),ln(F.value)||(I=M<F.value)}else{const M=a.valueAsDate||new Date(m),V=B=>new Date(new Date().toDateString()+" "+B),q=a.type=="time",H=a.type=="week";Tn(D.value)&&m&&(T=q?V(m)>V(D.value):H?m>D.value:M>new Date(D.value)),Tn(F.value)&&m&&(I=q?V(m)<V(F.value):H?m<F.value:M<new Date(F.value))}if((T||I)&&(O(!!T,D.message,F.message,Zi.max,Zi.min),!n))return b(_[y].message),_}if((u||d)&&!C&&(Tn(m)||s&&Array.isArray(m))){const T=Nl(u),I=Nl(d),D=!ln(T.value)&&m.length>+T.value,F=!ln(I.value)&&m.length<+I.value;if((D||F)&&(O(D,T.message,I.message),!n))return b(_[y].message),_}if(p&&!C&&Tn(m)){const{value:T,message:I}=Nl(p);if(Bp(T)&&!m.match(T)&&(_[y]={type:Zi.pattern,message:I,ref:a,...N(Zi.pattern,I)},!n))return b(I),_}if(v){if(Qr(v)){const T=await v(m,r),I=NR(T,w);if(I&&(_[y]={...I,...N(Zi.validate,I.message)},!n))return b(I.message),_}else if(nr(v)){let T={};for(const I in v){if(!Vr(T)&&!n)break;const D=NR(await v[I](m,r),w,I);D&&(T={...D,...N(I,D.message)},b(D.message),n&&(_[y]=T))}if(!Vr(T)&&(_[y]={ref:w,...T},!n))return _}}return b(!0),_};const pae={mode:vi.onSubmit,reValidateMode:vi.onChange,shouldFocusError:!0};function mae(t={}){let e={...pae,...t},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Qr(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},n={},i=nr(e.defaultValues)||nr(e.values)?dr(e.defaultValues||e.values)||{}:{},s=e.shouldUnregister?{}:dr(i),a={action:!1,mount:!1,watch:!1,keepIsValid:!1},o={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},h={...d};let f={...h};const p={array:vR(),state:vR()},v=e.criteriaMode===vi.all,y=k=>A=>{clearTimeout(u),u=setTimeout(k,A)},x=async k=>{if(!a.keepIsValid&&!e.disabled&&(h.isValid||f.isValid||k)){let A;e.resolver?(A=Vr((await S()).errors),g()):A=await N(n,!0),A!==r.isValid&&p.state.next({isValid:A})}},g=(k,A)=>{!e.disabled&&(h.isValidating||h.validatingFields||f.isValidating||f.validatingFields)&&((k||Array.from(o.mount)).forEach(z=>{z&&(A?xt(r.validatingFields,z,A):tr(r.validatingFields,z))}),p.state.next({validatingFields:r.validatingFields,isValidating:!Vr(r.validatingFields)}))},m=(k,A=[],z,ie,J=!0,Q=!0)=>{if(ie&&z&&!e.disabled){if(a.action=!0,Q&&Array.isArray(he(n,k))){const fe=z(he(n,k),ie.argA,ie.argB);J&&xt(n,k,fe)}if(Q&&Array.isArray(he(r.errors,k))){const fe=z(he(r.errors,k),ie.argA,ie.argB);J&&xt(r.errors,k,fe),hae(r.errors,k)}if((h.touchedFields||f.touchedFields)&&Q&&Array.isArray(he(r.touchedFields,k))){const fe=z(he(r.touchedFields,k),ie.argA,ie.argB);J&&xt(r.touchedFields,k,fe)}(h.dirtyFields||f.dirtyFields)&&(r.dirtyFields=Pl(i,s)),p.state.next({name:k,isDirty:T(k,A),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else xt(s,k,A)},w=(k,A)=>{xt(r.errors,k,A),p.state.next({errors:r.errors})},b=k=>{r.errors=k,p.state.next({errors:r.errors,isValid:!1})},_=(k,A,z,ie)=>{const J=he(n,k);if(J){const Q=he(s,k,Kt(z)?he(i,k):z);Kt(Q)||ie&&ie.defaultChecked||A?xt(s,k,A?Q:xR(J._f)):F(k,Q),a.mount&&!a.action&&x()}},E=(k,A,z,ie,J)=>{let Q=!1,fe=!1;const ze={name:k};if(!e.disabled){if(!z||ie){(h.isDirty||f.isDirty)&&(fe=r.isDirty,r.isDirty=ze.isDirty=T(),Q=fe!==ze.isDirty);const Ge=gi(he(i,k),A);fe=!!he(r.dirtyFields,k),Ge?tr(r.dirtyFields,k):xt(r.dirtyFields,k,!0),ze.dirtyFields=r.dirtyFields,Q=Q||(h.dirtyFields||f.dirtyFields)&&fe!==!Ge}if(z){const Ge=he(r.touchedFields,k);Ge||(xt(r.touchedFields,k,z),ze.touchedFields=r.touchedFields,Q=Q||(h.touchedFields||f.touchedFields)&&Ge!==z)}Q&&J&&p.state.next(ze)}return Q?ze:{}},j=(k,A,z,ie)=>{const J=he(r.errors,k),Q=(h.isValid||f.isValid)&&Pn(A)&&r.isValid!==A;if(e.delayError&&z?(c=y(()=>w(k,z)),c(e.delayError)):(clearTimeout(u),c=null,z?xt(r.errors,k,z):tr(r.errors,k)),(z?!gi(J,z):J)||!Vr(ie)||Q){const fe={...ie,...Q&&Pn(A)?{isValid:A}:{},errors:r.errors,name:k};r={...r,...fe},p.state.next(fe)}},S=async k=>(g(k,!0),await e.resolver(s,e.context,aae(k||o.mount,n,e.criteriaMode,e.shouldUseNativeValidation))),C=async k=>{const{errors:A}=await S(k);if(g(k),k)for(const z of k){const ie=he(A,z);ie?xt(r.errors,z,ie):tr(r.errors,z)}else r.errors=A;return A},N=async(k,A,z={valid:!0})=>{for(const ie in k){const J=k[ie];if(J){const{_f:Q,...fe}=J;if(Q){const ze=o.array.has(Q.name),Ge=J._f&&oae(J._f);Ge&&h.validatingFields&&g([Q.name],!0);const It=await jR(J,o.disabled,s,v,e.shouldUseNativeValidation&&!A,ze);if(Ge&&h.validatingFields&&g([Q.name]),It[Q.name]&&(z.valid=!1,A))break;!A&&(he(It,Q.name)?ze?fae(r.errors,It,Q.name):xt(r.errors,Q.name,It[Q.name]):tr(r.errors,Q.name))}!Vr(fe)&&await N(fe,A,z)}}return z.valid},O=()=>{for(const k of o.unMount){const A=he(n,k);A&&(A._f.refs?A._f.refs.every(z=>!Gv(z)):!Gv(A._f.ref))&&De(k)}o.unMount=new Set},T=(k,A)=>!e.disabled&&(k&&A&&xt(s,k,A),!gi(W(),i)),I=(k,A,z)=>Qj(k,o,{...a.mount?s:Kt(A)?i:Tn(k)?{[k]:A}:A},z,A),D=k=>$O(he(a.mount?s:i,k,e.shouldUnregister?he(i,k,[]):[])),F=(k,A,z={})=>{const ie=he(n,k);let J=A;if(ie){const Q=ie._f;Q&&(!Q.disabled&&xt(s,k,dG(A,Q)),J=Lp(Q.ref)&&ln(A)?"":A,lG(Q.ref)?[...Q.ref.options].forEach(fe=>fe.selected=J.includes(fe.value)):Q.refs?mh(Q.ref)?Q.refs.forEach(fe=>{(!fe.defaultChecked||!fe.disabled)&&(Array.isArray(J)?fe.checked=!!J.find(ze=>ze===fe.value):fe.checked=J===fe.value||!!J)}):Q.refs.forEach(fe=>fe.checked=fe.value===J):AO(Q.ref)?Q.ref.value="":(Q.ref.value=J,Q.ref.type||p.state.next({name:k,values:dr(s)})))}(z.shouldDirty||z.shouldTouch)&&E(k,J,z.shouldTouch,z.shouldDirty,!0),z.shouldValidate&&B(k)},M=(k,A,z)=>{for(const ie in A){if(!A.hasOwnProperty(ie))return;const J=A[ie],Q=k+"."+ie,fe=he(n,Q);(o.array.has(k)||nr(J)||fe&&!fe._f)&&!no(J)?M(Q,J,z):F(Q,J,z)}},V=(k,A,z={})=>{const ie=he(n,k),J=o.array.has(k),Q=dr(A);xt(s,k,Q),J?(p.array.next({name:k,values:dr(s)}),(h.isDirty||h.dirtyFields||f.isDirty||f.dirtyFields)&&z.shouldDirty&&p.state.next({name:k,dirtyFields:Pl(i,s),isDirty:T(k,Q)})):ie&&!ie._f&&!ln(Q)?M(k,Q,z):F(k,Q,z),SR(k,o)&&p.state.next({...r,name:k}),p.state.next({name:a.mount?k:void 0,values:dr(s)})},q=async k=>{a.mount=!0;const A=k.target;let z=A.name,ie=!0;const J=he(n,z),Q=Ge=>{ie=Number.isNaN(Ge)||no(Ge)&&isNaN(Ge.getTime())||gi(Ge,he(s,z,Ge))},fe=wR(e.mode),ze=wR(e.reValidateMode);if(J){let Ge,It;const xe=A.type?xR(J._f):nG(k),ne=k.type===Ap.BLUR||k.type===Ap.FOCUS_OUT,de=!lae(J._f)&&!e.resolver&&!he(r.errors,z)&&!J._f.deps||dae(ne,he(r.touchedFields,z),r.isSubmitted,ze,fe),ce=SR(z,o,ne);xt(s,z,xe),ne?(!A||!A.readOnly)&&(J._f.onBlur&&J._f.onBlur(k),c&&c(0)):J._f.onChange&&J._f.onChange(k);const Se=E(z,xe,ne),Je=!Vr(Se)||ce;if(!ne&&p.state.next({name:z,type:k.type,values:dr(s)}),de)return(h.isValid||f.isValid)&&(e.mode==="onBlur"?ne&&x():ne||x()),Je&&p.state.next({name:z,...ce?{}:Se});if(!ne&&ce&&p.state.next({...r}),e.resolver){const{errors:Fn}=await S([z]);if(g([z]),Q(xe),ie){const si=ER(r.errors,n,z),bl=ER(Fn,n,si.name||z);Ge=bl.error,z=bl.name,It=Vr(Fn)}}else g([z],!0),Ge=(await jR(J,o.disabled,s,v,e.shouldUseNativeValidation))[z],g([z]),Q(xe),ie&&(Ge?It=!1:(h.isValid||f.isValid)&&(It=await N(n,!0)));ie&&(J._f.deps&&(!Array.isArray(J._f.deps)||J._f.deps.length>0)&&B(J._f.deps),j(z,It,Ge,Se))}},H=(k,A)=>{if(he(r.errors,A)&&k.focus)return k.focus(),1},B=async(k,A={})=>{let z,ie;const J=ad(k);if(e.resolver){const Q=await C(Kt(k)?k:J);z=Vr(Q),ie=k?!J.some(fe=>he(Q,fe)):z}else k?(ie=(await Promise.all(J.map(async Q=>{const fe=he(n,Q);return await N(fe&&fe._f?{[Q]:fe}:fe)}))).every(Boolean),!(!ie&&!r.isValid)&&x()):ie=z=await N(n);return p.state.next({...!Tn(k)||(h.isValid||f.isValid)&&z!==r.isValid?{}:{name:k},...e.resolver||!k?{isValid:z}:{},errors:r.errors}),A.shouldFocus&&!ie&&od(n,H,k?J:o.mount),ie},W=(k,A)=>{let z={...a.mount?s:i};return A&&(z=oG(A.dirtyFields?r.dirtyFields:r.touchedFields,z)),Kt(k)?z:Tn(k)?he(z,k):k.map(ie=>he(z,ie))},K=(k,A)=>({invalid:!!he((A||r).errors,k),isDirty:!!he((A||r).dirtyFields,k),error:he((A||r).errors,k),isValidating:!!he(r.validatingFields,k),isTouched:!!he((A||r).touchedFields,k)}),ue=k=>{k&&ad(k).forEach(A=>tr(r.errors,A)),p.state.next({errors:k?r.errors:{}})},ge=(k,A,z)=>{const ie=(he(n,k,{_f:{}})._f||{}).ref,J=he(r.errors,k)||{},{ref:Q,message:fe,type:ze,...Ge}=J;xt(r.errors,k,{...Ge,...A,ref:ie}),p.state.next({name:k,errors:r.errors,isValid:!1}),z&&z.shouldFocus&&ie&&ie.focus&&ie.focus()},$e=(k,A)=>Qr(k)?p.state.subscribe({next:z=>"values"in z&&k(I(void 0,A),z)}):I(k,A,!0),ye=k=>p.state.subscribe({next:A=>{uae(k.name,A.name,k.exact)&&cae(A,k.formState||h,Le,k.reRenderRoot)&&k.callback({values:{...s},...r,...A,defaultValues:i})}}).unsubscribe,Oe=k=>(a.mount=!0,f={...f,...k.formState},ye({...k,formState:{...d,...k.formState}})),De=(k,A={})=>{for(const z of k?ad(k):o.mount)o.mount.delete(z),o.array.delete(z),A.keepValue||(tr(n,z),tr(s,z)),!A.keepError&&tr(r.errors,z),!A.keepDirty&&tr(r.dirtyFields,z),!A.keepTouched&&tr(r.touchedFields,z),!A.keepIsValidating&&tr(r.validatingFields,z),!e.shouldUnregister&&!A.keepDefaultValue&&tr(i,z);p.state.next({values:dr(s)}),p.state.next({...r,...A.keepDirty?{isDirty:T()}:{}}),!A.keepIsValid&&x()},Ve=({disabled:k,name:A})=>{(Pn(k)&&a.mount||k||o.disabled.has(A))&&(k?o.disabled.add(A):o.disabled.delete(A))},vt=(k,A={})=>{let z=he(n,k);const ie=Pn(A.disabled)||Pn(e.disabled);return xt(n,k,{...z||{},_f:{...z&&z._f?z._f:{ref:{name:k}},name:k,mount:!0,...A}}),o.mount.add(k),z?Ve({disabled:Pn(A.disabled)?A.disabled:e.disabled,name:k}):_(k,!0,A.value),{...ie?{disabled:A.disabled||e.disabled}:{},...e.progressive?{required:!!A.required,min:Au(A.min),max:Au(A.max),minLength:Au(A.minLength),maxLength:Au(A.maxLength),pattern:Au(A.pattern)}:{},name:k,onChange:q,onBlur:q,ref:J=>{if(J){vt(k,A),z=he(n,k);const Q=Kt(J.value)&&J.querySelectorAll&&J.querySelectorAll("input,select,textarea")[0]||J,fe=rae(Q),ze=z._f.refs||[];if(fe?ze.find(Ge=>Ge===Q):Q===z._f.ref)return;xt(n,k,{_f:{...z._f,...fe?{refs:[...ze.filter(Gv),Q,...Array.isArray(he(i,k))?[{}]:[]],ref:{type:Q.type,name:k}}:{ref:Q}}}),_(k,!1,void 0,Q)}else z=he(n,k,{}),z._f&&(z._f.mount=!1),(e.shouldUnregister||A.shouldUnregister)&&!(iG(o.array,k)&&a.action)&&o.unMount.add(k)}}},st=()=>e.shouldFocusError&&od(n,H,o.mount),X=k=>{Pn(k)&&(p.state.next({disabled:k}),od(n,(A,z)=>{const ie=he(n,z);ie&&(A.disabled=ie._f.disabled||k,Array.isArray(ie._f.refs)&&ie._f.refs.forEach(J=>{J.disabled=ie._f.disabled||k}))},0,!1))},_e=(k,A)=>async z=>{let ie;z&&(z.preventDefault&&z.preventDefault(),z.persist&&z.persist());let J=dr(s);if(p.state.next({isSubmitting:!0}),e.resolver){const{errors:Q,values:fe}=await S();g(),r.errors=Q,J=dr(fe)}else await N(n);if(o.disabled.size)for(const Q of o.disabled)tr(J,Q);if(tr(r.errors,"root"),Vr(r.errors)){p.state.next({errors:{}});try{await k(J,z)}catch(Q){ie=Q}}else A&&await A({...r.errors},z),st(),setTimeout(st);if(p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Vr(r.errors)&&!ie,submitCount:r.submitCount+1,errors:r.errors}),ie)throw ie},qe=(k,A={})=>{he(n,k)&&(Kt(A.defaultValue)?V(k,dr(he(i,k))):(V(k,A.defaultValue),xt(i,k,dr(A.defaultValue))),A.keepTouched||tr(r.touchedFields,k),A.keepDirty||(tr(r.dirtyFields,k),r.isDirty=A.defaultValue?T(k,dr(he(i,k))):T()),A.keepError||(tr(r.errors,k),h.isValid&&x()),p.state.next({...r}))},He=(k,A={})=>{const z=k?dr(k):i,ie=dr(z),J=Vr(k),Q=J?i:ie;if(A.keepDefaultValues||(i=z),!A.keepValues){if(A.keepDirtyValues){const fe=new Set([...o.mount,...Object.keys(Pl(i,s))]);for(const ze of Array.from(fe))he(r.dirtyFields,ze)?xt(Q,ze,he(s,ze)):V(ze,he(Q,ze))}else{if(kO&&Kt(k))for(const fe of o.mount){const ze=he(n,fe);if(ze&&ze._f){const Ge=Array.isArray(ze._f.refs)?ze._f.refs[0]:ze._f.ref;if(Lp(Ge)){const It=Ge.closest("form");if(It){It.reset();break}}}}if(A.keepFieldsRef)for(const fe of o.mount)V(fe,he(Q,fe));else n={}}s=e.shouldUnregister?A.keepDefaultValues?dr(i):{}:dr(Q),p.array.next({values:{...Q}}),p.state.next({values:{...Q}})}o={mount:A.keepDirtyValues?o.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},a.mount=!h.isValid||!!A.keepIsValid||!!A.keepDirtyValues||!e.shouldUnregister&&!Vr(Q),a.watch=!!e.shouldUnregister,a.keepIsValid=!!A.keepIsValid,a.action=!1,A.keepErrors||(r.errors={}),p.state.next({submitCount:A.keepSubmitCount?r.submitCount:0,isDirty:J?!1:A.keepDirty?r.isDirty:!!(A.keepDefaultValues&&!gi(k,i)),isSubmitted:A.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:J?{}:A.keepDirtyValues?A.keepDefaultValues&&s?Pl(i,s):r.dirtyFields:A.keepDefaultValues&&k?Pl(i,k):A.keepDirty?r.dirtyFields:{},touchedFields:A.keepTouched?r.touchedFields:{},errors:A.keepErrors?r.errors:{},isSubmitSuccessful:A.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:i})},Pt=(k,A)=>He(Qr(k)?k(s):k,{...e.resetOptions,...A}),be=(k,A={})=>{const z=he(n,k),ie=z&&z._f;if(ie){const J=ie.refs?ie.refs[0]:ie.ref;J.focus&&setTimeout(()=>{J.focus(),A.shouldSelect&&Qr(J.select)&&J.select()})}},Le=k=>{r={...r,...k}},Tt={control:{register:vt,unregister:De,getFieldState:K,handleSubmit:_e,setError:ge,_subscribe:ye,_runSchema:S,_updateIsValidating:g,_focusError:st,_getWatch:I,_getDirty:T,_setValid:x,_setFieldArray:m,_setDisabledField:Ve,_setErrors:b,_getFieldArray:D,_reset:He,_resetDefaultValues:()=>Qr(e.defaultValues)&&e.defaultValues().then(k=>{Pt(k,e.resetOptions),p.state.next({isLoading:!1})}),_removeUnmounted:O,_disableForm:X,_subjects:p,_proxyFormState:h,get _fields(){return n},get _formValues(){return s},get _state(){return a},set _state(k){a=k},get _defaultValues(){return i},get _names(){return o},set _names(k){o=k},get _formState(){return r},get _options(){return e},set _options(k){e={...e,...k}}},subscribe:Oe,trigger:B,register:vt,handleSubmit:_e,watch:$e,setValue:V,getValues:W,reset:Pt,resetField:qe,clearErrors:ue,unregister:De,setError:ge,setFocus:be,getFieldState:K};return{...Tt,formControl:Tt}}function Zo(t={}){const e=Ae.useRef(void 0),r=Ae.useRef(void 0),[n,i]=Ae.useState({isDirty:!1,isValidating:!1,isLoading:Qr(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:Qr(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:n},t.defaultValues&&!Qr(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:a,...o}=mae(t);e.current={...o,formState:n}}const s=e.current.control;return s._options=t,qO(()=>{const a=s._subscribe({formState:s._proxyFormState,callback:()=>i({...s._formState}),reRenderRoot:!0});return i(o=>({...o,isReady:!0})),s._formState.isReady=!0,a},[s]),Ae.useEffect(()=>s._disableForm(t.disabled),[s,t.disabled]),Ae.useEffect(()=>{t.mode&&(s._options.mode=t.mode),t.reValidateMode&&(s._options.reValidateMode=t.reValidateMode)},[s,t.mode,t.reValidateMode]),Ae.useEffect(()=>{t.errors&&(s._setErrors(t.errors),s._focusError())},[s,t.errors]),Ae.useEffect(()=>{t.shouldUnregister&&s._subjects.state.next({values:s._getWatch()})},[s,t.shouldUnregister]),Ae.useEffect(()=>{if(s._proxyFormState.isDirty){const a=s._getDirty();a!==n.isDirty&&s._subjects.state.next({isDirty:a})}},[s,n.isDirty]),Ae.useEffect(()=>{var a;t.values&&!gi(t.values,r.current)?(s._reset(t.values,{keepFieldsRef:!0,...s._options.resetOptions}),!((a=s._options.resetOptions)===null||a===void 0)&&a.keepIsValid||s._setValid(),r.current=t.values,i(o=>({...o}))):s._resetDefaultValues()},[s,t.values]),Ae.useEffect(()=>{s._state.mount||(s._setValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),e.current.formState=aG(n,s),e.current}function CR(){var F;const{id:t}=Vi(),e=zr(),[r]=pO(),n=!!t,i=r.get("returnTo"),s=r.get("sourcePersonId"),{data:a,isLoading:o}=Jo(t),c=Nne(),u=Yc(),{data:d=[]}=rt({queryKey:["date-types"],queryFn:async()=>(await Be.getDateTypes()).data}),h=d.find(M=>M.slug==="birthday"||M.name.toLowerCase()==="birthday"),[f,p]=P.useState(!1),[v,y]=P.useState(null),[x,g]=P.useState(null),m=it({mutationFn:async M=>{const V=new FormData;return V.append("file",M),(await le.post("/prm/v1/import/vcard/parse",V,{headers:{"Content-Type":"multipart/form-data"}})).data}}),{register:w,handleSubmit:b,reset:_,watch:E,formState:{errors:j,isSubmitting:S}}=Zo({defaultValues:{first_name:"",last_name:"",nickname:"",gender:"",email:"",phone:"",phone_type:"mobile",how_we_met:"",is_favorite:!1,birthday:""}});E("phone"),P.useEffect(()=>{var M,V,q,H,B,W,K,ue,ge,$e;if(a){const ye=(V=(M=a.acf)==null?void 0:M.contact_info)==null?void 0:V.find(st=>st.contact_type==="email"),Oe=(ye==null?void 0:ye.contact_value)||"",De=(H=(q=a.acf)==null?void 0:q.contact_info)==null?void 0:H.find(st=>st.contact_type==="phone"||st.contact_type==="mobile"),Ve=(De==null?void 0:De.contact_value)||"",vt=(De==null?void 0:De.contact_type)||"mobile";_({first_name:((B=a.acf)==null?void 0:B.first_name)||"",last_name:((W=a.acf)==null?void 0:W.last_name)||"",nickname:((K=a.acf)==null?void 0:K.nickname)||"",gender:((ue=a.acf)==null?void 0:ue.gender)||"",email:Oe,phone:Ve,phone_type:vt,how_we_met:((ge=a.acf)==null?void 0:ge.how_we_met)||"",is_favorite:(($e=a.acf)==null?void 0:$e.is_favorite)||!1,birthday:""})}},[a,_]),rn(n&&a?`Edit ${((F=a.title)==null?void 0:F.rendered)||a.title||"person"}`:"New person");const C=P.useCallback(M=>{M.preventDefault(),M.stopPropagation(),M.type==="dragenter"||M.type==="dragover"?p(!0):M.type==="dragleave"&&p(!1)},[]),N=P.useCallback(M=>{M.preventDefault(),M.stopPropagation(),p(!1),g(null),M.dataTransfer.files&&M.dataTransfer.files[0]&&O(M.dataTransfer.files[0])},[]),O=M=>{const V=M.name.split(".").pop().toLowerCase();if(V!=="vcf"&&V!=="vcard"){g("Please select a vCard file (.vcf)");return}y(M),m.mutate(M,{onSuccess:q=>{_({first_name:q.first_name||"",last_name:q.last_name||"",nickname:q.nickname||"",gender:"",email:q.email||"",phone:q.phone||"",phone_type:q.phone_type||"mobile",how_we_met:q.note||"",is_favorite:!1,birthday:q.birthday||""}),q.contact_count>1&&g(`Note: File contains ${q.contact_count} contacts. Only the first contact was loaded.`)},onError:q=>{var H,B;g(((B=(H=q.response)==null?void 0:H.data)==null?void 0:B.message)||"Failed to parse vCard file"),y(null)}})},T=M=>{g(null),M.target.files&&M.target.files[0]&&O(M.target.files[0])},I=()=>{y(null),g(null),m.reset()},D=async M=>{try{const q=`${M.first_name||""} ${M.last_name||""}`.trim()||"Unnamed Person",H={title:q,status:"publish",acf:{first_name:M.first_name,last_name:M.last_name,nickname:M.nickname,gender:M.gender||null,how_we_met:M.how_we_met,is_favorite:M.is_favorite}};if(!n&&(M.email||M.phone)){const B=[];M.email&&B.push({contact_type:"email",contact_value:M.email,contact_label:""}),M.phone&&B.push({contact_type:M.phone_type||"mobile",contact_value:M.phone,contact_label:""}),H.acf.contact_info=B}if(n)H.title=q,await u.mutateAsync({id:t,data:H}),e(`/people/${t}`);else{const W=(await c.mutateAsync(H)).data.id;if(M.email)try{await Re.sideloadGravatar(W,M.email)}catch(K){console.error("Failed to load Gravatar:",K)}if(M.birthday&&h)try{const K=M.first_name||"Person";await Be.createDate({title:`${K}'s Birthday`,status:"publish",date_type:[h.id],acf:{date_value:M.birthday,is_recurring:!0,related_people:[W],reminder_days_before:7}})}catch(K){console.error("Failed to create birthday:",K)}e(i==="relationship"&&s?`/people/${s}/relationship/new?newPersonId=${W}`:`/people/${W}`)}}catch(V){console.error("Failed to save person:",V)}};return n&&o?l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:i==="relationship"&&s?l.jsxs(oe,{to:`/people/${s}/relationship/new`,className:"flex items-center text-gray-600 hover:text-gray-900",children:[l.jsx(xn,{className:"w-4 h-4 md:mr-2"}),l.jsx("span",{className:"hidden md:inline",children:"Back to add relationship"})]}):l.jsxs(oe,{to:"/people",className:"flex items-center text-gray-600 hover:text-gray-900",children:[l.jsx(xn,{className:"w-4 h-4 md:mr-2"}),l.jsx("span",{className:"hidden md:inline",children:"Back to people"})]})}),l.jsxs("div",{className:"card p-6",children:[l.jsx("h1",{className:"text-xl font-bold mb-6",children:n?"Edit person":"Add new person"}),!n&&l.jsxs("div",{className:"mb-6",children:[l.jsxs("div",{className:`relative rounded-lg border-2 border-dashed p-4 text-center transition-colors ${f?"border-primary-500 bg-primary-50":v&&!x?"border-green-300 bg-green-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:C,onDragLeave:C,onDragOver:C,onDrop:N,children:[l.jsx("input",{type:"file",accept:".vcf,.vcard",onChange:T,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),m.isPending?l.jsxs("div",{className:"flex items-center justify-center gap-2 py-2",children:[l.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-primary-600"}),l.jsx("span",{className:"text-sm text-gray-600",children:"Parsing vCard..."})]}):v&&!x?l.jsxs("div",{className:"flex items-center justify-center gap-2 py-2",children:[l.jsx(hh,{className:"h-5 w-5 text-green-600"}),l.jsxs("span",{className:"text-sm text-green-700",children:["Loaded from ",v.name]}),l.jsx("button",{type:"button",onClick:M=>{M.preventDefault(),M.stopPropagation(),I()},className:"ml-2 p-1 hover:bg-green-100 rounded",children:l.jsx(Br,{className:"h-4 w-4 text-green-600"})})]}):l.jsxs("div",{className:"flex items-center justify-center gap-2 py-2",children:[l.jsx(Ao,{className:"h-5 w-5 text-gray-400"}),l.jsxs("span",{className:"text-sm text-gray-600",children:["Drop a vCard file here to import, or ",l.jsx("span",{className:"text-primary-600",children:"browse"})]})]})]}),x&&l.jsxs("div",{className:"mt-2 flex items-start gap-2 text-sm text-amber-700 bg-amber-50 rounded-lg p-2",children:[l.jsx(Cs,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),l.jsx("span",{children:x})]})]}),l.jsxs("form",{onSubmit:b(D),className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"First name *"}),l.jsx("input",{...w("first_name",{required:"First name is required"}),className:"input",placeholder:"John"}),j.first_name&&l.jsx("p",{className:"text-sm text-red-600 mt-1",children:j.first_name.message})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Last name"}),l.jsx("input",{...w("last_name"),className:"input",placeholder:"Doe"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Nickname"}),l.jsx("input",{...w("nickname"),className:"input",placeholder:"Johnny"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Gender"}),l.jsxs("select",{...w("gender"),className:"input",children:[l.jsx("option",{value:"",children:"Select gender..."}),l.jsx("option",{value:"male",children:"Male"}),l.jsx("option",{value:"female",children:"Female"}),l.jsx("option",{value:"non_binary",children:"Non-binary"}),l.jsx("option",{value:"other",children:"Other"}),l.jsx("option",{value:"prefer_not_to_say",children:"Prefer not to say"})]})]}),!n&&l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Email"}),l.jsx("input",{type:"email",...w("email"),className:"input",placeholder:"john@example.com"}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Optional: If a Gravatar is associated with this email, it will be automatically set as the profile photo"})]}),!n&&l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Phone"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("select",{...w("phone_type"),className:"input w-28",children:[l.jsx("option",{value:"mobile",children:"Mobile"}),l.jsx("option",{value:"phone",children:"Phone"})]}),l.jsx("input",{type:"tel",...w("phone"),className:"input flex-1",placeholder:"+1 555 123 4567"})]})]}),!n&&l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Birthday"}),l.jsx("input",{type:"date",...w("birthday"),className:"input"}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Optional: Set their birthday when creating a new person"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"How we met"}),l.jsx("textarea",{...w("how_we_met"),className:"input",rows:4,placeholder:"We met at..."})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",id:"is_favorite",...w("is_favorite"),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),l.jsx("label",{htmlFor:"is_favorite",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Mark as favorite"})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[i==="relationship"&&s?l.jsx(oe,{to:`/people/${s}/relationship/new`,className:"btn-secondary",children:"Cancel"}):l.jsx(oe,{to:"/people",className:"btn-secondary",children:"Cancel"}),l.jsxs("button",{type:"submit",className:"btn-primary",disabled:S,children:[S?l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):l.jsx(Os,{className:"w-4 h-4 mr-2"}),n?"Save changes":"Create person"]})]})]})]})]})}function vae({value:t,onChange:e,companies:r,isLoading:n}){return l.jsxs("select",{value:t||"",onChange:i=>e(i.target.value?parseInt(i.target.value,10):null),className:"input",disabled:n,children:[l.jsx("option",{value:"",children:"Select an organization..."}),r.map(i=>{var s;return l.jsx("option",{value:i.id,children:((s=i.title)==null?void 0:s.rendered)||i.title},i.id)})]})}function OR(){var m,w;const{personId:t,index:e}=Vi(),r=zr();ct();const n=parseInt(e,10),i=!isNaN(n),{data:s,isLoading:a}=Jo(t),o=Yc(),{data:c=[],isLoading:u}=rt({queryKey:["companies","all"],queryFn:async()=>(await Be.getCompanies({per_page:100,orderby:"title",order:"asc"})).data}),{register:d,handleSubmit:h,reset:f,watch:p,control:v,formState:{errors:y,isSubmitting:x}}=Zo({defaultValues:{company:null,job_title:"",description:"",start_date:"",end_date:"",is_current:!1}});P.useEffect(()=>{var b;if(s&&i){const E=(((b=s.acf)==null?void 0:b.work_history)||[])[n];E&&f({company:E.company||null,job_title:E.job_title||"",description:E.description||"",start_date:E.start_date||"",end_date:E.end_date||"",is_current:E.is_current||!1})}},[s,n,i,f]),rn(i?`Edit work history - ${((m=s==null?void 0:s.title)==null?void 0:m.rendered)||(s==null?void 0:s.title)||"person"}`:`Add work history - ${((w=s==null?void 0:s.title)==null?void 0:w.rendered)||(s==null?void 0:s.title)||"person"}`);const g=async b=>{var _;try{const E=[...((_=s.acf)==null?void 0:_.work_history)||[]],j={company:b.company||null,job_title:b.job_title||"",description:b.description||"",start_date:b.start_date||"",end_date:b.end_date||"",is_current:b.is_current||!1};i?E[n]=j:E.push(j);const S=os(s.acf,{work_history:E});await o.mutateAsync({id:t,data:{acf:S}}),r(`/people/${t}`)}catch(E){console.error("Failed to save work history:",E)}};return p("is_current"),a?l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):s?l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs(oe,{to:`/people/${t}`,className:"flex items-center text-gray-600 hover:text-gray-900",children:[l.jsx(xn,{className:"w-4 h-4 md:mr-2"}),l.jsx("span",{className:"hidden md:inline",children:"Back to person"})]})}),l.jsxs("div",{className:"card p-6",children:[l.jsx("h1",{className:"text-xl font-bold mb-6",children:i?"Edit work history":"Add work history"}),l.jsxs("form",{onSubmit:h(g),className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Organization"}),l.jsx(Fp,{name:"company",control:v,render:({field:b})=>l.jsx(vae,{value:b.value,onChange:b.onChange,companies:c,isLoading:u})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Job title"}),l.jsx("input",{...d("job_title"),className:"input",placeholder:"e.g., Software Engineer"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Description"}),l.jsx("textarea",{...d("description"),className:"input",rows:4,placeholder:"Job description, responsibilities, achievements..."})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Start date"}),l.jsx("input",{type:"date",...d("start_date"),className:"input"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"End date"}),l.jsx("input",{type:"date",...d("end_date"),className:"input"}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Optional: Set a future end date to automatically mark as former when it passes"})]})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",id:"is_current",...d("is_current"),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),l.jsx("label",{htmlFor:"is_current",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Currently works here"})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[l.jsx(oe,{to:`/people/${t}`,className:"btn-secondary",children:"Cancel"}),l.jsxs("button",{type:"submit",className:"btn-primary",disabled:x,children:[x?l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):l.jsx(Os,{className:"w-4 h-4 mr-2"}),i?"Save changes":"Add work history"]})]})]})]})]}):l.jsxs("div",{className:"card p-6 text-center",children:[l.jsx("p",{className:"text-red-600",children:"Failed to load person."}),l.jsx(oe,{to:"/people",className:"btn-secondary mt-4",children:"Back to people"})]})}const gae=[{value:"email",label:"Email"},{value:"phone",label:"Phone"},{value:"mobile",label:"Mobile"},{value:"website",label:"Website"},{value:"calendar",label:"Calendar link"},{value:"linkedin",label:"LinkedIn"},{value:"twitter",label:"Twitter"},{value:"bluesky",label:"Bluesky"},{value:"threads",label:"Threads"},{value:"instagram",label:"Instagram"},{value:"facebook",label:"Facebook"},{value:"other",label:"Other"}];function PR(){var y,x;const{personId:t,index:e}=Vi(),r=zr(),n=ct(),i=parseInt(e,10),s=!isNaN(i),{data:a,isLoading:o}=Jo(t),c=Yc(),{register:u,handleSubmit:d,reset:h,formState:{errors:f,isSubmitting:p}}=Zo({defaultValues:{contact_type:"",contact_label:"",contact_value:""}});P.useEffect(()=>{var g;if(a&&s){const w=(((g=a.acf)==null?void 0:g.contact_info)||[])[i];w&&h({contact_type:w.contact_type||"",contact_label:w.contact_label||"",contact_value:w.contact_value||""})}},[a,i,s,h]),rn(s?`Edit contact detail - ${((y=a==null?void 0:a.title)==null?void 0:y.rendered)||(a==null?void 0:a.title)||"person"}`:`Add contact detail - ${((x=a==null?void 0:a.title)==null?void 0:x.rendered)||(a==null?void 0:a.title)||"person"}`);const v=async g=>{var m,w,b,_;try{const E=[...((m=a.acf)==null?void 0:m.contact_info)||[]],j={contact_type:g.contact_type||"",contact_label:g.contact_label||"",contact_value:g.contact_value||""};s?E[i]=j:E.push(j);const S=os(a.acf,{contact_info:E});if(await c.mutateAsync({id:t,data:{acf:S}}),!s&&g.contact_type==="email"&&g.contact_value&&!(a.featured_media>0||((_=(b=(w=a._embedded)==null?void 0:w["wp:featuredmedia"])==null?void 0:b[0])==null?void 0:_.source_url)||a.thumbnail))try{await Re.sideloadGravatar(t,g.contact_value),n.invalidateQueries({queryKey:["person",t]})}catch(N){console.log("No Gravatar found or failed to load:",N)}r(`/people/${t}`)}catch(E){console.error("Failed to save contact detail:",E)}};return o?l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):a?l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs(oe,{to:`/people/${t}`,className:"flex items-center text-gray-600 hover:text-gray-900",children:[l.jsx(xn,{className:"w-4 h-4 md:mr-2"}),l.jsx("span",{className:"hidden md:inline",children:"Back to person"})]})}),l.jsxs("div",{className:"card p-6",children:[l.jsx("h1",{className:"text-xl font-bold mb-6",children:s?"Edit contact detail":"Add contact detail"}),l.jsxs("form",{onSubmit:d(v),className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Contact type *"}),l.jsxs("select",{...u("contact_type",{required:"Please select a contact type"}),className:"input",children:[l.jsx("option",{value:"",children:"Select a type..."}),gae.map(g=>l.jsx("option",{value:g.value,children:g.label},g.value))]}),f.contact_type&&l.jsx("p",{className:"text-sm text-red-600 mt-1",children:f.contact_type.message})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Label"}),l.jsx("input",{...u("contact_label"),className:"input",placeholder:"e.g., Work, Personal, Home"}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Optional: Add a label to distinguish multiple entries of the same type"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Value *"}),l.jsx("input",{...u("contact_value",{required:"Please enter a contact value"}),className:"input",placeholder:"e.g., john@example.com, +1 234 567 8900"}),f.contact_value&&l.jsx("p",{className:"text-sm text-red-600 mt-1",children:f.contact_value.message})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[l.jsx(oe,{to:`/people/${t}`,className:"btn-secondary",children:"Cancel"}),l.jsxs("button",{type:"submit",className:"btn-primary",disabled:p,children:[p?l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):l.jsx(Os,{className:"w-4 h-4 mr-2"}),s?"Save changes":"Add contact detail"]})]})]})]})]}):l.jsxs("div",{className:"card p-6 text-center",children:[l.jsx("p",{className:"text-red-600",children:"Failed to load person."}),l.jsx(oe,{to:"/people",className:"btn-secondary mt-4",children:"Back to people"})]})}function yae({value:t,onChange:e,people:r,isLoading:n,excludePersonId:i}){const[s,a]=P.useState(""),[o,c]=P.useState(!1),u=P.useRef(null),d=P.useRef(null),h=P.useMemo(()=>r.filter(m=>m.id!==i).sort((m,w)=>{var E,j;const b=(m.first_name||((E=m.acf)==null?void 0:E.first_name)||"").toLowerCase(),_=(w.first_name||((j=w.acf)==null?void 0:j.first_name)||"").toLowerCase();return b<_?-1:b>_?1:0}),[r,i]),f=P.useMemo(()=>{if(!s)return h.slice(0,10);const g=s.toLowerCase();return h.filter(m=>{var E,j;const w=wo(m).toLowerCase(),b=(m.first_name||((E=m.acf)==null?void 0:E.first_name)||"").toLowerCase(),_=(m.last_name||((j=m.acf)==null?void 0:j.last_name)||"").toLowerCase();return w.includes(g)||b.includes(g)||_.includes(g)}).slice(0,10)},[h,s]),p=P.useMemo(()=>h.find(g=>g.id===t),[h,t]);P.useEffect(()=>{const g=m=>{d.current&&!d.current.contains(m.target)&&u.current&&!u.current.contains(m.target)&&c(!1)};return document.addEventListener("mousedown",g),()=>document.removeEventListener("mousedown",g)},[]);const v=g=>{e(g),a(""),c(!1)},y=()=>{e(null),a(""),c(!1)},x=p?wo(p):"";return l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"relative",children:p&&!o?l.jsxs("div",{className:"flex items-center justify-between input pr-8 cursor-text",onClick:()=>c(!0),children:[l.jsx("span",{children:x}),l.jsx("button",{type:"button",onClick:g=>{g.stopPropagation(),y()},className:"absolute right-2 text-gray-400 hover:text-gray-600",children:l.jsx(Br,{className:"w-4 h-4"})})]}):l.jsx("input",{ref:u,type:"text",value:s,onChange:g=>{a(g.target.value),c(!0)},onFocus:()=>c(!0),placeholder:"Search for a person...",className:"input",disabled:n})}),o&&(s||!p)&&l.jsx("div",{ref:d,className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:f.length>0?f.map(g=>l.jsx("button",{type:"button",onClick:()=>v(g.id),className:`w-full text-left px-4 py-2 hover:bg-gray-50 ${t===g.id?"bg-primary-50":""}`,children:wo(g)},g.id)):l.jsx("p",{className:"px-4 py-2 text-gray-500 text-sm",children:"No people found"})})]})}function TR(){var E,j;const{personId:t,index:e}=Vi(),r=zr(),[n]=pO(),i=ct(),s=parseInt(e,10),a=!isNaN(s),{data:o,isLoading:c}=Jo(t),u=Yc(),{data:d=[],isLoading:h}=Xo(),{data:f=[],isLoading:p}=rt({queryKey:["relationship-types"],queryFn:async()=>(await Be.getRelationshipTypes()).data}),{register:v,handleSubmit:y,reset:x,control:g,setValue:m,formState:{errors:w,isSubmitting:b}}=Zo({defaultValues:{related_person:null,relationship_type:"",relationship_label:""}});P.useEffect(()=>{const S=n.get("newPersonId");if(S&&!a&&!h){const C=parseInt(S,10);if(!isNaN(C))if(d.some(O=>O.id===C)){m("related_person",C);const O=new URLSearchParams(n);O.delete("newPersonId"),r({search:O.toString()},{replace:!0})}else(async()=>{try{await i.invalidateQueries({queryKey:["people"]});const{data:T=[]}=await i.refetchQueries({queryKey:["people"]});T.some(F=>F.id===C)&&m("related_person",C);const D=new URLSearchParams(n);D.delete("newPersonId"),r({search:D.toString()},{replace:!0})}catch(T){console.error("Failed to load new person:",T);const I=new URLSearchParams(n);I.delete("newPersonId"),r({search:I.toString()},{replace:!0})}})()}},[n,a,h,d,m,r,i]),P.useEffect(()=>{var S;if(o&&a){const N=(((S=o.acf)==null?void 0:S.relationships)||[])[s];N&&x({related_person:N.related_person||null,relationship_type:N.relationship_type?String(N.relationship_type):"",relationship_label:N.relationship_label||""})}},[o,s,a,x]),rn(a?`Edit relationship - ${((E=o==null?void 0:o.title)==null?void 0:E.rendered)||(o==null?void 0:o.title)||"person"}`:`Add relationship - ${((j=o==null?void 0:o.title)==null?void 0:j.rendered)||(o==null?void 0:o.title)||"person"}`);const _=async S=>{var C;try{const N=[...((C=o.acf)==null?void 0:C.relationships)||[]],O={related_person:S.related_person||null,relationship_type:S.relationship_type||null,relationship_label:S.relationship_label||""};a?N[s]=O:N.push(O);const T=os(o.acf,{relationships:N});await u.mutateAsync({id:t,data:{acf:T}}),r(`/people/${t}`)}catch(N){console.error("Failed to save relationship:",N)}};return c?l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):o?l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs(oe,{to:`/people/${t}`,className:"flex items-center text-gray-600 hover:text-gray-900",children:[l.jsx(xn,{className:"w-4 h-4 md:mr-2"}),l.jsx("span",{className:"hidden md:inline",children:"Back to person"})]})}),l.jsxs("div",{className:"card p-6",children:[l.jsx("h1",{className:"text-xl font-bold mb-6",children:a?"Edit relationship":"Add relationship"}),l.jsxs("form",{onSubmit:y(_),className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Related person *"}),l.jsx(Fp,{name:"related_person",control:g,rules:{required:"Please select a person"},render:({field:S})=>l.jsx(yae,{value:S.value,onChange:S.onChange,people:d,isLoading:h,excludePersonId:parseInt(t,10)})}),w.related_person&&l.jsx("p",{className:"text-sm text-red-600 mt-1",children:w.related_person.message}),!a&&l.jsx("div",{className:"mt-2",children:l.jsxs(oe,{to:`/people/new?returnTo=relationship&sourcePersonId=${t}`,className:"inline-flex items-center gap-1 text-sm text-primary-600 hover:text-primary-700",children:[l.jsx(Vt,{className:"w-4 h-4"}),"Add new person"]})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Relationship type"}),l.jsxs("select",{...v("relationship_type",{setValueAs:S=>S?parseInt(S,10):null}),className:"input",disabled:p,children:[l.jsx("option",{value:"",children:"Select a type..."}),f.map(S=>l.jsx("option",{value:S.id,children:S.name},S.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Custom label"}),l.jsx("input",{...v("relationship_label"),className:"input",placeholder:"e.g., Brother-in-law"}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Optional: Override the relationship type with a custom label"})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[l.jsx(oe,{to:`/people/${t}`,className:"btn-secondary",children:"Cancel"}),l.jsxs("button",{type:"submit",className:"btn-primary",disabled:b,children:[b?l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):l.jsx(Os,{className:"w-4 h-4 mr-2"}),a?"Save changes":"Add relationship"]})]})]})]})]}):l.jsxs("div",{className:"card p-6 text-center",children:[l.jsx("p",{className:"text-red-600",children:"Failed to load person."}),l.jsx(oe,{to:"/people",className:"btn-secondary mt-4",children:"Back to people"})]})}function IR(){var v,y;const{personId:t,index:e}=Vi(),r=zr(),n=parseInt(e,10),i=!isNaN(n),{data:s,isLoading:a}=Jo(t),o=Yc(),{register:c,handleSubmit:u,reset:d,formState:{errors:h,isSubmitting:f}}=Zo({defaultValues:{address_label:"",street:"",postal_code:"",city:"",state:"",country:""}});P.useEffect(()=>{var x;if(s&&i){const m=(((x=s.acf)==null?void 0:x.addresses)||[])[n];m&&d({address_label:m.address_label||"",street:m.street||"",postal_code:m.postal_code||"",city:m.city||"",state:m.state||"",country:m.country||""})}},[s,n,i,d]),rn(i?`Edit address - ${((v=s==null?void 0:s.title)==null?void 0:v.rendered)||(s==null?void 0:s.title)||"person"}`:`Add address - ${((y=s==null?void 0:s.title)==null?void 0:y.rendered)||(s==null?void 0:s.title)||"person"}`);const p=async x=>{var g;try{const m=[...((g=s.acf)==null?void 0:g.addresses)||[]],w={address_label:x.address_label||"",street:x.street||"",postal_code:x.postal_code||"",city:x.city||"",state:x.state||"",country:x.country||""};i?m[n]=w:m.push(w);const b=os(s.acf,{addresses:m});await o.mutateAsync({id:t,data:{acf:b}}),r(`/people/${t}`)}catch(m){console.error("Failed to save address:",m)}};return a?l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):s?l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs(oe,{to:`/people/${t}`,className:"flex items-center text-gray-600 hover:text-gray-900",children:[l.jsx(xn,{className:"w-4 h-4 md:mr-2"}),l.jsx("span",{className:"hidden md:inline",children:"Back to person"})]})}),l.jsxs("div",{className:"card p-6",children:[l.jsx("h1",{className:"text-xl font-bold mb-6",children:i?"Edit address":"Add address"}),l.jsxs("form",{onSubmit:u(p),className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Label"}),l.jsx("input",{...c("address_label"),className:"input",placeholder:"e.g., Home, Work"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Street"}),l.jsx("input",{...c("street"),className:"input",placeholder:"e.g., 123 Main Street"})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Postal code"}),l.jsx("input",{...c("postal_code"),className:"input",placeholder:"e.g., 12345"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"City"}),l.jsx("input",{...c("city"),className:"input",placeholder:"e.g., Amsterdam"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"State/Province"}),l.jsx("input",{...c("state"),className:"input",placeholder:"e.g., North Holland"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Country"}),l.jsx("input",{...c("country"),className:"input",placeholder:"e.g., Netherlands"})]})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[l.jsx(oe,{to:`/people/${t}`,className:"btn-secondary",children:"Cancel"}),l.jsxs("button",{type:"submit",className:"btn-primary",disabled:f,children:[f?l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):l.jsx(Os,{className:"w-4 h-4 mr-2"}),i?"Save changes":"Add address"]})]})]})]})]}):l.jsxs("div",{className:"card p-6 text-center",children:[l.jsx("p",{className:"text-red-600",children:"Failed to load person."}),l.jsx(oe,{to:"/people",className:"btn-secondary mt-4",children:"Back to people"})]})}function bae({company:t}){var e,r,n,i,s;return l.jsx(oe,{to:`/companies/${t.id}`,className:"card p-4 hover:shadow-md transition-shadow",children:l.jsxs("div",{className:"flex items-start",children:[(n=(r=(e=t._embedded)==null?void 0:e["wp:featuredmedia"])==null?void 0:r[0])!=null&&n.source_url?l.jsx("img",{src:t._embedded["wp:featuredmedia"][0].source_url,alt:Ut(t),className:"w-12 h-12 rounded-lg object-contain bg-white"}):l.jsx("div",{className:"w-12 h-12 bg-white rounded-lg flex items-center justify-center border border-gray-200",children:l.jsx(pr,{className:"w-6 h-6 text-gray-400"})}),l.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[l.jsx("h3",{className:"text-sm font-medium text-gray-900 truncate",children:Ut(t)}),((i=t.acf)==null?void 0:i.industry)&&l.jsx("p",{className:"text-sm text-gray-500",children:t.acf.industry}),((s=t.acf)==null?void 0:s.website)&&l.jsx("p",{className:"text-xs text-primary-600 truncate",children:t.acf.website})]})]})})}function xae(){const[t,e]=P.useState(""),{data:r,isLoading:n,error:i}=rt({queryKey:["companies",t],queryFn:async()=>(await Be.getCompanies({search:t,per_page:100,_embed:!0})).data}),s=P.useMemo(()=>r?[...r].sort((a,o)=>{var d,h;const c=(((d=a.title)==null?void 0:d.rendered)||a.title||"").toLowerCase(),u=(((h=o.title)==null?void 0:h.rendered)||o.title||"").toLowerCase();return c.localeCompare(u)}):[],[r]);return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[l.jsxs("div",{className:"relative flex-1 max-w-md",children:[l.jsx(qo,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),l.jsx("input",{type:"search",placeholder:"Search organizations...",value:t,onChange:a=>e(a.target.value),className:"input pl-9"})]}),l.jsxs(oe,{to:"/companies/new",className:"btn-primary",children:[l.jsx(Vt,{className:"w-4 h-4 md:mr-2"}),l.jsx("span",{className:"hidden md:inline",children:"Add organization"})]})]}),n&&l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}),i&&l.jsx("div",{className:"card p-6 text-center",children:l.jsx("p",{className:"text-red-600",children:"Failed to load organizations."})}),!n&&!i&&(s==null?void 0:s.length)===0&&l.jsxs("div",{className:"card p-12 text-center",children:[l.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(pr,{className:"w-6 h-6 text-gray-400"})}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No organizations found"}),l.jsx("p",{className:"text-gray-500 mb-4",children:t?"Try a different search.":"Add your first organization."}),!t&&l.jsxs(oe,{to:"/companies/new",className:"btn-primary",children:[l.jsx(Vt,{className:"w-4 h-4 md:mr-2"}),l.jsx("span",{className:"hidden md:inline",children:"Add organization"})]})]}),!n&&!i&&(s==null?void 0:s.length)>0&&l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(a=>l.jsx(bae,{company:a},a.id))})]})}function wae(){var w,b,_,E,j,S,C;const{id:t}=Vi(),e=zr(),r=ct(),n=P.useRef(null),[i,s]=P.useState(!1),{data:a,isLoading:o,error:c}=rt({queryKey:["company",t],queryFn:async()=>(await Be.getCompany(t,{_embed:!0})).data}),{data:u}=rt({queryKey:["company-people",t],queryFn:async()=>(await Re.getCompanyPeople(t)).data}),{data:d}=rt({queryKey:["company",a==null?void 0:a.parent],queryFn:async()=>(await Be.getCompany(a.parent,{_embed:!0})).data,enabled:!!(a!=null&&a.parent)}),{data:h=[]}=rt({queryKey:["company-children",t],queryFn:async()=>(await Be.getCompanies({parent:t,per_page:100,_embed:!0})).data}),f=((w=a==null?void 0:a.acf)==null?void 0:w.investors)||[],{data:p=[]}=rt({queryKey:["company-investors",t,f],queryFn:async()=>{if(!f.length)return[];const[N,O]=await Promise.all([Be.getPeople({per_page:100,include:f.join(","),_embed:!0}),Be.getCompanies({per_page:100,include:f.join(","),_embed:!0})]),T=(N.data||[]).map(F=>{var M,V,q,H;return{id:F.id,type:"person",name:pn(((M=F.title)==null?void 0:M.rendered)||""),thumbnail:(H=(q=(V=F._embedded)==null?void 0:V["wp:featuredmedia"])==null?void 0:q[0])==null?void 0:H.source_url}}),I=(O.data||[]).map(F=>{var M,V,q;return{id:F.id,type:"company",name:Ut(F),thumbnail:(q=(V=(M=F._embedded)==null?void 0:M["wp:featuredmedia"])==null?void 0:V[0])==null?void 0:q.source_url}}),D=[...T,...I];return f.map(F=>D.find(M=>M.id===F)).filter(Boolean)},enabled:f.length>0}),{data:v=[]}=rt({queryKey:["investments",t],queryFn:async()=>(await Re.getInvestments(t)).data,enabled:!!t}),y=it({mutationFn:()=>Be.deleteCompany(t,{force:!0}),onSuccess:()=>{r.invalidateQueries({queryKey:["companies"]}),e("/companies")}});rn(Ut(a)||"Organization"),P.useEffect(()=>{(a==null?void 0:a.status)==="trash"&&e("/companies",{replace:!0})},[a,e]);const x=async()=>{if(window.confirm("Are you sure you want to delete this organization?"))try{await y.mutateAsync()}catch(N){console.error("Failed to delete company:",N),alert("Failed to delete organization. Please try again.")}},g=async N=>{var T;const O=(T=N.target.files)==null?void 0:T[0];if(O){if(!O.type.startsWith("image/")){alert("Please select an image file");return}if(O.size>5*1024*1024){alert("Image size must be less than 5MB");return}s(!0);try{await Re.uploadCompanyLogo(t,O),r.invalidateQueries({queryKey:["company",t]}),r.invalidateQueries({queryKey:["companies"]})}catch(I){console.error("Failed to upload logo:",I),alert("Failed to upload logo. Please try again.")}finally{s(!1),n.current&&(n.current.value="")}}};if(o)return l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});if(c||!a)return l.jsxs("div",{className:"card p-6 text-center",children:[l.jsx("p",{className:"text-red-600",children:"Failed to load organization."}),l.jsx(oe,{to:"/companies",className:"btn-secondary mt-4",children:"Back to organizations"})]});if(a.status==="trash")return null;const m=a.acf||{};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs(oe,{to:"/companies",className:"flex items-center text-gray-600 hover:text-gray-900",children:[l.jsx(xn,{className:"w-4 h-4 md:mr-2"}),l.jsx("span",{className:"hidden md:inline",children:"Back to organizations"})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs(oe,{to:`/companies/${t}/edit`,className:"btn-secondary",children:[l.jsx($K,{className:"w-4 h-4 mr-2"}),"Edit"]}),l.jsxs("button",{onClick:x,className:"btn-danger",children:[l.jsx(On,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]}),l.jsx("div",{className:"card p-6",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"relative group",children:[(E=(_=(b=a._embedded)==null?void 0:b["wp:featuredmedia"])==null?void 0:_[0])!=null&&E.source_url?l.jsx("img",{src:a._embedded["wp:featuredmedia"][0].source_url,alt:Ut(a),className:"w-24 h-24 rounded-lg object-contain bg-white"}):l.jsx("div",{className:"w-24 h-24 bg-white rounded-lg flex items-center justify-center border border-gray-200",children:l.jsx(pr,{className:"w-12 h-12 text-gray-400"})}),l.jsx("div",{className:"absolute inset-0 rounded-lg bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 flex items-center justify-center cursor-pointer",onClick:()=>{var N;return(N=n.current)==null?void 0:N.click()},children:i?l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"}):l.jsx(sd,{className:"w-6 h-6 text-white opacity-0 group-hover:opacity-100 transition-opacity"})}),l.jsx("input",{ref:n,type:"file",accept:"image/*",onChange:g,className:"hidden",disabled:i})]}),l.jsxs("div",{children:[d&&l.jsxs(oe,{to:`/companies/${d.id}`,className:"text-sm text-primary-600 hover:underline flex items-center mb-1",children:[l.jsx(sR,{className:"w-3 h-3 mr-1"}),"Subsidiary of ",Ut(d)]}),l.jsx("h1",{className:"text-2xl font-bold",children:Ut(a)}),m.industry&&l.jsx("p",{className:"text-gray-500",children:m.industry}),m.website&&l.jsxs("a",{href:m.website,target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:underline flex items-center mt-1",children:[l.jsx(Zf,{className:"w-4 h-4 mr-1"}),m.website]})]})]})}),h.length>0&&l.jsxs("div",{className:"card p-6",children:[l.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[l.jsx(sR,{className:"w-5 h-5 mr-2"}),"Subsidiaries"]}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:h.map(N=>{var O,T,I,D;return l.jsxs(oe,{to:`/companies/${N.id}`,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 border border-gray-200",children:[(I=(T=(O=N._embedded)==null?void 0:O["wp:featuredmedia"])==null?void 0:T[0])!=null&&I.source_url?l.jsx("img",{src:N._embedded["wp:featuredmedia"][0].source_url,alt:Ut(N),className:"w-10 h-10 rounded object-contain bg-white"}):l.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded flex items-center justify-center",children:l.jsx(pr,{className:"w-5 h-5 text-gray-400"})}),l.jsxs("div",{className:"ml-3",children:[l.jsx("p",{className:"text-sm font-medium",children:Ut(N)}),((D=N.acf)==null?void 0:D.industry)&&l.jsx("p",{className:"text-xs text-gray-500",children:N.acf.industry})]})]},N.id)})})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"card p-6",children:[l.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[l.jsx(zi,{className:"w-5 h-5 mr-2"}),"Current employees"]}),((j=u==null?void 0:u.current)==null?void 0:j.length)>0?l.jsx("div",{className:"space-y-2",children:u.current.map(N=>{var O;return l.jsxs(oe,{to:`/people/${N.id}`,className:"flex items-center p-2 rounded hover:bg-gray-50",children:[N.thumbnail?l.jsx("img",{src:N.thumbnail,alt:"",loading:"lazy",className:"w-8 h-8 rounded-full"}):l.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center",children:l.jsx("span",{className:"text-xs text-gray-500",children:((O=N.name)==null?void 0:O[0])||"?"})}),l.jsxs("div",{className:"ml-2",children:[l.jsx("p",{className:"text-sm font-medium",children:N.name}),N.job_title&&l.jsx("p",{className:"text-xs text-gray-500",children:N.job_title})]})]},N.id)})}):l.jsx("p",{className:"text-sm text-gray-500",children:"No current employees."})]}),l.jsxs("div",{className:"card p-6",children:[l.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[l.jsx(zi,{className:"w-5 h-5 mr-2"}),"Former employees"]}),((S=u==null?void 0:u.former)==null?void 0:S.length)>0?l.jsx("div",{className:"space-y-2",children:u.former.map(N=>{var O;return l.jsxs(oe,{to:`/people/${N.id}`,className:"flex items-center p-2 rounded hover:bg-gray-50",children:[N.thumbnail?l.jsx("img",{src:N.thumbnail,alt:"",loading:"lazy",className:"w-8 h-8 rounded-full opacity-75"}):l.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center opacity-75",children:l.jsx("span",{className:"text-xs text-gray-500",children:((O=N.name)==null?void 0:O[0])||"?"})}),l.jsxs("div",{className:"ml-2",children:[l.jsx("p",{className:"text-sm font-medium text-gray-700",children:N.name}),N.job_title&&l.jsx("p",{className:"text-xs text-gray-500",children:N.job_title})]})]},N.id)})}):l.jsx("p",{className:"text-sm text-gray-500",children:"No former employees."})]})]}),p.length>0&&l.jsxs("div",{className:"card p-6",children:[l.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[l.jsx($p,{className:"w-5 h-5 mr-2"}),"Investors"]}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:p.map(N=>{const O=N.type==="person",T=O?`/people/${N.id}`:`/companies/${N.id}`;return l.jsxs(oe,{to:T,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 border border-gray-200",children:[N.thumbnail?l.jsx("img",{src:N.thumbnail,alt:N.name,loading:"lazy",className:`w-10 h-10 object-cover ${O?"rounded-full":"rounded"}`}):l.jsx("div",{className:`w-10 h-10 bg-gray-100 flex items-center justify-center ${O?"rounded-full":"rounded"}`,children:O?l.jsx(Ia,{className:"w-5 h-5 text-gray-400"}):l.jsx(pr,{className:"w-5 h-5 text-gray-400"})}),l.jsxs("div",{className:"ml-3",children:[l.jsx("p",{className:"text-sm font-medium",children:N.name}),l.jsx("p",{className:"text-xs text-gray-500",children:O?"Person":"Organization"})]})]},`${N.type}-${N.id}`)})})]}),v.length>0&&l.jsxs("div",{className:"card p-6",children:[l.jsxs("h2",{className:"font-semibold mb-4 flex items-center",children:[l.jsx($p,{className:"w-5 h-5 mr-2"}),"Invested in"]}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:v.map(N=>l.jsxs(oe,{to:`/companies/${N.id}`,className:"flex items-center p-3 rounded-lg hover:bg-gray-50 border border-gray-200",children:[N.thumbnail?l.jsx("img",{src:N.thumbnail,alt:N.name,loading:"lazy",className:"w-10 h-10 object-contain rounded"}):l.jsx("div",{className:"w-10 h-10 bg-gray-100 flex items-center justify-center rounded",children:l.jsx(pr,{className:"w-5 h-5 text-gray-400"})}),l.jsxs("div",{className:"ml-3",children:[l.jsx("p",{className:"text-sm font-medium",children:N.name}),N.industry&&l.jsx("p",{className:"text-xs text-gray-500",children:N.industry})]})]},N.id))})]}),((C=m.contact_info)==null?void 0:C.length)>0&&l.jsxs("div",{className:"card p-6",children:[l.jsx("h2",{className:"font-semibold mb-4",children:"Contact information"}),l.jsx("div",{className:"space-y-3",children:m.contact_info.map((N,O)=>l.jsxs("div",{children:[l.jsxs("span",{className:"text-sm text-gray-500",children:[N.contact_label||N.contact_type,":"]}),l.jsx("span",{className:"ml-2",children:N.contact_value})]},O))})]})]})}function RR(){var ue,ge,$e,ye,Oe,De,Ve,vt,st;const{id:t}=Vi(),e=zr(),r=ct(),n=!!t,{data:i,isLoading:s}=rt({queryKey:["company",t],queryFn:async()=>(await Be.getCompany(t,{_embed:!0})).data,enabled:n}),{data:a=[],isLoading:o}=rt({queryKey:["companies","all"],queryFn:async()=>(await Be.getCompanies({per_page:100,_embed:!0})).data}),{data:c=[],isLoading:u}=rt({queryKey:["people","all"],queryFn:async()=>(await Be.getPeople({per_page:100,_embed:!0})).data}),[d,h]=P.useState(!1),[f,p]=P.useState(!1),[v,y]=P.useState(""),[x,g]=P.useState(""),[m,w]=P.useState(!1),[b,_]=P.useState(""),[E,j]=P.useState([]),S=P.useRef(null),C=P.useRef(null),N=P.useRef(null),O=P.useMemo(()=>{const X=v.toLowerCase().trim();let _e=a.filter(qe=>!(n&&qe.id===parseInt(t)||n&&qe.parent===parseInt(t)));return X&&(_e=_e.filter(qe=>{var He;return(He=Ut(qe))==null?void 0:He.toLowerCase().includes(X)})),[..._e].sort((qe,He)=>(Ut(qe)||"").localeCompare(Ut(He)||""))},[a,v,t,n]),T=P.useMemo(()=>a.find(X=>X.id===parseInt(x)),[a,x]),I=P.useMemo(()=>{const X=b.toLowerCase().trim(),_e=c.map(be=>{var Le,jt,Tt,k;return{id:be.id,type:"person",name:pn(((Le=be.title)==null?void 0:Le.rendered)||""),thumbnail:(k=(Tt=(jt=be._embedded)==null?void 0:jt["wp:featuredmedia"])==null?void 0:Tt[0])==null?void 0:k.source_url}}),qe=a.filter(be=>!n||be.id!==parseInt(t)).map(be=>{var Le,jt,Tt;return{id:be.id,type:"company",name:Ut(be),thumbnail:(Tt=(jt=(Le=be._embedded)==null?void 0:Le["wp:featuredmedia"])==null?void 0:jt[0])==null?void 0:Tt.source_url}});let He=[..._e,...qe];X&&(He=He.filter(be=>{var Le;return(Le=be.name)==null?void 0:Le.toLowerCase().includes(X)}));const Pt=E.map(be=>`${be.type}-${be.id}`);return He=He.filter(be=>!Pt.includes(`${be.type}-${be.id}`)),He.sort((be,Le)=>(be.name||"").localeCompare(Le.name||""))},[c,a,b,E,t,n]);P.useEffect(()=>{const X=_e=>{C.current&&!C.current.contains(_e.target)&&p(!1)};if(f)return document.addEventListener("mousedown",X),()=>document.removeEventListener("mousedown",X)},[f]),P.useEffect(()=>{const X=_e=>{N.current&&!N.current.contains(_e.target)&&w(!1)};if(m)return document.addEventListener("mousedown",X),()=>document.removeEventListener("mousedown",X)},[m]);const D=it({mutationFn:X=>Be.createCompany(X),onSuccess:X=>{r.invalidateQueries({queryKey:["companies"]}),e(`/companies/${X.data.id}`)}}),F=it({mutationFn:X=>Be.updateCompany(t,X),onSuccess:()=>{r.invalidateQueries({queryKey:["company",t]}),r.invalidateQueries({queryKey:["companies"]}),r.invalidateQueries({queryKey:["people"]}),e(`/companies/${t}`)}}),M=async X=>{var qe;const _e=(qe=X.target.files)==null?void 0:qe[0];if(_e){if(!_e.type.startsWith("image/")){alert("Please select an image file");return}if(_e.size>5*1024*1024){alert("Image size must be less than 5MB");return}h(!0);try{await Re.uploadCompanyLogo(t,_e),r.invalidateQueries({queryKey:["company",t]}),r.invalidateQueries({queryKey:["companies"]}),r.invalidateQueries({queryKey:["people"]}),r.refetchQueries({queryKey:["company",t]}),r.refetchQueries({queryKey:["companies"]}),r.refetchQueries({queryKey:["people"]})}catch(He){console.error("Failed to upload logo:",He),alert("Failed to upload logo. Please try again.")}finally{h(!1),S.current&&(S.current.value="")}}},{register:V,handleSubmit:q,reset:H,formState:{errors:B,isSubmitting:W}}=Zo();P.useEffect(()=>{var X,_e,qe;i&&(H({title:pn(((X=i.title)==null?void 0:X.rendered)||""),website:((_e=i.acf)==null?void 0:_e.website)||"",industry:((qe=i.acf)==null?void 0:qe.industry)||""}),i.parent&&g(String(i.parent)))},[i,H]),P.useEffect(()=>{var X,_e;if(((_e=(X=i==null?void 0:i.acf)==null?void 0:X.investors)==null?void 0:_e.length)>0&&c.length>0&&a.length>0){const He=i.acf.investors.map(Pt=>{var jt,Tt,k,A,z,ie,J;const be=c.find(Q=>Q.id===Pt);if(be)return{id:be.id,type:"person",name:pn(((jt=be.title)==null?void 0:jt.rendered)||""),thumbnail:(A=(k=(Tt=be._embedded)==null?void 0:Tt["wp:featuredmedia"])==null?void 0:k[0])==null?void 0:A.source_url};const Le=a.find(Q=>Q.id===Pt);return Le?{id:Le.id,type:"company",name:Ut(Le),thumbnail:(J=(ie=(z=Le._embedded)==null?void 0:z["wp:featuredmedia"])==null?void 0:ie[0])==null?void 0:J.source_url}:null}).filter(Boolean);j(He)}},[i,c,a]),rn(n&&i?`Edit ${Ut(i)||"organization"}`:"New organization");const K=async X=>{const _e=E.map(He=>He.id),qe={title:X.title,status:"publish",parent:x?parseInt(x):0,acf:{website:X.website,industry:X.industry,investors:_e}};n?F.mutate(qe):D.mutate(qe)};return n&&s?l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs(oe,{to:"/companies",className:"flex items-center text-gray-600 hover:text-gray-900",children:[l.jsx(xn,{className:"w-4 h-4 md:mr-2"}),l.jsx("span",{className:"hidden md:inline",children:"Back to organizations"})]})}),l.jsxs("div",{className:"card p-6",children:[l.jsx("h1",{className:"text-xl font-bold mb-6",children:n?"Edit organization":"Add new organization"}),l.jsxs("form",{onSubmit:q(K),className:"space-y-6",children:[n&&l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Logo"}),l.jsxs("div",{className:"flex items-center gap-4",children:[($e=(ge=(ue=i==null?void 0:i._embedded)==null?void 0:ue["wp:featuredmedia"])==null?void 0:ge[0])!=null&&$e.source_url?l.jsxs("div",{className:"relative group",children:[l.jsx("img",{src:i._embedded["wp:featuredmedia"][0].source_url,alt:Ut(i)||"Organization logo",className:"w-20 h-20 rounded-lg object-contain bg-white"}),l.jsx("div",{className:"absolute inset-0 rounded-lg bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 flex items-center justify-center cursor-pointer",onClick:()=>{var X;return(X=S.current)==null?void 0:X.click()},children:d?l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"}):l.jsx(sd,{className:"w-6 h-6 text-white opacity-0 group-hover:opacity-100 transition-opacity"})})]}):l.jsxs("div",{className:"relative group",children:[l.jsx("div",{className:"w-20 h-20 bg-gray-200 rounded-lg flex items-center justify-center",children:l.jsx(sd,{className:"w-8 h-8 text-gray-400"})}),l.jsx("div",{className:"absolute inset-0 rounded-lg bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 flex items-center justify-center cursor-pointer",onClick:()=>{var X;return(X=S.current)==null?void 0:X.click()},children:d?l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"}):l.jsx(sd,{className:"w-6 h-6 text-white opacity-0 group-hover:opacity-100 transition-opacity"})})]}),l.jsxs("div",{children:[l.jsx("button",{type:"button",onClick:()=>{var X;return(X=S.current)==null?void 0:X.click()},className:"btn-secondary text-sm",disabled:d,children:(De=(Oe=(ye=i==null?void 0:i._embedded)==null?void 0:ye["wp:featuredmedia"])==null?void 0:Oe[0])!=null&&De.source_url?"Change logo":"Upload logo"}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Click the logo or button to upload a new logo"})]}),l.jsx("input",{ref:S,type:"file",accept:"image/*",onChange:M,className:"hidden",disabled:d})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Organization name *"}),l.jsx("input",{...V("title",{required:"Organization name is required"}),className:"input",placeholder:"Acme Inc."}),B.title&&l.jsx("p",{className:"text-sm text-red-600 mt-1",children:B.title.message})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Website"}),l.jsx("input",{...V("website"),type:"url",className:"input",placeholder:"https://example.com"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Industry"}),l.jsx("input",{...V("industry"),className:"input",placeholder:"Technology"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Parent organization"}),l.jsxs("div",{className:"relative",ref:C,children:[l.jsxs("button",{type:"button",onClick:()=>p(!f),className:"w-full flex items-center justify-between px-3 py-2 border border-gray-300 rounded-md bg-white text-left focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:o,children:[T?l.jsxs("div",{className:"flex items-center gap-2",children:[(st=(vt=(Ve=T._embedded)==null?void 0:Ve["wp:featuredmedia"])==null?void 0:vt[0])!=null&&st.source_url?l.jsx("img",{src:T._embedded["wp:featuredmedia"][0].source_url,alt:Ut(T),className:"w-6 h-6 rounded object-contain bg-white"}):l.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded flex items-center justify-center",children:l.jsx(pr,{className:"w-4 h-4 text-gray-500"})}),l.jsx("span",{className:"text-gray-900",children:Ut(T)})]}):l.jsx("span",{className:"text-gray-400",children:"No parent organization"}),l.jsx(kp,{className:`w-4 h-4 text-gray-400 transition-transform ${f?"rotate-180":""}`})]}),f&&l.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-hidden",children:[l.jsx("div",{className:"p-2 border-b border-gray-100",children:l.jsxs("div",{className:"relative",children:[l.jsx(qo,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),l.jsx("input",{type:"text",value:v,onChange:X=>y(X.target.value),placeholder:"Search organizations...",className:"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-primary-500",autoFocus:!0})]})}),l.jsxs("div",{className:"overflow-y-auto max-h-48",children:[l.jsx("button",{type:"button",onClick:()=>{g(""),p(!1),y("")},className:`w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-gray-50 transition-colors ${x?"":"bg-primary-50"}`,children:l.jsx("span",{className:"text-sm text-gray-500 italic",children:"No parent organization"})}),o?l.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"Loading..."}):O.length>0?O.map(X=>{var _e,qe,He;return l.jsxs("button",{type:"button",onClick:()=>{g(String(X.id)),p(!1),y("")},className:`w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-gray-50 transition-colors ${x===String(X.id)?"bg-primary-50":""}`,children:[(He=(qe=(_e=X._embedded)==null?void 0:_e["wp:featuredmedia"])==null?void 0:qe[0])!=null&&He.source_url?l.jsx("img",{src:X._embedded["wp:featuredmedia"][0].source_url,alt:Ut(X),className:"w-6 h-6 rounded object-contain bg-white"}):l.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded flex items-center justify-center",children:l.jsx(pr,{className:"w-4 h-4 text-gray-500"})}),l.jsx("span",{className:"text-sm text-gray-900 truncate",children:Ut(X)})]},X.id)}):l.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"No organizations found"})]})]})]}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select if this organization is a subsidiary or division of another"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"label flex items-center",children:[l.jsx($p,{className:"w-4 h-4 mr-2"}),"Investors"]}),E.length>0&&l.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:E.map(X=>l.jsxs("div",{className:"flex items-center gap-1.5 bg-gray-100 rounded-full pl-1 pr-2 py-1",children:[X.thumbnail?l.jsx("img",{src:X.thumbnail,alt:X.name,className:`w-5 h-5 object-cover ${X.type==="person"?"rounded-full":"rounded"}`}):l.jsx("div",{className:`w-5 h-5 bg-gray-300 flex items-center justify-center ${X.type==="person"?"rounded-full":"rounded"}`,children:X.type==="person"?l.jsx(Ia,{className:"w-3 h-3 text-gray-500"}):l.jsx(pr,{className:"w-3 h-3 text-gray-500"})}),l.jsx("span",{className:"text-sm text-gray-700",children:X.name}),l.jsx("button",{type:"button",onClick:()=>j(_e=>_e.filter(qe=>!(qe.id===X.id&&qe.type===X.type))),className:"ml-1 text-gray-400 hover:text-gray-600",children:l.jsx(Br,{className:"w-3.5 h-3.5"})})]},`${X.type}-${X.id}`))}),l.jsxs("div",{className:"relative",ref:N,children:[l.jsxs("button",{type:"button",onClick:()=>w(!m),className:"w-full flex items-center justify-between px-3 py-2 border border-gray-300 rounded-md bg-white text-left focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:o||u,children:[l.jsx("span",{className:"text-gray-400",children:"Add investor..."}),l.jsx(kp,{className:`w-4 h-4 text-gray-400 transition-transform ${m?"rotate-180":""}`})]}),m&&l.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-hidden",children:[l.jsx("div",{className:"p-2 border-b border-gray-100",children:l.jsxs("div",{className:"relative",children:[l.jsx(qo,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),l.jsx("input",{type:"text",value:b,onChange:X=>_(X.target.value),placeholder:"Search people and organizations...",className:"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-primary-500",autoFocus:!0})]})}),l.jsx("div",{className:"overflow-y-auto max-h-48",children:o||u?l.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"Loading..."}):I.length>0?I.map(X=>l.jsxs("button",{type:"button",onClick:()=>{j(_e=>[..._e,X]),_("")},className:"w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-gray-50 transition-colors",children:[X.thumbnail?l.jsx("img",{src:X.thumbnail,alt:X.name,className:`w-6 h-6 object-cover ${X.type==="person"?"rounded-full":"rounded"}`}):l.jsx("div",{className:`w-6 h-6 bg-gray-200 flex items-center justify-center ${X.type==="person"?"rounded-full":"rounded"}`,children:X.type==="person"?l.jsx(Ia,{className:"w-4 h-4 text-gray-500"}):l.jsx(pr,{className:"w-4 h-4 text-gray-500"})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("span",{className:"text-sm text-gray-900 truncate block",children:X.name}),l.jsx("span",{className:"text-xs text-gray-500",children:X.type==="person"?"Person":"Organization"})]})]},`${X.type}-${X.id}`)):l.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:b?"No results found":"No people or organizations available"})})]})]}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select people or organizations that have invested in this company"})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[l.jsx(oe,{to:"/companies",className:"btn-secondary",children:"Cancel"}),l.jsxs("button",{type:"submit",className:"btn-primary",disabled:W,children:[l.jsx(Os,{className:"w-4 h-4 mr-2"}),n?"Save changes":"Create organization"]})]})]})]})]})}function _ae({person:t,dateType:e}){var r;return l.jsx("div",{className:"flex items-center gap-3 py-2",children:l.jsxs(oe,{to:`/people/${t.id}`,className:"flex items-center gap-3 flex-1 min-w-0 hover:opacity-80",children:[t.thumbnail?l.jsx("img",{src:t.thumbnail,alt:t.name,loading:"lazy",className:"w-10 h-10 rounded-full object-cover flex-shrink-0"}):l.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center flex-shrink-0",children:l.jsx("span",{className:"text-sm font-medium text-gray-500",children:(r=t.name)==null?void 0:r[0]})}),l.jsx("span",{className:"font-medium truncate",children:t.name}),l.jsx("span",{className:"text-sm text-gray-500 capitalize flex-shrink-0",children:e})]})})}function Sae({dates:t}){const e=t[0],n=e.days_until===0?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600",i=[];return t.forEach(s=>{var o,c;const a=((o=s.date_type)==null?void 0:o[0])||"Date";((c=s.related_people)==null?void 0:c.length)>0?s.related_people.forEach(u=>{i.push({person:u,dateType:a})}):i.push({person:{id:null,name:s.title,thumbnail:null},dateType:a})}),l.jsx("div",{className:"card p-4 break-inside-avoid mb-4",children:l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:`w-14 h-14 rounded-lg ${n} flex items-center justify-center flex-shrink-0`,children:l.jsx("span",{className:"text-2xl font-bold leading-none",children:dn(new Date(e.next_occurrence),"d")})}),l.jsx("div",{className:"flex-1 min-w-0 divide-y divide-gray-100",children:i.map(({person:s,dateType:a},o)=>l.jsx(_ae,{person:s,dateType:a},s.id?`${s.id}-${a}`:`${o}-${a}`))})]})})}function Eae(){const{data:t,isLoading:e,error:r}=xne(365),n=(t==null?void 0:t.reduce((s,a)=>{const o=dn(new Date(a.next_occurrence),"yyyy-MM-dd");return s[o]||(s[o]=[]),s[o].push(a),s},{}))||{},i=Object.entries(n).reduce((s,[a,o])=>{const c=dn(new Date(a),"MMMM yyyy");return s[c]||(s[c]=[]),s[c].push(o),s},{});return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("p",{className:"text-gray-600",children:[(t==null?void 0:t.length)||0," upcoming dates"]}),l.jsxs(oe,{to:"/dates/new",className:"btn-primary",children:[l.jsx(Vt,{className:"w-4 h-4 md:mr-2"}),l.jsx("span",{className:"hidden md:inline",children:"Add date"})]})]}),e&&l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}),r&&l.jsx("div",{className:"card p-6 text-center",children:l.jsx("p",{className:"text-red-600",children:"Failed to load dates."})}),!e&&!r&&(t==null?void 0:t.length)===0&&l.jsxs("div",{className:"card p-12 text-center",children:[l.jsx(fs,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-medium mb-1",children:"No important dates"}),l.jsx("p",{className:"text-gray-500 mb-4",children:"Add birthdays, anniversaries, and more."}),l.jsxs(oe,{to:"/dates/new",className:"btn-primary",children:[l.jsx(Vt,{className:"w-4 h-4 md:mr-2"}),l.jsx("span",{className:"hidden md:inline",children:"Add date"})]})]}),Object.entries(i).map(([s,a])=>l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-gray-700 mb-4",children:s}),l.jsx("div",{className:"columns-1 md:columns-2 lg:columns-3 gap-4",children:a.map(o=>l.jsx(Sae,{dates:o},o[0].next_occurrence))})]},s))]})}function Nae({value:t=[],onChange:e,people:r=[],isLoading:n}){const[i,s]=P.useState(""),a=P.useMemo(()=>{if(!i)return r.slice(0,10);const d=i.toLowerCase();return r.filter(h=>wo(h).toLowerCase().includes(d)).slice(0,10)},[r,i]),o=P.useMemo(()=>t.map(d=>r.find(h=>h.id===d)).filter(Boolean),[t,r]),c=d=>{t.includes(d)||e([...t,d]),s("")},u=d=>{e(t.filter(h=>h!==d))};return l.jsxs("div",{className:"space-y-2",children:[o.length>0&&l.jsx("div",{className:"flex flex-wrap gap-2",children:o.map(d=>l.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-primary-100 text-primary-800 rounded-full text-sm",children:[wo(d),l.jsx("button",{type:"button",onClick:()=>u(d.id),className:"hover:text-primary-600",children:l.jsx(Br,{className:"w-3 h-3"})})]},d.id))}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"text",value:i,onChange:d=>s(d.target.value),placeholder:"Search for people...",className:"input",disabled:n}),i&&l.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:a.length>0?a.map(d=>l.jsx("button",{type:"button",onClick:()=>c(d.id),disabled:t.includes(d.id),className:`w-full text-left px-4 py-2 hover:bg-gray-50 ${t.includes(d.id)?"opacity-50 cursor-not-allowed":""}`,children:wo(d)},d.id)):l.jsx("p",{className:"px-4 py-2 text-gray-500 text-sm",children:"No people found"})})]})]})}function kR(){var H;const{id:t}=Vi(),[e]=pO(),r=zr(),n=ct(),i=!!t,s=e.get("person"),a=e.get("type"),{data:o,isLoading:c}=rt({queryKey:["important-date",t],queryFn:async()=>(await Be.getDate(t)).data,enabled:i}),u=P.useMemo(()=>{var W;if(!((W=o==null?void 0:o.acf)!=null&&W.related_people))return[];const B=o.acf.related_people;return Array.isArray(B)?B.map(K=>parseInt(typeof K=="object"&&K!==null?K.ID||K.id||K.post_id:K,10)).filter(K=>!isNaN(K)&&K>0):[]},[o]),{data:d=[],isLoading:h}=Xo({orderby:"title",order:"asc"}),{data:f=[]}=rt({queryKey:["people","specific",u],queryFn:async()=>{const B=u.map(K=>Be.getPerson(K,{_embed:!0}).then(ue=>ue.data).catch(()=>null));return(await Promise.all(B)).filter(Boolean)},enabled:u.length>0}),p=P.useMemo(()=>{const B=new Map;return d.forEach(W=>B.set(W.id,W)),f.forEach(W=>{var ue,ge,$e,ye,Oe,De,Ve,vt,st,X,_e,qe,He,Pt,be,Le;const K={...W,id:W.id,name:wo(W),first_name:((ue=W.acf)==null?void 0:ue.first_name)||"",last_name:((ge=W.acf)==null?void 0:ge.last_name)||"",is_favorite:(($e=W.acf)==null?void 0:$e.is_favorite)||!1,thumbnail:((De=(Oe=(ye=W._embedded)==null?void 0:ye["wp:featuredmedia"])==null?void 0:Oe[0])==null?void 0:De.source_url)||((qe=(_e=(X=(st=(vt=(Ve=W._embedded)==null?void 0:Ve["wp:featuredmedia"])==null?void 0:vt[0])==null?void 0:st.media_details)==null?void 0:X.sizes)==null?void 0:_e.thumbnail)==null?void 0:qe.source_url)||null,labels:((Le=(be=(Pt=(He=W._embedded)==null?void 0:He["wp:term"])==null?void 0:Pt.flat())==null?void 0:be.filter(jt=>(jt==null?void 0:jt.taxonomy)==="person_label"))==null?void 0:Le.map(jt=>jt.name))||[]};B.set(K.id,K)}),Array.from(B.values())},[d,f]),{data:v=[]}=rt({queryKey:["date-types"],queryFn:async()=>((await Be.getDateTypes()).data||[]).sort((K,ue)=>{const ge=K.name||"",$e=ue.name||"";return ge.localeCompare($e)})}),y=it({mutationFn:B=>Be.createDate(B),onSuccess:()=>{n.invalidateQueries({queryKey:["reminders"]}),r(s?`/people/${s}`:"/dates")}}),x=it({mutationFn:B=>Be.updateDate(t,B),onSuccess:()=>{n.invalidateQueries({queryKey:["reminders"]}),n.invalidateQueries({queryKey:["important-date",t]}),n.invalidateQueries({queryKey:["people"]});const B=b("related_people");(B==null?void 0:B.length)>0?r(`/people/${B[0]}`):r("/dates")}}),{register:g,handleSubmit:m,reset:w,watch:b,setValue:_,control:E,formState:{errors:j,isSubmitting:S}}=Zo({defaultValues:{title:"",date_value:"",date_type:"",related_people:[],is_recurring:!0}}),C=b("related_people"),N=b("date_type"),O=b("title");P.useEffect(()=>{var K;if((!O||["'s Birthday","Wedding of "].some(ue=>O.endsWith(ue)||O.startsWith(ue)))&&(C==null?void 0:C.length)>0&&N){const ue=v.find(Oe=>Oe.id===parseInt(N)),ge=(ue==null?void 0:ue.name)||"",$e=((K=ue==null?void 0:ue.slug)==null?void 0:K.toLowerCase())||ge.toLowerCase(),ye=C.map(Oe=>{var Ve,vt,st;const De=p.find(X=>X.id===Oe);return De?pn(((Ve=De.acf)==null?void 0:Ve.first_name)||((st=(vt=De.title)==null?void 0:vt.rendered)==null?void 0:st.split(" ")[0])||""):null}).filter(Boolean);if(ye.length>0&&ge){let Oe;$e==="wedding"?ye.length>=2?Oe=`Wedding of ${ye[0]} & ${ye[1]}`:Oe=`Wedding of ${ye[0]}`:Oe=`${ye[0]}'s ${ge}`,_("title",Oe)}}},[C,N,p,v,_,O]);const[T,I]=P.useState(!1);P.useEffect(()=>{var W,K,ue,ge,$e;if(T&&!i)return;const B=u.length===0||f.length>0;if(o&&p.length>0&&B){let ye=[];const Oe=(W=o.acf)==null?void 0:W.related_people;Oe&&(Array.isArray(Oe)?ye=Oe.map(Ve=>parseInt(typeof Ve=="object"&&Ve!==null?Ve.ID||Ve.id||Ve.post_id:Ve,10)).filter(Ve=>!isNaN(Ve)&&Ve>0):typeof Oe=="number"&&(ye=[Oe]));let De="";((K=o.date_type)==null?void 0:K.length)>0&&(De=o.date_type[0].toString()),w({title:pn(((ue=o.title)==null?void 0:ue.rendered)||""),date_value:((ge=o.acf)==null?void 0:ge.date_value)||"",date_type:De,related_people:ye,is_recurring:(($e=o.acf)==null?void 0:$e.is_recurring)??!0}),I(!0)}else if(!i&&p.length>0&&v.length>0){const ye={title:"",date_value:"",date_type:"",related_people:[],is_recurring:!0};if(s&&(ye.related_people=[parseInt(s)]),a){const Oe=v.find(De=>De.slug===a||De.name.toLowerCase()===a.toLowerCase());Oe&&(ye.date_type=Oe.id.toString())}w(ye),I(!0)}},[o,w,i,s,a,v,p,u,f,T]),rn(i&&o?`Edit ${((H=o.title)==null?void 0:H.rendered)||o.title||"date"}`:"New date");const D=async B=>{const W={title:B.title,status:"publish",date_type:B.date_type?[parseInt(B.date_type)]:[],acf:{date_value:B.date_value,related_people:B.related_people,is_recurring:B.is_recurring}};i?x.mutate(W):y.mutate(W)};if(i&&c)return l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});const F=b("related_people"),M=i&&(F==null?void 0:F.length)>0?F[0]:s,V=M?`/people/${M}`:"/dates",q=M?"Back to person":"Back to dates";return l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs(oe,{to:V,className:"flex items-center text-gray-600 hover:text-gray-900",children:[l.jsx(xn,{className:"w-4 h-4 md:mr-2"}),l.jsx("span",{className:"hidden md:inline",children:q})]})}),l.jsxs("div",{className:"card p-6",children:[l.jsx("h1",{className:"text-xl font-bold mb-6",children:i?"Edit date":"Add new date"}),l.jsxs("form",{onSubmit:m(D),className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Related people"}),l.jsx(Fp,{name:"related_people",control:E,render:({field:B})=>l.jsx(Nae,{value:B.value,onChange:B.onChange,people:p,isLoading:h})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Date type *"}),l.jsx(Fp,{name:"date_type",control:E,rules:{required:"Please select a date type"},render:({field:B})=>{const W=B.value?String(B.value):"";return l.jsxs("select",{value:W,onChange:K=>{const ue=K.target.value;B.onChange(ue)},onBlur:B.onBlur,name:B.name,ref:B.ref,className:"input",children:[l.jsx("option",{value:"",children:"Select a type..."}),v.map(K=>l.jsx("option",{value:String(K.id),children:K.name},K.id))]})}}),j.date_type&&l.jsx("p",{className:"text-sm text-red-600 mt-1",children:j.date_type.message})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Label"}),l.jsx("input",{...g("title"),className:"input",placeholder:"e.g., Mom's Birthday, Wedding Anniversary"}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-generated from person and date type. You can customize it."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Date *"}),l.jsx("input",{...g("date_value",{required:"Date is required"}),type:"date",className:"input"}),j.date_value&&l.jsx("p",{className:"text-sm text-red-600 mt-1",children:j.date_value.message})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",id:"is_recurring",...g("is_recurring"),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),l.jsx("label",{htmlFor:"is_recurring",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Repeats every year"})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[l.jsx(oe,{to:V,className:"btn-secondary",children:"Cancel"}),l.jsxs("button",{type:"submit",className:"btn-primary",disabled:S,children:[l.jsx(Os,{className:"w-4 h-4 mr-2"}),i?"Save changes":"Create date"]})]})]})]})]})}function jae(){rn("Todos");const[t,e]=P.useState(!1),[r,n]=P.useState(null),[i,s]=P.useState(!1),[a,o]=P.useState(!1),[c,u]=P.useState(null),[d,h]=P.useState(!1),[f,p]=P.useState(!1),[v,y]=P.useState(null),{data:x,isLoading:g}=AK(!0),m=FK(),w=wne(),b=TO(),_=P.useMemo(()=>JK(new Date,3),[]),{incompleteTodos:E,recentlyCompletedTodos:j,olderCompletedTodos:S}=P.useMemo(()=>{if(!x)return{incompleteTodos:[],recentlyCompletedTodos:[],olderCompletedTodos:[]};const M=[],V=[],q=[];return x.forEach(H=>{if(!H.is_completed)M.push(H);else try{const B=Md(H.created);rse(B,_)?V.push(H):q.push(H)}catch{q.push(H)}}),{incompleteTodos:M,recentlyCompletedTodos:V,olderCompletedTodos:q}},[x,_]),C=M=>{if(!M.is_completed){u(M),h(!0);return}m.mutate({todoId:M.id,data:{content:M.content,due_date:M.due_date,is_completed:!1}})},N=()=>{c&&(m.mutate({todoId:c.id,data:{content:c.content,due_date:c.due_date,is_completed:!0}}),h(!1),u(null))},O=()=>{if(!c)return;const M=new Date().toISOString().split("T")[0];y({content:c.content,activity_date:M,activity_type:"note",participants:[]}),h(!1),p(!0)},T=async M=>{if(c)try{await b.mutateAsync({personId:c.person_id,data:M}),await m.mutateAsync({todoId:c.id,data:{content:c.content,due_date:c.due_date,is_completed:!0}}),p(!1),u(null),y(null)}catch(V){console.error("Failed to create activity:",V),alert("Failed to create activity. Please try again.")}},I=async M=>{r&&(await m.mutateAsync({todoId:r.id,data:M}),s(!1),n(null))},D=async M=>{window.confirm("Are you sure you want to delete this todo?")&&await w.mutateAsync(M)};if(g)return l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});const F=[...j,...S];return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[l.jsx("h1",{className:"text-2xl font-bold",children:"Todos"}),l.jsxs("div",{className:"flex items-center gap-2",children:[S.length>0&&l.jsxs("button",{onClick:()=>e(!t),className:`btn-secondary text-sm flex items-center gap-2 ${t?"bg-primary-50 border-primary-300":""}`,children:[l.jsx(Yj,{className:"w-4 h-4"}),t?"Hide older":"Show all completed"]}),l.jsxs("button",{onClick:()=>o(!0),className:"btn-primary text-sm flex items-center gap-2",children:[l.jsx(Vt,{className:"w-4 h-4"}),"Add todo"]})]})]}),l.jsxs("div",{className:"card",children:[l.jsx("div",{className:"p-4 border-b border-gray-200",children:l.jsxs("h2",{className:"font-semibold flex items-center",children:[l.jsx(Tc,{className:"w-5 h-5 mr-2 text-gray-500"}),"Open todos (",E.length,")"]})}),E.length>0?l.jsx("div",{className:"divide-y divide-gray-100",children:E.map(M=>l.jsx(Yv,{todo:M,onToggle:C,onEdit:V=>{n(V),s(!0)},onDelete:D},M.id))}):l.jsxs("div",{className:"p-8 text-center",children:[l.jsx(Bi,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),l.jsx("p",{className:"text-gray-500",children:"No open todos"}),l.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Create todos from a person's detail page"})]})]}),j.length>0&&!t&&l.jsxs("div",{className:"card",children:[l.jsx("div",{className:"p-4 border-b border-gray-200",children:l.jsxs("h2",{className:"font-semibold flex items-center",children:[l.jsx(nne,{className:"w-5 h-5 mr-2 text-primary-600"}),"Recently completed (",j.length,")"]})}),l.jsx("div",{className:"divide-y divide-gray-100",children:j.map(M=>l.jsx(Yv,{todo:M,onToggle:C,onEdit:V=>{n(V),s(!0)},onDelete:D},M.id))})]}),t&&F.length>0&&l.jsxs("div",{className:"card",children:[l.jsx("div",{className:"p-4 border-b border-gray-200",children:l.jsxs("h2",{className:"font-semibold flex items-center",children:[l.jsx(Bi,{className:"w-5 h-5 mr-2 text-primary-600"}),"All completed todos (",F.length,")"]})}),l.jsx("div",{className:"divide-y divide-gray-100",children:F.map(M=>l.jsx(Yv,{todo:M,onToggle:C,onEdit:V=>{n(V),s(!0)},onDelete:D},M.id))})]}),l.jsx(tG,{isOpen:i,onClose:()=>{s(!1),n(null)},onSubmit:I,isLoading:m.isPending,todo:r}),l.jsx(zK,{isOpen:a,onClose:()=>o(!1)}),l.jsx(IO,{isOpen:d,onClose:()=>{h(!1),u(null)},todo:c,onComplete:N,onCompleteAsActivity:O}),l.jsx(RO,{isOpen:f,onClose:()=>{p(!1),u(null),y(null)},onSubmit:T,isLoading:b.isPending,personId:c==null?void 0:c.person_id,initialData:v})]})}function Yv({todo:t,onToggle:e,onEdit:r,onDelete:n}){var s;const i=ph(t);return l.jsxs("div",{className:"flex items-start p-4 hover:bg-gray-50 transition-colors group",children:[l.jsx("button",{onClick:()=>e(t),className:"mt-0.5 mr-3 flex-shrink-0",title:t.is_completed?"Mark as incomplete":"Mark as complete",children:t.is_completed?l.jsx(Bi,{className:"w-5 h-5 text-primary-600"}):l.jsx(Tc,{className:`w-5 h-5 ${i?"text-red-600":"text-gray-400"}`})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:`text-sm ${t.is_completed?"line-through text-gray-400":i?"text-red-600 font-medium":"text-gray-900"}`,children:t.content}),l.jsxs("div",{className:"flex flex-wrap items-center gap-3 mt-2",children:[l.jsxs(oe,{to:`/people/${t.person_id}`,className:"flex items-center gap-2 text-xs text-primary-600 hover:text-primary-700 hover:underline",children:[t.person_thumbnail?l.jsx("img",{src:t.person_thumbnail,alt:t.person_name,className:"w-5 h-5 rounded-full object-cover"}):l.jsx("div",{className:"w-5 h-5 bg-gray-200 rounded-full flex items-center justify-center",children:l.jsx("span",{className:"text-xs text-gray-500",children:(s=t.person_name)==null?void 0:s[0]})}),t.person_name]}),t.due_date&&l.jsxs("span",{className:`text-xs ${i&&!t.is_completed?"text-red-600 font-medium":"text-gray-500"}`,children:["Due: ",dn(new Date(t.due_date),"MMM d, yyyy"),i&&!t.is_completed&&" (overdue)"]})]})]}),l.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2",children:[l.jsx("button",{onClick:()=>r(t),className:"p-1 hover:bg-gray-100 rounded",title:"Edit todo",children:l.jsx(Ks,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),l.jsx("button",{onClick:()=>n(t.id),className:"p-1 hover:bg-red-50 rounded",title:"Delete todo",children:l.jsx(On,{className:"w-4 h-4 text-gray-400 hover:text-red-600"})})]})]})}function Cae(){const t=window.prmConfig||{},e=t.isAdmin||!1,r=t.userId,[n,i]=P.useState(""),[s,a]=P.useState(""),[o,c]=P.useState(!0),[u,d]=P.useState(!1),[h,f]=P.useState(!1),[p,v]=P.useState([]),[y,x]=P.useState(!0),[g,m]=P.useState(""),[w,b]=P.useState(!1),[_,E]=P.useState(null),[j,S]=P.useState(!1),[C,N]=P.useState(null),[O,T]=P.useState([]),[I,D]=P.useState(""),[F,M]=P.useState(!1),[V,q]=P.useState(""),[H,B]=P.useState("09:00"),[W,K]=P.useState(!0),[ue,ge]=P.useState(!1),[$e,ye]=P.useState(!1),[Oe,De]=P.useState(!1),[Ve,vt]=P.useState(""),[st,X]=P.useState(!1),[_e,qe]=P.useState([]),[He,Pt]=P.useState([]),[be,Le]=P.useState([]),[jt,Tt]=P.useState(!1),[k,A]=P.useState(!1),[z,ie]=P.useState(!1),[J,Q]=P.useState(""),[fe,ze]=P.useState(!1),[Ge,It]=P.useState("");P.useEffect(()=>{(async()=>{try{const je=await le.get("/prm/v1/user/ical-url");i(je.data.url),a(je.data.webcal_url)}catch(je){console.error("Failed to fetch iCal URL:",je)}finally{c(!1)}})()},[]),P.useEffect(()=>{r&&(async()=>{try{const[je,Ie]=await Promise.all([Re.getAppPasswords(r),Re.getCardDAVUrls()]);v(je.data||[]),N(Ie.data)}catch(je){console.error("Failed to fetch app passwords:",je)}finally{x(!1)}})()},[r]);const xe=async()=>{Tt(!0);try{const[te,je]=await Promise.all([Re.getSlackChannels(),Re.getSlackTargets()]);qe(te.data.channels||[]),Pt(te.data.users||[]),Le(je.data.targets||[])}catch(te){console.error("Failed to fetch Slack data:",te),vt("Failed to load Slack channels and users. Please try refreshing the page.")}finally{Tt(!1)}};P.useEffect(()=>{(async()=>{try{const je=await Re.getNotificationChannels();T(je.data.channels||["email"]),D(je.data.slack_webhook||""),B(je.data.notification_time||"09:00");const Ie=await Re.getSlackStatus(),bt=Ie.data.connected||!1;M(bt),q(Ie.data.workspace_name||""),bt&&await xe()}catch(je){console.error("Failed to fetch notification channels:",je)}finally{K(!1)}})()},[]),P.useEffect(()=>{F&&xe()},[F]),P.useEffect(()=>{const te=new URLSearchParams(window.location.search),je=te.get("slack_connected"),Ie=te.get("slack_error");je==="1"?(vt("Slack connected successfully!"),Re.getSlackStatus().then(bt=>{M(bt.data.connected||!1),q(bt.data.workspace_name||"")}),window.history.replaceState({},"",window.location.pathname)):Ie&&(vt(`Slack connection failed: ${Ie}`),window.history.replaceState({},"",window.location.pathname))},[]);const ne=async()=>{var te,je;try{const Ie=await le.get("/prm/v1/slack/oauth/authorize");window.location.href=Ie.data.oauth_url}catch(Ie){console.error("Failed to get Slack OAuth URL:",Ie),alert(((je=(te=Ie.response)==null?void 0:te.data)==null?void 0:je.message)||"Failed to connect Slack")}},de=async()=>{var te,je;if(confirm("Are you sure you want to disconnect Slack? You will stop receiving Slack notifications.")){X(!0);try{await Re.disconnectSlack(),M(!1),q(""),qe([]),Pt([]),Le([]),vt("Slack disconnected successfully"),O.includes("slack")&&await xl("slack")}catch(Ie){console.error("Failed to disconnect Slack:",Ie),alert(((je=(te=Ie.response)==null?void 0:te.data)==null?void 0:je.message)||"Failed to disconnect Slack")}finally{X(!1)}}},ce=te=>{const je=be.includes(te)?be.filter(Ie=>Ie!==te):[...be,te];Le(je)},Se=async()=>{var te,je;A(!0);try{await Re.updateSlackTargets(be),vt("Notification targets saved successfully"),setTimeout(()=>vt(""),3e3)}catch(Ie){console.error("Failed to save Slack targets:",Ie),alert(((je=(te=Ie.response)==null?void 0:te.data)==null?void 0:je.message)||"Failed to save notification targets")}finally{A(!1)}},Je=async()=>{try{await navigator.clipboard.writeText(n),d(!0),setTimeout(()=>d(!1),2e3)}catch(te){console.error("Failed to copy:",te)}},Fn=async te=>{var je,Ie;if(te.preventDefault(),!!g.trim()){b(!0);try{const bt=await Re.createAppPassword(r,g.trim());E(bt.data.password),v([...p,bt.data]),m("")}catch(bt){console.error("Failed to create app password:",bt),alert(((Ie=(je=bt.response)==null?void 0:je.data)==null?void 0:Ie.message)||"Failed to create app password")}finally{b(!1)}}},si=async(te,je)=>{var Ie,bt;if(confirm(`Are you sure you want to revoke the app password "${je}"? Any devices using this password will no longer be able to sync.`))try{await Re.deleteAppPassword(r,te),v(p.filter($r=>$r.uuid!==te))}catch($r){console.error("Failed to delete app password:",$r),alert(((bt=(Ie=$r.response)==null?void 0:Ie.data)==null?void 0:bt.message)||"Failed to revoke app password")}},bl=async()=>{try{await navigator.clipboard.writeText(_),S(!0),setTimeout(()=>S(!1),2e3)}catch(te){console.error("Failed to copy:",te)}},Jh=async te=>{try{await navigator.clipboard.writeText(te)}catch(je){console.error("Failed to copy:",je)}},Zh=te=>{if(!te)return"Never";const je=new Date(te);return je.toLocaleDateString("en-US",{month:"short",day:"numeric",year:je.getFullYear()!==new Date().getFullYear()?"numeric":void 0})},cv=async()=>{if(confirm("Are you sure you want to regenerate your calendar URL? Any existing calendar subscriptions will stop working until you update them with the new URL.")){f(!0);try{const te=await le.post("/prm/v1/user/regenerate-ical-token");i(te.data.url),a(te.data.webcal_url)}catch(te){console.error("Failed to regenerate token:",te)}finally{f(!1)}}},xl=async te=>{var Ie,bt;const je=O.includes(te)?O.filter($r=>$r!==te):[...O,te];ge(!0);try{await Re.updateNotificationChannels(je),T(je)}catch($r){console.error("Failed to update notification channels:",$r),alert(((bt=(Ie=$r.response)==null?void 0:Ie.data)==null?void 0:bt.message)||"Failed to update notification channels")}finally{ge(!1)}},uv=async te=>{var _l,tf;const[je,Ie]=te.split(":").map(Number),bt=Math.round(Ie/5)*5,$r=bt===60?(je+1)%24:je,ef=bt===60?0:bt,Qt=`${String($r).padStart(2,"0")}:${String(ef).padStart(2,"0")}`;B(Qt),De(!0);try{await Re.updateNotificationTime(Qt)}catch(Su){console.error("Failed to update notification time:",Su),alert(((tf=(_l=Su.response)==null?void 0:_l.data)==null?void 0:tf.message)||"Failed to update notification time");const rf=await Re.getNotificationChannels();B(rf.data.notification_time||"09:00")}finally{De(!1)}},Yi=async()=>{var te,je;if(confirm("This will send reminder emails for all reminders due today. Continue?")){ie(!0),Q("");try{const Ie=await Re.triggerReminders();Q(Ie.data.message||"Reminders triggered successfully.")}catch(Ie){console.error("Failed to trigger reminders:",Ie),Q(((je=(te=Ie.response)==null?void 0:te.data)==null?void 0:je.message)||"Failed to trigger reminders. Please check server logs.")}finally{ie(!1)}}},wl=async()=>{var te,je;if(confirm("This will reschedule all user reminder cron jobs based on their notification time preferences. Continue?")){ze(!0),It("");try{const Ie=await Re.rescheduleCronJobs();It(Ie.data.message||"Cron jobs rescheduled successfully.")}catch(Ie){console.error("Failed to reschedule cron jobs:",Ie),It(((je=(te=Ie.response)==null?void 0:te.data)==null?void 0:je.message)||"Failed to reschedule cron jobs. Please check server logs.")}finally{ze(!1)}}};return l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[l.jsxs("div",{className:"card p-6",children:[l.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Calendar Subscription"}),l.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Subscribe to your important dates in any calendar app (Apple Calendar, Google Calendar, Outlook, etc.)"}),o?l.jsxs("div",{className:"animate-pulse",children:[l.jsx("div",{className:"h-10 bg-gray-200 rounded mb-3"}),l.jsx("div",{className:"h-9 bg-gray-200 rounded w-24"})]}):l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label mb-1",children:"Your Calendar Feed URL"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",readOnly:!0,value:n,className:"input flex-1 text-sm font-mono bg-gray-50",onClick:te=>te.target.select()}),l.jsx("button",{onClick:Je,className:"btn-secondary whitespace-nowrap",title:"Copy URL",children:u?l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Copied"]}):l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})}),"Copy"]})})]})]}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsx("a",{href:s,className:"btn-primary",children:l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Subscribe in Calendar App"]})}),l.jsx("button",{onClick:cv,disabled:h,className:"btn-secondary",children:h?"Regenerating...":"Regenerate URL"})]}),l.jsx("p",{className:"text-xs text-gray-500",children:'Keep this URL private. Anyone with access to it can see your important dates. If you think it has been compromised, click "Regenerate URL" to get a new one.'})]})]}),l.jsxs("div",{className:"card p-6",children:[l.jsx("h2",{className:"text-lg font-semibold mb-4",children:"CardDAV Sync"}),l.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Sync your contacts with apps like Apple Contacts, Android Contacts, or Thunderbird using CardDAV."}),y?l.jsxs("div",{className:"animate-pulse",children:[l.jsx("div",{className:"h-10 bg-gray-200 rounded mb-3"}),l.jsx("div",{className:"h-24 bg-gray-200 rounded"})]}):l.jsxs("div",{className:"space-y-4",children:[C&&l.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg space-y-3",children:[l.jsx("h3",{className:"font-medium text-sm",children:"Connection Details"}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs text-gray-500",children:"Server URL (for most apps)"}),l.jsxs("div",{className:"flex gap-2 mt-1",children:[l.jsx("input",{type:"text",readOnly:!0,value:C.addressbook,className:"input flex-1 text-xs font-mono bg-white",onClick:te=>te.target.select()}),l.jsx("button",{onClick:()=>Jh(C.addressbook),className:"btn-secondary text-xs px-2",title:"Copy URL",children:"Copy"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs text-gray-500",children:"Username"}),l.jsxs("div",{className:"flex gap-2 mt-1",children:[l.jsx("input",{type:"text",readOnly:!0,value:t.userLogin||"",className:"input flex-1 text-xs font-mono bg-white",onClick:te=>te.target.select()}),l.jsx("button",{onClick:()=>Jh(t.userLogin),className:"btn-secondary text-xs px-2",title:"Copy username",children:"Copy"})]})]}),l.jsx("p",{className:"text-xs text-gray-500",children:"Use one of the app passwords below instead of your regular password."})]}),l.jsxs("form",{onSubmit:Fn,className:"flex gap-2",children:[l.jsx("input",{type:"text",value:g,onChange:te=>m(te.target.value),placeholder:"Password name (e.g., iPhone Contacts)",className:"input flex-1",disabled:w}),l.jsx("button",{type:"submit",disabled:w||!g.trim(),className:"btn-primary whitespace-nowrap",children:w?"Creating...":"Create Password"})]}),_&&l.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[l.jsx("p",{className:"text-sm text-green-800 font-medium mb-2",children:"Your new app password (copy it now, it won't be shown again):"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",readOnly:!0,value:_,className:"input flex-1 font-mono text-sm bg-white",onClick:te=>te.target.select()}),l.jsx("button",{onClick:bl,className:"btn-primary whitespace-nowrap",children:j?"Copied!":"Copy"})]}),l.jsx("button",{onClick:()=>E(null),className:"text-xs text-green-700 mt-2 hover:underline",children:"I've saved this password, hide it"})]}),p.length>0&&l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-medium mb-2",children:"Your App Passwords"}),l.jsx("div",{className:"space-y-2",children:p.map(te=>l.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-gray-200",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-sm",children:te.name}),l.jsxs("p",{className:"text-xs text-gray-500",children:["Created ",Zh(te.created),"  Last used ",Zh(te.last_used)]})]}),l.jsx("button",{onClick:()=>si(te.uuid,te.name),className:"text-red-600 hover:text-red-700 text-sm font-medium",children:"Revoke"})]},te.uuid))})]}),p.length===0&&!_&&l.jsx("p",{className:"text-sm text-gray-500",children:"No app passwords yet. Create one to start syncing your contacts."})]})]}),l.jsxs("div",{className:"card p-6",children:[l.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Data"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs(oe,{to:"/settings/import",className:"block p-3 rounded-lg border border-gray-200 hover:bg-gray-50",children:[l.jsx("p",{className:"font-medium",children:"Import Data"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Import contacts from Monica CRM or other sources"})]}),l.jsxs(oe,{to:"/settings/export",className:"block p-3 rounded-lg border border-gray-200 hover:bg-gray-50",children:[l.jsx("p",{className:"font-medium",children:"Export Data"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Export all contacts as vCard or Google Contacts CSV"})]})]})]}),l.jsxs("div",{className:"card p-6",children:[l.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Notifications"}),l.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Choose how you want to receive daily reminders about your important dates."}),W?l.jsxs("div",{className:"animate-pulse",children:[l.jsx("div",{className:"h-10 bg-gray-200 rounded mb-3"}),l.jsx("div",{className:"h-10 bg-gray-200 rounded"})]}):l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-gray-200",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:"Email"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Receive daily digest emails"})]}),l.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:O.includes("email"),onChange:()=>xl("email"),disabled:ue,className:"sr-only peer"}),l.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]}),l.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-gray-200",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:"Slack"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Receive notifications in Slack"})]}),l.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:O.includes("slack"),onChange:()=>xl("slack"),disabled:ue||!F,className:"sr-only peer"}),l.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]}),l.jsx("div",{children:F?l.jsxs("div",{className:"space-y-3",children:[l.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-green-900",children:"Connected to Slack"}),V&&l.jsxs("p",{className:"text-sm text-green-700",children:["Workspace: ",V]})]}),l.jsx("button",{onClick:de,disabled:st,className:"btn-secondary text-sm",children:st?"Disconnecting...":"Disconnect"})]})}),Ve&&l.jsx("p",{className:`text-sm ${Ve.includes("successfully")||Ve.includes("disconnected")?"text-green-600":"text-red-600"}`,children:Ve}),O.includes("slack")&&l.jsxs("div",{className:"mt-4 p-4 border border-gray-200 rounded-lg",children:[l.jsx("h3",{className:"font-medium mb-3",children:"Notification targets"}),l.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Choose where to send Slack notifications. You can select multiple channels and users."}),jt?l.jsx("p",{className:"text-sm text-gray-500",children:"Loading channels and users..."}):l.jsxs(l.Fragment,{children:[_e.length>0&&l.jsxs("div",{className:"mb-4",children:[l.jsx("h4",{className:"text-sm font-medium mb-2",children:"Channels"}),l.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:_e.map(te=>l.jsxs("label",{className:"flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:be.includes(te.id),onChange:()=>ce(te.id),className:"mr-2 cursor-pointer"}),l.jsx("span",{className:"text-sm",children:te.name})]},te.id))})]}),He.length>0&&l.jsxs("div",{className:"mb-4",children:[l.jsx("h4",{className:"text-sm font-medium mb-2",children:"Direct messages"}),l.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:He.map(te=>l.jsxs("label",{className:"flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:be.includes(te.id),onChange:()=>ce(te.id),className:"mr-2 cursor-pointer"}),l.jsxs("span",{className:"text-sm",children:[te.name,te.is_me&&l.jsx("span",{className:"text-gray-500 ml-1",children:"(you)"})]})]},te.id))})]}),_e.length===0&&He.length===0&&!jt&&l.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"No channels or users found. Make sure the Slack app has the necessary permissions."}),l.jsx("button",{onClick:Se,disabled:k,className:"btn-primary text-sm mt-4",children:k?"Saving...":"Save targets"})]})]})]}):l.jsxs("div",{className:"space-y-3",children:[l.jsx("button",{onClick:ne,className:"btn-primary w-full",disabled:st,children:"Connect Slack"}),Ve&&l.jsx("p",{className:`text-sm ${Ve.includes("successfully")?"text-green-600":"text-red-600"}`,children:Ve}),l.jsx("p",{className:"text-xs text-gray-500",children:"Connect your Slack workspace to receive daily reminder notifications. You'll be able to message channels or receive direct messages."})]})}),I&&!F&&l.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:l.jsxs("p",{className:"text-sm text-yellow-800",children:[l.jsx("strong",{children:"Legacy webhook detected."})," Please connect via OAuth for better functionality. Your webhook will continue to work until you connect via OAuth."]})}),l.jsxs("div",{children:[l.jsx("label",{className:"label mb-1",children:"Notification Time (UTC)"}),l.jsx("input",{type:"time",value:H,onChange:te=>uv(te.target.value),className:"input",disabled:Oe,step:"300"}),H&&l.jsxs("div",{className:"mt-2 p-2 bg-gray-50 rounded text-sm",children:[l.jsxs("p",{className:"text-gray-700",children:[l.jsx("span",{className:"font-medium",children:"UTC:"})," ",H]}),l.jsxs("p",{className:"text-gray-700 mt-1",children:[l.jsxs("span",{className:"font-medium",children:["Your time (",Intl.DateTimeFormat().resolvedOptions().timeZone,"):"]})," ",(()=>{try{const[te,je]=H.split(":"),Ie=new Date;return Ie.setUTCHours(parseInt(te),parseInt(je),0,0),Ie.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})}catch{return H}})()]})]}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Choose the UTC time when you want to receive your daily reminder digest. Reminders are sent within a 1-hour window of your selected time."})]})]})]}),e&&l.jsxs("div",{className:"card p-6",children:[l.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Administration"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs(oe,{to:"/settings/relationship-types",className:"block p-3 rounded-lg border border-gray-200 hover:bg-gray-50",children:[l.jsx("p",{className:"font-medium",children:"Relationship Types"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Manage relationship types and their inverse mappings"})]}),l.jsxs(oe,{to:"/settings/user-approval",className:"block p-3 rounded-lg border border-gray-200 hover:bg-gray-50",children:[l.jsx("p",{className:"font-medium",children:"User Approval"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Approve or deny access for new users"})]}),l.jsxs("button",{onClick:Yi,disabled:z,className:"w-full text-left p-3 rounded-lg border border-gray-200 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[l.jsx("p",{className:"font-medium",children:"Trigger reminders"}),l.jsx("p",{className:"text-sm text-gray-500",children:z?"Sending...":"Manually send reminders for today"}),J&&l.jsx("p",{className:"text-sm text-green-600 mt-1",children:J})]}),l.jsxs("button",{onClick:wl,disabled:fe,className:"w-full text-left p-3 rounded-lg border border-gray-200 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[l.jsx("p",{className:"font-medium",children:"Reschedule cron jobs"}),l.jsx("p",{className:"text-sm text-gray-500",children:fe?"Rescheduling...":"Reschedule all user reminder cron jobs"}),Ge&&l.jsx("p",{className:"text-sm text-green-600 mt-1",children:Ge})]})]})]}),l.jsxs("div",{className:"card p-6",children:[l.jsx("h2",{className:"text-lg font-semibold mb-4",children:"About"}),l.jsxs("p",{className:"text-sm text-gray-600",children:[Rc," v",t.version||"1.0.0",l.jsx("br",{}),"Built with WordPress, React, and Tailwind CSS."]})]})]})}function $R({value:t,onChange:e,relationshipTypes:r,currentTypeId:n=null}){const[i,s]=P.useState(""),[a,o]=P.useState(!1),c=P.useRef(null),u=P.useRef(null),d=P.useMemo(()=>r.sort((x,g)=>{const m=(x.name||"").toLowerCase(),w=(g.name||"").toLowerCase();return m<w?-1:m>w?1:0}),[r]),h=P.useMemo(()=>{if(!i)return d.slice(0,10);const x=i.toLowerCase();return d.filter(g=>(g.name||"").toLowerCase().includes(x)).slice(0,10)},[d,i]),f=P.useMemo(()=>d.find(x=>x.id===parseInt(t,10)),[d,t]);P.useEffect(()=>{const x=g=>{u.current&&!u.current.contains(g.target)&&c.current&&!c.current.contains(g.target)&&o(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]);const p=x=>{e(x?x.toString():""),s(""),o(!1)},v=()=>{e(""),s(""),o(!1)},y=f?f.name:"";return l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"relative",children:f&&!a?l.jsxs("div",{className:"flex items-center justify-between input pr-8 cursor-text",onClick:()=>o(!0),children:[l.jsx("span",{children:y}),l.jsx("button",{type:"button",onClick:x=>{x.stopPropagation(),v()},className:"absolute right-2 text-gray-400 hover:text-gray-600",children:l.jsx(Br,{className:"w-4 h-4"})})]}):l.jsx("input",{ref:c,type:"text",value:i,onChange:x=>{s(x.target.value),o(!0)},onFocus:()=>o(!0),placeholder:"Search for a relationship type...",className:"input"})}),a&&(i||!f)&&l.jsx("div",{ref:u,className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:h.length>0?l.jsxs(l.Fragment,{children:[l.jsx("button",{type:"button",onClick:()=>p(null),className:`w-full text-left px-4 py-2 hover:bg-gray-50 ${t?"":"bg-primary-50"}`,children:l.jsx("span",{className:"text-gray-500 italic",children:"None (no inverse)"})}),h.map(x=>l.jsx("button",{type:"button",onClick:()=>p(x.id),className:`w-full text-left px-4 py-2 hover:bg-gray-50 ${t===x.id.toString()?"bg-primary-50":""}`,children:x.name},x.id))]}):l.jsx("p",{className:"px-4 py-2 text-gray-500 text-sm",children:"No relationship types found"})})]})}function Oae(){rn("Relationship Types - Settings");const t=ct();if(!((window.prmConfig||{}).isAdmin||!1))return l.jsx("div",{className:"max-w-2xl mx-auto",children:l.jsxs("div",{className:"card p-8 text-center",children:[l.jsx(RK,{className:"w-16 h-16 mx-auto text-amber-500 mb-4"}),l.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Access Denied"}),l.jsx("p",{className:"text-gray-600 mb-6",children:"You don't have permission to manage relationship types. This feature is only available to administrators."}),l.jsx(oe,{to:"/settings",className:"btn-primary",children:"Back to Settings"})]})});const{data:n=[],isLoading:i}=rt({queryKey:["relationship-types"],queryFn:async()=>(await Be.getRelationshipTypes()).data}),[s,a]=P.useState(null),[o,c]=P.useState(""),[u,d]=P.useState(""),[h,f]=P.useState(""),[p,v]=P.useState(""),[y,x]=P.useState(!1),g=it({mutationFn:async({id:O,name:T,inverseId:I})=>{const D={name:T};return I&&(D.acf={inverse_relationship_type:parseInt(I,10)}),Be.updateRelationshipType(O,D)},onSuccess:()=>{t.invalidateQueries({queryKey:["relationship-types"]}),a(null),c(""),d("")}}),m=it({mutationFn:async({name:O,inverseId:T})=>{const I={name:O};return T&&(I.acf={inverse_relationship_type:parseInt(T,10)}),Be.createRelationshipType(I)},onSuccess:()=>{t.invalidateQueries({queryKey:["relationship-types"]}),f(""),v(""),x(!1)}}),w=it({mutationFn:O=>Be.deleteRelationshipType(O),onSuccess:()=>{t.invalidateQueries({queryKey:["relationship-types"]})}}),b=it({mutationFn:()=>Be.restoreRelationshipTypeDefaults(),onSuccess:()=>{t.invalidateQueries({queryKey:["relationship-types"]}),alert("Default relationship type configurations have been restored.")},onError:()=>{alert("Failed to restore defaults. Please try again.")}});function _(){return l.jsxs("button",{onClick:()=>{window.confirm("This will restore all default inverse mappings and gender-dependent settings. Continue?")&&b.mutate()},disabled:b.isPending,className:"btn-secondary flex items-center gap-2",title:"Restore default inverse mappings and gender-dependent settings",children:[b.isPending?l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-600"}):l.jsx(TK,{className:"w-4 h-4"}),l.jsx("span",{className:"hidden md:inline",children:"Restore Defaults"})]})}const E=O=>{var I;a(O.id),c(O.name);const T=(I=O.acf)==null?void 0:I.inverse_relationship_type;d(T?T.toString():"")},j=()=>{a(null),c(""),d("")},S=()=>{if(!o.trim()){alert("Name is required");return}g.mutate({id:s,name:o.trim(),inverseId:u||null})},C=()=>{if(!h.trim()){alert("Name is required");return}m.mutate({name:h.trim(),inverseId:p||null})},N=(O,T)=>{window.confirm(`Are you sure you want to delete "${T}"? This cannot be undone.`)&&w.mutate(O)};return i?l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):l.jsx("div",{className:"max-w-4xl mx-auto space-y-6",children:l.jsxs("div",{className:"card p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("h1",{className:"text-2xl font-bold",children:"Relationship Types"}),l.jsx("div",{className:"flex gap-2",children:!y&&l.jsxs(l.Fragment,{children:[l.jsx(_,{}),l.jsxs("button",{onClick:()=>x(!0),className:"btn-primary flex items-center gap-2",children:[l.jsx(Vt,{className:"w-4 h-4"}),l.jsx("span",{className:"hidden md:inline",children:"Add Relationship Type"})]})]})})]}),y&&l.jsxs("div",{className:"mb-6 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[l.jsx("h3",{className:"font-semibold mb-4",children:"Add New Relationship Type"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Name *"}),l.jsx("input",{type:"text",value:h,onChange:O=>f(O.target.value),className:"input",placeholder:"e.g., Parent, Spouse, Colleague"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Inverse Relationship Type"}),l.jsx($R,{value:p,onChange:v,relationshipTypes:n}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Select the inverse relationship type. For example, if this is "Parent", select "Child". If this is "Spouse" or "Acquaintance", select the same type (e.g., "Spouse"  "Spouse").'})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:C,disabled:m.isPending,className:"btn-primary flex items-center gap-2",children:[m.isPending?l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):l.jsx(Os,{className:"w-4 h-4"}),l.jsx("span",{className:"hidden md:inline",children:"Save"})]}),l.jsx("button",{onClick:()=>{x(!1),f(""),v("")},className:"btn-secondary",children:"Cancel"})]})]})]}),l.jsx("div",{className:"space-y-2",children:n.length===0?l.jsx("p",{className:"text-gray-500 text-center py-8",children:"No relationship types found."}):n.map(O=>{var M,V;const T=s===O.id,I=(M=O.acf)==null?void 0:M.inverse_relationship_type,D=typeof I=="object"&&(I!=null&&I.ID)?I.ID:typeof I=="object"&&(I!=null&&I.id)?I.id:I,F=D?n.find(q=>q.id===D):null;return l.jsx("div",{className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50",children:T?l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Name *"}),l.jsx("input",{type:"text",value:o,onChange:q=>c(q.target.value),className:"input"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label",children:"Inverse Relationship Type"}),l.jsx($R,{value:u,onChange:d,relationshipTypes:n,currentTypeId:O.id}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Select the inverse relationship type. For example, if this is "Parent", select "Child". If this is "Spouse" or "Acquaintance", select the same type (e.g., "Spouse"  "Spouse").'})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:S,disabled:g.isPending,className:"btn-primary flex items-center gap-2",children:[g.isPending?l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):l.jsx(Os,{className:"w-4 h-4"}),l.jsx("span",{className:"hidden md:inline",children:"Save"})]}),l.jsxs("button",{onClick:j,className:"btn-secondary flex items-center gap-2",children:[l.jsx(Br,{className:"w-4 h-4"}),l.jsx("span",{className:"hidden md:inline",children:"Cancel"})]})]})]}):l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"font-medium",children:O.name}),F&&l.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:["Inverse: ",l.jsx("span",{className:"font-medium",children:F.name})]}),!F&&((V=O.acf)==null?void 0:V.inverse_relationship_type)===null&&l.jsx("div",{className:"text-sm text-gray-400 mt-1 italic",children:"No inverse relationship"})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>E(O),className:"p-2 text-gray-600 hover:text-primary-600 hover:bg-primary-50 rounded",title:"Edit",children:l.jsx(hne,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>N(O.id,O.name),className:"p-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded",title:"Delete",children:l.jsx(On,{className:"w-4 h-4"})})]})]})},O.id)})})]})})}function Pae(){var g,m,w;const[t,e]=P.useState(null),[r,n]=P.useState(""),[i,s]=P.useState(!1),[a,o]=P.useState(null),c=ct(),u=it({mutationFn:async b=>{const _=new FormData;return _.append("file",b),(await le.post("/prm/v1/import/monica/validate",_,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:b=>{o(b)},onError:b=>{var _,E;o({valid:!1,error:((E=(_=b.response)==null?void 0:_.data)==null?void 0:E.message)||"Failed to validate file"})}}),d=it({mutationFn:async({file:b,monicaUrl:_})=>{const E=new FormData;return E.append("file",b),E.append("monica_url",_),(await le.post("/prm/v1/import/monica",E,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:()=>{c.invalidateQueries({queryKey:["people"]}),c.invalidateQueries({queryKey:["companies"]}),c.invalidateQueries({queryKey:["dates"]}),c.invalidateQueries({queryKey:["dashboard"]})}}),h=P.useCallback(b=>{b.preventDefault(),b.stopPropagation(),b.type==="dragenter"||b.type==="dragover"?s(!0):b.type==="dragleave"&&s(!1)},[]),f=P.useCallback(b=>{b.preventDefault(),b.stopPropagation(),s(!1),b.dataTransfer.files&&b.dataTransfer.files[0]&&v(b.dataTransfer.files[0])},[]),p=b=>{b.target.files&&b.target.files[0]&&v(b.target.files[0])},v=b=>{if(!b.name.endsWith(".sql")){o({valid:!1,error:"Please select a SQL file"});return}e(b),o(null),d.reset(),u.mutate(b)},y=()=>{if(!r.trim()){o(b=>({...b,urlError:"Please enter your Monica instance URL"}));return}t&&(a!=null&&a.valid)&&d.mutate({file:t,monicaUrl:r.trim()})},x=()=>{e(null),n(""),o(null),u.reset(),d.reset()};return l.jsxs("div",{className:"space-y-4",children:[l.jsx("h2",{className:"text-lg font-semibold",children:"Import from Monica"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Import contacts, relationships, notes, and photos from a Monica CRM SQL export file. Reimporting the same file will update existing contacts instead of creating duplicates."}),d.isSuccess?l.jsx("div",{className:"rounded-lg border border-green-200 bg-green-50 p-4",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx(Pc,{className:"h-5 w-5 text-green-600 mt-0.5"}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"font-medium text-green-900",children:"Import Complete"}),l.jsxs("div",{className:"mt-2 text-sm text-green-800 space-y-1",children:[l.jsxs("p",{children:["Contacts imported: ",d.data.stats.contacts_imported]}),l.jsxs("p",{children:["Contacts updated: ",d.data.stats.contacts_updated]}),l.jsxs("p",{children:["Contacts skipped (partial): ",d.data.stats.contacts_skipped]}),l.jsxs("p",{children:["Photos imported: ",d.data.stats.photos_imported]}),l.jsxs("p",{children:["Organizations created: ",d.data.stats.companies_created]}),l.jsxs("p",{children:["Relationships created: ",d.data.stats.relationships_created]}),l.jsxs("p",{children:["Important dates created: ",d.data.stats.dates_created]}),l.jsxs("p",{children:["Notes created: ",d.data.stats.notes_created]}),((g=d.data.stats.errors)==null?void 0:g.length)>0&&l.jsxs("div",{className:"mt-2 pt-2 border-t border-green-200",children:[l.jsx("p",{className:"font-medium",children:"Errors:"}),l.jsx("ul",{className:"list-disc list-inside",children:d.data.stats.errors.map((b,_)=>l.jsx("li",{children:b},_))})]})]}),l.jsx("button",{onClick:x,className:"mt-3 text-sm text-green-700 hover:text-green-800 font-medium",children:"Import another file"})]})]})}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:`relative rounded-lg border-2 border-dashed p-8 text-center transition-colors ${i?"border-primary-500 bg-primary-50":t?"border-green-300 bg-green-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:h,onDragLeave:h,onDragOver:h,onDrop:f,children:[l.jsx("input",{type:"file",accept:".sql",onChange:p,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),u.isPending?l.jsxs("div",{className:"flex flex-col items-center gap-2",children:[l.jsx(Mo,{className:"h-8 w-8 text-primary-600 animate-spin"}),l.jsx("p",{className:"text-gray-600",children:"Validating file..."})]}):t?l.jsxs("div",{className:"flex flex-col items-center gap-2",children:[l.jsx(hh,{className:"h-8 w-8 text-green-600"}),l.jsx("p",{className:"font-medium text-gray-900",children:t.name}),l.jsxs("p",{className:"text-sm text-gray-500",children:[(t.size/1024/1024).toFixed(2)," MB"]})]}):l.jsxs("div",{className:"flex flex-col items-center gap-2",children:[l.jsx(Ao,{className:"h-8 w-8 text-gray-400"}),l.jsx("p",{className:"text-gray-600",children:"Drag and drop your Monica SQL export file here, or click to browse"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Supports SQL export files"})]})]}),a&&l.jsx("div",{className:`rounded-lg border p-4 ${a.valid?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:a.valid?l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx(Pc,{className:"h-5 w-5 text-green-600 mt-0.5"}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"font-medium text-green-900",children:"File validated successfully"}),l.jsxs("div",{className:"mt-2 text-sm text-green-800",children:[l.jsxs("p",{children:["Export format: ",a.version]}),l.jsxs("p",{children:["Contacts to import: ",a.summary.contacts]}),l.jsxs("p",{children:["Relationships: ",a.summary.relationships]}),l.jsxs("p",{children:["Notes: ",a.summary.notes]}),l.jsxs("p",{children:["Dates: ",a.summary.reminders]}),l.jsxs("p",{children:["Photos: ",a.summary.photos]}),l.jsxs("p",{children:["Organizations: ",a.summary.companies_count]})]})]})]}):l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx(Cs,{className:"h-5 w-5 text-red-600 mt-0.5"}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium text-red-900",children:"Validation failed"}),l.jsx("p",{className:"text-sm text-red-700 mt-1",children:a.error})]})]})}),(a==null?void 0:a.valid)&&l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{htmlFor:"monica-url",className:"block text-sm font-medium text-gray-700",children:"Monica Instance URL"}),l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:l.jsx(OK,{className:"h-4 w-4 text-gray-400"})}),l.jsx("input",{type:"url",id:"monica-url",value:r,onChange:b=>n(b.target.value),placeholder:"https://your-monica-instance.com",className:`block w-full pl-10 pr-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 ${a.urlError?"border-red-300":"border-gray-300"}`})]}),a.urlError&&l.jsx("p",{className:"text-sm text-red-600",children:a.urlError}),l.jsx("p",{className:"text-xs text-gray-500",children:"Enter the URL of your Monica instance to import photos. Photos will be downloaded from this URL."})]}),(a==null?void 0:a.valid)&&l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:y,disabled:d.isPending,className:"btn-primary flex items-center gap-2",children:d.isPending?l.jsxs(l.Fragment,{children:[l.jsx(Mo,{className:"h-4 w-4 animate-spin"}),l.jsx("span",{className:"hidden md:inline",children:"Importing..."})]}):l.jsxs(l.Fragment,{children:[l.jsx(Ao,{className:"h-4 w-4"}),l.jsx("span",{className:"hidden md:inline",children:"Start Import"})]})}),l.jsx("button",{onClick:x,disabled:d.isPending,className:"btn-secondary",children:"Cancel"})]}),d.isError&&l.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx(Cs,{className:"h-5 w-5 text-red-600 mt-0.5"}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium text-red-900",children:"Import failed"}),l.jsx("p",{className:"text-sm text-red-700 mt-1",children:((w=(m=d.error.response)==null?void 0:m.data)==null?void 0:w.message)||"An error occurred during import"})]})]})})]})]})}function Tae(){var y,x,g;const[t,e]=P.useState(null),[r,n]=P.useState(!1),[i,s]=P.useState(null),a=ct(),o=it({mutationFn:async m=>{const w=new FormData;return w.append("file",m),(await le.post("/prm/v1/import/vcard/validate",w,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:m=>{s(m)},onError:m=>{var w,b;s({valid:!1,error:((b=(w=m.response)==null?void 0:w.data)==null?void 0:b.message)||"Failed to validate file"})}}),c=it({mutationFn:async m=>{const w=new FormData;return w.append("file",m),(await le.post("/prm/v1/import/vcard",w,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:()=>{a.invalidateQueries({queryKey:["people"]}),a.invalidateQueries({queryKey:["companies"]}),a.invalidateQueries({queryKey:["dates"]}),a.invalidateQueries({queryKey:["dashboard"]})}}),u=P.useCallback(m=>{m.preventDefault(),m.stopPropagation(),m.type==="dragenter"||m.type==="dragover"?n(!0):m.type==="dragleave"&&n(!1)},[]),d=P.useCallback(m=>{m.preventDefault(),m.stopPropagation(),n(!1),m.dataTransfer.files&&m.dataTransfer.files[0]&&f(m.dataTransfer.files[0])},[]),h=m=>{m.target.files&&m.target.files[0]&&f(m.target.files[0])},f=m=>{const w=m.name.split(".").pop().toLowerCase();if(w!=="vcf"&&w!=="vcard"){s({valid:!1,error:"Please select a vCard file (.vcf)"});return}e(m),s(null),c.reset(),o.mutate(m)},p=()=>{t&&(i!=null&&i.valid)&&c.mutate(t)},v=()=>{e(null),s(null),o.reset(),c.reset()};return l.jsxs("div",{className:"space-y-4",children:[l.jsx("h2",{className:"text-lg font-semibold",children:"Import from vCard"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Import contacts from a vCard (.vcf) file. vCard is a standard format supported by most contact apps including Apple Contacts, Outlook, and Android. Files can contain one or multiple contacts."}),c.isSuccess?l.jsx("div",{className:"rounded-lg border border-green-200 bg-green-50 p-4",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx(Pc,{className:"h-5 w-5 text-green-600 mt-0.5"}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"font-medium text-green-900",children:"Import Complete"}),l.jsxs("div",{className:"mt-2 text-sm text-green-800 space-y-1",children:[l.jsxs("p",{children:["Contacts imported: ",c.data.stats.contacts_imported]}),l.jsxs("p",{children:["Contacts updated: ",c.data.stats.contacts_updated]}),l.jsxs("p",{children:["Contacts skipped: ",c.data.stats.contacts_skipped]}),l.jsxs("p",{children:["Photos imported: ",c.data.stats.photos_imported]}),l.jsxs("p",{children:["Organizations created: ",c.data.stats.companies_created]}),l.jsxs("p",{children:["Birthdays created: ",c.data.stats.dates_created]}),l.jsxs("p",{children:["Notes created: ",c.data.stats.notes_created]}),((y=c.data.stats.errors)==null?void 0:y.length)>0&&l.jsxs("div",{className:"mt-2 pt-2 border-t border-green-200",children:[l.jsx("p",{className:"font-medium",children:"Errors:"}),l.jsx("ul",{className:"list-disc list-inside",children:c.data.stats.errors.map((m,w)=>l.jsx("li",{children:m},w))})]})]}),l.jsx("button",{onClick:v,className:"mt-3 text-sm text-green-700 hover:text-green-800 font-medium",children:"Import another file"})]})]})}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:`relative rounded-lg border-2 border-dashed p-8 text-center transition-colors ${r?"border-primary-500 bg-primary-50":t?"border-green-300 bg-green-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:u,onDragLeave:u,onDragOver:u,onDrop:d,children:[l.jsx("input",{type:"file",accept:".vcf,.vcard",onChange:h,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),o.isPending?l.jsxs("div",{className:"flex flex-col items-center gap-2",children:[l.jsx(Mo,{className:"h-8 w-8 text-primary-600 animate-spin"}),l.jsx("p",{className:"text-gray-600",children:"Validating file..."})]}):t?l.jsxs("div",{className:"flex flex-col items-center gap-2",children:[l.jsx(hh,{className:"h-8 w-8 text-green-600"}),l.jsx("p",{className:"font-medium text-gray-900",children:t.name}),l.jsxs("p",{className:"text-sm text-gray-500",children:[(t.size/1024).toFixed(2)," KB"]})]}):l.jsxs("div",{className:"flex flex-col items-center gap-2",children:[l.jsx(Ao,{className:"h-8 w-8 text-gray-400"}),l.jsx("p",{className:"text-gray-600",children:"Drag and drop your vCard file here, or click to browse"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Supports .vcf and .vcard files"})]})]}),i&&l.jsx("div",{className:`rounded-lg border p-4 ${i.valid?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:i.valid?l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx(Pc,{className:"h-5 w-5 text-green-600 mt-0.5"}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"font-medium text-green-900",children:"File validated successfully"}),l.jsxs("div",{className:"mt-3 grid grid-cols-2 sm:grid-cols-3 gap-3",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[l.jsx(zi,{className:"h-4 w-4"}),l.jsxs("span",{children:[i.summary.contacts," contacts"]})]}),i.summary.companies_count>0&&l.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[l.jsx(pr,{className:"h-4 w-4"}),l.jsxs("span",{children:[i.summary.companies_count," organizations"]})]}),i.summary.birthdays>0&&l.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[l.jsx(NK,{className:"h-4 w-4"}),l.jsxs("span",{children:[i.summary.birthdays," birthdays"]})]}),i.summary.photos>0&&l.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[l.jsx(CK,{className:"h-4 w-4"}),l.jsxs("span",{children:[i.summary.photos," photos"]})]}),i.summary.notes>0&&l.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[l.jsx(DK,{className:"h-4 w-4"}),l.jsxs("span",{children:[i.summary.notes," notes"]})]})]})]})]}):l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx(Cs,{className:"h-5 w-5 text-red-600 mt-0.5"}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium text-red-900",children:"Validation failed"}),l.jsx("p",{className:"text-sm text-red-700 mt-1",children:i.error})]})]})}),(i==null?void 0:i.valid)&&l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:p,disabled:c.isPending,className:"btn-primary flex items-center gap-2",children:c.isPending?l.jsxs(l.Fragment,{children:[l.jsx(Mo,{className:"h-4 w-4 animate-spin"}),l.jsx("span",{className:"hidden md:inline",children:"Importing..."})]}):l.jsxs(l.Fragment,{children:[l.jsx(Ao,{className:"h-4 w-4"}),l.jsx("span",{className:"hidden md:inline",children:"Start Import"})]})}),l.jsx("button",{onClick:v,disabled:c.isPending,className:"btn-secondary",children:"Cancel"})]}),c.isError&&l.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx(Cs,{className:"h-5 w-5 text-red-600 mt-0.5"}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium text-red-900",children:"Import failed"}),l.jsx("p",{className:"text-sm text-red-700 mt-1",children:((g=(x=c.error.response)==null?void 0:x.data)==null?void 0:g.message)||"An error occurred during import"})]})]})})]})]})}function Iae(){var b,_,E;const[t,e]=P.useState(null),[r,n]=P.useState(!1),[i,s]=P.useState(null),[a,o]=P.useState({}),c=ct(),u=it({mutationFn:async j=>{const S=new FormData;return S.append("file",j),(await le.post("/prm/v1/import/google-contacts/validate",S,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:j=>{var S;if(s(j),((S=j.duplicates)==null?void 0:S.length)>0){const C={};j.duplicates.forEach(N=>{C[N.index]="merge"}),o(C)}},onError:j=>{var S,C;s({valid:!1,error:((C=(S=j.response)==null?void 0:S.data)==null?void 0:C.message)||"Failed to validate file"})}}),d=it({mutationFn:async({file:j,decisions:S})=>{const C=new FormData;return C.append("file",j),C.append("decisions",JSON.stringify(S)),(await le.post("/prm/v1/import/google-contacts",C,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:()=>{c.invalidateQueries({queryKey:["people"]}),c.invalidateQueries({queryKey:["companies"]}),c.invalidateQueries({queryKey:["dates"]}),c.invalidateQueries({queryKey:["dashboard"]})}}),h=P.useCallback(j=>{j.preventDefault(),j.stopPropagation(),j.type==="dragenter"||j.type==="dragover"?n(!0):j.type==="dragleave"&&n(!1)},[]),f=P.useCallback(j=>{j.preventDefault(),j.stopPropagation(),n(!1),j.dataTransfer.files&&j.dataTransfer.files[0]&&v(j.dataTransfer.files[0])},[]),p=j=>{j.target.files&&j.target.files[0]&&v(j.target.files[0])},v=j=>{if(!j.name.endsWith(".csv")){s({valid:!1,error:"Please select a CSV file"});return}e(j),s(null),o({}),d.reset(),u.mutate(j)},y=(j,S)=>{o(C=>({...C,[j]:S}))},x=()=>{t&&(i!=null&&i.valid)&&d.mutate({file:t,decisions:a})},g=()=>{e(null),s(null),o({}),u.reset(),d.reset()},m=(i==null?void 0:i.duplicates)||[],w=m.length>0;return l.jsxs("div",{className:"space-y-4",children:[l.jsx("h2",{className:"text-lg font-semibold",children:"Import from Google Contacts"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Import contacts from a Google Contacts CSV export. To export from Google:"}),l.jsxs("ol",{className:"text-sm text-gray-600 list-decimal list-inside space-y-1 ml-2",children:[l.jsxs("li",{children:["Go to ",l.jsx("a",{href:"https://contacts.google.com",target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:underline",children:"contacts.google.com"})]}),l.jsx("li",{children:'Click "Export" in the left sidebar'}),l.jsx("li",{children:'Select "Google CSV" format and click "Export"'})]}),d.isSuccess?l.jsx("div",{className:"rounded-lg border border-green-200 bg-green-50 p-4",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx(Pc,{className:"h-5 w-5 text-green-600 mt-0.5"}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"font-medium text-green-900",children:"Import Complete"}),l.jsxs("div",{className:"mt-2 text-sm text-green-800 space-y-1",children:[l.jsxs("p",{children:["Contacts imported: ",d.data.stats.contacts_imported]}),l.jsxs("p",{children:["Contacts updated: ",d.data.stats.contacts_updated]}),l.jsxs("p",{children:["Contacts skipped: ",d.data.stats.contacts_skipped]}),l.jsxs("p",{children:["Organizations created: ",d.data.stats.companies_created]}),l.jsxs("p",{children:["Birthdays created: ",d.data.stats.dates_created]}),l.jsxs("p",{children:["Notes created: ",d.data.stats.notes_created]}),l.jsxs("p",{children:["Photos imported: ",d.data.stats.photos_imported]}),((b=d.data.stats.errors)==null?void 0:b.length)>0&&l.jsxs("div",{className:"mt-2 pt-2 border-t border-green-200",children:[l.jsx("p",{className:"font-medium",children:"Errors:"}),l.jsx("ul",{className:"list-disc list-inside",children:d.data.stats.errors.map((j,S)=>l.jsx("li",{children:j},S))})]})]}),l.jsx("button",{onClick:g,className:"mt-3 text-sm text-green-700 hover:text-green-800 font-medium",children:"Import another file"})]})]})}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:`relative rounded-lg border-2 border-dashed p-8 text-center transition-colors ${r?"border-primary-500 bg-primary-50":t?"border-green-300 bg-green-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:h,onDragLeave:h,onDragOver:h,onDrop:f,children:[l.jsx("input",{type:"file",accept:".csv",onChange:p,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),u.isPending?l.jsxs("div",{className:"flex flex-col items-center gap-2",children:[l.jsx(Mo,{className:"h-8 w-8 text-primary-600 animate-spin"}),l.jsx("p",{className:"text-gray-600",children:"Validating file..."})]}):t?l.jsxs("div",{className:"flex flex-col items-center gap-2",children:[l.jsx(CO,{className:"h-8 w-8 text-green-600"}),l.jsx("p",{className:"font-medium text-gray-900",children:t.name}),l.jsxs("p",{className:"text-sm text-gray-500",children:[(t.size/1024).toFixed(2)," KB"]})]}):l.jsxs("div",{className:"flex flex-col items-center gap-2",children:[l.jsx(Ao,{className:"h-8 w-8 text-gray-400"}),l.jsx("p",{className:"text-gray-600",children:"Drag and drop your Google Contacts CSV here, or click to browse"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Supports Google CSV format"})]})]}),i&&l.jsx("div",{className:`rounded-lg border p-4 ${i.valid?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:i.valid?l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx(Pc,{className:"h-5 w-5 text-green-600 mt-0.5"}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"font-medium text-green-900",children:"File validated successfully"}),l.jsxs("div",{className:"mt-3 grid grid-cols-2 sm:grid-cols-3 gap-3",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[l.jsx(zi,{className:"h-4 w-4"}),l.jsxs("span",{children:[i.summary.contacts," contacts"]})]}),i.summary.companies_count>0&&l.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[l.jsx(pr,{className:"h-4 w-4"}),l.jsxs("span",{children:[i.summary.companies_count," organizations"]})]}),i.summary.birthdays>0&&l.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[l.jsx(NK,{className:"h-4 w-4"}),l.jsxs("span",{children:[i.summary.birthdays," birthdays"]})]}),i.summary.notes>0&&l.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[l.jsx(DK,{className:"h-4 w-4"}),l.jsxs("span",{children:[i.summary.notes," notes"]})]}),i.summary.photos>0&&l.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[l.jsx(CK,{className:"h-4 w-4"}),l.jsxs("span",{children:[i.summary.photos," photos"]})]})]})]})]}):l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx(Cs,{className:"h-5 w-5 text-red-600 mt-0.5"}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium text-red-900",children:"Validation failed"}),l.jsx("p",{className:"text-sm text-red-700 mt-1",children:i.error})]})]})}),(i==null?void 0:i.valid)&&w&&l.jsx("div",{className:"rounded-lg border border-amber-200 bg-amber-50 p-4",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx(ene,{className:"h-5 w-5 text-amber-600 mt-0.5 flex-shrink-0"}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("h3",{className:"font-medium text-amber-900",children:[m.length," contact",m.length>1?"s":""," may already exist"]}),l.jsx("p",{className:"text-sm text-amber-700 mt-1",children:"Choose how to handle each potential duplicate:"}),l.jsx("div",{className:"mt-4 space-y-4",children:m.map(j=>l.jsx(Rae,{duplicate:j,decision:a[j.index]||"merge",onDecision:S=>y(j.index,S)},j.index))})]})]})}),(i==null?void 0:i.valid)&&l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:x,disabled:d.isPending,className:"btn-primary flex items-center gap-2",children:d.isPending?l.jsxs(l.Fragment,{children:[l.jsx(Mo,{className:"h-4 w-4 animate-spin"}),l.jsx("span",{className:"hidden md:inline",children:"Importing..."})]}):l.jsxs(l.Fragment,{children:[l.jsx(Ao,{className:"h-4 w-4"}),l.jsx("span",{className:"hidden md:inline",children:"Start Import"})]})}),l.jsx("button",{onClick:g,disabled:d.isPending,className:"btn-secondary",children:"Cancel"})]}),d.isError&&l.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx(Cs,{className:"h-5 w-5 text-red-600 mt-0.5"}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium text-red-900",children:"Import failed"}),l.jsx("p",{className:"text-sm text-red-700 mt-1",children:((E=(_=d.error.response)==null?void 0:_.data)==null?void 0:E.message)||"An error occurred during import"})]})]})})]})]})}function Rae({duplicate:t,decision:e,onDecision:r}){var n,i;return l.jsxs("div",{className:"bg-white rounded-lg border border-amber-200 p-4",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"From CSV"}),l.jsx("p",{className:"font-medium text-gray-900 truncate",children:t.csv_name}),t.csv_org&&l.jsx("p",{className:"text-sm text-gray-600 truncate",children:t.csv_org}),t.csv_email&&l.jsx("p",{className:"text-sm text-gray-500 truncate",children:t.csv_email})]}),l.jsx("div",{className:"hidden sm:flex items-center text-gray-400",children:l.jsx("span",{className:"text-lg",children:""})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"Existing Contact"}),l.jsxs("div",{className:"flex items-start gap-3",children:[t.existing_photo?l.jsx("img",{src:t.existing_photo,alt:"",className:"w-10 h-10 rounded-full object-cover flex-shrink-0"}):l.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center flex-shrink-0",children:l.jsx("span",{className:"text-gray-500 text-sm font-medium",children:((i=(n=t.existing_name)==null?void 0:n.charAt(0))==null?void 0:i.toUpperCase())||"?"})}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("p",{className:"font-medium text-gray-900 truncate",children:t.existing_name}),t.existing_org&&l.jsx("p",{className:"text-sm text-gray-600 truncate",children:t.existing_org}),t.existing_email&&l.jsx("p",{className:"text-sm text-gray-500 truncate",children:t.existing_email})]})]})]})]}),l.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[l.jsxs("button",{type:"button",onClick:()=>r("merge"),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${e==="merge"?"bg-primary-100 text-primary-800 ring-2 ring-primary-500":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[l.jsx(fne,{className:"h-4 w-4"}),"Update existing"]}),l.jsxs("button",{type:"button",onClick:()=>r("new"),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${e==="new"?"bg-green-100 text-green-800 ring-2 ring-green-500":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[l.jsx(mne,{className:"h-4 w-4"}),"Create new"]}),l.jsxs("button",{type:"button",onClick:()=>r("skip"),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${e==="skip"?"bg-gray-200 text-gray-800 ring-2 ring-gray-500":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[l.jsx(pne,{className:"h-4 w-4"}),"Skip"]})]})]})}const DR=[{id:"vcard",name:"vCard",description:"Apple Contacts, Outlook, Android",icon:hh,component:Tae},{id:"google",name:"Google Contacts",description:"CSV export from Google",icon:CO,component:Iae},{id:"monica",name:"Monica CRM",description:"SQL export from Monica",icon:sne,component:Pae}];function kae(){var n;rn("Import - Settings");const[t,e]=P.useState("vcard"),r=(n=DR.find(i=>i.id===t))==null?void 0:n.component;return l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(oe,{to:"/settings",className:"btn-secondary flex items-center gap-2",children:[l.jsx(xn,{className:"w-4 h-4"}),l.jsx("span",{className:"hidden md:inline",children:"Back to Settings"})]}),l.jsx("h1",{className:"text-2xl font-semibold",children:"Import Contacts"})]}),l.jsxs("div",{className:"card p-6",children:[l.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Import your contacts from various sources. Existing contacts with matching names will be updated instead of duplicated."}),l.jsx("div",{className:"border-b border-gray-200 mb-6",children:l.jsx("nav",{className:"-mb-px flex space-x-6","aria-label":"Import types",children:DR.map(i=>{const s=i.icon,a=t===i.id;return l.jsxs("button",{onClick:()=>e(i.id),className:`group inline-flex items-center py-3 px-1 border-b-2 font-medium text-sm transition-colors ${a?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[l.jsx(s,{className:`mr-2 h-5 w-5 ${a?"text-primary-500":"text-gray-400 group-hover:text-gray-500"}`}),l.jsxs("div",{className:"text-left",children:[l.jsx("span",{className:"block",children:i.name}),l.jsx("span",{className:`block text-xs font-normal ${a?"text-primary-400":"text-gray-400"}`,children:i.description})]})]},i.id)})})}),r&&l.jsx(r,{})]})]})}function $ae(){rn("Export Data - Settings");const t=e=>{e==="vcard"?window.location.href="/wp-json/prm/v1/export/vcard":e==="google-csv"&&(window.location.href="/wp-json/prm/v1/export/google-csv")};return l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(oe,{to:"/settings",className:"btn-secondary flex items-center gap-2",children:[l.jsx(xn,{className:"w-4 h-4"}),l.jsx("span",{className:"hidden md:inline",children:"Back to Settings"})]}),l.jsx("h1",{className:"text-2xl font-semibold",children:"Export Data"})]}),l.jsxs("div",{className:"card p-6",children:[l.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Export all your contacts in a format compatible with other contact management systems."}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("button",{onClick:()=>t("vcard"),className:"w-full p-4 rounded-lg border border-gray-200 hover:bg-gray-50 text-left flex items-center gap-4",children:[l.jsx("div",{className:"p-3 bg-primary-50 rounded-lg",children:l.jsx(hh,{className:"w-6 h-6 text-primary-600"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"font-medium",children:"Export as vCard (.vcf)"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Compatible with Apple Contacts, Outlook, Android, and most contact apps"})]}),l.jsx(Gj,{className:"w-5 h-5 text-gray-400"})]}),l.jsxs("button",{onClick:()=>t("google-csv"),className:"w-full p-4 rounded-lg border border-gray-200 hover:bg-gray-50 text-left flex items-center gap-4",children:[l.jsx("div",{className:"p-3 bg-primary-50 rounded-lg",children:l.jsx(CO,{className:"w-6 h-6 text-primary-600"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"font-medium",children:"Export as Google Contacts CSV"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Import directly into Google Contacts or other CSV-compatible systems"})]}),l.jsx(Gj,{className:"w-5 h-5 text-gray-400"})]})]})]})]})}function Dae(){rn("User Approval - Settings");const t=ct();if(!((window.prmConfig||{}).isAdmin||!1))return l.jsx("div",{className:"max-w-2xl mx-auto",children:l.jsxs("div",{className:"card p-8 text-center",children:[l.jsx(RK,{className:"w-16 h-16 mx-auto text-amber-500 mb-4"}),l.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Access Denied"}),l.jsx("p",{className:"text-gray-600 mb-6",children:"You don't have permission to manage user approvals. This feature is only available to administrators."}),l.jsx(oe,{to:"/settings",className:"btn-primary",children:"Back to Settings"})]})});const{data:n=[],isLoading:i}=rt({queryKey:["users"],queryFn:async()=>(await Re.getUsers()).data}),s=it({mutationFn:p=>Re.approveUser(p),onSuccess:()=>{t.invalidateQueries({queryKey:["users"]})}}),a=it({mutationFn:p=>Re.denyUser(p),onSuccess:()=>{t.invalidateQueries({queryKey:["users"]})}}),o=it({mutationFn:p=>Re.deleteUser(p),onSuccess:()=>{t.invalidateQueries({queryKey:["users"]})}}),c=p=>{window.confirm("Are you sure you want to approve this user?")&&s.mutate(p)},u=p=>{window.confirm("Are you sure you want to deny this user? They will not be able to access the system.")&&a.mutate(p)},d=(p,v)=>{window.confirm(`Are you sure you want to delete ${v}? This will permanently delete their account and all their related data (people, organizations, dates). This action cannot be undone.`)&&o.mutate(p)};if(i)return l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsx(Mo,{className:"w-8 h-8 animate-spin text-primary-600"})});const h=n.filter(p=>!p.is_approved),f=n.filter(p=>p.is_approved);return l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(oe,{to:"/settings",className:"btn-secondary flex items-center gap-2",children:[l.jsx(xn,{className:"w-4 h-4"}),l.jsx("span",{className:"hidden md:inline",children:"Back to Settings"})]}),l.jsx("h1",{className:"text-2xl font-semibold",children:"User Approval"})]}),l.jsxs("div",{className:"space-y-6",children:[h.length>0&&l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Pending Approval"}),l.jsx("div",{className:"space-y-3",children:h.map(p=>l.jsxs("div",{className:"card p-4 flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:p.name}),l.jsx("p",{className:"text-sm text-gray-500",children:p.email}),l.jsxs("p",{className:"text-xs text-gray-400",children:["Registered: ",new Date(p.registered).toLocaleDateString()]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>c(p.id),disabled:s.isPending||o.isPending,className:"btn-primary flex items-center gap-2",children:[l.jsx(nR,{className:"w-4 h-4"}),"Approve"]}),l.jsxs("button",{onClick:()=>u(p.id),disabled:a.isPending||o.isPending,className:"btn-secondary flex items-center gap-2",children:[l.jsx(aR,{className:"w-4 h-4"}),"Deny"]}),l.jsxs("button",{onClick:()=>d(p.id,p.name),disabled:s.isPending||a.isPending||o.isPending,className:"btn-danger flex items-center gap-2",children:[l.jsx(On,{className:"w-4 h-4"}),"Delete"]})]})]},p.id))})]}),f.length>0&&l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Approved Users"}),l.jsx("div",{className:"space-y-3",children:f.map(p=>l.jsxs("div",{className:"card p-4 flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"font-medium flex items-center gap-2",children:[p.name,l.jsx(nR,{className:"w-4 h-4 text-green-600"})]}),l.jsx("p",{className:"text-sm text-gray-500",children:p.email})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>u(p.id),disabled:a.isPending||o.isPending,className:"btn-secondary flex items-center gap-2",children:[l.jsx(aR,{className:"w-4 h-4"}),"Revoke Access"]}),l.jsxs("button",{onClick:()=>d(p.id,p.name),disabled:a.isPending||o.isPending,className:"btn-danger flex items-center gap-2",children:[l.jsx(On,{className:"w-4 h-4"}),"Delete"]})]})]},p.id))})]}),n.length===0&&l.jsx("div",{className:"card p-8 text-center",children:l.jsx("p",{className:"text-gray-600",children:"No Caelis users found."})})]})]})}/**
 * vis-data
 * http://visjs.org/
 *
 * Manage unstructured data using DataSet. Add, update, and remove data, and listen for changes in the data.
 *
 * @version 8.0.3
 * @date    2025-09-10T16:22:00.613Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */var MR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qe(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Qv={exports:{}},qR={},Fu,AR;function or(){if(AR)return Fu;AR=1;var t=function(e){return e&&e.Math===Math&&e};return Fu=t(typeof globalThis=="object"&&globalThis)||t(typeof window=="object"&&window)||t(typeof self=="object"&&self)||t(typeof MR=="object"&&MR)||t(typeof Fu=="object"&&Fu)||function(){return this}()||Function("return this")(),Fu}var Xv,FR;function pt(){return FR||(FR=1,Xv=function(t){try{return!!t()}catch{return!0}}),Xv}var Jv,LR;function vh(){if(LR)return Jv;LR=1;var t=pt();return Jv=!t(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),Jv}var Zv,BR;function Om(){if(BR)return Zv;BR=1;var t=vh(),e=Function.prototype,r=e.apply,n=e.call;return Zv=typeof Reflect=="object"&&Reflect.apply||(t?n.bind(r):function(){return n.apply(r,arguments)}),Zv}var eg,zR;function yt(){if(zR)return eg;zR=1;var t=vh(),e=Function.prototype,r=e.call,n=t&&e.bind.bind(r,r);return eg=t?n:function(i){return function(){return r.apply(i,arguments)}},eg}var tg,UR;function $s(){if(UR)return tg;UR=1;var t=yt(),e=t({}.toString),r=t("".slice);return tg=function(n){return r(e(n),8,-1)},tg}var rg,WR;function fG(){if(WR)return rg;WR=1;var t=$s(),e=yt();return rg=function(r){if(t(r)==="Function")return e(r)},rg}var ng,VR;function xr(){if(VR)return ng;VR=1;var t=typeof document=="object"&&document.all;return ng=typeof t>"u"&&t!==void 0?function(e){return typeof e=="function"||e===t}:function(e){return typeof e=="function"},ng}var ig={},sg,HR;function lr(){if(HR)return sg;HR=1;var t=pt();return sg=!t(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),sg}var ag,KR;function Sn(){if(KR)return ag;KR=1;var t=vh(),e=Function.prototype.call;return ag=t?e.bind(e):function(){return e.apply(e,arguments)},ag}var og={},GR;function LO(){if(GR)return og;GR=1;var t={}.propertyIsEnumerable,e=Object.getOwnPropertyDescriptor,r=e&&!t.call({1:2},1);return og.f=r?function(i){var s=e(this,i);return!!s&&s.enumerable}:t,og}var lg,YR;function gh(){return YR||(YR=1,lg=function(t,e){return{enumerable:!(t&1),configurable:!(t&2),writable:!(t&4),value:e}}),lg}var cg,QR;function Pm(){if(QR)return cg;QR=1;var t=yt(),e=pt(),r=$s(),n=Object,i=t("".split);return cg=e(function(){return!n("z").propertyIsEnumerable(0)})?function(s){return r(s)==="String"?i(s,""):n(s)}:n,cg}var ug,XR;function yh(){return XR||(XR=1,ug=function(t){return t==null}),ug}var dg,JR;function el(){if(JR)return dg;JR=1;var t=yh(),e=TypeError;return dg=function(r){if(t(r))throw new e("Can't call method on "+r);return r},dg}var hg,ZR;function Hi(){if(ZR)return hg;ZR=1;var t=Pm(),e=el();return hg=function(r){return t(e(r))},hg}var fg,ek;function nn(){if(ek)return fg;ek=1;var t=xr();return fg=function(e){return typeof e=="object"?e!==null:t(e)},fg}var pg,tk;function mr(){return tk||(tk=1,pg={}),pg}var mg,rk;function Mn(){if(rk)return mg;rk=1;var t=mr(),e=or(),r=xr(),n=function(i){return r(i)?i:void 0};return mg=function(i,s){return arguments.length<2?n(t[i])||n(e[i]):t[i]&&t[i][s]||e[i]&&e[i][s]},mg}var vg,nk;function wr(){if(nk)return vg;nk=1;var t=yt();return vg=t({}.isPrototypeOf),vg}var gg,ik;function Qc(){if(ik)return gg;ik=1;var t=or(),e=t.navigator,r=e&&e.userAgent;return gg=r?String(r):"",gg}var yg,sk;function bh(){if(sk)return yg;sk=1;var t=or(),e=Qc(),r=t.process,n=t.Deno,i=r&&r.versions||n&&n.version,s=i&&i.v8,a,o;return s&&(a=s.split("."),o=a[0]>0&&a[0]<4?1:+(a[0]+a[1])),!o&&e&&(a=e.match(/Edge\/(\d+)/),(!a||a[1]>=74)&&(a=e.match(/Chrome\/(\d+)/),a&&(o=+a[1]))),yg=o,yg}var bg,ak;function Xc(){if(ak)return bg;ak=1;var t=bh(),e=pt(),r=or(),n=r.String;return bg=!!Object.getOwnPropertySymbols&&!e(function(){var i=Symbol("symbol detection");return!n(i)||!(Object(i)instanceof Symbol)||!Symbol.sham&&t&&t<41}),bg}var xg,ok;function pG(){if(ok)return xg;ok=1;var t=Xc();return xg=t&&!Symbol.sham&&typeof Symbol.iterator=="symbol",xg}var wg,lk;function xh(){if(lk)return wg;lk=1;var t=Mn(),e=xr(),r=wr(),n=pG(),i=Object;return wg=n?function(s){return typeof s=="symbol"}:function(s){var a=t("Symbol");return e(a)&&r(a.prototype,i(s))},wg}var _g,ck;function Jc(){if(ck)return _g;ck=1;var t=String;return _g=function(e){try{return t(e)}catch{return"Object"}},_g}var Sg,uk;function Ds(){if(uk)return Sg;uk=1;var t=xr(),e=Jc(),r=TypeError;return Sg=function(n){if(t(n))return n;throw new r(e(n)+" is not a function")},Sg}var Eg,dk;function BO(){if(dk)return Eg;dk=1;var t=Ds(),e=yh();return Eg=function(r,n){var i=r[n];return e(i)?void 0:t(i)},Eg}var Ng,hk;function Mae(){if(hk)return Ng;hk=1;var t=Sn(),e=xr(),r=nn(),n=TypeError;return Ng=function(i,s){var a,o;if(s==="string"&&e(a=i.toString)&&!r(o=t(a,i))||e(a=i.valueOf)&&!r(o=t(a,i))||s!=="string"&&e(a=i.toString)&&!r(o=t(a,i)))return o;throw new n("Can't convert object to primitive value")},Ng}var jg={exports:{}},Cg,fk;function Zc(){return fk||(fk=1,Cg=!0),Cg}var Og,pk;function qae(){if(pk)return Og;pk=1;var t=or(),e=Object.defineProperty;return Og=function(r,n){try{e(t,r,{value:n,configurable:!0,writable:!0})}catch{t[r]=n}return n},Og}var mk;function zO(){if(mk)return jg.exports;mk=1;var t=Zc(),e=or(),r=qae(),n="__core-js_shared__",i=jg.exports=e[n]||r(n,{});return(i.versions||(i.versions=[])).push({version:"3.44.0",mode:t?"pure":"global",copyright:" 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.44.0/LICENSE",source:"https://github.com/zloirock/core-js"}),jg.exports}var Pg,vk;function eu(){if(vk)return Pg;vk=1;var t=zO();return Pg=function(e,r){return t[e]||(t[e]=r||{})},Pg}var Tg,gk;function Ei(){if(gk)return Tg;gk=1;var t=el(),e=Object;return Tg=function(r){return e(t(r))},Tg}var Ig,yk;function _r(){if(yk)return Ig;yk=1;var t=yt(),e=Ei(),r=t({}.hasOwnProperty);return Ig=Object.hasOwn||function(i,s){return r(e(i),s)},Ig}var Rg,bk;function Tm(){if(bk)return Rg;bk=1;var t=yt(),e=0,r=Math.random(),n=t(1.1.toString);return Rg=function(i){return"Symbol("+(i===void 0?"":i)+")_"+n(++e+r,36)},Rg}var kg,xk;function Sr(){if(xk)return kg;xk=1;var t=or(),e=eu(),r=_r(),n=Tm(),i=Xc(),s=pG(),a=t.Symbol,o=e("wks"),c=s?a.for||a:a&&a.withoutSetter||n;return kg=function(u){return r(o,u)||(o[u]=i&&r(a,u)?a[u]:c("Symbol."+u)),o[u]},kg}var $g,wk;function mG(){if(wk)return $g;wk=1;var t=Sn(),e=nn(),r=xh(),n=BO(),i=Mae(),s=Sr(),a=TypeError,o=s("toPrimitive");return $g=function(c,u){if(!e(c)||r(c))return c;var d=n(c,o),h;if(d){if(u===void 0&&(u="default"),h=t(d,c,u),!e(h)||r(h))return h;throw new a("Can't convert object to primitive value")}return u===void 0&&(u="number"),i(c,u)},$g}var Dg,_k;function UO(){if(_k)return Dg;_k=1;var t=mG(),e=xh();return Dg=function(r){var n=t(r,"string");return e(n)?n:n+""},Dg}var Mg,Sk;function vG(){if(Sk)return Mg;Sk=1;var t=or(),e=nn(),r=t.document,n=e(r)&&e(r.createElement);return Mg=function(i){return n?r.createElement(i):{}},Mg}var qg,Ek;function gG(){if(Ek)return qg;Ek=1;var t=lr(),e=pt(),r=vG();return qg=!t&&!e(function(){return Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a!==7}),qg}var Nk;function Im(){if(Nk)return ig;Nk=1;var t=lr(),e=Sn(),r=LO(),n=gh(),i=Hi(),s=UO(),a=_r(),o=gG(),c=Object.getOwnPropertyDescriptor;return ig.f=t?c:function(d,h){if(d=i(d),h=s(h),o)try{return c(d,h)}catch{}if(a(d,h))return n(!e(r.f,d,h),d[h])},ig}var Ag,jk;function Aae(){if(jk)return Ag;jk=1;var t=pt(),e=xr(),r=/#|\.prototype\./,n=function(c,u){var d=s[i(c)];return d===o?!0:d===a?!1:e(u)?t(u):!!u},i=n.normalize=function(c){return String(c).replace(r,".").toLowerCase()},s=n.data={},a=n.NATIVE="N",o=n.POLYFILL="P";return Ag=n,Ag}var Fg,Ck;function Rm(){if(Ck)return Fg;Ck=1;var t=fG(),e=Ds(),r=vh(),n=t(t.bind);return Fg=function(i,s){return e(i),s===void 0?i:r?n(i,s):function(){return i.apply(s,arguments)}},Fg}var Lg={},Bg,Ok;function yG(){if(Ok)return Bg;Ok=1;var t=lr(),e=pt();return Bg=t&&e(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),Bg}var zg,Pk;function Ms(){if(Pk)return zg;Pk=1;var t=nn(),e=String,r=TypeError;return zg=function(n){if(t(n))return n;throw new r(e(n)+" is not an object")},zg}var Tk;function ei(){if(Tk)return Lg;Tk=1;var t=lr(),e=gG(),r=yG(),n=Ms(),i=UO(),s=TypeError,a=Object.defineProperty,o=Object.getOwnPropertyDescriptor,c="enumerable",u="configurable",d="writable";return Lg.f=t?r?function(f,p,v){if(n(f),p=i(p),n(v),typeof f=="function"&&p==="prototype"&&"value"in v&&d in v&&!v[d]){var y=o(f,p);y&&y[d]&&(f[p]=v.value,v={configurable:u in v?v[u]:y[u],enumerable:c in v?v[c]:y[c],writable:!1})}return a(f,p,v)}:a:function(f,p,v){if(n(f),p=i(p),n(v),e)try{return a(f,p,v)}catch{}if("get"in v||"set"in v)throw new s("Accessors not supported");return"value"in v&&(f[p]=v.value),f},Lg}var Ug,Ik;function tu(){if(Ik)return Ug;Ik=1;var t=lr(),e=ei(),r=gh();return Ug=t?function(n,i,s){return e.f(n,i,r(1,s))}:function(n,i,s){return n[i]=s,n},Ug}var Wg,Rk;function Me(){if(Rk)return Wg;Rk=1;var t=or(),e=Om(),r=fG(),n=xr(),i=Im().f,s=Aae(),a=mr(),o=Rm(),c=tu(),u=_r(),d=function(h){var f=function(p,v,y){if(this instanceof f){switch(arguments.length){case 0:return new h;case 1:return new h(p);case 2:return new h(p,v)}return new h(p,v,y)}return e(h,this,arguments)};return f.prototype=h.prototype,f};return Wg=function(h,f){var p=h.target,v=h.global,y=h.stat,x=h.proto,g=v?t:y?t[p]:t[p]&&t[p].prototype,m=v?a:a[p]||c(a,p,{})[p],w=m.prototype,b,_,E,j,S,C,N,O,T;for(j in f)b=s(v?j:p+(y?".":"#")+j,h.forced),_=!b&&g&&u(g,j),C=m[j],_&&(h.dontCallGetSet?(T=i(g,j),N=T&&T.value):N=g[j]),S=_&&N?N:f[j],!(!b&&!x&&typeof C==typeof S)&&(h.bind&&_?O=o(S,t):h.wrap&&_?O=d(S):x&&n(S)?O=r(S):O=S,(h.sham||S&&S.sham||C&&C.sham)&&c(O,"sham",!0),c(m,j,O),x&&(E=p+"Prototype",u(a,E)||c(a,E,{}),c(a[E],j,S),h.real&&w&&(b||!w[j])&&c(w,j,S)))},Wg}var kk;function Fae(){if(kk)return qR;kk=1;var t=Me(),e=lr(),r=ei().f;return t({target:"Object",stat:!0,forced:Object.defineProperty!==r,sham:!e},{defineProperty:r}),qR}var $k;function Lae(){if($k)return Qv.exports;$k=1,Fae();var t=mr(),e=t.Object,r=Qv.exports=function(i,s,a){return e.defineProperty(i,s,a)};return e.defineProperty.sham&&(r.sham=!0),Qv.exports}var Vg,Dk;function bG(){if(Dk)return Vg;Dk=1;var t=Lae();return Vg=t,Vg}var Hg,Mk;function Bae(){if(Mk)return Hg;Mk=1;var t=bG();return Hg=t,Hg}var Kg,qk;function zae(){if(qk)return Kg;qk=1;var t=Bae();return Kg=t,Kg}var Gg,Ak;function Uae(){return Ak||(Ak=1,Gg=zae()),Gg}var Wae=Uae(),Vae=Qe(Wae),Fk={},Yg,Lk;function tl(){if(Lk)return Yg;Lk=1;var t=$s();return Yg=Array.isArray||function(r){return t(r)==="Array"},Yg}var Qg,Bk;function Hae(){if(Bk)return Qg;Bk=1;var t=Math.ceil,e=Math.floor;return Qg=Math.trunc||function(n){var i=+n;return(i>0?e:t)(i)},Qg}var Xg,zk;function ru(){if(zk)return Xg;zk=1;var t=Hae();return Xg=function(e){var r=+e;return r!==r||r===0?0:t(r)},Xg}var Jg,Uk;function xG(){if(Uk)return Jg;Uk=1;var t=ru(),e=Math.min;return Jg=function(r){var n=t(r);return n>0?e(n,9007199254740991):0},Jg}var Zg,Wk;function Aa(){if(Wk)return Zg;Wk=1;var t=xG();return Zg=function(e){return t(e.length)},Zg}var ey,Vk;function wG(){if(Vk)return ey;Vk=1;var t=TypeError,e=9007199254740991;return ey=function(r){if(r>e)throw t("Maximum allowed index exceeded");return r},ey}var ty,Hk;function km(){if(Hk)return ty;Hk=1;var t=lr(),e=ei(),r=gh();return ty=function(n,i,s){t?e.f(n,i,r(0,s)):n[i]=s},ty}var ry,Kk;function WO(){if(Kk)return ry;Kk=1;var t=Sr(),e=t("toStringTag"),r={};return r[e]="z",ry=String(r)==="[object z]",ry}var ny,Gk;function Fa(){if(Gk)return ny;Gk=1;var t=WO(),e=xr(),r=$s(),n=Sr(),i=n("toStringTag"),s=Object,a=r(function(){return arguments}())==="Arguments",o=function(c,u){try{return c[u]}catch{}};return ny=t?r:function(c){var u,d,h;return c===void 0?"Undefined":c===null?"Null":typeof(d=o(u=s(c),i))=="string"?d:a?r(u):(h=r(u))==="Object"&&e(u.callee)?"Arguments":h},ny}var iy,Yk;function Kae(){if(Yk)return iy;Yk=1;var t=yt(),e=xr(),r=zO(),n=t(Function.toString);return e(r.inspectSource)||(r.inspectSource=function(i){return n(i)}),iy=r.inspectSource,iy}var sy,Qk;function _G(){if(Qk)return sy;Qk=1;var t=yt(),e=pt(),r=xr(),n=Fa(),i=Mn(),s=Kae(),a=function(){},o=i("Reflect","construct"),c=/^\s*(?:class|function)\b/,u=t(c.exec),d=!c.test(a),h=function(v){if(!r(v))return!1;try{return o(a,[],v),!0}catch{return!1}},f=function(v){if(!r(v))return!1;switch(n(v)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return d||!!u(c,s(v))}catch{return!0}};return f.sham=!0,sy=!o||e(function(){var p;return h(h.call)||!h(Object)||!h(function(){p=!0})||p})?f:h,sy}var ay,Xk;function Gae(){if(Xk)return ay;Xk=1;var t=tl(),e=_G(),r=nn(),n=Sr(),i=n("species"),s=Array;return ay=function(a){var o;return t(a)&&(o=a.constructor,e(o)&&(o===s||t(o.prototype))?o=void 0:r(o)&&(o=o[i],o===null&&(o=void 0))),o===void 0?s:o},ay}var oy,Jk;function VO(){if(Jk)return oy;Jk=1;var t=Gae();return oy=function(e,r){return new(t(e))(r===0?0:r)},oy}var ly,Zk;function wh(){if(Zk)return ly;Zk=1;var t=pt(),e=Sr(),r=bh(),n=e("species");return ly=function(i){return r>=51||!t(function(){var s=[],a=s.constructor={};return a[n]=function(){return{foo:1}},s[i](Boolean).foo!==1})},ly}var e$;function SG(){if(e$)return Fk;e$=1;var t=Me(),e=pt(),r=tl(),n=nn(),i=Ei(),s=Aa(),a=wG(),o=km(),c=VO(),u=wh(),d=Sr(),h=bh(),f=d("isConcatSpreadable"),p=h>=51||!e(function(){var x=[];return x[f]=!1,x.concat()[0]!==x}),v=function(x){if(!n(x))return!1;var g=x[f];return g!==void 0?!!g:r(x)},y=!p||!u("concat");return t({target:"Array",proto:!0,arity:1,forced:y},{concat:function(g){var m=i(this),w=c(m,0),b=0,_,E,j,S,C;for(_=-1,j=arguments.length;_<j;_++)if(C=_===-1?m:arguments[_],v(C))for(S=s(C),a(b+S),E=0;E<S;E++,b++)E in C&&o(w,b,C[E]);else a(b+1),o(w,b++,C);return w.length=b,w}}),Fk}var t$={},r$={},cy,n$;function La(){if(n$)return cy;n$=1;var t=Fa(),e=String;return cy=function(r){if(t(r)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return e(r)},cy}var uy={},dy,i$;function HO(){if(i$)return dy;i$=1;var t=ru(),e=Math.max,r=Math.min;return dy=function(n,i){var s=t(n);return s<0?e(s+i,0):r(s,i)},dy}var hy,s$;function Yae(){if(s$)return hy;s$=1;var t=Hi(),e=HO(),r=Aa(),n=function(i){return function(s,a,o){var c=t(s),u=r(c);if(u===0)return!i&&-1;var d=e(o,u),h;if(i&&a!==a){for(;u>d;)if(h=c[d++],h!==h)return!0}else for(;u>d;d++)if((i||d in c)&&c[d]===a)return i||d||0;return!i&&-1}};return hy={includes:n(!0),indexOf:n(!1)},hy}var fy,a$;function _h(){return a$||(a$=1,fy={}),fy}var py,o$;function EG(){if(o$)return py;o$=1;var t=yt(),e=_r(),r=Hi(),n=Yae().indexOf,i=_h(),s=t([].push);return py=function(a,o){var c=r(a),u=0,d=[],h;for(h in c)!e(i,h)&&e(c,h)&&s(d,h);for(;o.length>u;)e(c,h=o[u++])&&(~n(d,h)||s(d,h));return d},py}var my,l$;function KO(){return l$||(l$=1,my=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),my}var vy,c$;function $m(){if(c$)return vy;c$=1;var t=EG(),e=KO();return vy=Object.keys||function(n){return t(n,e)},vy}var u$;function GO(){if(u$)return uy;u$=1;var t=lr(),e=yG(),r=ei(),n=Ms(),i=Hi(),s=$m();return uy.f=t&&!e?Object.defineProperties:function(o,c){n(o);for(var u=i(c),d=s(c),h=d.length,f=0,p;h>f;)r.f(o,p=d[f++],u[p]);return o},uy}var gy,d$;function Qae(){if(d$)return gy;d$=1;var t=Mn();return gy=t("document","documentElement"),gy}var yy,h$;function Dm(){if(h$)return yy;h$=1;var t=eu(),e=Tm(),r=t("keys");return yy=function(n){return r[n]||(r[n]=e(n))},yy}var by,f$;function Sh(){if(f$)return by;f$=1;var t=Ms(),e=GO(),r=KO(),n=_h(),i=Qae(),s=vG(),a=Dm(),o=">",c="<",u="prototype",d="script",h=a("IE_PROTO"),f=function(){},p=function(m){return c+d+o+m+c+"/"+d+o},v=function(m){m.write(p("")),m.close();var w=m.parentWindow.Object;return m=null,w},y=function(){var m=s("iframe"),w="java"+d+":",b;return m.style.display="none",i.appendChild(m),m.src=String(w),b=m.contentWindow.document,b.open(),b.write(p("document.F=Object")),b.close(),b.F},x,g=function(){try{x=new ActiveXObject("htmlfile")}catch{}g=typeof document<"u"?document.domain&&x?v(x):y():v(x);for(var m=r.length;m--;)delete g[u][r[m]];return g()};return n[h]=!0,by=Object.create||function(w,b){var _;return w!==null?(f[u]=t(w),_=new f,f[u]=null,_[h]=w):_=g(),b===void 0?_:e.f(_,b)},by}var xy={},p$;function Mm(){if(p$)return xy;p$=1;var t=EG(),e=KO(),r=e.concat("length","prototype");return xy.f=Object.getOwnPropertyNames||function(i){return t(i,r)},xy}var wy={},_y,m$;function nu(){if(m$)return _y;m$=1;var t=yt();return _y=t([].slice),_y}var v$;function NG(){if(v$)return wy;v$=1;var t=$s(),e=Hi(),r=Mm().f,n=nu(),i=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(a){try{return r(a)}catch{return n(i)}};return wy.f=function(o){return i&&t(o)==="Window"?s(o):r(e(o))},wy}var Sy={},g$;function qm(){return g$||(g$=1,Sy.f=Object.getOwnPropertySymbols),Sy}var Ey,y$;function Eh(){if(y$)return Ey;y$=1;var t=tu();return Ey=function(e,r,n,i){return i&&i.enumerable?e[r]=n:t(e,r,n),e},Ey}var Ny,b$;function YO(){if(b$)return Ny;b$=1;var t=ei();return Ny=function(e,r,n){return t.f(e,r,n)},Ny}var jy={},x$;function Am(){if(x$)return jy;x$=1;var t=Sr();return jy.f=t,jy}var Cy,w$;function Ft(){if(w$)return Cy;w$=1;var t=mr(),e=_r(),r=Am(),n=ei().f;return Cy=function(i){var s=t.Symbol||(t.Symbol={});e(s,i)||n(s,i,{value:r.f(i)})},Cy}var Oy,_$;function jG(){if(_$)return Oy;_$=1;var t=Sn(),e=Mn(),r=Sr(),n=Eh();return Oy=function(){var i=e("Symbol"),s=i&&i.prototype,a=s&&s.valueOf,o=r("toPrimitive");s&&!s[o]&&n(s,o,function(c){return t(a,this)},{arity:1})},Oy}var Py,S$;function Xae(){if(S$)return Py;S$=1;var t=WO(),e=Fa();return Py=t?{}.toString:function(){return"[object "+e(this)+"]"},Py}var Ty,E$;function rl(){if(E$)return Ty;E$=1;var t=WO(),e=ei().f,r=tu(),n=_r(),i=Xae(),s=Sr(),a=s("toStringTag");return Ty=function(o,c,u,d){var h=u?o:o&&o.prototype;h&&(n(h,a)||e(h,a,{configurable:!0,value:c}),d&&!t&&r(h,"toString",i))},Ty}var Iy,N$;function Jae(){if(N$)return Iy;N$=1;var t=or(),e=xr(),r=t.WeakMap;return Iy=e(r)&&/native code/.test(String(r)),Iy}var Ry,j$;function Nh(){if(j$)return Ry;j$=1;var t=Jae(),e=or(),r=nn(),n=tu(),i=_r(),s=zO(),a=Dm(),o=_h(),c="Object already initialized",u=e.TypeError,d=e.WeakMap,h,f,p,v=function(m){return p(m)?f(m):h(m,{})},y=function(m){return function(w){var b;if(!r(w)||(b=f(w)).type!==m)throw new u("Incompatible receiver, "+m+" required");return b}};if(t||s.state){var x=s.state||(s.state=new d);x.get=x.get,x.has=x.has,x.set=x.set,h=function(m,w){if(x.has(m))throw new u(c);return w.facade=m,x.set(m,w),w},f=function(m){return x.get(m)||{}},p=function(m){return x.has(m)}}else{var g=a("state");o[g]=!0,h=function(m,w){if(i(m,g))throw new u(c);return w.facade=m,n(m,g,w),w},f=function(m){return i(m,g)?m[g]:{}},p=function(m){return i(m,g)}}return Ry={set:h,get:f,has:p,enforce:v,getterFor:y},Ry}var ky,C$;function iu(){if(C$)return ky;C$=1;var t=Rm(),e=yt(),r=Pm(),n=Ei(),i=Aa(),s=VO(),a=e([].push),o=function(c){var u=c===1,d=c===2,h=c===3,f=c===4,p=c===6,v=c===7,y=c===5||p;return function(x,g,m,w){for(var b=n(x),_=r(b),E=i(_),j=t(g,m),S=0,C=w||s,N=u?C(x,E):d||v?C(x,0):void 0,O,T;E>S;S++)if((y||S in _)&&(O=_[S],T=j(O,S,b),c))if(u)N[S]=T;else if(T)switch(c){case 3:return!0;case 5:return O;case 6:return S;case 2:a(N,O)}else switch(c){case 4:return!1;case 7:a(N,O)}return p?-1:h||f?f:N}};return ky={forEach:o(0),map:o(1),filter:o(2),some:o(3),every:o(4),find:o(5),findIndex:o(6),filterReject:o(7)},ky}var O$;function Zae(){if(O$)return r$;O$=1;var t=Me(),e=or(),r=Sn(),n=yt(),i=Zc(),s=lr(),a=Xc(),o=pt(),c=_r(),u=wr(),d=Ms(),h=Hi(),f=UO(),p=La(),v=gh(),y=Sh(),x=$m(),g=Mm(),m=NG(),w=qm(),b=Im(),_=ei(),E=GO(),j=LO(),S=Eh(),C=YO(),N=eu(),O=Dm(),T=_h(),I=Tm(),D=Sr(),F=Am(),M=Ft(),V=jG(),q=rl(),H=Nh(),B=iu().forEach,W=O("hidden"),K="Symbol",ue="prototype",ge=H.set,$e=H.getterFor(K),ye=Object[ue],Oe=e.Symbol,De=Oe&&Oe[ue],Ve=e.RangeError,vt=e.TypeError,st=e.QObject,X=b.f,_e=_.f,qe=m.f,He=j.f,Pt=n([].push),be=N("symbols"),Le=N("op-symbols"),jt=N("wks"),Tt=!st||!st[ue]||!st[ue].findChild,k=function(xe,ne,de){var ce=X(ye,ne);ce&&delete ye[ne],_e(xe,ne,de),ce&&xe!==ye&&_e(ye,ne,ce)},A=s&&o(function(){return y(_e({},"a",{get:function(){return _e(this,"a",{value:7}).a}})).a!==7})?k:_e,z=function(xe,ne){var de=be[xe]=y(De);return ge(de,{type:K,tag:xe,description:ne}),s||(de.description=ne),de},ie=function(ne,de,ce){ne===ye&&ie(Le,de,ce),d(ne);var Se=f(de);return d(ce),c(be,Se)?(ce.enumerable?(c(ne,W)&&ne[W][Se]&&(ne[W][Se]=!1),ce=y(ce,{enumerable:v(0,!1)})):(c(ne,W)||_e(ne,W,v(1,y(null))),ne[W][Se]=!0),A(ne,Se,ce)):_e(ne,Se,ce)},J=function(ne,de){d(ne);var ce=h(de),Se=x(ce).concat(It(ce));return B(Se,function(Je){(!s||r(fe,ce,Je))&&ie(ne,Je,ce[Je])}),ne},Q=function(ne,de){return de===void 0?y(ne):J(y(ne),de)},fe=function(ne){var de=f(ne),ce=r(He,this,de);return this===ye&&c(be,de)&&!c(Le,de)?!1:ce||!c(this,de)||!c(be,de)||c(this,W)&&this[W][de]?ce:!0},ze=function(ne,de){var ce=h(ne),Se=f(de);if(!(ce===ye&&c(be,Se)&&!c(Le,Se))){var Je=X(ce,Se);return Je&&c(be,Se)&&!(c(ce,W)&&ce[W][Se])&&(Je.enumerable=!0),Je}},Ge=function(ne){var de=qe(h(ne)),ce=[];return B(de,function(Se){!c(be,Se)&&!c(T,Se)&&Pt(ce,Se)}),ce},It=function(xe){var ne=xe===ye,de=qe(ne?Le:h(xe)),ce=[];return B(de,function(Se){c(be,Se)&&(!ne||c(ye,Se))&&Pt(ce,be[Se])}),ce};return a||(Oe=function(){if(u(De,this))throw new vt("Symbol is not a constructor");var ne=!arguments.length||arguments[0]===void 0?void 0:p(arguments[0]),de=I(ne),ce=function(Se){var Je=this===void 0?e:this;Je===ye&&r(ce,Le,Se),c(Je,W)&&c(Je[W],de)&&(Je[W][de]=!1);var Fn=v(1,Se);try{A(Je,de,Fn)}catch(si){if(!(si instanceof Ve))throw si;k(Je,de,Fn)}};return s&&Tt&&A(ye,de,{configurable:!0,set:ce}),z(de,ne)},De=Oe[ue],S(De,"toString",function(){return $e(this).tag}),S(Oe,"withoutSetter",function(xe){return z(I(xe),xe)}),j.f=fe,_.f=ie,E.f=J,b.f=ze,g.f=m.f=Ge,w.f=It,F.f=function(xe){return z(D(xe),xe)},s&&(C(De,"description",{configurable:!0,get:function(){return $e(this).description}}),i||S(ye,"propertyIsEnumerable",fe,{unsafe:!0}))),t({global:!0,constructor:!0,wrap:!0,forced:!a,sham:!a},{Symbol:Oe}),B(x(jt),function(xe){M(xe)}),t({target:K,stat:!0,forced:!a},{useSetter:function(){Tt=!0},useSimple:function(){Tt=!1}}),t({target:"Object",stat:!0,forced:!a,sham:!s},{create:Q,defineProperty:ie,defineProperties:J,getOwnPropertyDescriptor:ze}),t({target:"Object",stat:!0,forced:!a},{getOwnPropertyNames:Ge}),V(),q(Oe,K),T[W]=!0,r$}var P$={},$y,T$;function CG(){if(T$)return $y;T$=1;var t=Xc();return $y=t&&!!Symbol.for&&!!Symbol.keyFor,$y}var I$;function eoe(){if(I$)return P$;I$=1;var t=Me(),e=Mn(),r=_r(),n=La(),i=eu(),s=CG(),a=i("string-to-symbol-registry"),o=i("symbol-to-string-registry");return t({target:"Symbol",stat:!0,forced:!s},{for:function(c){var u=n(c);if(r(a,u))return a[u];var d=e("Symbol")(u);return a[u]=d,o[d]=u,d}}),P$}var R$={},k$;function toe(){if(k$)return R$;k$=1;var t=Me(),e=_r(),r=xh(),n=Jc(),i=eu(),s=CG(),a=i("symbol-to-string-registry");return t({target:"Symbol",stat:!0,forced:!s},{keyFor:function(c){if(!r(c))throw new TypeError(n(c)+" is not a symbol");if(e(a,c))return a[c]}}),R$}var $$={},Dy,D$;function roe(){if(D$)return Dy;D$=1;var t=yt(),e=tl(),r=xr(),n=$s(),i=La(),s=t([].push);return Dy=function(a){if(r(a))return a;if(e(a)){for(var o=a.length,c=[],u=0;u<o;u++){var d=a[u];typeof d=="string"?s(c,d):(typeof d=="number"||n(d)==="Number"||n(d)==="String")&&s(c,i(d))}var h=c.length,f=!0;return function(p,v){if(f)return f=!1,v;if(e(this))return v;for(var y=0;y<h;y++)if(c[y]===p)return v}}},Dy}var M$;function OG(){if(M$)return $$;M$=1;var t=Me(),e=Mn(),r=Om(),n=Sn(),i=yt(),s=pt(),a=xr(),o=xh(),c=nu(),u=roe(),d=Xc(),h=String,f=e("JSON","stringify"),p=i(/./.exec),v=i("".charAt),y=i("".charCodeAt),x=i("".replace),g=i(1.1.toString),m=/[\uD800-\uDFFF]/g,w=/^[\uD800-\uDBFF]$/,b=/^[\uDC00-\uDFFF]$/,_=!d||s(function(){var C=e("Symbol")("stringify detection");return f([C])!=="[null]"||f({a:C})!=="{}"||f(Object(C))!=="{}"}),E=s(function(){return f("\uDF06\uD834")!=='"\\udf06\\ud834"'||f("\uDEAD")!=='"\\udead"'}),j=function(C,N){var O=c(arguments),T=u(N);if(!(!a(T)&&(C===void 0||o(C))))return O[1]=function(I,D){if(a(T)&&(D=n(T,this,h(I),D)),!o(D))return D},r(f,null,O)},S=function(C,N,O){var T=v(O,N-1),I=v(O,N+1);return p(w,C)&&!p(b,I)||p(b,C)&&!p(w,T)?"\\u"+g(y(C,0),16):C};return f&&t({target:"JSON",stat:!0,arity:3,forced:_||E},{stringify:function(N,O,T){var I=c(arguments),D=r(_?j:f,null,I);return E&&typeof D=="string"?x(D,m,S):D}}),$$}var q$={},A$;function noe(){if(A$)return q$;A$=1;var t=Me(),e=Xc(),r=pt(),n=qm(),i=Ei(),s=!e||r(function(){n.f(1)});return t({target:"Object",stat:!0,forced:s},{getOwnPropertySymbols:function(o){var c=n.f;return c?c(i(o)):[]}}),q$}var F$;function PG(){return F$||(F$=1,Zae(),eoe(),toe(),OG(),noe()),t$}var L$={},B$;function TG(){if(B$)return L$;B$=1;var t=Ft();return t("asyncDispose"),L$}var z$={},U$;function ioe(){if(U$)return z$;U$=1;var t=Ft();return t("asyncIterator"),z$}var W$={},V$;function IG(){if(V$)return W$;V$=1;var t=Ft();return t("dispose"),W$}var H$={},K$;function soe(){if(K$)return H$;K$=1;var t=Ft();return t("hasInstance"),H$}var G$={},Y$;function aoe(){if(Y$)return G$;Y$=1;var t=Ft();return t("isConcatSpreadable"),G$}var Q$={},X$;function RG(){if(X$)return Q$;X$=1;var t=Ft();return t("iterator"),Q$}var J$={},Z$;function ooe(){if(Z$)return J$;Z$=1;var t=Ft();return t("match"),J$}var eD={},tD;function loe(){if(tD)return eD;tD=1;var t=Ft();return t("matchAll"),eD}var rD={},nD;function coe(){if(nD)return rD;nD=1;var t=Ft();return t("replace"),rD}var iD={},sD;function uoe(){if(sD)return iD;sD=1;var t=Ft();return t("search"),iD}var aD={},oD;function doe(){if(oD)return aD;oD=1;var t=Ft();return t("species"),aD}var lD={},cD;function hoe(){if(cD)return lD;cD=1;var t=Ft();return t("split"),lD}var uD={},dD;function kG(){if(dD)return uD;dD=1;var t=Ft(),e=jG();return t("toPrimitive"),e(),uD}var hD={},fD;function foe(){if(fD)return hD;fD=1;var t=Mn(),e=Ft(),r=rl();return e("toStringTag"),r(t("Symbol"),"Symbol"),hD}var pD={},mD;function poe(){if(mD)return pD;mD=1;var t=Ft();return t("unscopables"),pD}var vD={},gD;function moe(){if(gD)return vD;gD=1;var t=or(),e=rl();return e(t.JSON,"JSON",!0),vD}var My,yD;function voe(){if(yD)return My;yD=1,SG(),PG(),TG(),ioe(),IG(),soe(),aoe(),RG(),ooe(),loe(),coe(),uoe(),doe(),hoe(),kG(),foe(),poe(),moe();var t=mr();return My=t.Symbol,My}var bD={},qy,xD;function goe(){return xD||(xD=1,qy=function(){}),qy}var Ay,wD;function su(){return wD||(wD=1,Ay={}),Ay}var Fy,_D;function yoe(){if(_D)return Fy;_D=1;var t=lr(),e=_r(),r=Function.prototype,n=t&&Object.getOwnPropertyDescriptor,i=e(r,"name"),s=i&&(function(){}).name==="something",a=i&&(!t||t&&n(r,"name").configurable);return Fy={EXISTS:i,PROPER:s,CONFIGURABLE:a},Fy}var Ly,SD;function boe(){if(SD)return Ly;SD=1;var t=pt();return Ly=!t(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),Ly}var By,ED;function $G(){if(ED)return By;ED=1;var t=_r(),e=xr(),r=Ei(),n=Dm(),i=boe(),s=n("IE_PROTO"),a=Object,o=a.prototype;return By=i?a.getPrototypeOf:function(c){var u=r(c);if(t(u,s))return u[s];var d=u.constructor;return e(d)&&u instanceof d?d.prototype:u instanceof a?o:null},By}var zy,ND;function DG(){if(ND)return zy;ND=1;var t=pt(),e=xr(),r=nn(),n=Sh(),i=$G(),s=Eh(),a=Sr(),o=Zc(),c=a("iterator"),u=!1,d,h,f;[].keys&&(f=[].keys(),"next"in f?(h=i(i(f)),h!==Object.prototype&&(d=h)):u=!0);var p=!r(d)||t(function(){var v={};return d[c].call(v)!==v});return p?d={}:o&&(d=n(d)),e(d[c])||s(d,c,function(){return this}),zy={IteratorPrototype:d,BUGGY_SAFARI_ITERATORS:u},zy}var Uy,jD;function xoe(){if(jD)return Uy;jD=1;var t=DG().IteratorPrototype,e=Sh(),r=gh(),n=rl(),i=su(),s=function(){return this};return Uy=function(a,o,c,u){var d=o+" Iterator";return a.prototype=e(t,{next:r(+!u,c)}),n(a,d,!1,!0),i[d]=s,a},Uy}var Wy,CD;function woe(){if(CD)return Wy;CD=1;var t=yt(),e=Ds();return Wy=function(r,n,i){try{return t(e(Object.getOwnPropertyDescriptor(r,n)[i]))}catch{}},Wy}var Vy,OD;function _oe(){if(OD)return Vy;OD=1;var t=nn();return Vy=function(e){return t(e)||e===null},Vy}var Hy,PD;function Soe(){if(PD)return Hy;PD=1;var t=_oe(),e=String,r=TypeError;return Hy=function(n){if(t(n))return n;throw new r("Can't set "+e(n)+" as a prototype")},Hy}var Ky,TD;function Eoe(){if(TD)return Ky;TD=1;var t=woe(),e=nn(),r=el(),n=Soe();return Ky=Object.setPrototypeOf||("__proto__"in{}?function(){var i=!1,s={},a;try{a=t(Object.prototype,"__proto__","set"),a(s,[]),i=s instanceof Array}catch{}return function(c,u){return r(c),n(u),e(c)&&(i?a(c,u):c.__proto__=u),c}}():void 0),Ky}var Gy,ID;function QO(){if(ID)return Gy;ID=1;var t=Me(),e=Sn(),r=Zc(),n=yoe(),i=xr(),s=xoe(),a=$G(),o=Eoe(),c=rl(),u=tu(),d=Eh(),h=Sr(),f=su(),p=DG(),v=n.PROPER,y=n.CONFIGURABLE,x=p.IteratorPrototype,g=p.BUGGY_SAFARI_ITERATORS,m=h("iterator"),w="keys",b="values",_="entries",E=function(){return this};return Gy=function(j,S,C,N,O,T,I){s(C,S,N);var D=function(ge){if(ge===O&&H)return H;if(!g&&ge&&ge in V)return V[ge];switch(ge){case w:return function(){return new C(this,ge)};case b:return function(){return new C(this,ge)};case _:return function(){return new C(this,ge)}}return function(){return new C(this)}},F=S+" Iterator",M=!1,V=j.prototype,q=V[m]||V["@@iterator"]||O&&V[O],H=!g&&q||D(O),B=S==="Array"&&V.entries||q,W,K,ue;if(B&&(W=a(B.call(new j)),W!==Object.prototype&&W.next&&(!r&&a(W)!==x&&(o?o(W,x):i(W[m])||d(W,m,E)),c(W,F,!0,!0),r&&(f[F]=E))),v&&O===b&&q&&q.name!==b&&(!r&&y?u(V,"name",b):(M=!0,H=function(){return e(q,this)})),O)if(K={values:D(b),keys:T?H:D(w),entries:D(_)},I)for(ue in K)(g||M||!(ue in V))&&d(V,ue,K[ue]);else t({target:S,proto:!0,forced:g||M},K);return(!r||I)&&V[m]!==H&&d(V,m,H,{name:O}),f[S]=H,K},Gy}var Yy,RD;function XO(){return RD||(RD=1,Yy=function(t,e){return{value:t,done:e}}),Yy}var Qy,kD;function Ba(){if(kD)return Qy;kD=1;var t=Hi(),e=goe(),r=su(),n=Nh(),i=ei().f,s=QO(),a=XO(),o=Zc(),c=lr(),u="Array Iterator",d=n.set,h=n.getterFor(u);Qy=s(Array,"Array",function(p,v){d(this,{type:u,target:t(p),index:0,kind:v})},function(){var p=h(this),v=p.target,y=p.index++;if(!v||y>=v.length)return p.target=null,a(void 0,!0);switch(p.kind){case"keys":return a(y,!1);case"values":return a(v[y],!1)}return a([y,v[y]],!1)},"values");var f=r.Arguments=r.Array;if(e("keys"),e("values"),e("entries"),!o&&c&&f.name!=="values")try{i(f,"name",{value:"values"})}catch{}return Qy}var Xy,$D;function Noe(){return $D||($D=1,Xy={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}),Xy}var DD;function za(){if(DD)return bD;DD=1,Ba();var t=Noe(),e=or(),r=rl(),n=su();for(var i in t)r(e[i],i),n[i]=n.Array;return bD}var Jy,MD;function MG(){if(MD)return Jy;MD=1;var t=voe();return za(),Jy=t,Jy}var qD={},AD;function joe(){if(AD)return qD;AD=1;var t=Sr(),e=ei().f,r=t("metadata"),n=Function.prototype;return n[r]===void 0&&e(n,r,{value:null}),qD}var FD={},LD;function Coe(){return LD||(LD=1,TG()),FD}var BD={},zD;function Ooe(){return zD||(zD=1,IG()),BD}var UD={},WD;function Poe(){if(WD)return UD;WD=1;var t=Ft();return t("metadata"),UD}var Zy,VD;function Toe(){if(VD)return Zy;VD=1;var t=MG();return joe(),Coe(),Ooe(),Poe(),Zy=t,Zy}var HD={},e0,KD;function qG(){if(KD)return e0;KD=1;var t=Mn(),e=yt(),r=t("Symbol"),n=r.keyFor,i=e(r.prototype.valueOf);return e0=r.isRegisteredSymbol||function(a){try{return n(i(a))!==void 0}catch{return!1}},e0}var GD;function Ioe(){if(GD)return HD;GD=1;var t=Me(),e=qG();return t({target:"Symbol",stat:!0},{isRegisteredSymbol:e}),HD}var YD={},t0,QD;function AG(){if(QD)return t0;QD=1;for(var t=eu(),e=Mn(),r=yt(),n=xh(),i=Sr(),s=e("Symbol"),a=s.isWellKnownSymbol,o=e("Object","getOwnPropertyNames"),c=r(s.prototype.valueOf),u=t("wks"),d=0,h=o(s),f=h.length;d<f;d++)try{var p=h[d];n(s[p])&&i(p)}catch{}return t0=function(y){if(a&&a(y))return!0;try{for(var x=c(y),g=0,m=o(u),w=m.length;g<w;g++)if(u[m[g]]==x)return!0}catch{}return!1},t0}var XD;function Roe(){if(XD)return YD;XD=1;var t=Me(),e=AG();return t({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:e}),YD}var JD={},ZD;function koe(){if(ZD)return JD;ZD=1;var t=Ft();return t("customMatcher"),JD}var eM={},tM;function $oe(){if(tM)return eM;tM=1;var t=Ft();return t("observable"),eM}var rM={},nM;function Doe(){if(nM)return rM;nM=1;var t=Me(),e=qG();return t({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:e}),rM}var iM={},sM;function Moe(){if(sM)return iM;sM=1;var t=Me(),e=AG();return t({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:e}),iM}var aM={},oM;function qoe(){if(oM)return aM;oM=1;var t=Ft();return t("matcher"),aM}var lM={},cM;function Aoe(){if(cM)return lM;cM=1;var t=Ft();return t("metadataKey"),lM}var uM={},dM;function Foe(){if(dM)return uM;dM=1;var t=Ft();return t("patternMatch"),uM}var hM={},fM;function Loe(){if(fM)return hM;fM=1;var t=Ft();return t("replaceAll"),hM}var r0,pM;function Boe(){if(pM)return r0;pM=1;var t=Toe();return Ioe(),Roe(),koe(),$oe(),Doe(),Moe(),qoe(),Aoe(),Foe(),Loe(),r0=t,r0}var n0,mM;function zoe(){return mM||(mM=1,n0=Boe()),n0}var Uoe=zoe(),Pf=Qe(Uoe),vM={},i0,gM;function Woe(){if(gM)return i0;gM=1;var t=yt(),e=ru(),r=La(),n=el(),i=t("".charAt),s=t("".charCodeAt),a=t("".slice),o=function(c){return function(u,d){var h=r(n(u)),f=e(d),p=h.length,v,y;return f<0||f>=p?c?"":void 0:(v=s(h,f),v<55296||v>56319||f+1===p||(y=s(h,f+1))<56320||y>57343?c?i(h,f):v:c?a(h,f,f+2):(v-55296<<10)+(y-56320)+65536)}};return i0={codeAt:o(!1),charAt:o(!0)},i0}var yM;function Fm(){if(yM)return vM;yM=1;var t=Woe().charAt,e=La(),r=Nh(),n=QO(),i=XO(),s="String Iterator",a=r.set,o=r.getterFor(s);return n(String,"String",function(c){a(this,{type:s,string:e(c),index:0})},function(){var u=o(this),d=u.string,h=u.index,f;return h>=d.length?i(void 0,!0):(f=t(d,h),u.index+=f.length,i(f,!1))}),vM}var s0,bM;function Voe(){if(bM)return s0;bM=1,Ba(),Fm(),RG();var t=Am();return s0=t.f("iterator"),s0}var a0,xM;function FG(){if(xM)return a0;xM=1;var t=Voe();return za(),a0=t,a0}var o0,wM;function Hoe(){if(wM)return o0;wM=1;var t=FG();return o0=t,o0}var l0,_M;function Koe(){if(_M)return l0;_M=1;var t=Hoe();return l0=t,l0}var c0,SM;function Goe(){return SM||(SM=1,c0=Koe()),c0}var Yoe=Goe(),Qoe=Qe(Yoe);function qd(t){"@babel/helpers - typeof";return qd=typeof Pf=="function"&&typeof Qoe=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Pf=="function"&&e.constructor===Pf&&e!==Pf.prototype?"symbol":typeof e},qd(t)}var u0,EM;function Xoe(){if(EM)return u0;EM=1,kG();var t=Am();return u0=t.f("toPrimitive"),u0}var d0,NM;function Joe(){if(NM)return d0;NM=1;var t=Xoe();return d0=t,d0}var h0,jM;function Zoe(){if(jM)return h0;jM=1;var t=Joe();return h0=t,h0}var f0,CM;function ele(){if(CM)return f0;CM=1;var t=Zoe();return f0=t,f0}var p0,OM;function tle(){return OM||(OM=1,p0=ele()),p0}var rle=tle(),nle=Qe(rle);function ile(t,e){if(qd(t)!="object"||!t)return t;var r=t[nle];if(r!==void 0){var n=r.call(t,e);if(qd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sle(t){var e=ile(t,"string");return qd(e)=="symbol"?e:e+""}function Sa(t,e,r){return(e=sle(e))in t?Vae(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var PM={},m0,TM;function ale(){if(TM)return m0;TM=1;var t=yt(),e=Ds(),r=nn(),n=_r(),i=nu(),s=vh(),a=Function,o=t([].concat),c=t([].join),u={},d=function(h,f,p){if(!n(u,f)){for(var v=[],y=0;y<f;y++)v[y]="a["+y+"]";u[f]=a("C,a","return new C("+c(v,",")+")")}return u[f](h,p)};return m0=s?a.bind:function(f){var p=e(this),v=p.prototype,y=i(arguments,1),x=function(){var m=o(y,i(arguments));return this instanceof x?d(p,m.length,m):p.apply(f,m)};return r(v)&&(x.prototype=v),x},m0}var IM;function ole(){if(IM)return PM;IM=1;var t=Me(),e=ale();return t({target:"Function",proto:!0,forced:Function.bind!==e},{bind:e}),PM}var v0,RM;function En(){if(RM)return v0;RM=1;var t=or(),e=mr();return v0=function(r,n){var i=e[r+"Prototype"],s=i&&i[n];if(s)return s;var a=t[r],o=a&&a.prototype;return o&&o[n]},v0}var g0,kM;function lle(){if(kM)return g0;kM=1,ole();var t=En();return g0=t("Function","bind"),g0}var y0,$M;function cle(){if($M)return y0;$M=1;var t=wr(),e=lle(),r=Function.prototype;return y0=function(n){var i=n.bind;return n===r||t(r,n)&&i===r.bind?e:i},y0}var b0,DM;function ule(){if(DM)return b0;DM=1;var t=cle();return b0=t,b0}var x0,MM;function dle(){return MM||(MM=1,x0=ule()),x0}var hle=dle(),LG=Qe(hle),qM={},w0,AM;function fle(){if(AM)return w0;AM=1;var t=Ds(),e=Ei(),r=Pm(),n=Aa(),i=TypeError,s="Reduce of empty array with no initial value",a=function(o){return function(c,u,d,h){var f=e(c),p=r(f),v=n(f);if(t(u),v===0&&d<2)throw new i(s);var y=o?v-1:0,x=o?-1:1;if(d<2)for(;;){if(y in p){h=p[y],y+=x;break}if(y+=x,o?y<0:v<=y)throw new i(s)}for(;o?y>=0:v>y;y+=x)y in p&&(h=u(h,p[y],y,f));return h}};return w0={left:a(!1),right:a(!0)},w0}var _0,FM;function Lm(){if(FM)return _0;FM=1;var t=pt();return _0=function(e,r){var n=[][e];return!!n&&t(function(){n.call(null,r||function(){return 1},1)})},_0}var S0,LM;function BG(){if(LM)return S0;LM=1;var t=or(),e=Qc(),r=$s(),n=function(i){return e.slice(0,i.length)===i};return S0=function(){return n("Bun/")?"BUN":n("Cloudflare-Workers")?"CLOUDFLARE":n("Deno/")?"DENO":n("Node.js/")?"NODE":t.Bun&&typeof Bun.version=="string"?"BUN":t.Deno&&typeof Deno.version=="object"?"DENO":r(t.process)==="process"?"NODE":t.window&&t.document?"BROWSER":"REST"}(),S0}var E0,BM;function ple(){if(BM)return E0;BM=1;var t=BG();return E0=t==="NODE",E0}var zM;function mle(){if(zM)return qM;zM=1;var t=Me(),e=fle().left,r=Lm(),n=bh(),i=ple(),s=!i&&n>79&&n<83,a=s||!r("reduce");return t({target:"Array",proto:!0,forced:a},{reduce:function(c){var u=arguments.length;return e(this,c,u,u>1?arguments[1]:void 0)}}),qM}var N0,UM;function vle(){if(UM)return N0;UM=1,mle();var t=En();return N0=t("Array","reduce"),N0}var j0,WM;function gle(){if(WM)return j0;WM=1;var t=wr(),e=vle(),r=Array.prototype;return j0=function(n){var i=n.reduce;return n===r||t(r,n)&&i===r.reduce?e:i},j0}var C0,VM;function yle(){if(VM)return C0;VM=1;var t=gle();return C0=t,C0}var O0,HM;function ble(){return HM||(HM=1,O0=yle()),O0}var xle=ble(),wle=Qe(xle),KM={},GM;function _le(){if(GM)return KM;GM=1;var t=Me(),e=iu().filter,r=wh(),n=r("filter");return t({target:"Array",proto:!0,forced:!n},{filter:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),KM}var P0,YM;function Sle(){if(YM)return P0;YM=1,_le();var t=En();return P0=t("Array","filter"),P0}var T0,QM;function Ele(){if(QM)return T0;QM=1;var t=wr(),e=Sle(),r=Array.prototype;return T0=function(n){var i=n.filter;return n===r||t(r,n)&&i===r.filter?e:i},T0}var I0,XM;function Nle(){if(XM)return I0;XM=1;var t=Ele();return I0=t,I0}var R0,JM;function jle(){return JM||(JM=1,R0=Nle()),R0}var Cle=jle(),zl=Qe(Cle),ZM={},eq;function Ole(){if(eq)return ZM;eq=1;var t=Me(),e=iu().map,r=wh(),n=r("map");return t({target:"Array",proto:!0,forced:!n},{map:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),ZM}var k0,tq;function Ple(){if(tq)return k0;tq=1,Ole();var t=En();return k0=t("Array","map"),k0}var $0,rq;function Tle(){if(rq)return $0;rq=1;var t=wr(),e=Ple(),r=Array.prototype;return $0=function(n){var i=n.map;return n===r||t(r,n)&&i===r.map?e:i},$0}var D0,nq;function Ile(){if(nq)return D0;nq=1;var t=Tle();return D0=t,D0}var M0,iq;function Rle(){return iq||(iq=1,M0=Ile()),M0}var kle=Rle(),pi=Qe(kle),q0,sq;function $le(){return sq||(sq=1,q0=MG()),q0}var Dle=$le(),Mle=Qe(Dle),aq={},oq;function qle(){if(oq)return aq;oq=1;var t=Me(),e=tl(),r=_G(),n=nn(),i=HO(),s=Aa(),a=Hi(),o=km(),c=Sr(),u=wh(),d=nu(),h=u("slice"),f=c("species"),p=Array,v=Math.max;return t({target:"Array",proto:!0,forced:!h},{slice:function(x,g){var m=a(this),w=s(m),b=i(x,w),_=i(g===void 0?w:g,w),E,j,S;if(e(m)&&(E=m.constructor,r(E)&&(E===p||e(E.prototype))?E=void 0:n(E)&&(E=E[f],E===null&&(E=void 0)),E===p||E===void 0))return d(m,b,_);for(j=new(E===void 0?p:E)(v(_-b,0)),S=0;b<_;b++,S++)b in m&&o(j,S,m[b]);return j.length=S,j}}),aq}var A0,lq;function Ale(){if(lq)return A0;lq=1,qle();var t=En();return A0=t("Array","slice"),A0}var F0,cq;function Fle(){if(cq)return F0;cq=1;var t=wr(),e=Ale(),r=Array.prototype;return F0=function(n){var i=n.slice;return n===r||t(r,n)&&i===r.slice?e:i},F0}var L0,uq;function Lle(){if(uq)return L0;uq=1;var t=Fle();return L0=t,L0}var B0,dq;function Ble(){return dq||(dq=1,B0=Lle()),B0}var zle=Ble(),Ule=Qe(zle),hq={},z0,fq;function zG(){if(fq)return z0;fq=1;var t=Mn(),e=yt(),r=Mm(),n=qm(),i=Ms(),s=e([].concat);return z0=t("Reflect","ownKeys")||function(o){var c=r.f(i(o)),u=n.f;return u?s(c,u(o)):c},z0}var pq;function Wle(){if(pq)return hq;pq=1;var t=Me(),e=zG();return t({target:"Reflect",stat:!0},{ownKeys:e}),hq}var U0,mq;function Vle(){if(mq)return U0;mq=1,Wle();var t=mr();return U0=t.Reflect.ownKeys,U0}var W0,vq;function Hle(){if(vq)return W0;vq=1;var t=Vle();return W0=t,W0}var V0,gq;function Kle(){return gq||(gq=1,V0=Hle()),V0}var Gle=Kle(),Yle=Qe(Gle),yq={},bq;function Qle(){if(bq)return yq;bq=1;var t=Me(),e=tl();return t({target:"Array",stat:!0},{isArray:e}),yq}var H0,xq;function Xle(){if(xq)return H0;xq=1,Qle();var t=mr();return H0=t.Array.isArray,H0}var K0,wq;function Jle(){if(wq)return K0;wq=1;var t=Xle();return K0=t,K0}var G0,_q;function Zle(){return _q||(_q=1,G0=Jle()),G0}var ece=Zle(),Ti=Qe(ece),Sq={},Eq;function tce(){if(Eq)return Sq;Eq=1;var t=Me(),e=Ei(),r=$m(),n=pt(),i=n(function(){r(1)});return t({target:"Object",stat:!0,forced:i},{keys:function(a){return r(e(a))}}),Sq}var Y0,Nq;function rce(){if(Nq)return Y0;Nq=1,tce();var t=mr();return Y0=t.Object.keys,Y0}var Q0,jq;function nce(){if(jq)return Q0;jq=1;var t=rce();return Q0=t,Q0}var X0,Cq;function ice(){return Cq||(Cq=1,X0=nce()),X0}var sce=ice(),JO=Qe(sce),Oq={},J0,Pq;function ace(){if(Pq)return J0;Pq=1;var t=iu().forEach,e=Lm(),r=e("forEach");return J0=r?[].forEach:function(i){return t(this,i,arguments.length>1?arguments[1]:void 0)},J0}var Tq;function oce(){if(Tq)return Oq;Tq=1;var t=Me(),e=ace();return t({target:"Array",proto:!0,forced:[].forEach!==e},{forEach:e}),Oq}var Z0,Iq;function lce(){if(Iq)return Z0;Iq=1,oce();var t=En();return Z0=t("Array","forEach"),Z0}var eb,Rq;function cce(){if(Rq)return eb;Rq=1;var t=lce();return eb=t,eb}var tb,kq;function uce(){if(kq)return tb;kq=1;var t=Fa(),e=_r(),r=wr(),n=cce(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return tb=function(a){var o=a.forEach;return a===i||r(i,a)&&o===i.forEach||e(s,t(a))?n:o},tb}var rb,$q;function dce(){return $q||($q=1,rb=uce()),rb}var hce=dce(),Lo=Qe(hce),Dq={},Mq;function fce(){if(Mq)return Dq;Mq=1;var t=Me(),e=yt(),r=tl(),n=e([].reverse),i=[1,2];return t({target:"Array",proto:!0,forced:String(i)===String(i.reverse())},{reverse:function(){return r(this)&&(this.length=this.length),n(this)}}),Dq}var nb,qq;function pce(){if(qq)return nb;qq=1,fce();var t=En();return nb=t("Array","reverse"),nb}var ib,Aq;function mce(){if(Aq)return ib;Aq=1;var t=wr(),e=pce(),r=Array.prototype;return ib=function(n){var i=n.reverse;return n===r||t(r,n)&&i===r.reverse?e:i},ib}var sb,Fq;function vce(){if(Fq)return sb;Fq=1;var t=mce();return sb=t,sb}var ab,Lq;function gce(){return Lq||(Lq=1,ab=vce()),ab}var yce=gce(),bce=Qe(yce),Bq={},ob,zq;function xce(){if(zq)return ob;zq=1;var t=lr(),e=tl(),r=TypeError,n=Object.getOwnPropertyDescriptor,i=t&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(s){return s instanceof TypeError}}();return ob=i?function(s,a){if(e(s)&&!n(s,"length").writable)throw new r("Cannot set read only .length");return s.length=a}:function(s,a){return s.length=a},ob}var lb,Uq;function UG(){if(Uq)return lb;Uq=1;var t=Jc(),e=TypeError;return lb=function(r,n){if(!delete r[n])throw new e("Cannot delete property "+t(n)+" of "+t(r))},lb}var Wq;function wce(){if(Wq)return Bq;Wq=1;var t=Me(),e=Ei(),r=HO(),n=ru(),i=Aa(),s=xce(),a=wG(),o=VO(),c=km(),u=UG(),d=wh(),h=d("splice"),f=Math.max,p=Math.min;return t({target:"Array",proto:!0,forced:!h},{splice:function(y,x){var g=e(this),m=i(g),w=r(y,m),b=arguments.length,_,E,j,S,C,N;for(b===0?_=E=0:b===1?(_=0,E=m-w):(_=b-2,E=p(f(n(x),0),m-w)),a(m+_-E),j=o(g,E),S=0;S<E;S++)C=w+S,C in g&&c(j,S,g[C]);if(j.length=E,_<E){for(S=w;S<m-E;S++)C=S+E,N=S+_,C in g?g[N]=g[C]:u(g,N);for(S=m;S>m-E+_;S--)u(g,S-1)}else if(_>E)for(S=m-E;S>w;S--)C=S+E-1,N=S+_-1,C in g?g[N]=g[C]:u(g,N);for(S=0;S<_;S++)g[S+w]=arguments[S+2];return s(g,m-E+_),j}}),Bq}var cb,Vq;function _ce(){if(Vq)return cb;Vq=1,wce();var t=En();return cb=t("Array","splice"),cb}var ub,Hq;function Sce(){if(Hq)return ub;Hq=1;var t=wr(),e=_ce(),r=Array.prototype;return ub=function(n){var i=n.splice;return n===r||t(r,n)&&i===r.splice?e:i},ub}var db,Kq;function Ece(){if(Kq)return db;Kq=1;var t=Sce();return db=t,db}var hb,Gq;function Nce(){return Gq||(Gq=1,hb=Ece()),hb}var jce=Nce(),WG=Qe(jce),Yq={},fb,Qq;function Cce(){if(Qq)return fb;Qq=1;var t=lr(),e=yt(),r=Sn(),n=pt(),i=$m(),s=qm(),a=LO(),o=Ei(),c=Pm(),u=Object.assign,d=Object.defineProperty,h=e([].concat);return fb=!u||n(function(){if(t&&u({b:1},u(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var f={},p={},v=Symbol("assign detection"),y="abcdefghijklmnopqrst";return f[v]=7,y.split("").forEach(function(x){p[x]=x}),u({},f)[v]!==7||i(u({},p)).join("")!==y})?function(p,v){for(var y=o(p),x=arguments.length,g=1,m=s.f,w=a.f;x>g;)for(var b=c(arguments[g++]),_=m?h(i(b),m(b)):i(b),E=_.length,j=0,S;E>j;)S=_[j++],(!t||r(w,b,S))&&(y[S]=b[S]);return y}:u,fb}var Xq;function Oce(){if(Xq)return Yq;Xq=1;var t=Me(),e=Cce();return t({target:"Object",stat:!0,arity:2,forced:Object.assign!==e},{assign:e}),Yq}var pb,Jq;function Pce(){if(Jq)return pb;Jq=1,Oce();var t=mr();return pb=t.Object.assign,pb}var mb,Zq;function Tce(){if(Zq)return mb;Zq=1;var t=Pce();return mb=t,mb}var vb,eA;function Ice(){return eA||(eA=1,vb=Tce()),vb}var Rce=Ice(),kce=Qe(Rce),gb,tA;function $ce(){if(tA)return gb;tA=1,SG();var t=En();return gb=t("Array","concat"),gb}var yb,rA;function Dce(){if(rA)return yb;rA=1;var t=wr(),e=$ce(),r=Array.prototype;return yb=function(n){var i=n.concat;return n===r||t(r,n)&&i===r.concat?e:i},yb}var bb,nA;function Mce(){if(nA)return bb;nA=1;var t=Dce();return bb=t,bb}var xb,iA;function qce(){return iA||(iA=1,xb=Mce()),xb}var Ace=qce(),Fce=Qe(Ace),sA={},aA;function Lce(){if(aA)return sA;aA=1;var t=Me(),e=lr(),r=Sh();return t({target:"Object",stat:!0,sham:!e},{create:r}),sA}var wb,oA;function Bce(){if(oA)return wb;oA=1,Lce();var t=mr(),e=t.Object;return wb=function(n,i){return e.create(n,i)},wb}var _b,lA;function zce(){if(lA)return _b;lA=1;var t=Bce();return _b=t,_b}var Sb,cA;function Uce(){return cA||(cA=1,Sb=zce()),Sb}var Wce=Uce(),Vce=Qe(Wce),uA={},Eb,dA;function Hce(){if(dA)return Eb;dA=1;var t=ru(),e=La(),r=el(),n=RangeError;return Eb=function(s){var a=e(r(this)),o="",c=t(s);if(c<0||c===1/0)throw new n("Wrong number of repetitions");for(;c>0;(c>>>=1)&&(a+=a))c&1&&(o+=a);return o},Eb}var Nb,hA;function Kce(){if(hA)return Nb;hA=1;var t=yt(),e=xG(),r=La(),n=Hce(),i=el(),s=t(n),a=t("".slice),o=Math.ceil,c=function(u){return function(d,h,f){var p=r(i(d)),v=e(h),y=p.length,x=f===void 0?" ":r(f),g,m;return v<=y||x===""?p:(g=v-y,m=s(x,o(g/x.length)),m.length>g&&(m=a(m,0,g)),u?p+m:m+p)}};return Nb={start:c(!1),end:c(!0)},Nb}var jb,fA;function Gce(){if(fA)return jb;fA=1;var t=yt(),e=pt(),r=Kce().start,n=RangeError,i=isFinite,s=Math.abs,a=Date.prototype,o=a.toISOString,c=t(a.getTime),u=t(a.getUTCDate),d=t(a.getUTCFullYear),h=t(a.getUTCHours),f=t(a.getUTCMilliseconds),p=t(a.getUTCMinutes),v=t(a.getUTCMonth),y=t(a.getUTCSeconds);return jb=e(function(){return o.call(new Date(-5e13-1))!=="0385-07-25T07:06:39.999Z"})||!e(function(){o.call(new Date(NaN))})?function(){if(!i(c(this)))throw new n("Invalid time value");var g=this,m=d(g),w=f(g),b=m<0?"-":m>9999?"+":"";return b+r(s(m),b?6:4,0)+"-"+r(v(g)+1,2,0)+"-"+r(u(g),2,0)+"T"+r(h(g),2,0)+":"+r(p(g),2,0)+":"+r(y(g),2,0)+"."+r(w,3,0)+"Z"}:o,jb}var pA;function Yce(){if(pA)return uA;pA=1;var t=Me(),e=Sn(),r=Ei(),n=mG(),i=Gce(),s=$s(),a=pt(),o=a(function(){return new Date(NaN).toJSON()!==null||e(Date.prototype.toJSON,{toISOString:function(){return 1}})!==1});return t({target:"Date",proto:!0,forced:o},{toJSON:function(u){var d=r(this),h=n(d,"number");return typeof h=="number"&&!isFinite(h)?null:!("toISOString"in d)&&s(d)==="Date"?e(i,d):d.toISOString()}}),uA}var Cb,mA;function Qce(){if(mA)return Cb;mA=1,Yce(),OG();var t=mr(),e=Om();return t.JSON||(t.JSON={stringify:JSON.stringify}),Cb=function(n,i,s){return e(t.JSON.stringify,null,arguments)},Cb}var Ob,vA;function Xce(){if(vA)return Ob;vA=1;var t=Qce();return Ob=t,Ob}var Pb,gA;function Jce(){return gA||(gA=1,Pb=Xce()),Pb}var Zce=Jce(),eue=Qe(Zce),yA={},bA={},Tb,xA;function tue(){if(xA)return Tb;xA=1;var t=TypeError;return Tb=function(e,r){if(e<r)throw new t("Not enough arguments");return e},Tb}var Ib,wA;function VG(){if(wA)return Ib;wA=1;var t=or(),e=Om(),r=xr(),n=BG(),i=Qc(),s=nu(),a=tue(),o=t.Function,c=/MSIE .\./.test(i)||n==="BUN"&&function(){var u=t.Bun.version.split(".");return u.length<3||u[0]==="0"&&(u[1]<3||u[1]==="3"&&u[2]==="0")}();return Ib=function(u,d){var h=d?2:1;return c?function(f,p){var v=a(arguments.length,1)>h,y=r(f)?f:o(f),x=v?s(arguments,h):[],g=v?function(){e(y,this,x)}:y;return d?u(g,p):u(g)}:u},Ib}var _A;function rue(){if(_A)return bA;_A=1;var t=Me(),e=or(),r=VG(),n=r(e.setInterval,!0);return t({global:!0,bind:!0,forced:e.setInterval!==n},{setInterval:n}),bA}var SA={},EA;function nue(){if(EA)return SA;EA=1;var t=Me(),e=or(),r=VG(),n=r(e.setTimeout,!0);return t({global:!0,bind:!0,forced:e.setTimeout!==n},{setTimeout:n}),SA}var NA;function iue(){return NA||(NA=1,rue(),nue()),yA}var Rb,jA;function sue(){if(jA)return Rb;jA=1,iue();var t=mr();return Rb=t.setTimeout,Rb}var kb,CA;function aue(){return CA||(CA=1,kb=sue()),kb}var oue=aue(),lue=Qe(oue),$b={exports:{}},OA;function cue(){return OA||(OA=1,function(t){function e(n){if(n)return r(n);this._callbacks=new Map}function r(n){return Object.assign(n,e.prototype),n._callbacks=new Map,n}e.prototype.on=function(n,i){const s=this._callbacks.get(n)??[];return s.push(i),this._callbacks.set(n,s),this},e.prototype.once=function(n,i){const s=(...a)=>{this.off(n,s),i.apply(this,a)};return s.fn=i,this.on(n,s),this},e.prototype.off=function(n,i){if(n===void 0&&i===void 0)return this._callbacks.clear(),this;if(i===void 0)return this._callbacks.delete(n),this;const s=this._callbacks.get(n);if(s){for(const[a,o]of s.entries())if(o===i||o.fn===i){s.splice(a,1);break}s.length===0?this._callbacks.delete(n):this._callbacks.set(n,s)}return this},e.prototype.emit=function(n,...i){const s=this._callbacks.get(n);if(s){const a=[...s];for(const o of a)o.apply(this,i)}return this},e.prototype.listeners=function(n){return this._callbacks.get(n)??[]},e.prototype.listenerCount=function(n){if(n)return this.listeners(n).length;let i=0;for(const s of this._callbacks.values())i+=s.length;return i},e.prototype.hasListeners=function(n){return this.listenerCount(n)>0},e.prototype.addEventListener=e.prototype.on,e.prototype.removeListener=e.prototype.off,e.prototype.removeEventListener=e.prototype.off,e.prototype.removeAllListeners=e.prototype.off,t.exports=e}($b)),$b.exports}var uue=cue(),due=Qe(uue);/*! Hammer.JS - v2.0.17-rc - 2019-12-16
 * http://naver.github.io/egjs
 *
 * Forked By Naver egjs
 * Copyright (c) hammerjs
 * Licensed under the MIT license */function wi(){return wi=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},wi.apply(this,arguments)}function ti(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function Tf(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var Zj;typeof Object.assign!="function"?Zj=function(e){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(i!=null)for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])}return r}:Zj=Object.assign;var Bo=Zj,PA=["","webkit","Moz","MS","ms","o"],hue=typeof document>"u"?{style:{}}:document.createElement("div"),fue="function",Ul=Math.round,zo=Math.abs,ZO=Date.now;function Bm(t,e){for(var r,n,i=e[0].toUpperCase()+e.slice(1),s=0;s<PA.length;){if(r=PA[s],n=r?r+i:e,n in t)return n;s++}}var ps;typeof window>"u"?ps={}:ps=window;var HG=Bm(hue.style,"touchAction"),KG=HG!==void 0;function pue(){if(!KG)return!1;var t={},e=ps.CSS&&ps.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(r){return t[r]=e?ps.CSS.supports("touch-action",r):!0}),t}var GG="compute",YG="auto",eC="manipulation",_o="none",Ad="pan-x",Fd="pan-y",If=pue(),mue=/mobile|tablet|ip(ad|hone|od)|android/i,QG="ontouchstart"in ps,vue=Bm(ps,"PointerEvent")!==void 0,gue=QG&&mue.test(navigator.userAgent),jh="touch",yue="pen",eP="mouse",bue="kinect",xue=25,Jr=1,nl=2,ir=4,wn=8,zp=1,Ch=2,Oh=4,Ph=8,kc=16,Ui=Ch|Oh,So=Ph|kc,XG=Ui|So,JG=["x","y"],Up=["clientX","clientY"];function ms(t,e,r){var n;if(t)if(t.forEach)t.forEach(e,r);else if(t.length!==void 0)for(n=0;n<t.length;)e.call(r,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(r,t[n],n,t)}function zm(t,e){return typeof t===fue?t.apply(e&&e[0]||void 0,e):t}function io(t,e){return t.indexOf(e)>-1}function wue(t){if(io(t,_o))return _o;var e=io(t,Ad),r=io(t,Fd);return e&&r?_o:e||r?e?Ad:Fd:io(t,eC)?eC:YG}var ZG=function(){function t(r,n){this.manager=r,this.set(n)}var e=t.prototype;return e.set=function(n){n===GG&&(n=this.compute()),KG&&this.manager.element.style&&If[n]&&(this.manager.element.style[HG]=n),this.actions=n.toLowerCase().trim()},e.update=function(){this.set(this.manager.options.touchAction)},e.compute=function(){var n=[];return ms(this.manager.recognizers,function(i){zm(i.options.enable,[i])&&(n=n.concat(i.getTouchAction()))}),wue(n.join(" "))},e.preventDefaults=function(n){var i=n.srcEvent,s=n.offsetDirection;if(this.manager.session.prevented){i.preventDefault();return}var a=this.actions,o=io(a,_o)&&!If[_o],c=io(a,Fd)&&!If[Fd],u=io(a,Ad)&&!If[Ad];if(o){var d=n.pointers.length===1,h=n.distance<2,f=n.deltaTime<250;if(d&&h&&f)return}if(!(u&&c)&&(o||c&&s&Ui||u&&s&So))return this.preventSrc(i)},e.preventSrc=function(n){this.manager.session.prevented=!0,n.preventDefault()},t}();function tP(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}function eY(t){var e=t.length;if(e===1)return{x:Ul(t[0].clientX),y:Ul(t[0].clientY)};for(var r=0,n=0,i=0;i<e;)r+=t[i].clientX,n+=t[i].clientY,i++;return{x:Ul(r/e),y:Ul(n/e)}}function TA(t){for(var e=[],r=0;r<t.pointers.length;)e[r]={clientX:Ul(t.pointers[r].clientX),clientY:Ul(t.pointers[r].clientY)},r++;return{timeStamp:ZO(),pointers:e,center:eY(e),deltaX:t.deltaX,deltaY:t.deltaY}}function Wp(t,e,r){r||(r=JG);var n=e[r[0]]-t[r[0]],i=e[r[1]]-t[r[1]];return Math.sqrt(n*n+i*i)}function tC(t,e,r){r||(r=JG);var n=e[r[0]]-t[r[0]],i=e[r[1]]-t[r[1]];return Math.atan2(i,n)*180/Math.PI}function tY(t,e){return t===e?zp:zo(t)>=zo(e)?t<0?Ch:Oh:e<0?Ph:kc}function _ue(t,e){var r=e.center,n=t.offsetDelta||{},i=t.prevDelta||{},s=t.prevInput||{};(e.eventType===Jr||s.eventType===ir)&&(i=t.prevDelta={x:s.deltaX||0,y:s.deltaY||0},n=t.offsetDelta={x:r.x,y:r.y}),e.deltaX=i.x+(r.x-n.x),e.deltaY=i.y+(r.y-n.y)}function rY(t,e,r){return{x:e/t||0,y:r/t||0}}function Sue(t,e){return Wp(e[0],e[1],Up)/Wp(t[0],t[1],Up)}function Eue(t,e){return tC(e[1],e[0],Up)+tC(t[1],t[0],Up)}function Nue(t,e){var r=t.lastInterval||e,n=e.timeStamp-r.timeStamp,i,s,a,o;if(e.eventType!==wn&&(n>xue||r.velocity===void 0)){var c=e.deltaX-r.deltaX,u=e.deltaY-r.deltaY,d=rY(n,c,u);s=d.x,a=d.y,i=zo(d.x)>zo(d.y)?d.x:d.y,o=tY(c,u),t.lastInterval=e}else i=r.velocity,s=r.velocityX,a=r.velocityY,o=r.direction;e.velocity=i,e.velocityX=s,e.velocityY=a,e.direction=o}function jue(t,e){var r=t.session,n=e.pointers,i=n.length;r.firstInput||(r.firstInput=TA(e)),i>1&&!r.firstMultiple?r.firstMultiple=TA(e):i===1&&(r.firstMultiple=!1);var s=r.firstInput,a=r.firstMultiple,o=a?a.center:s.center,c=e.center=eY(n);e.timeStamp=ZO(),e.deltaTime=e.timeStamp-s.timeStamp,e.angle=tC(o,c),e.distance=Wp(o,c),_ue(r,e),e.offsetDirection=tY(e.deltaX,e.deltaY);var u=rY(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=u.x,e.overallVelocityY=u.y,e.overallVelocity=zo(u.x)>zo(u.y)?u.x:u.y,e.scale=a?Sue(a.pointers,n):1,e.rotation=a?Eue(a.pointers,n):0,e.maxPointers=r.prevInput?e.pointers.length>r.prevInput.maxPointers?e.pointers.length:r.prevInput.maxPointers:e.pointers.length,Nue(r,e);var d=t.element,h=e.srcEvent,f;h.composedPath?f=h.composedPath()[0]:h.path?f=h.path[0]:f=h.target,tP(f,d)&&(d=f),e.target=d}function Cue(t,e,r){var n=r.pointers.length,i=r.changedPointers.length,s=e&Jr&&n-i===0,a=e&(ir|wn)&&n-i===0;r.isFirst=!!s,r.isFinal=!!a,s&&(t.session={}),r.eventType=e,jue(t,r),t.emit("hammer.input",r),t.recognize(r),t.session.prevInput=r}function Ld(t){return t.trim().split(/\s+/g)}function ld(t,e,r){ms(Ld(e),function(n){t.addEventListener(n,r,!1)})}function cd(t,e,r){ms(Ld(e),function(n){t.removeEventListener(n,r,!1)})}function IA(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||window}var au=function(){function t(r,n){var i=this;this.manager=r,this.callback=n,this.element=r.element,this.target=r.options.inputTarget,this.domHandler=function(s){zm(r.options.enable,[r])&&i.handler(s)},this.init()}var e=t.prototype;return e.handler=function(){},e.init=function(){this.evEl&&ld(this.element,this.evEl,this.domHandler),this.evTarget&&ld(this.target,this.evTarget,this.domHandler),this.evWin&&ld(IA(this.element),this.evWin,this.domHandler)},e.destroy=function(){this.evEl&&cd(this.element,this.evEl,this.domHandler),this.evTarget&&cd(this.target,this.evTarget,this.domHandler),this.evWin&&cd(IA(this.element),this.evWin,this.domHandler)},t}();function Uo(t,e,r){if(t.indexOf&&!r)return t.indexOf(e);for(var n=0;n<t.length;){if(r&&t[n][r]==e||!r&&t[n]===e)return n;n++}return-1}var Oue={pointerdown:Jr,pointermove:nl,pointerup:ir,pointercancel:wn,pointerout:wn},Pue={2:jh,3:yue,4:eP,5:bue},nY="pointerdown",iY="pointermove pointerup pointercancel";ps.MSPointerEvent&&!ps.PointerEvent&&(nY="MSPointerDown",iY="MSPointerMove MSPointerUp MSPointerCancel");var sY=function(t){ti(e,t);function e(){var n,i=e.prototype;return i.evEl=nY,i.evWin=iY,n=t.apply(this,arguments)||this,n.store=n.manager.session.pointerEvents=[],n}var r=e.prototype;return r.handler=function(i){var s=this.store,a=!1,o=i.type.toLowerCase().replace("ms",""),c=Oue[o],u=Pue[i.pointerType]||i.pointerType,d=u===jh,h=Uo(s,i.pointerId,"pointerId");c&Jr&&(i.button===0||d)?h<0&&(s.push(i),h=s.length-1):c&(ir|wn)&&(a=!0),!(h<0)&&(s[h]=i,this.callback(this.manager,c,{pointers:s,changedPointers:[i],pointerType:u,srcEvent:i}),a&&s.splice(h,1))},e}(au);function Bd(t){return Array.prototype.slice.call(t,0)}function rP(t,e,r){for(var n=[],i=[],s=0;s<t.length;){var a=e?t[s][e]:t[s];Uo(i,a)<0&&n.push(t[s]),i[s]=a,s++}return r&&(e?n=n.sort(function(o,c){return o[e]>c[e]}):n=n.sort()),n}var Tue={touchstart:Jr,touchmove:nl,touchend:ir,touchcancel:wn},Iue="touchstart touchmove touchend touchcancel",nP=function(t){ti(e,t);function e(){var n;return e.prototype.evTarget=Iue,n=t.apply(this,arguments)||this,n.targetIds={},n}var r=e.prototype;return r.handler=function(i){var s=Tue[i.type],a=Rue.call(this,i,s);a&&this.callback(this.manager,s,{pointers:a[0],changedPointers:a[1],pointerType:jh,srcEvent:i})},e}(au);function Rue(t,e){var r=Bd(t.touches),n=this.targetIds;if(e&(Jr|nl)&&r.length===1)return n[r[0].identifier]=!0,[r,r];var i,s,a=Bd(t.changedTouches),o=[],c=this.target;if(s=r.filter(function(u){return tP(u.target,c)}),e===Jr)for(i=0;i<s.length;)n[s[i].identifier]=!0,i++;for(i=0;i<a.length;)n[a[i].identifier]&&o.push(a[i]),e&(ir|wn)&&delete n[a[i].identifier],i++;if(o.length)return[rP(s.concat(o),"identifier",!0),o]}var kue={mousedown:Jr,mousemove:nl,mouseup:ir},$ue="mousedown",Due="mousemove mouseup",iP=function(t){ti(e,t);function e(){var n,i=e.prototype;return i.evEl=$ue,i.evWin=Due,n=t.apply(this,arguments)||this,n.pressed=!1,n}var r=e.prototype;return r.handler=function(i){var s=kue[i.type];s&Jr&&i.button===0&&(this.pressed=!0),s&nl&&i.which!==1&&(s=ir),this.pressed&&(s&ir&&(this.pressed=!1),this.callback(this.manager,s,{pointers:[i],changedPointers:[i],pointerType:eP,srcEvent:i}))},e}(au),Mue=2500,RA=25;function kA(t){var e=t.changedPointers,r=e[0];if(r.identifier===this.primaryTouch){var n={x:r.clientX,y:r.clientY},i=this.lastTouches;this.lastTouches.push(n);var s=function(){var o=i.indexOf(n);o>-1&&i.splice(o,1)};setTimeout(s,Mue)}}function que(t,e){t&Jr?(this.primaryTouch=e.changedPointers[0].identifier,kA.call(this,e)):t&(ir|wn)&&kA.call(this,e)}function Aue(t){for(var e=t.srcEvent.clientX,r=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var i=this.lastTouches[n],s=Math.abs(e-i.x),a=Math.abs(r-i.y);if(s<=RA&&a<=RA)return!0}return!1}var aY=function(){var t=function(e){ti(r,e);function r(i,s){var a;return a=e.call(this,i,s)||this,a.handler=function(o,c,u){var d=u.pointerType===jh,h=u.pointerType===eP;if(!(h&&u.sourceCapabilities&&u.sourceCapabilities.firesTouchEvents)){if(d)que.call(Tf(Tf(a)),c,u);else if(h&&Aue.call(Tf(Tf(a)),u))return;a.callback(o,c,u)}},a.touch=new nP(a.manager,a.handler),a.mouse=new iP(a.manager,a.handler),a.primaryTouch=null,a.lastTouches=[],a}var n=r.prototype;return n.destroy=function(){this.touch.destroy(),this.mouse.destroy()},r}(au);return t}();function Fue(t){var e,r=t.options.inputClass;return r?e=r:vue?e=sY:gue?e=nP:QG?e=aY:e=iP,new e(t,Cue)}function Wl(t,e,r){return Array.isArray(t)?(ms(t,r[e],r),!0):!1}var ep=1,Qn=2,$c=4,Ea=8,vs=Ea,zd=16,Mi=32,Lue=1;function Bue(){return Lue++}function Rf(t,e){var r=e.manager;return r?r.get(t):t}function $A(t){return t&zd?"cancel":t&Ea?"end":t&$c?"move":t&Qn?"start":""}var Th=function(){function t(r){r===void 0&&(r={}),this.options=wi({enable:!0},r),this.id=Bue(),this.manager=null,this.state=ep,this.simultaneous={},this.requireFail=[]}var e=t.prototype;return e.set=function(n){return Bo(this.options,n),this.manager&&this.manager.touchAction.update(),this},e.recognizeWith=function(n){if(Wl(n,"recognizeWith",this))return this;var i=this.simultaneous;return n=Rf(n,this),i[n.id]||(i[n.id]=n,n.recognizeWith(this)),this},e.dropRecognizeWith=function(n){return Wl(n,"dropRecognizeWith",this)?this:(n=Rf(n,this),delete this.simultaneous[n.id],this)},e.requireFailure=function(n){if(Wl(n,"requireFailure",this))return this;var i=this.requireFail;return n=Rf(n,this),Uo(i,n)===-1&&(i.push(n),n.requireFailure(this)),this},e.dropRequireFailure=function(n){if(Wl(n,"dropRequireFailure",this))return this;n=Rf(n,this);var i=Uo(this.requireFail,n);return i>-1&&this.requireFail.splice(i,1),this},e.hasRequireFailures=function(){return this.requireFail.length>0},e.canRecognizeWith=function(n){return!!this.simultaneous[n.id]},e.emit=function(n){var i=this,s=this.state;function a(o){i.manager.emit(o,n)}s<Ea&&a(i.options.event+$A(s)),a(i.options.event),n.additionalEvent&&a(n.additionalEvent),s>=Ea&&a(i.options.event+$A(s))},e.tryEmit=function(n){if(this.canEmit())return this.emit(n);this.state=Mi},e.canEmit=function(){for(var n=0;n<this.requireFail.length;){if(!(this.requireFail[n].state&(Mi|ep)))return!1;n++}return!0},e.recognize=function(n){var i=Bo({},n);if(!zm(this.options.enable,[this,i])){this.reset(),this.state=Mi;return}this.state&(vs|zd|Mi)&&(this.state=ep),this.state=this.process(i),this.state&(Qn|$c|Ea|zd)&&this.tryEmit(i)},e.process=function(n){},e.getTouchAction=function(){},e.reset=function(){},t}(),rC=function(t){ti(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,wi({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},n))||this,i.pTime=!1,i.pCenter=!1,i._timer=null,i._input=null,i.count=0,i}var r=e.prototype;return r.getTouchAction=function(){return[eC]},r.process=function(i){var s=this,a=this.options,o=i.pointers.length===a.pointers,c=i.distance<a.threshold,u=i.deltaTime<a.time;if(this.reset(),i.eventType&Jr&&this.count===0)return this.failTimeout();if(c&&u&&o){if(i.eventType!==ir)return this.failTimeout();var d=this.pTime?i.timeStamp-this.pTime<a.interval:!0,h=!this.pCenter||Wp(this.pCenter,i.center)<a.posThreshold;this.pTime=i.timeStamp,this.pCenter=i.center,!h||!d?this.count=1:this.count+=1,this._input=i;var f=this.count%a.taps;if(f===0)return this.hasRequireFailures()?(this._timer=setTimeout(function(){s.state=vs,s.tryEmit()},a.interval),Qn):vs}return Mi},r.failTimeout=function(){var i=this;return this._timer=setTimeout(function(){i.state=Mi},this.options.interval),Mi},r.reset=function(){clearTimeout(this._timer)},r.emit=function(){this.state===vs&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},e}(Th),Dc=function(t){ti(e,t);function e(n){return n===void 0&&(n={}),t.call(this,wi({pointers:1},n))||this}var r=e.prototype;return r.attrTest=function(i){var s=this.options.pointers;return s===0||i.pointers.length===s},r.process=function(i){var s=this.state,a=i.eventType,o=s&(Qn|$c),c=this.attrTest(i);return o&&(a&wn||!c)?s|zd:o||c?a&ir?s|Ea:s&Qn?s|$c:Qn:Mi},e}(Th);function oY(t){return t===kc?"down":t===Ph?"up":t===Ch?"left":t===Oh?"right":""}var sP=function(t){ti(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,wi({event:"pan",threshold:10,pointers:1,direction:XG},n))||this,i.pX=null,i.pY=null,i}var r=e.prototype;return r.getTouchAction=function(){var i=this.options.direction,s=[];return i&Ui&&s.push(Fd),i&So&&s.push(Ad),s},r.directionTest=function(i){var s=this.options,a=!0,o=i.distance,c=i.direction,u=i.deltaX,d=i.deltaY;return c&s.direction||(s.direction&Ui?(c=u===0?zp:u<0?Ch:Oh,a=u!==this.pX,o=Math.abs(i.deltaX)):(c=d===0?zp:d<0?Ph:kc,a=d!==this.pY,o=Math.abs(i.deltaY))),i.direction=c,a&&o>s.threshold&&c&s.direction},r.attrTest=function(i){return Dc.prototype.attrTest.call(this,i)&&(this.state&Qn||!(this.state&Qn)&&this.directionTest(i))},r.emit=function(i){this.pX=i.deltaX,this.pY=i.deltaY;var s=oY(i.direction);s&&(i.additionalEvent=this.options.event+s),t.prototype.emit.call(this,i)},e}(Dc),lY=function(t){ti(e,t);function e(n){return n===void 0&&(n={}),t.call(this,wi({event:"swipe",threshold:10,velocity:.3,direction:Ui|So,pointers:1},n))||this}var r=e.prototype;return r.getTouchAction=function(){return sP.prototype.getTouchAction.call(this)},r.attrTest=function(i){var s=this.options.direction,a;return s&(Ui|So)?a=i.overallVelocity:s&Ui?a=i.overallVelocityX:s&So&&(a=i.overallVelocityY),t.prototype.attrTest.call(this,i)&&s&i.offsetDirection&&i.distance>this.options.threshold&&i.maxPointers===this.options.pointers&&zo(a)>this.options.velocity&&i.eventType&ir},r.emit=function(i){var s=oY(i.offsetDirection);s&&this.manager.emit(this.options.event+s,i),this.manager.emit(this.options.event,i)},e}(Dc),cY=function(t){ti(e,t);function e(n){return n===void 0&&(n={}),t.call(this,wi({event:"pinch",threshold:0,pointers:2},n))||this}var r=e.prototype;return r.getTouchAction=function(){return[_o]},r.attrTest=function(i){return t.prototype.attrTest.call(this,i)&&(Math.abs(i.scale-1)>this.options.threshold||this.state&Qn)},r.emit=function(i){if(i.scale!==1){var s=i.scale<1?"in":"out";i.additionalEvent=this.options.event+s}t.prototype.emit.call(this,i)},e}(Dc),uY=function(t){ti(e,t);function e(n){return n===void 0&&(n={}),t.call(this,wi({event:"rotate",threshold:0,pointers:2},n))||this}var r=e.prototype;return r.getTouchAction=function(){return[_o]},r.attrTest=function(i){return t.prototype.attrTest.call(this,i)&&(Math.abs(i.rotation)>this.options.threshold||this.state&Qn)},e}(Dc),dY=function(t){ti(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,wi({event:"press",pointers:1,time:251,threshold:9},n))||this,i._timer=null,i._input=null,i}var r=e.prototype;return r.getTouchAction=function(){return[YG]},r.process=function(i){var s=this,a=this.options,o=i.pointers.length===a.pointers,c=i.distance<a.threshold,u=i.deltaTime>a.time;if(this._input=i,!c||!o||i.eventType&(ir|wn)&&!u)this.reset();else if(i.eventType&Jr)this.reset(),this._timer=setTimeout(function(){s.state=vs,s.tryEmit()},a.time);else if(i.eventType&ir)return vs;return Mi},r.reset=function(){clearTimeout(this._timer)},r.emit=function(i){this.state===vs&&(i&&i.eventType&ir?this.manager.emit(this.options.event+"up",i):(this._input.timeStamp=ZO(),this.manager.emit(this.options.event,this._input)))},e}(Th),hY={domEvents:!1,touchAction:GG,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},DA=[[uY,{enable:!1}],[cY,{enable:!1},["rotate"]],[lY,{direction:Ui}],[sP,{direction:Ui},["swipe"]],[rC],[rC,{event:"doubletap",taps:2},["tap"]],[dY]],zue=1,MA=2;function qA(t,e){var r=t.element;if(r.style){var n;ms(t.options.cssProps,function(i,s){n=Bm(r.style,s),e?(t.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=t.oldCssProps[n]||""}),e||(t.oldCssProps={})}}function Uue(t,e){var r=document.createEvent("Event");r.initEvent(t,!0,!0),r.gesture=e,e.target.dispatchEvent(r)}var AA=function(){function t(r,n){var i=this;this.options=Bo({},hY,n||{}),this.options.inputTarget=this.options.inputTarget||r,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=r,this.input=Fue(this),this.touchAction=new ZG(this,this.options.touchAction),qA(this,!0),ms(this.options.recognizers,function(s){var a=i.add(new s[0](s[1]));s[2]&&a.recognizeWith(s[2]),s[3]&&a.requireFailure(s[3])},this)}var e=t.prototype;return e.set=function(n){return Bo(this.options,n),n.touchAction&&this.touchAction.update(),n.inputTarget&&(this.input.destroy(),this.input.target=n.inputTarget,this.input.init()),this},e.stop=function(n){this.session.stopped=n?MA:zue},e.recognize=function(n){var i=this.session;if(!i.stopped){this.touchAction.preventDefaults(n);var s,a=this.recognizers,o=i.curRecognizer;(!o||o&&o.state&vs)&&(i.curRecognizer=null,o=null);for(var c=0;c<a.length;)s=a[c],i.stopped!==MA&&(!o||s===o||s.canRecognizeWith(o))?s.recognize(n):s.reset(),!o&&s.state&(Qn|$c|Ea)&&(i.curRecognizer=s,o=s),c++}},e.get=function(n){if(n instanceof Th)return n;for(var i=this.recognizers,s=0;s<i.length;s++)if(i[s].options.event===n)return i[s];return null},e.add=function(n){if(Wl(n,"add",this))return this;var i=this.get(n.options.event);return i&&this.remove(i),this.recognizers.push(n),n.manager=this,this.touchAction.update(),n},e.remove=function(n){if(Wl(n,"remove",this))return this;var i=this.get(n);if(n){var s=this.recognizers,a=Uo(s,i);a!==-1&&(s.splice(a,1),this.touchAction.update())}return this},e.on=function(n,i){if(n===void 0||i===void 0)return this;var s=this.handlers;return ms(Ld(n),function(a){s[a]=s[a]||[],s[a].push(i)}),this},e.off=function(n,i){if(n===void 0)return this;var s=this.handlers;return ms(Ld(n),function(a){i?s[a]&&s[a].splice(Uo(s[a],i),1):delete s[a]}),this},e.emit=function(n,i){this.options.domEvents&&Uue(n,i);var s=this.handlers[n]&&this.handlers[n].slice();if(!(!s||!s.length)){i.type=n,i.preventDefault=function(){i.srcEvent.preventDefault()};for(var a=0;a<s.length;)s[a](i),a++}},e.destroy=function(){this.element&&qA(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},t}(),Wue={touchstart:Jr,touchmove:nl,touchend:ir,touchcancel:wn},Vue="touchstart",Hue="touchstart touchmove touchend touchcancel",Kue=function(t){ti(e,t);function e(){var n,i=e.prototype;return i.evTarget=Vue,i.evWin=Hue,n=t.apply(this,arguments)||this,n.started=!1,n}var r=e.prototype;return r.handler=function(i){var s=Wue[i.type];if(s===Jr&&(this.started=!0),!!this.started){var a=Gue.call(this,i,s);s&(ir|wn)&&a[0].length-a[1].length===0&&(this.started=!1),this.callback(this.manager,s,{pointers:a[0],changedPointers:a[1],pointerType:jh,srcEvent:i})}},e}(au);function Gue(t,e){var r=Bd(t.touches),n=Bd(t.changedTouches);return e&(ir|wn)&&(r=rP(r.concat(n),"identifier",!0)),[r,n]}function fY(t,e,r){var n="DEPRECATED METHOD: "+e+`
`+r+` AT 
`;return function(){var i=new Error("get-stack-trace"),s=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",a=window.console&&(window.console.warn||window.console.log);return a&&a.call(window.console,n,s),t.apply(this,arguments)}}var pY=fY(function(t,e,r){for(var n=Object.keys(e),i=0;i<n.length;)(!r||r&&t[n[i]]===void 0)&&(t[n[i]]=e[n[i]]),i++;return t},"extend","Use `assign`."),Yue=fY(function(t,e){return pY(t,e,!0)},"merge","Use `assign`.");function Que(t,e,r){var n=e.prototype,i;i=t.prototype=Object.create(n),i.constructor=t,i._super=n,r&&Bo(i,r)}function FA(t,e){return function(){return t.apply(e,arguments)}}var Xue=function(){var t=function(r,n){return n===void 0&&(n={}),new AA(r,wi({recognizers:DA.concat()},n))};return t.VERSION="2.0.17-rc",t.DIRECTION_ALL=XG,t.DIRECTION_DOWN=kc,t.DIRECTION_LEFT=Ch,t.DIRECTION_RIGHT=Oh,t.DIRECTION_UP=Ph,t.DIRECTION_HORIZONTAL=Ui,t.DIRECTION_VERTICAL=So,t.DIRECTION_NONE=zp,t.DIRECTION_DOWN=kc,t.INPUT_START=Jr,t.INPUT_MOVE=nl,t.INPUT_END=ir,t.INPUT_CANCEL=wn,t.STATE_POSSIBLE=ep,t.STATE_BEGAN=Qn,t.STATE_CHANGED=$c,t.STATE_ENDED=Ea,t.STATE_RECOGNIZED=vs,t.STATE_CANCELLED=zd,t.STATE_FAILED=Mi,t.Manager=AA,t.Input=au,t.TouchAction=ZG,t.TouchInput=nP,t.MouseInput=iP,t.PointerEventInput=sY,t.TouchMouseInput=aY,t.SingleTouchInput=Kue,t.Recognizer=Th,t.AttrRecognizer=Dc,t.Tap=rC,t.Pan=sP,t.Swipe=lY,t.Pinch=cY,t.Rotate=uY,t.Press=dY,t.on=ld,t.off=cd,t.each=ms,t.merge=Yue,t.extend=pY,t.bindFn=FA,t.assign=Bo,t.inherit=Que,t.bindFn=FA,t.prefixed=Bm,t.toArray=Bd,t.inArray=Uo,t.uniqueArray=rP,t.splitStr=Ld,t.boolOrFn=zm,t.hasParent=tP,t.addEventListeners=ld,t.removeEventListeners=cd,t.defaults=Bo({},hY,{preset:DA}),t}();const mY=Mle("DELETE");function Jue(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return vY({},t,...r)}function vY(){const t=Vp(...arguments);return yY(t),t}function Vp(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];if(e.length<2)return e[0];if(e.length>2)return Vp(vY(e[0],e[1]),...Ule(e).call(e,2));const n=e[0],i=e[1];if(n instanceof Date&&i instanceof Date)return n.setTime(i.getTime()),n;for(const s of Yle(i))Object.prototype.propertyIsEnumerable.call(i,s)&&(i[s]===mY?delete n[s]:n[s]!==null&&i[s]!==null&&typeof n[s]=="object"&&typeof i[s]=="object"&&!Ti(n[s])&&!Ti(i[s])?n[s]=Vp(n[s],i[s]):n[s]=gY(i[s]));return n}function gY(t){return Ti(t)?pi(t).call(t,e=>gY(e)):typeof t=="object"&&t!==null?t instanceof Date?new Date(t.getTime()):Vp({},t):t}function yY(t){for(const e of JO(t))t[e]===mY?delete t[e]:typeof t[e]=="object"&&t[e]!==null&&yY(t[e])}function Zue(){const t=()=>{};return{on:t,off:t,destroy:t,emit:t,get(){return{set:t}}}}const ede=typeof window<"u"?window.Hammer||Xue:function(){return Zue()};function us(t){var e;this._cleanupQueue=[],this.active=!1,this._dom={container:t,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push(()=>{this._dom.overlay.parentNode.removeChild(this._dom.overlay)});const r=ede(this._dom.overlay);r.on("tap",LG(e=this._onTapOverlay).call(e,this)),this._cleanupQueue.push(()=>{r.destroy()});const n=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];Lo(n).call(n,i=>{r.on(i,s=>{s.srcEvent.stopPropagation()})}),document&&document.body&&(this._onClick=i=>{tde(i.target,t)||this.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push(()=>{document.body.removeEventListener("click",this._onClick)})),this._escListener=i=>{("key"in i?i.key==="Escape":i.keyCode===27)&&this.deactivate()}}due(us.prototype);us.current=null;us.prototype.destroy=function(){this.deactivate();for(const r of bce(t=WG(e=this._cleanupQueue).call(e,0)).call(t)){var t,e;r()}};us.prototype.activate=function(){us.current&&us.current.deactivate(),us.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)};us.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")};us.prototype._onTapOverlay=function(t){this.activate(),t.srcEvent.stopPropagation()};function tde(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}var Db,LA;function rde(){if(LA)return Db;LA=1,PG();var t=mr();return Db=t.Object.getOwnPropertySymbols,Db}var Mb,BA;function nde(){if(BA)return Mb;BA=1;var t=rde();return Mb=t,Mb}var qb,zA;function ide(){return zA||(zA=1,qb=nde()),qb}var sde=ide(),UA=Qe(sde),Ab={exports:{}},WA={},VA;function ade(){if(VA)return WA;VA=1;var t=Me(),e=pt(),r=Hi(),n=Im().f,i=lr(),s=!i||e(function(){n(1)});return t({target:"Object",stat:!0,forced:s,sham:!i},{getOwnPropertyDescriptor:function(o,c){return n(r(o),c)}}),WA}var HA;function ode(){if(HA)return Ab.exports;HA=1,ade();var t=mr(),e=t.Object,r=Ab.exports=function(i,s){return e.getOwnPropertyDescriptor(i,s)};return e.getOwnPropertyDescriptor.sham&&(r.sham=!0),Ab.exports}var Fb,KA;function lde(){if(KA)return Fb;KA=1;var t=ode();return Fb=t,Fb}var Lb,GA;function cde(){return GA||(GA=1,Lb=lde()),Lb}var ude=cde(),bY=Qe(ude),YA={},QA;function dde(){if(QA)return YA;QA=1;var t=Me(),e=lr(),r=zG(),n=Hi(),i=Im(),s=km();return t({target:"Object",stat:!0,sham:!e},{getOwnPropertyDescriptors:function(o){for(var c=n(o),u=i.f,d=r(c),h={},f=0,p,v;d.length>f;)v=u(c,p=d[f++]),v!==void 0&&s(h,p,v);return h}}),YA}var Bb,XA;function hde(){if(XA)return Bb;XA=1,dde();var t=mr();return Bb=t.Object.getOwnPropertyDescriptors,Bb}var zb,JA;function fde(){if(JA)return zb;JA=1;var t=hde();return zb=t,zb}var Ub,ZA;function pde(){return ZA||(ZA=1,Ub=fde()),Ub}var mde=pde(),eF=Qe(mde),Wb={exports:{}},tF={},rF;function vde(){if(rF)return tF;rF=1;var t=Me(),e=lr(),r=GO().f;return t({target:"Object",stat:!0,forced:Object.defineProperties!==r,sham:!e},{defineProperties:r}),tF}var nF;function gde(){if(nF)return Wb.exports;nF=1,vde();var t=mr(),e=t.Object,r=Wb.exports=function(i,s){return e.defineProperties(i,s)};return e.defineProperties.sham&&(r.sham=!0),Wb.exports}var Vb,iF;function yde(){if(iF)return Vb;iF=1;var t=gde();return Vb=t,Vb}var Hb,sF;function bde(){return sF||(sF=1,Hb=yde()),Hb}var xde=bde(),wde=Qe(xde),Kb,aF;function _de(){return aF||(aF=1,Kb=bG()),Kb}var Sde=_de(),Ede=Qe(Sde),oF={},lF={},Gb={exports:{}},Yb,cF;function Nde(){if(cF)return Yb;cF=1;var t=pt();return Yb=t(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}),Yb}var Qb,uF;function jde(){if(uF)return Qb;uF=1;var t=pt(),e=nn(),r=$s(),n=Nde(),i=Object.isExtensible,s=t(function(){});return Qb=s||n?function(o){return!e(o)||n&&r(o)==="ArrayBuffer"?!1:i?i(o):!0}:i,Qb}var Xb,dF;function Cde(){if(dF)return Xb;dF=1;var t=pt();return Xb=!t(function(){return Object.isExtensible(Object.preventExtensions({}))}),Xb}var hF;function xY(){if(hF)return Gb.exports;hF=1;var t=Me(),e=yt(),r=_h(),n=nn(),i=_r(),s=ei().f,a=Mm(),o=NG(),c=jde(),u=Tm(),d=Cde(),h=!1,f=u("meta"),p=0,v=function(b){s(b,f,{value:{objectID:"O"+p++,weakData:{}}})},y=function(b,_){if(!n(b))return typeof b=="symbol"?b:(typeof b=="string"?"S":"P")+b;if(!i(b,f)){if(!c(b))return"F";if(!_)return"E";v(b)}return b[f].objectID},x=function(b,_){if(!i(b,f)){if(!c(b))return!0;if(!_)return!1;v(b)}return b[f].weakData},g=function(b){return d&&h&&c(b)&&!i(b,f)&&v(b),b},m=function(){w.enable=function(){},h=!0;var b=a.f,_=e([].splice),E={};E[f]=1,b(E).length&&(a.f=function(j){for(var S=b(j),C=0,N=S.length;C<N;C++)if(S[C]===f){_(S,C,1);break}return S},t({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:o.f}))},w=Gb.exports={enable:m,fastKey:y,getWeakData:x,onFreeze:g};return r[f]=!0,Gb.exports}var Jb,fF;function Ode(){if(fF)return Jb;fF=1;var t=Sr(),e=su(),r=t("iterator"),n=Array.prototype;return Jb=function(i){return i!==void 0&&(e.Array===i||n[r]===i)},Jb}var Zb,pF;function wY(){if(pF)return Zb;pF=1;var t=Fa(),e=BO(),r=yh(),n=su(),i=Sr(),s=i("iterator");return Zb=function(a){if(!r(a))return e(a,s)||e(a,"@@iterator")||n[t(a)]},Zb}var ex,mF;function _Y(){if(mF)return ex;mF=1;var t=Sn(),e=Ds(),r=Ms(),n=Jc(),i=wY(),s=TypeError;return ex=function(a,o){var c=arguments.length<2?i(a):o;if(e(c))return r(t(c,a));throw new s(n(a)+" is not iterable")},ex}var tx,vF;function aP(){if(vF)return tx;vF=1;var t=Sn(),e=Ms(),r=BO();return tx=function(n,i,s){var a,o;e(n);try{if(a=r(n,"return"),!a){if(i==="throw")throw s;return s}a=t(a,n)}catch(c){o=!0,a=c}if(i==="throw")throw s;if(o)throw a;return e(a),s},tx}var rx,gF;function oP(){if(gF)return rx;gF=1;var t=Rm(),e=Sn(),r=Ms(),n=Jc(),i=Ode(),s=Aa(),a=wr(),o=_Y(),c=wY(),u=aP(),d=TypeError,h=function(p,v){this.stopped=p,this.result=v},f=h.prototype;return rx=function(p,v,y){var x=y&&y.that,g=!!(y&&y.AS_ENTRIES),m=!!(y&&y.IS_RECORD),w=!!(y&&y.IS_ITERATOR),b=!!(y&&y.INTERRUPTED),_=t(v,x),E,j,S,C,N,O,T,I=function(F){return E&&u(E,"normal"),new h(!0,F)},D=function(F){return g?(r(F),b?_(F[0],F[1],I):_(F[0],F[1])):b?_(F,I):_(F)};if(m)E=p.iterator;else if(w)E=p;else{if(j=c(p),!j)throw new d(n(p)+" is not iterable");if(i(j)){for(S=0,C=s(p);C>S;S++)if(N=D(p[S]),N&&a(f,N))return N;return new h(!1)}E=o(p,j)}for(O=m?p.next:E.next;!(T=e(O,E)).done;){try{N=D(T.value)}catch(F){u(E,"throw",F)}if(typeof N=="object"&&N&&a(f,N))return N}return new h(!1)},rx}var nx,yF;function SY(){if(yF)return nx;yF=1;var t=wr(),e=TypeError;return nx=function(r,n){if(t(n,r))return r;throw new e("Incorrect invocation")},nx}var ix,bF;function EY(){if(bF)return ix;bF=1;var t=Me(),e=or(),r=xY(),n=pt(),i=tu(),s=oP(),a=SY(),o=xr(),c=nn(),u=yh(),d=rl(),h=ei().f,f=iu().forEach,p=lr(),v=Nh(),y=v.set,x=v.getterFor;return ix=function(g,m,w){var b=g.indexOf("Map")!==-1,_=g.indexOf("Weak")!==-1,E=b?"set":"add",j=e[g],S=j&&j.prototype,C={},N;if(!p||!o(j)||!(_||S.forEach&&!n(function(){new j().entries().next()})))N=w.getConstructor(m,g,b,E),r.enable();else{N=m(function(I,D){y(a(I,O),{type:g,collection:new j}),u(D)||s(D,I[E],{that:I,AS_ENTRIES:b})});var O=N.prototype,T=x(g);f(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(I){var D=I==="add"||I==="set";I in S&&!(_&&I==="clear")&&i(O,I,function(F,M){var V=T(this).collection;if(!D&&_&&!c(F))return I==="get"?void 0:!1;var q=V[I](F===0?0:F,M);return D?this:q})}),_||h(O,"size",{configurable:!0,get:function(){return T(this).collection.size}})}return d(N,g,!1,!0),C[g]=N,t({global:!0,forced:!0},C),_||w.setStrong(N,g,b),N},ix}var sx,xF;function Pde(){if(xF)return sx;xF=1;var t=Eh();return sx=function(e,r,n){for(var i in r)n&&n.unsafe&&e[i]?e[i]=r[i]:t(e,i,r[i],n);return e},sx}var ax,wF;function Tde(){if(wF)return ax;wF=1;var t=Mn(),e=YO(),r=Sr(),n=lr(),i=r("species");return ax=function(s){var a=t(s);n&&a&&!a[i]&&e(a,i,{configurable:!0,get:function(){return this}})},ax}var ox,_F;function NY(){if(_F)return ox;_F=1;var t=Sh(),e=YO(),r=Pde(),n=Rm(),i=SY(),s=yh(),a=oP(),o=QO(),c=XO(),u=Tde(),d=lr(),h=xY().fastKey,f=Nh(),p=f.set,v=f.getterFor;return ox={getConstructor:function(y,x,g,m){var w=y(function(S,C){i(S,b),p(S,{type:x,index:t(null),first:null,last:null,size:0}),d||(S.size=0),s(C)||a(C,S[m],{that:S,AS_ENTRIES:g})}),b=w.prototype,_=v(x),E=function(S,C,N){var O=_(S),T=j(S,C),I,D;return T?T.value=N:(O.last=T={index:D=h(C,!0),key:C,value:N,previous:I=O.last,next:null,removed:!1},O.first||(O.first=T),I&&(I.next=T),d?O.size++:S.size++,D!=="F"&&(O.index[D]=T)),S},j=function(S,C){var N=_(S),O=h(C),T;if(O!=="F")return N.index[O];for(T=N.first;T;T=T.next)if(T.key===C)return T};return r(b,{clear:function(){for(var C=this,N=_(C),O=N.first;O;)O.removed=!0,O.previous&&(O.previous=O.previous.next=null),O=O.next;N.first=N.last=null,N.index=t(null),d?N.size=0:C.size=0},delete:function(S){var C=this,N=_(C),O=j(C,S);if(O){var T=O.next,I=O.previous;delete N.index[O.index],O.removed=!0,I&&(I.next=T),T&&(T.previous=I),N.first===O&&(N.first=T),N.last===O&&(N.last=I),d?N.size--:C.size--}return!!O},forEach:function(C){for(var N=_(this),O=n(C,arguments.length>1?arguments[1]:void 0),T;T=T?T.next:N.first;)for(O(T.value,T.key,this);T&&T.removed;)T=T.previous},has:function(C){return!!j(this,C)}}),r(b,g?{get:function(C){var N=j(this,C);return N&&N.value},set:function(C,N){return E(this,C===0?0:C,N)}}:{add:function(C){return E(this,C=C===0?0:C,C)}}),d&&e(b,"size",{configurable:!0,get:function(){return _(this).size}}),w},setStrong:function(y,x,g){var m=x+" Iterator",w=v(x),b=v(m);o(y,x,function(_,E){p(this,{type:m,target:_,state:w(_),kind:E,last:null})},function(){for(var _=b(this),E=_.kind,j=_.last;j&&j.removed;)j=j.previous;return!_.target||!(_.last=j=j?j.next:_.state.first)?(_.target=null,c(void 0,!0)):c(E==="keys"?j.key:E==="values"?j.value:[j.key,j.value],!1)},g?"entries":"values",!g,!0),u(x)}},ox}var SF;function Ide(){if(SF)return lF;SF=1;var t=EY(),e=NY();return t("Map",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},e),lF}var EF;function Rde(){return EF||(EF=1,Ide()),oF}var NF={},lx,jF;function jY(){return jF||(jF=1,lx=function(t,e){return e===1?function(r,n){return r[t](n)}:function(r,n,i){return r[t](n,i)}}),lx}var cx,CF;function kde(){if(CF)return cx;CF=1;var t=Mn(),e=jY(),r=t("Map");return cx={Map:r,set:e("set",2),get:e("get",1),has:e("has",1),remove:e("delete",1),proto:r.prototype},cx}var OF;function $de(){if(OF)return NF;OF=1;var t=Me(),e=yt(),r=Ds(),n=el(),i=oP(),s=kde(),a=Zc(),o=pt(),c=s.Map,u=s.has,d=s.get,h=s.set,f=e([].push),p=a||o(function(){return c.groupBy("ab",function(v){return v}).get("a").length!==1});return t({target:"Map",stat:!0,forced:a||p},{groupBy:function(y,x){n(y),r(x);var g=new c,m=0;return i(y,function(w){var b=x(w,m++);u(g,b)?f(d(g,b),w):h(g,b,[w])}),g}}),NF}var ux,PF;function Dde(){if(PF)return ux;PF=1,Ba(),Rde(),$de(),Fm();var t=mr();return ux=t.Map,ux}var dx,TF;function Mde(){if(TF)return dx;TF=1;var t=Dde();return za(),dx=t,dx}var hx,IF;function qde(){return IF||(IF=1,hx=Mde()),hx}var Ade=qde(),CY=Qe(Ade),RF={},kF;function Fde(){if(kF)return RF;kF=1;var t=Me(),e=iu().some,r=Lm(),n=r("some");return t({target:"Array",proto:!0,forced:!n},{some:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),RF}var fx,$F;function Lde(){if($F)return fx;$F=1,Fde();var t=En();return fx=t("Array","some"),fx}var px,DF;function Bde(){if(DF)return px;DF=1;var t=wr(),e=Lde(),r=Array.prototype;return px=function(n){var i=n.some;return n===r||t(r,n)&&i===r.some?e:i},px}var mx,MF;function zde(){if(MF)return mx;MF=1;var t=Bde();return mx=t,mx}var vx,qF;function Ude(){return qF||(qF=1,vx=zde()),vx}var Wde=Ude(),Vde=Qe(Wde),gx,AF;function Hde(){if(AF)return gx;AF=1,Ba();var t=En();return gx=t("Array","keys"),gx}var yx,FF;function Kde(){if(FF)return yx;FF=1;var t=Hde();return yx=t,yx}var bx,LF;function Gde(){if(LF)return bx;LF=1,za();var t=Fa(),e=_r(),r=wr(),n=Kde(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return bx=function(a){var o=a.keys;return a===i||r(i,a)&&o===i.keys||e(s,t(a))?n:o},bx}var xx,BF;function Yde(){return BF||(BF=1,xx=Gde()),xx}var Qde=Yde(),jl=Qe(Qde),zF={},wx,UF;function Xde(){if(UF)return wx;UF=1;var t=nu(),e=Math.floor,r=function(n,i){var s=n.length;if(s<8)for(var a=1,o,c;a<s;){for(c=a,o=n[a];c&&i(n[c-1],o)>0;)n[c]=n[--c];c!==a++&&(n[c]=o)}else for(var u=e(s/2),d=r(t(n,0,u),i),h=r(t(n,u),i),f=d.length,p=h.length,v=0,y=0;v<f||y<p;)n[v+y]=v<f&&y<p?i(d[v],h[y])<=0?d[v++]:h[y++]:v<f?d[v++]:h[y++];return n};return wx=r,wx}var _x,WF;function Jde(){if(WF)return _x;WF=1;var t=Qc(),e=t.match(/firefox\/(\d+)/i);return _x=!!e&&+e[1],_x}var Sx,VF;function Zde(){if(VF)return Sx;VF=1;var t=Qc();return Sx=/MSIE|Trident/.test(t),Sx}var Ex,HF;function ehe(){if(HF)return Ex;HF=1;var t=Qc(),e=t.match(/AppleWebKit\/(\d+)\./);return Ex=!!e&&+e[1],Ex}var KF;function the(){if(KF)return zF;KF=1;var t=Me(),e=yt(),r=Ds(),n=Ei(),i=Aa(),s=UG(),a=La(),o=pt(),c=Xde(),u=Lm(),d=Jde(),h=Zde(),f=bh(),p=ehe(),v=[],y=e(v.sort),x=e(v.push),g=o(function(){v.sort(void 0)}),m=o(function(){v.sort(null)}),w=u("sort"),b=!o(function(){if(f)return f<70;if(!(d&&d>3)){if(h)return!0;if(p)return p<603;var j="",S,C,N,O;for(S=65;S<76;S++){switch(C=String.fromCharCode(S),S){case 66:case 69:case 70:case 72:N=3;break;case 68:case 71:N=4;break;default:N=2}for(O=0;O<47;O++)v.push({k:C+O,v:N})}for(v.sort(function(T,I){return I.v-T.v}),O=0;O<v.length;O++)C=v[O].k.charAt(0),j.charAt(j.length-1)!==C&&(j+=C);return j!=="DGBEFHACIJK"}}),_=g||!m||!w||!b,E=function(j){return function(S,C){return C===void 0?-1:S===void 0?1:j!==void 0?+j(S,C)||0:a(S)>a(C)?1:-1}};return t({target:"Array",proto:!0,forced:_},{sort:function(S){S!==void 0&&r(S);var C=n(this);if(b)return S===void 0?y(C):y(C,S);var N=[],O=i(C),T,I;for(I=0;I<O;I++)I in C&&x(N,C[I]);for(c(N,E(S)),T=i(N),I=0;I<T;)C[I]=N[I++];for(;I<O;)s(C,I++);return C}}),zF}var Nx,GF;function rhe(){if(GF)return Nx;GF=1,the();var t=En();return Nx=t("Array","sort"),Nx}var jx,YF;function nhe(){if(YF)return jx;YF=1;var t=wr(),e=rhe(),r=Array.prototype;return jx=function(n){var i=n.sort;return n===r||t(r,n)&&i===r.sort?e:i},jx}var Cx,QF;function ihe(){if(QF)return Cx;QF=1;var t=nhe();return Cx=t,Cx}var Ox,XF;function she(){return XF||(XF=1,Ox=ihe()),Ox}var ahe=she(),nC=Qe(ahe),Px,JF;function ohe(){if(JF)return Px;JF=1,Ba();var t=En();return Px=t("Array","values"),Px}var Tx,ZF;function lhe(){if(ZF)return Tx;ZF=1;var t=ohe();return Tx=t,Tx}var Ix,e4;function che(){if(e4)return Ix;e4=1,za();var t=Fa(),e=_r(),r=wr(),n=lhe(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return Ix=function(a){var o=a.values;return a===i||r(i,a)&&o===i.values||e(s,t(a))?n:o},Ix}var Rx,t4;function uhe(){return t4||(t4=1,Rx=che()),Rx}var dhe=uhe(),r4=Qe(dhe),kx,n4;function hhe(){return n4||(n4=1,kx=FG()),kx}var fhe=hhe(),Vl=Qe(fhe),$x,i4;function phe(){if(i4)return $x;i4=1,Ba();var t=En();return $x=t("Array","entries"),$x}var Dx,s4;function mhe(){if(s4)return Dx;s4=1;var t=phe();return Dx=t,Dx}var Mx,a4;function vhe(){if(a4)return Mx;a4=1,za();var t=Fa(),e=_r(),r=wr(),n=mhe(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return Mx=function(a){var o=a.entries;return a===i||r(i,a)&&o===i.entries||e(s,t(a))?n:o},Mx}var qx,o4;function ghe(){return o4||(o4=1,qx=vhe()),qx}var yhe=ghe(),bhe=Qe(yhe);const jr=[];for(let t=0;t<256;++t)jr.push((t+256).toString(16).slice(1));function xhe(t,e=0){return(jr[t[e+0]]+jr[t[e+1]]+jr[t[e+2]]+jr[t[e+3]]+"-"+jr[t[e+4]]+jr[t[e+5]]+"-"+jr[t[e+6]]+jr[t[e+7]]+"-"+jr[t[e+8]]+jr[t[e+9]]+"-"+jr[t[e+10]]+jr[t[e+11]]+jr[t[e+12]]+jr[t[e+13]]+jr[t[e+14]]+jr[t[e+15]]).toLowerCase()}let Ax;const whe=new Uint8Array(16);function _he(){if(!Ax){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Ax=crypto.getRandomValues.bind(crypto)}return Ax(whe)}const She=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var l4={randomUUID:She};function Ehe(t,e,r){var i;t=t||{};const n=t.random??((i=t.rng)==null?void 0:i.call(t))??_he();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,xhe(n)}function Nhe(t,e,r){return l4.randomUUID&&!t?l4.randomUUID():Ehe(t)}function c4(t){return typeof t=="string"||typeof t=="number"}class lP{constructor(e){Sa(this,"_queue",[]),Sa(this,"_timeout",null),Sa(this,"_extended",null),this.delay=null,this.max=1/0,this.setOptions(e)}setOptions(e){e&&typeof e.delay<"u"&&(this.delay=e.delay),e&&typeof e.max<"u"&&(this.max=e.max),this._flushIfNeeded()}static extend(e,r){const n=new lP(r);if(e.flush!==void 0)throw new Error("Target object already has a property flush");e.flush=()=>{n.flush()};const i=[{name:"flush",original:void 0}];if(r&&r.replace)for(let s=0;s<r.replace.length;s++){const a=r.replace[s];i.push({name:a,original:e[a]}),n.replace(e,a)}return n._extended={object:e,methods:i},n}destroy(){if(this.flush(),this._extended){const e=this._extended.object,r=this._extended.methods;for(let n=0;n<r.length;n++){const i=r[n];i.original?e[i.name]=i.original:delete e[i.name]}this._extended=null}}replace(e,r){const n=this,i=e[r];if(!i)throw new Error("Method "+r+" undefined");e[r]=function(){for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];n.queue({args:a,fn:i,context:this})}}queue(e){typeof e=="function"?this._queue.push({fn:e}):this._queue.push(e),this._flushIfNeeded()}_flushIfNeeded(){this._queue.length>this.max&&this.flush(),this._timeout!=null&&(clearTimeout(this._timeout),this._timeout=null),this.queue.length>0&&typeof this.delay=="number"&&(this._timeout=lue(()=>{this.flush()},this.delay))}flush(){var e,r;Lo(e=WG(r=this._queue).call(r,0)).call(e,n=>{n.fn.apply(n.context||n.fn,n.args||[])})}}class Hp{constructor(){Sa(this,"_subscribers",{"*":[],add:[],remove:[],update:[]}),Sa(this,"subscribe",Hp.prototype.on),Sa(this,"unsubscribe",Hp.prototype.off)}_trigger(e,r,n){var i;if(e==="*")throw new Error("Cannot trigger event *");Lo(i=[...this._subscribers[e],...this._subscribers["*"]]).call(i,s=>{s(e,r,n??null)})}on(e,r){typeof r=="function"&&this._subscribers[e].push(r)}off(e,r){var n;this._subscribers[e]=zl(n=this._subscribers[e]).call(n,i=>i!==r)}}var u4={},d4={},h4;function jhe(){if(h4)return d4;h4=1;var t=EY(),e=NY();return t("Set",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},e),d4}var f4;function Che(){return f4||(f4=1,jhe()),u4}var p4={},Fx,m4;function il(){if(m4)return Fx;m4=1;var t=Jc(),e=TypeError;return Fx=function(r){if(typeof r=="object"&&"size"in r&&"has"in r&&"add"in r&&"delete"in r&&"keys"in r)return r;throw new e(t(r)+" is not a set")},Fx}var Lx,v4;function sl(){if(v4)return Lx;v4=1;var t=Mn(),e=jY(),r=t("Set"),n=r.prototype;return Lx={Set:r,add:e("add",1),has:e("has",1),remove:e("delete",1),proto:n},Lx}var Bx,g4;function al(){if(g4)return Bx;g4=1;var t=Sn();return Bx=function(e,r,n){for(var i=n?e:e.iterator,s=e.next,a,o;!(a=t(s,i)).done;)if(o=r(a.value),o!==void 0)return o},Bx}var zx,y4;function Ih(){if(y4)return zx;y4=1;var t=al();return zx=function(e,r,n){return n?t(e.keys(),r,!0):e.forEach(r)},zx}var Ux,b4;function cP(){if(b4)return Ux;b4=1;var t=sl(),e=Ih(),r=t.Set,n=t.add;return Ux=function(i){var s=new r;return e(i,function(a){n(s,a)}),s},Ux}var Wx,x4;function Rh(){return x4||(x4=1,Wx=function(t){return t.size}),Wx}var Vx,w4;function Ohe(){return w4||(w4=1,Vx=function(t){return{iterator:t,next:t.next,done:!1}}),Vx}var Hx,_4;function ol(){if(_4)return Hx;_4=1;var t=Ds(),e=Ms(),r=Sn(),n=ru(),i=Ohe(),s="Invalid size",a=RangeError,o=TypeError,c=Math.max,u=function(d,h){this.set=d,this.size=c(h,0),this.has=t(d.has),this.keys=t(d.keys)};return u.prototype={getIterator:function(){return i(e(r(this.keys,this.set)))},includes:function(d){return r(this.has,this.set,d)}},Hx=function(d){e(d);var h=+d.size;if(h!==h)throw new o(s);var f=n(h);if(f<0)throw new a(s);return new u(d,f)},Hx}var Kx,S4;function Phe(){if(S4)return Kx;S4=1;var t=il(),e=sl(),r=cP(),n=Rh(),i=ol(),s=Ih(),a=al(),o=e.has,c=e.remove;return Kx=function(d){var h=t(this),f=i(d),p=r(h);return n(h)<=f.size?s(h,function(v){f.includes(v)&&c(p,v)}):a(f.getIterator(),function(v){o(p,v)&&c(p,v)}),p},Kx}var Gx,E4;function ll(){return E4||(E4=1,Gx=function(){return!1}),Gx}var N4;function The(){if(N4)return p4;N4=1;var t=Me(),e=Phe(),r=pt(),n=ll(),i=!n("difference",function(a){return a.size===0}),s=i||r(function(){var a={size:1,has:function(){return!0},keys:function(){var c=0;return{next:function(){var u=c++>1;return o.has(1)&&o.clear(),{done:u,value:2}}}}},o=new Set([1,2,3,4]);return o.difference(a).size!==3});return t({target:"Set",proto:!0,real:!0,forced:s},{difference:e}),p4}var j4={},Yx,C4;function Ihe(){if(C4)return Yx;C4=1;var t=il(),e=sl(),r=Rh(),n=ol(),i=Ih(),s=al(),a=e.Set,o=e.add,c=e.has;return Yx=function(d){var h=t(this),f=n(d),p=new a;return r(h)>f.size?s(f.getIterator(),function(v){c(h,v)&&o(p,v)}):i(h,function(v){f.includes(v)&&o(p,v)}),p},Yx}var O4;function Rhe(){if(O4)return j4;O4=1;var t=Me(),e=pt(),r=Ihe(),n=ll(),i=!n("intersection",function(s){return s.size===2&&s.has(1)&&s.has(2)})||e(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});return t({target:"Set",proto:!0,real:!0,forced:i},{intersection:r}),j4}var P4={},Qx,T4;function khe(){if(T4)return Qx;T4=1;var t=il(),e=sl().has,r=Rh(),n=ol(),i=Ih(),s=al(),a=aP();return Qx=function(c){var u=t(this),d=n(c);if(r(u)<=d.size)return i(u,function(f){if(d.includes(f))return!1},!0)!==!1;var h=d.getIterator();return s(h,function(f){if(e(u,f))return a(h,"normal",!1)})!==!1},Qx}var I4;function $he(){if(I4)return P4;I4=1;var t=Me(),e=khe(),r=ll(),n=!r("isDisjointFrom",function(i){return!i});return t({target:"Set",proto:!0,real:!0,forced:n},{isDisjointFrom:e}),P4}var R4={},Xx,k4;function Dhe(){if(k4)return Xx;k4=1;var t=il(),e=Rh(),r=Ih(),n=ol();return Xx=function(s){var a=t(this),o=n(s);return e(a)>o.size?!1:r(a,function(c){if(!o.includes(c))return!1},!0)!==!1},Xx}var $4;function Mhe(){if($4)return R4;$4=1;var t=Me(),e=Dhe(),r=ll(),n=!r("isSubsetOf",function(i){return i});return t({target:"Set",proto:!0,real:!0,forced:n},{isSubsetOf:e}),R4}var D4={},Jx,M4;function qhe(){if(M4)return Jx;M4=1;var t=il(),e=sl().has,r=Rh(),n=ol(),i=al(),s=aP();return Jx=function(o){var c=t(this),u=n(o);if(r(c)<u.size)return!1;var d=u.getIterator();return i(d,function(h){if(!e(c,h))return s(d,"normal",!1)})!==!1},Jx}var q4;function Ahe(){if(q4)return D4;q4=1;var t=Me(),e=qhe(),r=ll(),n=!r("isSupersetOf",function(i){return!i});return t({target:"Set",proto:!0,real:!0,forced:n},{isSupersetOf:e}),D4}var A4={},Zx,F4;function Fhe(){if(F4)return Zx;F4=1;var t=il(),e=sl(),r=cP(),n=ol(),i=al(),s=e.add,a=e.has,o=e.remove;return Zx=function(u){var d=t(this),h=n(u).getIterator(),f=r(d);return i(h,function(p){a(d,p)?o(f,p):s(f,p)}),f},Zx}var e1,L4;function OY(){return L4||(L4=1,e1=function(t){try{var e=new Set,r={size:0,has:function(){return!0},keys:function(){return Object.defineProperty({},"next",{get:function(){return e.clear(),e.add(4),function(){return{done:!0}}}})}},n=e[t](r);return n.size===1&&n.values().next().value===4}catch{return!1}}),e1}var B4;function Lhe(){if(B4)return A4;B4=1;var t=Me(),e=Fhe(),r=OY(),n=ll(),i=!n("symmetricDifference")||!r("symmetricDifference");return t({target:"Set",proto:!0,real:!0,forced:i},{symmetricDifference:e}),A4}var z4={},t1,U4;function Bhe(){if(U4)return t1;U4=1;var t=il(),e=sl().add,r=cP(),n=ol(),i=al();return t1=function(a){var o=t(this),c=n(a).getIterator(),u=r(o);return i(c,function(d){e(u,d)}),u},t1}var W4;function zhe(){if(W4)return z4;W4=1;var t=Me(),e=Bhe(),r=OY(),n=ll(),i=!n("union")||!r("union");return t({target:"Set",proto:!0,real:!0,forced:i},{union:e}),z4}var r1,V4;function Uhe(){if(V4)return r1;V4=1,Ba(),Che(),The(),Rhe(),$he(),Mhe(),Ahe(),Lhe(),zhe(),Fm();var t=mr();return r1=t.Set,r1}var n1,H4;function Whe(){if(H4)return n1;H4=1;var t=Uhe();return za(),n1=t,n1}var i1,K4;function Vhe(){return K4||(K4=1,i1=Whe()),i1}var Hhe=Vhe(),s1=Qe(Hhe),a1,G4;function Khe(){if(G4)return a1;G4=1,Ba(),Fm();var t=_Y();return a1=t,a1}var o1,Y4;function Ghe(){if(Y4)return o1;Y4=1;var t=Khe();return za(),o1=t,o1}var l1,Q4;function Yhe(){if(Q4)return l1;Q4=1;var t=Ghe();return l1=t,l1}var c1,X4;function Qhe(){if(X4)return c1;X4=1;var t=Yhe();return c1=t,c1}var u1,J4;function Xhe(){return J4||(J4=1,u1=Qhe()),u1}var d1,Z4;function Jhe(){return Z4||(Z4=1,d1=Xhe()),d1}var Zhe=Jhe(),h1=Qe(Zhe);class so{constructor(e){this._pairs=e}*[Vl](){for(const[e,r]of this._pairs)yield[e,r]}*entries(){for(const[e,r]of this._pairs)yield[e,r]}*keys(){for(const[e]of this._pairs)yield e}*values(){for(const[,e]of this._pairs)yield e}toIdArray(){var e;return pi(e=[...this._pairs]).call(e,r=>r[0])}toItemArray(){var e;return pi(e=[...this._pairs]).call(e,r=>r[1])}toEntryArray(){return[...this._pairs]}toObjectMap(){const e=Vce(null);for(const[r,n]of this._pairs)e[r]=n;return e}toMap(){return new CY(this._pairs)}toIdSet(){return new s1(this.toIdArray())}toItemSet(){return new s1(this.toItemArray())}cache(){return new so([...this._pairs])}distinct(e){const r=new s1;for(const[n,i]of this._pairs)r.add(e(i,n));return r}filter(e){const r=this._pairs;return new so({*[Vl](){for(const[n,i]of r)e(i,n)&&(yield[n,i])}})}forEach(e){for(const[r,n]of this._pairs)e(n,r)}map(e){const r=this._pairs;return new so({*[Vl](){for(const[n,i]of r)yield[n,e(i,n)]}})}max(e){const r=h1(this._pairs);let n=r.next();if(n.done)return null;let i=n.value[1],s=e(n.value[1],n.value[0]);for(;!(n=r.next()).done;){const[a,o]=n.value,c=e(o,a);c>s&&(s=c,i=o)}return i}min(e){const r=h1(this._pairs);let n=r.next();if(n.done)return null;let i=n.value[1],s=e(n.value[1],n.value[0]);for(;!(n=r.next()).done;){const[a,o]=n.value,c=e(o,a);c<s&&(s=c,i=o)}return i}reduce(e,r){for(const[n,i]of this._pairs)r=e(r,i,n);return r}sort(e){return new so({[Vl]:()=>{var r;return h1(nC(r=[...this._pairs]).call(r,(n,i)=>{let[s,a]=n,[o,c]=i;return e(a,c,s,o)}))}})}}function e5(t,e){var r=JO(t);if(UA){var n=UA(t);e&&(n=zl(n).call(n,function(i){return bY(t,i).enumerable})),r.push.apply(r,n)}return r}function t5(t){for(var e=1;e<arguments.length;e++){var r,n,i=arguments[e]!=null?arguments[e]:{};e%2?Lo(r=e5(Object(i),!0)).call(r,function(s){Sa(t,s,i[s])}):eF?wde(t,eF(i)):Lo(n=e5(Object(i))).call(n,function(s){Ede(t,s,bY(i,s))})}return t}function efe(t,e){return t[e]==null&&(t[e]=Nhe()),t}class Mc extends Hp{get idProp(){return this._idProp}constructor(e,r){super(),Sa(this,"_queue",null),e&&!Ti(e)&&(r=e,e=[]),this._options=r||{},this._data=new CY,this.length=0,this._idProp=this._options.fieldId||"id",e&&e.length&&this.add(e),this.setOptions(r)}setOptions(e){e&&e.queue!==void 0&&(e.queue===!1?this._queue&&(this._queue.destroy(),this._queue=null):(this._queue||(this._queue=lP.extend(this,{replace:["add","update","remove"]})),e.queue&&typeof e.queue=="object"&&this._queue.setOptions(e.queue)))}add(e,r){const n=[];let i;if(Ti(e)){const s=pi(e).call(e,a=>a[this._idProp]);if(Vde(s).call(s,a=>this._data.has(a)))throw new Error("A duplicate id was found in the parameter array.");for(let a=0,o=e.length;a<o;a++)i=this._addItem(e[a]),n.push(i)}else if(e&&typeof e=="object")i=this._addItem(e),n.push(i);else throw new Error("Unknown dataType");return n.length&&this._trigger("add",{items:n},r),n}update(e,r){const n=[],i=[],s=[],a=[],o=this._idProp,c=u=>{const d=u[o];if(d!=null&&this._data.has(d)){const h=u,f=kce({},this._data.get(d)),p=this._updateItem(h);i.push(p),a.push(h),s.push(f)}else{const h=this._addItem(u);n.push(h)}};if(Ti(e))for(let u=0,d=e.length;u<d;u++)e[u]&&typeof e[u]=="object"?c(e[u]):console.warn("Ignoring input item, which is not an object at index "+u);else if(e&&typeof e=="object")c(e);else throw new Error("Unknown dataType");if(n.length&&this._trigger("add",{items:n},r),i.length){const u={items:i,oldData:s,data:a};this._trigger("update",u,r)}return Fce(n).call(n,i)}updateOnly(e,r){var n;Ti(e)||(e=[e]);const i=pi(n=pi(e).call(e,s=>{const a=this._data.get(s[this._idProp]);if(a==null)throw new Error("Updating non-existent items is not allowed.");return{oldData:a,update:s}})).call(n,s=>{let{oldData:a,update:o}=s;const c=a[this._idProp],u=Jue(a,o);return this._data.set(c,u),{id:c,oldData:a,updatedData:u}});if(i.length){const s={items:pi(i).call(i,a=>a.id),oldData:pi(i).call(i,a=>a.oldData),data:pi(i).call(i,a=>a.updatedData)};return this._trigger("update",s,r),s.items}else return[]}get(e,r){let n,i,s;c4(e)?(n=e,s=r):Ti(e)?(i=e,s=r):s=e;const a=s&&s.returnType==="Object"?"Object":"Array",o=s&&zl(s),c=[];let u,d,h;if(n!=null)u=this._data.get(n),u&&o&&!o(u)&&(u=void 0);else if(i!=null)for(let p=0,v=i.length;p<v;p++)u=this._data.get(i[p]),u!=null&&(!o||o(u))&&c.push(u);else{var f;d=[...jl(f=this._data).call(f)];for(let p=0,v=d.length;p<v;p++)h=d[p],u=this._data.get(h),u!=null&&(!o||o(u))&&c.push(u)}if(s&&s.order&&n==null&&this._sort(c,s.order),s&&s.fields){const p=s.fields;if(n!=null&&u!=null)u=this._filterFields(u,p);else for(let v=0,y=c.length;v<y;v++)c[v]=this._filterFields(c[v],p)}if(a=="Object"){const p={};for(let v=0,y=c.length;v<y;v++){const x=c[v],g=x[this._idProp];p[g]=x}return p}else return n!=null?u??null:c}getIds(e){const r=this._data,n=e&&zl(e),i=e&&e.order,s=[...jl(r).call(r)],a=[];if(n)if(i){const o=[];for(let c=0,u=s.length;c<u;c++){const d=s[c],h=this._data.get(d);h!=null&&n(h)&&o.push(h)}this._sort(o,i);for(let c=0,u=o.length;c<u;c++)a.push(o[c][this._idProp])}else for(let o=0,c=s.length;o<c;o++){const u=s[o],d=this._data.get(u);d!=null&&n(d)&&a.push(d[this._idProp])}else if(i){const o=[];for(let c=0,u=s.length;c<u;c++){const d=s[c];o.push(r.get(d))}this._sort(o,i);for(let c=0,u=o.length;c<u;c++)a.push(o[c][this._idProp])}else for(let o=0,c=s.length;o<c;o++){const u=s[o],d=r.get(u);d!=null&&a.push(d[this._idProp])}return a}getDataSet(){return this}forEach(e,r){const n=r&&zl(r),i=this._data,s=[...jl(i).call(i)];if(r&&r.order){const a=this.get(r);for(let o=0,c=a.length;o<c;o++){const u=a[o],d=u[this._idProp];e(u,d)}}else for(let a=0,o=s.length;a<o;a++){const c=s[a],u=this._data.get(c);u!=null&&(!n||n(u))&&e(u,c)}}map(e,r){const n=r&&zl(r),i=[],s=this._data,a=[...jl(s).call(s)];for(let o=0,c=a.length;o<c;o++){const u=a[o],d=this._data.get(u);d!=null&&(!n||n(d))&&i.push(e(d,u))}return r&&r.order&&this._sort(i,r.order),i}_filterFields(e,r){var n;return e&&wle(n=Ti(r)?r:JO(r)).call(n,(i,s)=>(i[s]=e[s],i),{})}_sort(e,r){if(typeof r=="string"){const n=r;nC(e).call(e,(i,s)=>{const a=i[n],o=s[n];return a>o?1:a<o?-1:0})}else if(typeof r=="function")nC(e).call(e,r);else throw new TypeError("Order must be a function or a string")}remove(e,r){const n=[],i=[],s=Ti(e)?e:[e];for(let a=0,o=s.length;a<o;a++){const c=this._remove(s[a]);if(c){const u=c[this._idProp];u!=null&&(n.push(u),i.push(c))}}return n.length&&this._trigger("remove",{items:n,oldData:i},r),n}_remove(e){let r;if(c4(e)?r=e:e&&typeof e=="object"&&(r=e[this._idProp]),r!=null&&this._data.has(r)){const n=this._data.get(r)||null;return this._data.delete(r),--this.length,n}return null}clear(e){var r;const n=[...jl(r=this._data).call(r)],i=[];for(let s=0,a=n.length;s<a;s++)i.push(this._data.get(n[s]));return this._data.clear(),this.length=0,this._trigger("remove",{items:n,oldData:i},e),n}max(e){let r=null,n=null;for(const s of r4(i=this._data).call(i)){var i;const a=s[e];typeof a=="number"&&(n==null||a>n)&&(r=s,n=a)}return r||null}min(e){let r=null,n=null;for(const s of r4(i=this._data).call(i)){var i;const a=s[e];typeof a=="number"&&(n==null||a<n)&&(r=s,n=a)}return r||null}distinct(e){const r=this._data,n=[...jl(r).call(r)],i=[];let s=0;for(let a=0,o=n.length;a<o;a++){const c=n[a],d=r.get(c)[e];let h=!1;for(let f=0;f<s;f++)if(i[f]==d){h=!0;break}!h&&d!==void 0&&(i[s]=d,s++)}return i}_addItem(e){const r=efe(e,this._idProp),n=r[this._idProp];if(this._data.has(n))throw new Error("Cannot add item: item with id "+n+" already exists");return this._data.set(n,r),++this.length,n}_updateItem(e){const r=e[this._idProp];if(r==null)throw new Error("Cannot update item: item has no id (item: "+eue(e)+")");const n=this._data.get(r);if(!n)throw new Error("Cannot update item: no item with id "+r+" found");return this._data.set(r,t5(t5({},n),e)),r}stream(e){if(e){const n=this._data;return new so({*[Vl](){for(const i of e){const s=n.get(i);s!=null&&(yield[i,s])}}})}else{var r;return new so({[Vl]:LG(r=bhe(this._data)).call(r,this._data)})}}}function tfe(t,e){return typeof e=="object"&&e!==null&&t===e.idProp&&typeof e.add=="function"&&typeof e.clear=="function"&&typeof e.distinct=="function"&&typeof Lo(e)=="function"&&typeof e.get=="function"&&typeof e.getDataSet=="function"&&typeof e.getIds=="function"&&typeof e.length=="number"&&typeof pi(e)=="function"&&typeof e.max=="function"&&typeof e.min=="function"&&typeof e.off=="function"&&typeof e.on=="function"&&typeof e.remove=="function"&&typeof e.setOptions=="function"&&typeof e.stream=="function"&&typeof e.update=="function"&&typeof e.updateOnly=="function"}function PY(t,e){return typeof e=="object"&&e!==null&&t===e.idProp&&typeof Lo(e)=="function"&&typeof e.get=="function"&&typeof e.getDataSet=="function"&&typeof e.getIds=="function"&&typeof e.length=="number"&&typeof pi(e)=="function"&&typeof e.off=="function"&&typeof e.on=="function"&&typeof e.stream=="function"&&tfe(t,e.getDataSet())}/**
 * vis-network
 * https://visjs.github.io/vis-network/
 *
 * A dynamic, browser-based visualization library.
 *
 * @version 10.0.2
 * @date    2025-09-15T17:48:13.838Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */var r5=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ke(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var n5={},Lu,i5;function $t(){if(i5)return Lu;i5=1;var t=function(e){return e&&e.Math===Math&&e};return Lu=t(typeof globalThis=="object"&&globalThis)||t(typeof window=="object"&&window)||t(typeof self=="object"&&self)||t(typeof r5=="object"&&r5)||t(typeof Lu=="object"&&Lu)||function(){return this}()||Function("return this")(),Lu}var f1,s5;function Xe(){return s5||(s5=1,f1=function(t){try{return!!t()}catch{return!0}}),f1}var p1,a5;function kh(){if(a5)return p1;a5=1;var t=Xe();return p1=!t(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),p1}var m1,o5;function Um(){if(o5)return m1;o5=1;var t=kh(),e=Function.prototype,r=e.apply,n=e.call;return m1=typeof Reflect=="object"&&Reflect.apply||(t?n.bind(r):function(){return n.apply(r,arguments)}),m1}var v1,l5;function et(){if(l5)return v1;l5=1;var t=kh(),e=Function.prototype,r=e.call,n=t&&e.bind.bind(r,r);return v1=t?n:function(i){return function(){return r.apply(i,arguments)}},v1}var g1,c5;function Ki(){if(c5)return g1;c5=1;var t=et(),e=t({}.toString),r=t("".slice);return g1=function(n){return r(e(n),8,-1)},g1}var y1,u5;function uP(){if(u5)return y1;u5=1;var t=Ki(),e=et();return y1=function(r){if(t(r)==="Function")return e(r)},y1}var b1,d5;function Er(){if(d5)return b1;d5=1;var t=typeof document=="object"&&document.all;return b1=typeof t>"u"&&t!==void 0?function(e){return typeof e=="function"||e===t}:function(e){return typeof e=="function"},b1}var x1={},w1,h5;function er(){if(h5)return w1;h5=1;var t=Xe();return w1=!t(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),w1}var _1,f5;function Nn(){if(f5)return _1;f5=1;var t=kh(),e=Function.prototype.call;return _1=t?e.bind(e):function(){return e.apply(e,arguments)},_1}var S1={},p5;function Wm(){if(p5)return S1;p5=1;var t={}.propertyIsEnumerable,e=Object.getOwnPropertyDescriptor,r=e&&!t.call({1:2},1);return S1.f=r?function(i){var s=e(this,i);return!!s&&s.enumerable}:t,S1}var E1,m5;function $h(){return m5||(m5=1,E1=function(t,e){return{enumerable:!(t&1),configurable:!(t&2),writable:!(t&4),value:e}}),E1}var N1,v5;function Vm(){if(v5)return N1;v5=1;var t=et(),e=Xe(),r=Ki(),n=Object,i=t("".split);return N1=e(function(){return!n("z").propertyIsEnumerable(0)})?function(s){return r(s)==="String"?i(s,""):n(s)}:n,N1}var j1,g5;function ou(){return g5||(g5=1,j1=function(t){return t==null}),j1}var C1,y5;function qs(){if(y5)return C1;y5=1;var t=ou(),e=TypeError;return C1=function(r){if(t(r))throw new e("Can't call method on "+r);return r},C1}var O1,b5;function Ni(){if(b5)return O1;b5=1;var t=Vm(),e=qs();return O1=function(r){return t(e(r))},O1}var P1,x5;function Nr(){if(x5)return P1;x5=1;var t=Er();return P1=function(e){return typeof e=="object"?e!==null:t(e)},P1}var T1,w5;function mt(){return w5||(w5=1,T1={}),T1}var I1,_5;function qn(){if(_5)return I1;_5=1;var t=mt(),e=$t(),r=Er(),n=function(i){return r(i)?i:void 0};return I1=function(i,s){return arguments.length<2?n(t[i])||n(e[i]):t[i]&&t[i][s]||e[i]&&e[i][s]},I1}var R1,S5;function cr(){if(S5)return R1;S5=1;var t=et();return R1=t({}.isPrototypeOf),R1}var k1,E5;function lu(){if(E5)return k1;E5=1;var t=$t(),e=t.navigator,r=e&&e.userAgent;return k1=r?String(r):"",k1}var $1,N5;function Dh(){if(N5)return $1;N5=1;var t=$t(),e=lu(),r=t.process,n=t.Deno,i=r&&r.versions||n&&n.version,s=i&&i.v8,a,o;return s&&(a=s.split("."),o=a[0]>0&&a[0]<4?1:+(a[0]+a[1])),!o&&e&&(a=e.match(/Edge\/(\d+)/),(!a||a[1]>=74)&&(a=e.match(/Chrome\/(\d+)/),a&&(o=+a[1]))),$1=o,$1}var D1,j5;function cu(){if(j5)return D1;j5=1;var t=Dh(),e=Xe(),r=$t(),n=r.String;return D1=!!Object.getOwnPropertySymbols&&!e(function(){var i=Symbol("symbol detection");return!n(i)||!(Object(i)instanceof Symbol)||!Symbol.sham&&t&&t<41}),D1}var M1,C5;function TY(){if(C5)return M1;C5=1;var t=cu();return M1=t&&!Symbol.sham&&typeof Symbol.iterator=="symbol",M1}var q1,O5;function Mh(){if(O5)return q1;O5=1;var t=qn(),e=Er(),r=cr(),n=TY(),i=Object;return q1=n?function(s){return typeof s=="symbol"}:function(s){var a=t("Symbol");return e(a)&&r(a.prototype,i(s))},q1}var A1,P5;function uu(){if(P5)return A1;P5=1;var t=String;return A1=function(e){try{return t(e)}catch{return"Object"}},A1}var F1,T5;function As(){if(T5)return F1;T5=1;var t=Er(),e=uu(),r=TypeError;return F1=function(n){if(t(n))return n;throw new r(e(n)+" is not a function")},F1}var L1,I5;function dP(){if(I5)return L1;I5=1;var t=As(),e=ou();return L1=function(r,n){var i=r[n];return e(i)?void 0:t(i)},L1}var B1,R5;function rfe(){if(R5)return B1;R5=1;var t=Nn(),e=Er(),r=Nr(),n=TypeError;return B1=function(i,s){var a,o;if(s==="string"&&e(a=i.toString)&&!r(o=t(a,i))||e(a=i.valueOf)&&!r(o=t(a,i))||s!=="string"&&e(a=i.toString)&&!r(o=t(a,i)))return o;throw new n("Can't convert object to primitive value")},B1}var z1={exports:{}},U1,k5;function du(){return k5||(k5=1,U1=!0),U1}var W1,$5;function nfe(){if($5)return W1;$5=1;var t=$t(),e=Object.defineProperty;return W1=function(r,n){try{e(t,r,{value:n,configurable:!0,writable:!0})}catch{t[r]=n}return n},W1}var D5;function hP(){if(D5)return z1.exports;D5=1;var t=du(),e=$t(),r=nfe(),n="__core-js_shared__",i=z1.exports=e[n]||r(n,{});return(i.versions||(i.versions=[])).push({version:"3.44.0",mode:t?"pure":"global",copyright:" 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.44.0/LICENSE",source:"https://github.com/zloirock/core-js"}),z1.exports}var V1,M5;function hu(){if(M5)return V1;M5=1;var t=hP();return V1=function(e,r){return t[e]||(t[e]=r||{})},V1}var H1,q5;function An(){if(q5)return H1;q5=1;var t=qs(),e=Object;return H1=function(r){return e(t(r))},H1}var K1,A5;function Rr(){if(A5)return K1;A5=1;var t=et(),e=An(),r=t({}.hasOwnProperty);return K1=Object.hasOwn||function(i,s){return r(e(i),s)},K1}var G1,F5;function Hm(){if(F5)return G1;F5=1;var t=et(),e=0,r=Math.random(),n=t(1.1.toString);return G1=function(i){return"Symbol("+(i===void 0?"":i)+")_"+n(++e+r,36)},G1}var Y1,L5;function ur(){if(L5)return Y1;L5=1;var t=$t(),e=hu(),r=Rr(),n=Hm(),i=cu(),s=TY(),a=t.Symbol,o=e("wks"),c=s?a.for||a:a&&a.withoutSetter||n;return Y1=function(u){return r(o,u)||(o[u]=i&&r(a,u)?a[u]:c("Symbol."+u)),o[u]},Y1}var Q1,B5;function IY(){if(B5)return Q1;B5=1;var t=Nn(),e=Nr(),r=Mh(),n=dP(),i=rfe(),s=ur(),a=TypeError,o=s("toPrimitive");return Q1=function(c,u){if(!e(c)||r(c))return c;var d=n(c,o),h;if(d){if(u===void 0&&(u="default"),h=t(d,c,u),!e(h)||r(h))return h;throw new a("Can't convert object to primitive value")}return u===void 0&&(u="number"),i(c,u)},Q1}var X1,z5;function fP(){if(z5)return X1;z5=1;var t=IY(),e=Mh();return X1=function(r){var n=t(r,"string");return e(n)?n:n+""},X1}var J1,U5;function RY(){if(U5)return J1;U5=1;var t=$t(),e=Nr(),r=t.document,n=e(r)&&e(r.createElement);return J1=function(i){return n?r.createElement(i):{}},J1}var Z1,W5;function kY(){if(W5)return Z1;W5=1;var t=er(),e=Xe(),r=RY();return Z1=!t&&!e(function(){return Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a!==7}),Z1}var V5;function Km(){if(V5)return x1;V5=1;var t=er(),e=Nn(),r=Wm(),n=$h(),i=Ni(),s=fP(),a=Rr(),o=kY(),c=Object.getOwnPropertyDescriptor;return x1.f=t?c:function(d,h){if(d=i(d),h=s(h),o)try{return c(d,h)}catch{}if(a(d,h))return n(!e(r.f,d,h),d[h])},x1}var ew,H5;function ife(){if(H5)return ew;H5=1;var t=Xe(),e=Er(),r=/#|\.prototype\./,n=function(c,u){var d=s[i(c)];return d===o?!0:d===a?!1:e(u)?t(u):!!u},i=n.normalize=function(c){return String(c).replace(r,".").toLowerCase()},s=n.data={},a=n.NATIVE="N",o=n.POLYFILL="P";return ew=n,ew}var tw,K5;function Gm(){if(K5)return tw;K5=1;var t=uP(),e=As(),r=kh(),n=t(t.bind);return tw=function(i,s){return e(i),s===void 0?i:r?n(i,s):function(){return i.apply(s,arguments)}},tw}var rw={},nw,G5;function $Y(){if(G5)return nw;G5=1;var t=er(),e=Xe();return nw=t&&e(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),nw}var iw,Y5;function Gi(){if(Y5)return iw;Y5=1;var t=Nr(),e=String,r=TypeError;return iw=function(n){if(t(n))return n;throw new r(e(n)+" is not an object")},iw}var Q5;function ri(){if(Q5)return rw;Q5=1;var t=er(),e=kY(),r=$Y(),n=Gi(),i=fP(),s=TypeError,a=Object.defineProperty,o=Object.getOwnPropertyDescriptor,c="enumerable",u="configurable",d="writable";return rw.f=t?r?function(f,p,v){if(n(f),p=i(p),n(v),typeof f=="function"&&p==="prototype"&&"value"in v&&d in v&&!v[d]){var y=o(f,p);y&&y[d]&&(f[p]=v.value,v={configurable:u in v?v[u]:y[u],enumerable:c in v?v[c]:y[c],writable:!1})}return a(f,p,v)}:a:function(f,p,v){if(n(f),p=i(p),n(v),e)try{return a(f,p,v)}catch{}if("get"in v||"set"in v)throw new s("Accessors not supported");return"value"in v&&(f[p]=v.value),f},rw}var sw,X5;function fu(){if(X5)return sw;X5=1;var t=er(),e=ri(),r=$h();return sw=t?function(n,i,s){return e.f(n,i,r(1,s))}:function(n,i,s){return n[i]=s,n},sw}var aw,J5;function Ne(){if(J5)return aw;J5=1;var t=$t(),e=Um(),r=uP(),n=Er(),i=Km().f,s=ife(),a=mt(),o=Gm(),c=fu(),u=Rr(),d=function(h){var f=function(p,v,y){if(this instanceof f){switch(arguments.length){case 0:return new h;case 1:return new h(p);case 2:return new h(p,v)}return new h(p,v,y)}return e(h,this,arguments)};return f.prototype=h.prototype,f};return aw=function(h,f){var p=h.target,v=h.global,y=h.stat,x=h.proto,g=v?t:y?t[p]:t[p]&&t[p].prototype,m=v?a:a[p]||c(a,p,{})[p],w=m.prototype,b,_,E,j,S,C,N,O,T;for(j in f)b=s(v?j:p+(y?".":"#")+j,h.forced),_=!b&&g&&u(g,j),C=m[j],_&&(h.dontCallGetSet?(T=i(g,j),N=T&&T.value):N=g[j]),S=_&&N?N:f[j],!(!b&&!x&&typeof C==typeof S)&&(h.bind&&_?O=o(S,t):h.wrap&&_?O=d(S):x&&n(S)?O=r(S):O=S,(h.sham||S&&S.sham||C&&C.sham)&&c(O,"sham",!0),c(m,j,O),x&&(E=p+"Prototype",u(a,E)||c(a,E,{}),c(a[E],j,S),h.real&&w&&(b||!w[j])&&c(w,j,S)))},aw}var ow,Z5;function sfe(){if(Z5)return ow;Z5=1;var t=Math.ceil,e=Math.floor;return ow=Math.trunc||function(n){var i=+n;return(i>0?e:t)(i)},ow}var lw,e3;function pu(){if(e3)return lw;e3=1;var t=sfe();return lw=function(e){var r=+e;return r!==r||r===0?0:t(r)},lw}var cw,t3;function Ym(){if(t3)return cw;t3=1;var t=pu(),e=Math.max,r=Math.min;return cw=function(n,i){var s=t(n);return s<0?e(s+i,0):r(s,i)},cw}var uw,r3;function DY(){if(r3)return uw;r3=1;var t=pu(),e=Math.min;return uw=function(r){var n=t(r);return n>0?e(n,9007199254740991):0},uw}var dw,n3;function Fs(){if(n3)return dw;n3=1;var t=DY();return dw=function(e){return t(e.length)},dw}var hw,i3;function pP(){if(i3)return hw;i3=1;var t=Ni(),e=Ym(),r=Fs(),n=function(i){return function(s,a,o){var c=t(s),u=r(c);if(u===0)return!i&&-1;var d=e(o,u),h;if(i&&a!==a){for(;u>d;)if(h=c[d++],h!==h)return!0}else for(;u>d;d++)if((i||d in c)&&c[d]===a)return i||d||0;return!i&&-1}};return hw={includes:n(!0),indexOf:n(!1)},hw}var fw,s3;function qh(){return s3||(s3=1,fw={}),fw}var pw,a3;function MY(){if(a3)return pw;a3=1;var t=et(),e=Rr(),r=Ni(),n=pP().indexOf,i=qh(),s=t([].push);return pw=function(a,o){var c=r(a),u=0,d=[],h;for(h in c)!e(i,h)&&e(c,h)&&s(d,h);for(;o.length>u;)e(c,h=o[u++])&&(~n(d,h)||s(d,h));return d},pw}var mw,o3;function mP(){return o3||(o3=1,mw=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),mw}var vw,l3;function Ah(){if(l3)return vw;l3=1;var t=MY(),e=mP();return vw=Object.keys||function(n){return t(n,e)},vw}var gw={},c3;function Qm(){return c3||(c3=1,gw.f=Object.getOwnPropertySymbols),gw}var yw,u3;function afe(){if(u3)return yw;u3=1;var t=er(),e=et(),r=Nn(),n=Xe(),i=Ah(),s=Qm(),a=Wm(),o=An(),c=Vm(),u=Object.assign,d=Object.defineProperty,h=e([].concat);return yw=!u||n(function(){if(t&&u({b:1},u(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var f={},p={},v=Symbol("assign detection"),y="abcdefghijklmnopqrst";return f[v]=7,y.split("").forEach(function(x){p[x]=x}),u({},f)[v]!==7||i(u({},p)).join("")!==y})?function(p,v){for(var y=o(p),x=arguments.length,g=1,m=s.f,w=a.f;x>g;)for(var b=c(arguments[g++]),_=m?h(i(b),m(b)):i(b),E=_.length,j=0,S;E>j;)S=_[j++],(!t||r(w,b,S))&&(y[S]=b[S]);return y}:u,yw}var d3;function ofe(){if(d3)return n5;d3=1;var t=Ne(),e=afe();return t({target:"Object",stat:!0,arity:2,forced:Object.assign!==e},{assign:e}),n5}var bw,h3;function lfe(){if(h3)return bw;h3=1,ofe();var t=mt();return bw=t.Object.assign,bw}var xw,f3;function cfe(){if(f3)return xw;f3=1;var t=lfe();return xw=t,xw}var ww,p3;function ufe(){return p3||(p3=1,ww=cfe()),ww}var dfe=ufe(),sr=ke(dfe),m3={},_w,v3;function mu(){if(v3)return _w;v3=1;var t=et();return _w=t([].slice),_w}var Sw,g3;function hfe(){if(g3)return Sw;g3=1;var t=et(),e=As(),r=Nr(),n=Rr(),i=mu(),s=kh(),a=Function,o=t([].concat),c=t([].join),u={},d=function(h,f,p){if(!n(u,f)){for(var v=[],y=0;y<f;y++)v[y]="a["+y+"]";u[f]=a("C,a","return new C("+c(v,",")+")")}return u[f](h,p)};return Sw=s?a.bind:function(f){var p=e(this),v=p.prototype,y=i(arguments,1),x=function(){var m=o(y,i(arguments));return this instanceof x?d(p,m.length,m):p.apply(f,m)};return r(v)&&(x.prototype=v),x},Sw}var y3;function ffe(){if(y3)return m3;y3=1;var t=Ne(),e=hfe();return t({target:"Function",proto:!0,forced:Function.bind!==e},{bind:e}),m3}var Ew,b3;function kr(){if(b3)return Ew;b3=1;var t=$t(),e=mt();return Ew=function(r,n){var i=e[r+"Prototype"],s=i&&i[n];if(s)return s;var a=t[r],o=a&&a.prototype;return o&&o[n]},Ew}var Nw,x3;function pfe(){if(x3)return Nw;x3=1,ffe();var t=kr();return Nw=t("Function","bind"),Nw}var jw,w3;function mfe(){if(w3)return jw;w3=1;var t=cr(),e=pfe(),r=Function.prototype;return jw=function(n){var i=n.bind;return n===r||t(r,n)&&i===r.bind?e:i},jw}var Cw,_3;function vfe(){if(_3)return Cw;_3=1;var t=mfe();return Cw=t,Cw}var Ow,S3;function gfe(){return S3||(S3=1,Ow=vfe()),Ow}var yfe=gfe(),re=ke(yfe);function vP(t,e,r,n){t.beginPath(),t.arc(e,r,n,0,2*Math.PI,!1),t.closePath()}function bfe(t,e,r,n){t.beginPath(),t.rect(e-n,r-n,n*2,n*2),t.closePath()}function xfe(t,e,r,n){t.beginPath(),n*=1.15,r+=.275*n;const i=n*2,s=i/2,a=Math.sqrt(3)/6*i,o=Math.sqrt(i*i-s*s);t.moveTo(e,r-(o-a)),t.lineTo(e+s,r+a),t.lineTo(e-s,r+a),t.lineTo(e,r-(o-a)),t.closePath()}function wfe(t,e,r,n){t.beginPath(),n*=1.15,r-=.275*n;const i=n*2,s=i/2,a=Math.sqrt(3)/6*i,o=Math.sqrt(i*i-s*s);t.moveTo(e,r+(o-a)),t.lineTo(e+s,r-a),t.lineTo(e-s,r-a),t.lineTo(e,r+(o-a)),t.closePath()}function _fe(t,e,r,n){t.beginPath(),n*=.82,r+=.1*n;for(let i=0;i<10;i++){const s=i%2===0?n*1.3:n*.5;t.lineTo(e+s*Math.sin(i*2*Math.PI/10),r-s*Math.cos(i*2*Math.PI/10))}t.closePath()}function Sfe(t,e,r,n){t.beginPath(),t.lineTo(e,r+n),t.lineTo(e+n,r),t.lineTo(e,r-n),t.lineTo(e-n,r),t.closePath()}function qY(t,e,r,n,i,s){const a=Math.PI/180;n-2*s<0&&(s=n/2),i-2*s<0&&(s=i/2),t.beginPath(),t.moveTo(e+s,r),t.lineTo(e+n-s,r),t.arc(e+n-s,r+s,s,a*270,a*360,!1),t.lineTo(e+n,r+i-s),t.arc(e+n-s,r+i-s,s,0,a*90,!1),t.lineTo(e+s,r+i),t.arc(e+s,r+i-s,s,a*90,a*180,!1),t.lineTo(e,r+s),t.arc(e+s,r+s,s,a*180,a*270,!1),t.closePath()}function iC(t,e,r,n,i){const s=.5522848,a=n/2*s,o=i/2*s,c=e+n,u=r+i,d=e+n/2,h=r+i/2;t.beginPath(),t.moveTo(e,h),t.bezierCurveTo(e,h-o,d-a,r,d,r),t.bezierCurveTo(d+a,r,c,h-o,c,h),t.bezierCurveTo(c,h+o,d+a,u,d,u),t.bezierCurveTo(d-a,u,e,h+o,e,h),t.closePath()}function AY(t,e,r,n,i){const s=.3333333333333333,a=n,o=i*s,c=.5522848,u=a/2*c,d=o/2*c,h=e+a,f=r+o,p=e+a/2,v=r+o/2,y=r+(i-o/2),x=r+i;t.beginPath(),t.moveTo(h,v),t.bezierCurveTo(h,v+d,p+u,f,p,f),t.bezierCurveTo(p-u,f,e,v+d,e,v),t.bezierCurveTo(e,v-d,p-u,r,p,r),t.bezierCurveTo(p+u,r,h,v-d,h,v),t.lineTo(h,y),t.bezierCurveTo(h,y+d,p+u,x,p,x),t.bezierCurveTo(p-u,x,e,y+d,e,y),t.lineTo(e,v)}function FY(t,e,r,n,i,s){t.beginPath(),t.moveTo(e,r);const a=s.length,o=n-e,c=i-r,u=c/o;let d=Math.sqrt(o*o+c*c),h=0,f=!0,p=0,v=+s[0];for(;d>=.1;)v=+s[h++%a],v>d&&(v=d),p=Math.sqrt(v*v/(1+u*u)),p=o<0?-p:p,e+=p,r+=u*p,f===!0?t.lineTo(e,r):t.moveTo(e,r),d-=v,f=!f}function Efe(t,e,r,n){t.beginPath();const i=6,s=Math.PI*2/i;t.moveTo(e+n,r);for(let a=1;a<i;a++)t.lineTo(e+n*Math.cos(s*a),r+n*Math.sin(s*a));t.closePath()}const E3={circle:vP,dashedLine:FY,database:AY,diamond:Sfe,ellipse:iC,ellipse_vis:iC,hexagon:Efe,roundRect:qY,square:bfe,star:_fe,triangle:xfe,triangleDown:wfe};function Nfe(t){return Object.prototype.hasOwnProperty.call(E3,t)?E3[t]:function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];CanvasRenderingContext2D.prototype[t].call(e,n)}}var Pw={exports:{}},N3;function jfe(){return N3||(N3=1,function(t){t.exports=e;function e(n){if(n)return r(n)}function r(n){for(var i in e.prototype)n[i]=e.prototype[i];return n}e.prototype.on=e.prototype.addEventListener=function(n,i){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(i),this},e.prototype.once=function(n,i){function s(){this.off(n,s),i.apply(this,arguments)}return s.fn=i,this.on(n,s),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(n,i){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var s=this._callbacks["$"+n];if(!s)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var a,o=0;o<s.length;o++)if(a=s[o],a===i||a.fn===i){s.splice(o,1);break}return s.length===0&&delete this._callbacks["$"+n],this},e.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var i=new Array(arguments.length-1),s=this._callbacks["$"+n],a=1;a<arguments.length;a++)i[a-1]=arguments[a];if(s){s=s.slice(0);for(var a=0,o=s.length;a<o;++a)s[a].apply(this,i)}return this},e.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]},e.prototype.hasListeners=function(n){return!!this.listeners(n).length}}(Pw)),Pw.exports}var Cfe=jfe(),LY=ke(Cfe),j3={},Tw,C3;function cl(){if(C3)return Tw;C3=1;var t=Ki();return Tw=Array.isArray||function(r){return t(r)==="Array"},Tw}var Iw,O3;function BY(){if(O3)return Iw;O3=1;var t=TypeError,e=9007199254740991;return Iw=function(r){if(r>e)throw t("Maximum allowed index exceeded");return r},Iw}var Rw,P3;function Xm(){if(P3)return Rw;P3=1;var t=er(),e=ri(),r=$h();return Rw=function(n,i,s){t?e.f(n,i,r(0,s)):n[i]=s},Rw}var kw,T3;function gP(){if(T3)return kw;T3=1;var t=ur(),e=t("toStringTag"),r={};return r[e]="z",kw=String(r)==="[object z]",kw}var $w,I3;function vu(){if(I3)return $w;I3=1;var t=gP(),e=Er(),r=Ki(),n=ur(),i=n("toStringTag"),s=Object,a=r(function(){return arguments}())==="Arguments",o=function(c,u){try{return c[u]}catch{}};return $w=t?r:function(c){var u,d,h;return c===void 0?"Undefined":c===null?"Null":typeof(d=o(u=s(c),i))=="string"?d:a?r(u):(h=r(u))==="Object"&&e(u.callee)?"Arguments":h},$w}var Dw,R3;function Ofe(){if(R3)return Dw;R3=1;var t=et(),e=Er(),r=hP(),n=t(Function.toString);return e(r.inspectSource)||(r.inspectSource=function(i){return n(i)}),Dw=r.inspectSource,Dw}var Mw,k3;function zY(){if(k3)return Mw;k3=1;var t=et(),e=Xe(),r=Er(),n=vu(),i=qn(),s=Ofe(),a=function(){},o=i("Reflect","construct"),c=/^\s*(?:class|function)\b/,u=t(c.exec),d=!c.test(a),h=function(v){if(!r(v))return!1;try{return o(a,[],v),!0}catch{return!1}},f=function(v){if(!r(v))return!1;switch(n(v)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return d||!!u(c,s(v))}catch{return!0}};return f.sham=!0,Mw=!o||e(function(){var p;return h(h.call)||!h(Object)||!h(function(){p=!0})||p})?f:h,Mw}var qw,$3;function Pfe(){if($3)return qw;$3=1;var t=cl(),e=zY(),r=Nr(),n=ur(),i=n("species"),s=Array;return qw=function(a){var o;return t(a)&&(o=a.constructor,e(o)&&(o===s||t(o.prototype))?o=void 0:r(o)&&(o=o[i],o===null&&(o=void 0))),o===void 0?s:o},qw}var Aw,D3;function yP(){if(D3)return Aw;D3=1;var t=Pfe();return Aw=function(e,r){return new(t(e))(r===0?0:r)},Aw}var Fw,M3;function Fh(){if(M3)return Fw;M3=1;var t=Xe(),e=ur(),r=Dh(),n=e("species");return Fw=function(i){return r>=51||!t(function(){var s=[],a=s.constructor={};return a[n]=function(){return{foo:1}},s[i](Boolean).foo!==1})},Fw}var q3;function UY(){if(q3)return j3;q3=1;var t=Ne(),e=Xe(),r=cl(),n=Nr(),i=An(),s=Fs(),a=BY(),o=Xm(),c=yP(),u=Fh(),d=ur(),h=Dh(),f=d("isConcatSpreadable"),p=h>=51||!e(function(){var x=[];return x[f]=!1,x.concat()[0]!==x}),v=function(x){if(!n(x))return!1;var g=x[f];return g!==void 0?!!g:r(x)},y=!p||!u("concat");return t({target:"Array",proto:!0,arity:1,forced:y},{concat:function(g){var m=i(this),w=c(m,0),b=0,_,E,j,S,C;for(_=-1,j=arguments.length;_<j;_++)if(C=_===-1?m:arguments[_],v(C))for(S=s(C),a(b+S),E=0;E<S;E++,b++)E in C&&o(w,b,C[E]);else a(b+1),o(w,b++,C);return w.length=b,w}}),j3}var A3={},F3={},Lw,L3;function ni(){if(L3)return Lw;L3=1;var t=vu(),e=String;return Lw=function(r){if(t(r)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return e(r)},Lw}var Bw={},B3;function bP(){if(B3)return Bw;B3=1;var t=er(),e=$Y(),r=ri(),n=Gi(),i=Ni(),s=Ah();return Bw.f=t&&!e?Object.defineProperties:function(o,c){n(o);for(var u=i(c),d=s(c),h=d.length,f=0,p;h>f;)r.f(o,p=d[f++],u[p]);return o},Bw}var zw,z3;function Tfe(){if(z3)return zw;z3=1;var t=qn();return zw=t("document","documentElement"),zw}var Uw,U3;function Jm(){if(U3)return Uw;U3=1;var t=hu(),e=Hm(),r=t("keys");return Uw=function(n){return r[n]||(r[n]=e(n))},Uw}var Ww,W3;function Lh(){if(W3)return Ww;W3=1;var t=Gi(),e=bP(),r=mP(),n=qh(),i=Tfe(),s=RY(),a=Jm(),o=">",c="<",u="prototype",d="script",h=a("IE_PROTO"),f=function(){},p=function(m){return c+d+o+m+c+"/"+d+o},v=function(m){m.write(p("")),m.close();var w=m.parentWindow.Object;return m=null,w},y=function(){var m=s("iframe"),w="java"+d+":",b;return m.style.display="none",i.appendChild(m),m.src=String(w),b=m.contentWindow.document,b.open(),b.write(p("document.F=Object")),b.close(),b.F},x,g=function(){try{x=new ActiveXObject("htmlfile")}catch{}g=typeof document<"u"?document.domain&&x?v(x):y():v(x);for(var m=r.length;m--;)delete g[u][r[m]];return g()};return n[h]=!0,Ww=Object.create||function(w,b){var _;return w!==null?(f[u]=t(w),_=new f,f[u]=null,_[h]=w):_=g(),b===void 0?_:e.f(_,b)},Ww}var Vw={},V3;function Zm(){if(V3)return Vw;V3=1;var t=MY(),e=mP(),r=e.concat("length","prototype");return Vw.f=Object.getOwnPropertyNames||function(i){return t(i,r)},Vw}var Hw={},H3;function xP(){if(H3)return Hw;H3=1;var t=Ki(),e=Ni(),r=Zm().f,n=mu(),i=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(a){try{return r(a)}catch{return n(i)}};return Hw.f=function(o){return i&&t(o)==="Window"?s(o):r(e(o))},Hw}var Kw,K3;function Bh(){if(K3)return Kw;K3=1;var t=fu();return Kw=function(e,r,n,i){return i&&i.enumerable?e[r]=n:t(e,r,n),e},Kw}var Gw,G3;function wP(){if(G3)return Gw;G3=1;var t=ri();return Gw=function(e,r,n){return t.f(e,r,n)},Gw}var Yw={},Y3;function ev(){if(Y3)return Yw;Y3=1;var t=ur();return Yw.f=t,Yw}var Qw,Q3;function Lt(){if(Q3)return Qw;Q3=1;var t=mt(),e=Rr(),r=ev(),n=ri().f;return Qw=function(i){var s=t.Symbol||(t.Symbol={});e(s,i)||n(s,i,{value:r.f(i)})},Qw}var Xw,X3;function WY(){if(X3)return Xw;X3=1;var t=Nn(),e=qn(),r=ur(),n=Bh();return Xw=function(){var i=e("Symbol"),s=i&&i.prototype,a=s&&s.valueOf,o=r("toPrimitive");s&&!s[o]&&n(s,o,function(c){return t(a,this)},{arity:1})},Xw}var Jw,J3;function Ife(){if(J3)return Jw;J3=1;var t=gP(),e=vu();return Jw=t?{}.toString:function(){return"[object "+e(this)+"]"},Jw}var Zw,Z3;function ul(){if(Z3)return Zw;Z3=1;var t=gP(),e=ri().f,r=fu(),n=Rr(),i=Ife(),s=ur(),a=s("toStringTag");return Zw=function(o,c,u,d){var h=u?o:o&&o.prototype;h&&(n(h,a)||e(h,a,{configurable:!0,value:c}),d&&!t&&r(h,"toString",i))},Zw}var e_,eL;function VY(){if(eL)return e_;eL=1;var t=$t(),e=Er(),r=t.WeakMap;return e_=e(r)&&/native code/.test(String(r)),e_}var t_,tL;function dl(){if(tL)return t_;tL=1;var t=VY(),e=$t(),r=Nr(),n=fu(),i=Rr(),s=hP(),a=Jm(),o=qh(),c="Object already initialized",u=e.TypeError,d=e.WeakMap,h,f,p,v=function(m){return p(m)?f(m):h(m,{})},y=function(m){return function(w){var b;if(!r(w)||(b=f(w)).type!==m)throw new u("Incompatible receiver, "+m+" required");return b}};if(t||s.state){var x=s.state||(s.state=new d);x.get=x.get,x.has=x.has,x.set=x.set,h=function(m,w){if(x.has(m))throw new u(c);return w.facade=m,x.set(m,w),w},f=function(m){return x.get(m)||{}},p=function(m){return x.has(m)}}else{var g=a("state");o[g]=!0,h=function(m,w){if(i(m,g))throw new u(c);return w.facade=m,n(m,g,w),w},f=function(m){return i(m,g)?m[g]:{}},p=function(m){return i(m,g)}}return t_={set:h,get:f,has:p,enforce:v,getterFor:y},t_}var r_,rL;function Ua(){if(rL)return r_;rL=1;var t=Gm(),e=et(),r=Vm(),n=An(),i=Fs(),s=yP(),a=e([].push),o=function(c){var u=c===1,d=c===2,h=c===3,f=c===4,p=c===6,v=c===7,y=c===5||p;return function(x,g,m,w){for(var b=n(x),_=r(b),E=i(_),j=t(g,m),S=0,C=w||s,N=u?C(x,E):d||v?C(x,0):void 0,O,T;E>S;S++)if((y||S in _)&&(O=_[S],T=j(O,S,b),c))if(u)N[S]=T;else if(T)switch(c){case 3:return!0;case 5:return O;case 6:return S;case 2:a(N,O)}else switch(c){case 4:return!1;case 7:a(N,O)}return p?-1:h||f?f:N}};return r_={forEach:o(0),map:o(1),filter:o(2),some:o(3),every:o(4),find:o(5),findIndex:o(6),filterReject:o(7)},r_}var nL;function Rfe(){if(nL)return F3;nL=1;var t=Ne(),e=$t(),r=Nn(),n=et(),i=du(),s=er(),a=cu(),o=Xe(),c=Rr(),u=cr(),d=Gi(),h=Ni(),f=fP(),p=ni(),v=$h(),y=Lh(),x=Ah(),g=Zm(),m=xP(),w=Qm(),b=Km(),_=ri(),E=bP(),j=Wm(),S=Bh(),C=wP(),N=hu(),O=Jm(),T=qh(),I=Hm(),D=ur(),F=ev(),M=Lt(),V=WY(),q=ul(),H=dl(),B=Ua().forEach,W=O("hidden"),K="Symbol",ue="prototype",ge=H.set,$e=H.getterFor(K),ye=Object[ue],Oe=e.Symbol,De=Oe&&Oe[ue],Ve=e.RangeError,vt=e.TypeError,st=e.QObject,X=b.f,_e=_.f,qe=m.f,He=j.f,Pt=n([].push),be=N("symbols"),Le=N("op-symbols"),jt=N("wks"),Tt=!st||!st[ue]||!st[ue].findChild,k=function(xe,ne,de){var ce=X(ye,ne);ce&&delete ye[ne],_e(xe,ne,de),ce&&xe!==ye&&_e(ye,ne,ce)},A=s&&o(function(){return y(_e({},"a",{get:function(){return _e(this,"a",{value:7}).a}})).a!==7})?k:_e,z=function(xe,ne){var de=be[xe]=y(De);return ge(de,{type:K,tag:xe,description:ne}),s||(de.description=ne),de},ie=function(ne,de,ce){ne===ye&&ie(Le,de,ce),d(ne);var Se=f(de);return d(ce),c(be,Se)?(ce.enumerable?(c(ne,W)&&ne[W][Se]&&(ne[W][Se]=!1),ce=y(ce,{enumerable:v(0,!1)})):(c(ne,W)||_e(ne,W,v(1,y(null))),ne[W][Se]=!0),A(ne,Se,ce)):_e(ne,Se,ce)},J=function(ne,de){d(ne);var ce=h(de),Se=x(ce).concat(It(ce));return B(Se,function(Je){(!s||r(fe,ce,Je))&&ie(ne,Je,ce[Je])}),ne},Q=function(ne,de){return de===void 0?y(ne):J(y(ne),de)},fe=function(ne){var de=f(ne),ce=r(He,this,de);return this===ye&&c(be,de)&&!c(Le,de)?!1:ce||!c(this,de)||!c(be,de)||c(this,W)&&this[W][de]?ce:!0},ze=function(ne,de){var ce=h(ne),Se=f(de);if(!(ce===ye&&c(be,Se)&&!c(Le,Se))){var Je=X(ce,Se);return Je&&c(be,Se)&&!(c(ce,W)&&ce[W][Se])&&(Je.enumerable=!0),Je}},Ge=function(ne){var de=qe(h(ne)),ce=[];return B(de,function(Se){!c(be,Se)&&!c(T,Se)&&Pt(ce,Se)}),ce},It=function(xe){var ne=xe===ye,de=qe(ne?Le:h(xe)),ce=[];return B(de,function(Se){c(be,Se)&&(!ne||c(ye,Se))&&Pt(ce,be[Se])}),ce};return a||(Oe=function(){if(u(De,this))throw new vt("Symbol is not a constructor");var ne=!arguments.length||arguments[0]===void 0?void 0:p(arguments[0]),de=I(ne),ce=function(Se){var Je=this===void 0?e:this;Je===ye&&r(ce,Le,Se),c(Je,W)&&c(Je[W],de)&&(Je[W][de]=!1);var Fn=v(1,Se);try{A(Je,de,Fn)}catch(si){if(!(si instanceof Ve))throw si;k(Je,de,Fn)}};return s&&Tt&&A(ye,de,{configurable:!0,set:ce}),z(de,ne)},De=Oe[ue],S(De,"toString",function(){return $e(this).tag}),S(Oe,"withoutSetter",function(xe){return z(I(xe),xe)}),j.f=fe,_.f=ie,E.f=J,b.f=ze,g.f=m.f=Ge,w.f=It,F.f=function(xe){return z(D(xe),xe)},s&&(C(De,"description",{configurable:!0,get:function(){return $e(this).description}}),i||S(ye,"propertyIsEnumerable",fe,{unsafe:!0}))),t({global:!0,constructor:!0,wrap:!0,forced:!a,sham:!a},{Symbol:Oe}),B(x(jt),function(xe){M(xe)}),t({target:K,stat:!0,forced:!a},{useSetter:function(){Tt=!0},useSimple:function(){Tt=!1}}),t({target:"Object",stat:!0,forced:!a,sham:!s},{create:Q,defineProperty:ie,defineProperties:J,getOwnPropertyDescriptor:ze}),t({target:"Object",stat:!0,forced:!a},{getOwnPropertyNames:Ge}),V(),q(Oe,K),T[W]=!0,F3}var iL={},n_,sL;function HY(){if(sL)return n_;sL=1;var t=cu();return n_=t&&!!Symbol.for&&!!Symbol.keyFor,n_}var aL;function kfe(){if(aL)return iL;aL=1;var t=Ne(),e=qn(),r=Rr(),n=ni(),i=hu(),s=HY(),a=i("string-to-symbol-registry"),o=i("symbol-to-string-registry");return t({target:"Symbol",stat:!0,forced:!s},{for:function(c){var u=n(c);if(r(a,u))return a[u];var d=e("Symbol")(u);return a[u]=d,o[d]=u,d}}),iL}var oL={},lL;function $fe(){if(lL)return oL;lL=1;var t=Ne(),e=Rr(),r=Mh(),n=uu(),i=hu(),s=HY(),a=i("symbol-to-string-registry");return t({target:"Symbol",stat:!0,forced:!s},{keyFor:function(c){if(!r(c))throw new TypeError(n(c)+" is not a symbol");if(e(a,c))return a[c]}}),oL}var cL={},i_,uL;function Dfe(){if(uL)return i_;uL=1;var t=et(),e=cl(),r=Er(),n=Ki(),i=ni(),s=t([].push);return i_=function(a){if(r(a))return a;if(e(a)){for(var o=a.length,c=[],u=0;u<o;u++){var d=a[u];typeof d=="string"?s(c,d):(typeof d=="number"||n(d)==="Number"||n(d)==="String")&&s(c,i(d))}var h=c.length,f=!0;return function(p,v){if(f)return f=!1,v;if(e(this))return v;for(var y=0;y<h;y++)if(c[y]===p)return v}}},i_}var dL;function KY(){if(dL)return cL;dL=1;var t=Ne(),e=qn(),r=Um(),n=Nn(),i=et(),s=Xe(),a=Er(),o=Mh(),c=mu(),u=Dfe(),d=cu(),h=String,f=e("JSON","stringify"),p=i(/./.exec),v=i("".charAt),y=i("".charCodeAt),x=i("".replace),g=i(1.1.toString),m=/[\uD800-\uDFFF]/g,w=/^[\uD800-\uDBFF]$/,b=/^[\uDC00-\uDFFF]$/,_=!d||s(function(){var C=e("Symbol")("stringify detection");return f([C])!=="[null]"||f({a:C})!=="{}"||f(Object(C))!=="{}"}),E=s(function(){return f("\uDF06\uD834")!=='"\\udf06\\ud834"'||f("\uDEAD")!=='"\\udead"'}),j=function(C,N){var O=c(arguments),T=u(N);if(!(!a(T)&&(C===void 0||o(C))))return O[1]=function(I,D){if(a(T)&&(D=n(T,this,h(I),D)),!o(D))return D},r(f,null,O)},S=function(C,N,O){var T=v(O,N-1),I=v(O,N+1);return p(w,C)&&!p(b,I)||p(b,C)&&!p(w,T)?"\\u"+g(y(C,0),16):C};return f&&t({target:"JSON",stat:!0,arity:3,forced:_||E},{stringify:function(N,O,T){var I=c(arguments),D=r(_?j:f,null,I);return E&&typeof D=="string"?x(D,m,S):D}}),cL}var hL={},fL;function Mfe(){if(fL)return hL;fL=1;var t=Ne(),e=cu(),r=Xe(),n=Qm(),i=An(),s=!e||r(function(){n.f(1)});return t({target:"Object",stat:!0,forced:s},{getOwnPropertySymbols:function(o){var c=n.f;return c?c(i(o)):[]}}),hL}var pL;function GY(){return pL||(pL=1,Rfe(),kfe(),$fe(),KY(),Mfe()),A3}var mL={},vL;function YY(){if(vL)return mL;vL=1;var t=Lt();return t("asyncDispose"),mL}var gL={},yL;function qfe(){if(yL)return gL;yL=1;var t=Lt();return t("asyncIterator"),gL}var bL={},xL;function QY(){if(xL)return bL;xL=1;var t=Lt();return t("dispose"),bL}var wL={},_L;function Afe(){if(_L)return wL;_L=1;var t=Lt();return t("hasInstance"),wL}var SL={},EL;function Ffe(){if(EL)return SL;EL=1;var t=Lt();return t("isConcatSpreadable"),SL}var NL={},jL;function XY(){if(jL)return NL;jL=1;var t=Lt();return t("iterator"),NL}var CL={},OL;function Lfe(){if(OL)return CL;OL=1;var t=Lt();return t("match"),CL}var PL={},TL;function Bfe(){if(TL)return PL;TL=1;var t=Lt();return t("matchAll"),PL}var IL={},RL;function zfe(){if(RL)return IL;RL=1;var t=Lt();return t("replace"),IL}var kL={},$L;function Ufe(){if($L)return kL;$L=1;var t=Lt();return t("search"),kL}var DL={},ML;function Wfe(){if(ML)return DL;ML=1;var t=Lt();return t("species"),DL}var qL={},AL;function Vfe(){if(AL)return qL;AL=1;var t=Lt();return t("split"),qL}var FL={},LL;function JY(){if(LL)return FL;LL=1;var t=Lt(),e=WY();return t("toPrimitive"),e(),FL}var BL={},zL;function Hfe(){if(zL)return BL;zL=1;var t=qn(),e=Lt(),r=ul();return e("toStringTag"),r(t("Symbol"),"Symbol"),BL}var UL={},WL;function Kfe(){if(WL)return UL;WL=1;var t=Lt();return t("unscopables"),UL}var VL={},HL;function Gfe(){if(HL)return VL;HL=1;var t=$t(),e=ul();return e(t.JSON,"JSON",!0),VL}var s_,KL;function Yfe(){if(KL)return s_;KL=1,UY(),GY(),YY(),qfe(),QY(),Afe(),Ffe(),XY(),Lfe(),Bfe(),zfe(),Ufe(),Wfe(),Vfe(),JY(),Hfe(),Kfe(),Gfe();var t=mt();return s_=t.Symbol,s_}var GL={},a_,YL;function _P(){return YL||(YL=1,a_=function(){}),a_}var o_,QL;function gu(){return QL||(QL=1,o_={}),o_}var l_,XL;function Qfe(){if(XL)return l_;XL=1;var t=er(),e=Rr(),r=Function.prototype,n=t&&Object.getOwnPropertyDescriptor,i=e(r,"name"),s=i&&(function(){}).name==="something",a=i&&(!t||t&&n(r,"name").configurable);return l_={EXISTS:i,PROPER:s,CONFIGURABLE:a},l_}var c_,JL;function ZY(){if(JL)return c_;JL=1;var t=Xe();return c_=!t(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),c_}var u_,ZL;function tv(){if(ZL)return u_;ZL=1;var t=Rr(),e=Er(),r=An(),n=Jm(),i=ZY(),s=n("IE_PROTO"),a=Object,o=a.prototype;return u_=i?a.getPrototypeOf:function(c){var u=r(c);if(t(u,s))return u[s];var d=u.constructor;return e(d)&&u instanceof d?d.prototype:u instanceof a?o:null},u_}var d_,e6;function eQ(){if(e6)return d_;e6=1;var t=Xe(),e=Er(),r=Nr(),n=Lh(),i=tv(),s=Bh(),a=ur(),o=du(),c=a("iterator"),u=!1,d,h,f;[].keys&&(f=[].keys(),"next"in f?(h=i(i(f)),h!==Object.prototype&&(d=h)):u=!0);var p=!r(d)||t(function(){var v={};return d[c].call(v)!==v});return p?d={}:o&&(d=n(d)),e(d[c])||s(d,c,function(){return this}),d_={IteratorPrototype:d,BUGGY_SAFARI_ITERATORS:u},d_}var h_,t6;function Xfe(){if(t6)return h_;t6=1;var t=eQ().IteratorPrototype,e=Lh(),r=$h(),n=ul(),i=gu(),s=function(){return this};return h_=function(a,o,c,u){var d=o+" Iterator";return a.prototype=e(t,{next:r(+!u,c)}),n(a,d,!1,!0),i[d]=s,a},h_}var f_,r6;function Jfe(){if(r6)return f_;r6=1;var t=et(),e=As();return f_=function(r,n,i){try{return t(e(Object.getOwnPropertyDescriptor(r,n)[i]))}catch{}},f_}var p_,n6;function Zfe(){if(n6)return p_;n6=1;var t=Nr();return p_=function(e){return t(e)||e===null},p_}var m_,i6;function epe(){if(i6)return m_;i6=1;var t=Zfe(),e=String,r=TypeError;return m_=function(n){if(t(n))return n;throw new r("Can't set "+e(n)+" as a prototype")},m_}var v_,s6;function tpe(){if(s6)return v_;s6=1;var t=Jfe(),e=Nr(),r=qs(),n=epe();return v_=Object.setPrototypeOf||("__proto__"in{}?function(){var i=!1,s={},a;try{a=t(Object.prototype,"__proto__","set"),a(s,[]),i=s instanceof Array}catch{}return function(c,u){return r(c),n(u),e(c)&&(i?a(c,u):c.__proto__=u),c}}():void 0),v_}var g_,a6;function SP(){if(a6)return g_;a6=1;var t=Ne(),e=Nn(),r=du(),n=Qfe(),i=Er(),s=Xfe(),a=tv(),o=tpe(),c=ul(),u=fu(),d=Bh(),h=ur(),f=gu(),p=eQ(),v=n.PROPER,y=n.CONFIGURABLE,x=p.IteratorPrototype,g=p.BUGGY_SAFARI_ITERATORS,m=h("iterator"),w="keys",b="values",_="entries",E=function(){return this};return g_=function(j,S,C,N,O,T,I){s(C,S,N);var D=function(ge){if(ge===O&&H)return H;if(!g&&ge&&ge in V)return V[ge];switch(ge){case w:return function(){return new C(this,ge)};case b:return function(){return new C(this,ge)};case _:return function(){return new C(this,ge)}}return function(){return new C(this)}},F=S+" Iterator",M=!1,V=j.prototype,q=V[m]||V["@@iterator"]||O&&V[O],H=!g&&q||D(O),B=S==="Array"&&V.entries||q,W,K,ue;if(B&&(W=a(B.call(new j)),W!==Object.prototype&&W.next&&(!r&&a(W)!==x&&(o?o(W,x):i(W[m])||d(W,m,E)),c(W,F,!0,!0),r&&(f[F]=E))),v&&O===b&&q&&q.name!==b&&(!r&&y?u(V,"name",b):(M=!0,H=function(){return e(q,this)})),O)if(K={values:D(b),keys:T?H:D(w),entries:D(_)},I)for(ue in K)(g||M||!(ue in V))&&d(V,ue,K[ue]);else t({target:S,proto:!0,forced:g||M},K);return(!r||I)&&V[m]!==H&&d(V,m,H,{name:O}),f[S]=H,K},g_}var y_,o6;function EP(){return o6||(o6=1,y_=function(t,e){return{value:t,done:e}}),y_}var b_,l6;function yu(){if(l6)return b_;l6=1;var t=Ni(),e=_P(),r=gu(),n=dl(),i=ri().f,s=SP(),a=EP(),o=du(),c=er(),u="Array Iterator",d=n.set,h=n.getterFor(u);b_=s(Array,"Array",function(p,v){d(this,{type:u,target:t(p),index:0,kind:v})},function(){var p=h(this),v=p.target,y=p.index++;if(!v||y>=v.length)return p.target=null,a(void 0,!0);switch(p.kind){case"keys":return a(y,!1);case"values":return a(v[y],!1)}return a([y,v[y]],!1)},"values");var f=r.Arguments=r.Array;if(e("keys"),e("values"),e("entries"),!o&&c&&f.name!=="values")try{i(f,"name",{value:"values"})}catch{}return b_}var x_,c6;function rpe(){return c6||(c6=1,x_={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}),x_}var u6;function bu(){if(u6)return GL;u6=1,yu();var t=rpe(),e=$t(),r=ul(),n=gu();for(var i in t)r(e[i],i),n[i]=n.Array;return GL}var w_,d6;function tQ(){if(d6)return w_;d6=1;var t=Yfe();return bu(),w_=t,w_}var __,h6;function npe(){return h6||(h6=1,__=tQ()),__}var ipe=npe(),spe=ke(ipe),f6={},p6;function ape(){if(p6)return f6;p6=1;var t=Ne(),e=cl(),r=zY(),n=Nr(),i=Ym(),s=Fs(),a=Ni(),o=Xm(),c=ur(),u=Fh(),d=mu(),h=u("slice"),f=c("species"),p=Array,v=Math.max;return t({target:"Array",proto:!0,forced:!h},{slice:function(x,g){var m=a(this),w=s(m),b=i(x,w),_=i(g===void 0?w:g,w),E,j,S;if(e(m)&&(E=m.constructor,r(E)&&(E===p||e(E.prototype))?E=void 0:n(E)&&(E=E[f],E===null&&(E=void 0)),E===p||E===void 0))return d(m,b,_);for(j=new(E===void 0?p:E)(v(_-b,0)),S=0;b<_;b++,S++)b in m&&o(j,S,m[b]);return j.length=S,j}}),f6}var S_,m6;function ope(){if(m6)return S_;m6=1,ape();var t=kr();return S_=t("Array","slice"),S_}var E_,v6;function lpe(){if(v6)return E_;v6=1;var t=cr(),e=ope(),r=Array.prototype;return E_=function(n){var i=n.slice;return n===r||t(r,n)&&i===r.slice?e:i},E_}var N_,g6;function cpe(){if(g6)return N_;g6=1;var t=lpe();return N_=t,N_}var j_,y6;function upe(){return y6||(y6=1,j_=cpe()),j_}var dpe=upe(),Di=ke(dpe),C_,b6;function hpe(){if(b6)return C_;b6=1;var t=qn(),e=et(),r=Zm(),n=Qm(),i=Gi(),s=e([].concat);return C_=t("Reflect","ownKeys")||function(o){var c=r.f(i(o)),u=n.f;return u?s(c,u(o)):c},C_}var x6={},w6;function fpe(){if(w6)return x6;w6=1;var t=Ne(),e=cl();return t({target:"Array",stat:!0},{isArray:e}),x6}var O_,_6;function ppe(){if(_6)return O_;_6=1,fpe();var t=mt();return O_=t.Array.isArray,O_}var P_,S6;function mpe(){if(S6)return P_;S6=1;var t=ppe();return P_=t,P_}var T_,E6;function vpe(){return E6||(E6=1,T_=mpe()),T_}var gpe=vpe(),Yt=ke(gpe),N6={},j6;function ype(){if(j6)return N6;j6=1;var t=Ne(),e=Ua().map,r=Fh(),n=r("map");return t({target:"Array",proto:!0,forced:!n},{map:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),N6}var I_,C6;function bpe(){if(C6)return I_;C6=1,ype();var t=kr();return I_=t("Array","map"),I_}var R_,O6;function xpe(){if(O6)return R_;O6=1;var t=cr(),e=bpe(),r=Array.prototype;return R_=function(n){var i=n.map;return n===r||t(r,n)&&i===r.map?e:i},R_}var k_,P6;function wpe(){if(P6)return k_;P6=1;var t=xpe();return k_=t,k_}var $_,T6;function _pe(){return T6||(T6=1,$_=wpe()),$_}var Spe=_pe(),qc=ke(Spe),I6={},R6;function Epe(){if(R6)return I6;R6=1;var t=Ne(),e=An(),r=Ah(),n=Xe(),i=n(function(){r(1)});return t({target:"Object",stat:!0,forced:i},{keys:function(a){return r(e(a))}}),I6}var D_,k6;function Npe(){if(k6)return D_;k6=1,Epe();var t=mt();return D_=t.Object.keys,D_}var M_,$6;function jpe(){if($6)return M_;$6=1;var t=Npe();return M_=t,M_}var q_,D6;function Cpe(){return D6||(D6=1,q_=jpe()),q_}var Ope=Cpe(),Ht=ke(Ope),M6={},q6;function Ppe(){if(q6)return M6;q6=1;var t=Ne(),e=et(),r=Date,n=e(r.prototype.getTime);return t({target:"Date",stat:!0},{now:function(){return n(new r)}}),M6}var A_,A6;function Tpe(){if(A6)return A_;A6=1,Ppe();var t=mt();return A_=t.Date.now,A_}var F_,F6;function Ipe(){if(F6)return F_;F6=1;var t=Tpe();return F_=t,F_}var L_,L6;function Rpe(){return L6||(L6=1,L_=Ipe()),L_}var kpe=Rpe(),Kp=ke(kpe),B6={},B_,z6;function xu(){if(z6)return B_;z6=1;var t=Xe();return B_=function(e,r){var n=[][e];return!!n&&t(function(){n.call(null,r||function(){return 1},1)})},B_}var z_,U6;function $pe(){if(U6)return z_;U6=1;var t=Ua().forEach,e=xu(),r=e("forEach");return z_=r?[].forEach:function(i){return t(this,i,arguments.length>1?arguments[1]:void 0)},z_}var W6;function Dpe(){if(W6)return B6;W6=1;var t=Ne(),e=$pe();return t({target:"Array",proto:!0,forced:[].forEach!==e},{forEach:e}),B6}var U_,V6;function Mpe(){if(V6)return U_;V6=1,Dpe();var t=kr();return U_=t("Array","forEach"),U_}var W_,H6;function qpe(){if(H6)return W_;H6=1;var t=Mpe();return W_=t,W_}var V_,K6;function Ape(){if(K6)return V_;K6=1;var t=vu(),e=Rr(),r=cr(),n=qpe(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return V_=function(a){var o=a.forEach;return a===i||r(i,a)&&o===i.forEach||e(s,t(a))?n:o},V_}var H_,G6;function Fpe(){return G6||(G6=1,H_=Ape()),H_}var Lpe=Fpe(),gt=ke(Lpe),Y6={},Q6;function Bpe(){if(Q6)return Y6;Q6=1;var t=Ne(),e=et(),r=cl(),n=e([].reverse),i=[1,2];return t({target:"Array",proto:!0,forced:String(i)===String(i.reverse())},{reverse:function(){return r(this)&&(this.length=this.length),n(this)}}),Y6}var K_,X6;function zpe(){if(X6)return K_;X6=1,Bpe();var t=kr();return K_=t("Array","reverse"),K_}var G_,J6;function Upe(){if(J6)return G_;J6=1;var t=cr(),e=zpe(),r=Array.prototype;return G_=function(n){var i=n.reverse;return n===r||t(r,n)&&i===r.reverse?e:i},G_}var Y_,Z6;function Wpe(){if(Z6)return Y_;Z6=1;var t=Upe();return Y_=t,Y_}var Q_,eB;function Vpe(){return eB||(eB=1,Q_=Wpe()),Q_}var Hpe=Vpe(),Eo=ke(Hpe),tB={},X_,rB;function Kpe(){if(rB)return X_;rB=1;var t=er(),e=cl(),r=TypeError,n=Object.getOwnPropertyDescriptor,i=t&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(s){return s instanceof TypeError}}();return X_=i?function(s,a){if(e(s)&&!n(s,"length").writable)throw new r("Cannot set read only .length");return s.length=a}:function(s,a){return s.length=a},X_}var J_,nB;function rQ(){if(nB)return J_;nB=1;var t=uu(),e=TypeError;return J_=function(r,n){if(!delete r[n])throw new e("Cannot delete property "+t(n)+" of "+t(r))},J_}var iB;function Gpe(){if(iB)return tB;iB=1;var t=Ne(),e=An(),r=Ym(),n=pu(),i=Fs(),s=Kpe(),a=BY(),o=yP(),c=Xm(),u=rQ(),d=Fh(),h=d("splice"),f=Math.max,p=Math.min;return t({target:"Array",proto:!0,forced:!h},{splice:function(y,x){var g=e(this),m=i(g),w=r(y,m),b=arguments.length,_,E,j,S,C,N;for(b===0?_=E=0:b===1?(_=0,E=m-w):(_=b-2,E=p(f(n(x),0),m-w)),a(m+_-E),j=o(g,E),S=0;S<E;S++)C=w+S,C in g&&c(j,S,g[C]);if(j.length=E,_<E){for(S=w;S<m-E;S++)C=S+E,N=S+_,C in g?g[N]=g[C]:u(g,N);for(S=m;S>m-E+_;S--)u(g,S-1)}else if(_>E)for(S=m-E;S>w;S--)C=S+E-1,N=S+_-1,C in g?g[N]=g[C]:u(g,N);for(S=0;S<_;S++)g[S+w]=arguments[S+2];return s(g,m-E+_),j}}),tB}var Z_,sB;function Ype(){if(sB)return Z_;sB=1,Gpe();var t=kr();return Z_=t("Array","splice"),Z_}var eS,aB;function Qpe(){if(aB)return eS;aB=1;var t=cr(),e=Ype(),r=Array.prototype;return eS=function(n){var i=n.splice;return n===r||t(r,n)&&i===r.splice?e:i},eS}var tS,oB;function Xpe(){if(oB)return tS;oB=1;var t=Qpe();return tS=t,tS}var rS,lB;function Jpe(){return lB||(lB=1,rS=Xpe()),rS}var Zpe=Jpe(),gs=ke(Zpe),cB={},uB;function eme(){if(uB)return cB;uB=1;var t=Ne(),e=pP().includes,r=Xe(),n=_P(),i=r(function(){return!Array(1).includes()});return t({target:"Array",proto:!0,forced:i},{includes:function(a){return e(this,a,arguments.length>1?arguments[1]:void 0)}}),n("includes"),cB}var nS,dB;function tme(){if(dB)return nS;dB=1,eme();var t=kr();return nS=t("Array","includes"),nS}var hB={},iS,fB;function rme(){if(fB)return iS;fB=1;var t=Nr(),e=Ki(),r=ur(),n=r("match");return iS=function(i){var s;return t(i)&&((s=i[n])!==void 0?!!s:e(i)==="RegExp")},iS}var sS,pB;function nme(){if(pB)return sS;pB=1;var t=rme(),e=TypeError;return sS=function(r){if(t(r))throw new e("The method doesn't accept regular expressions");return r},sS}var aS,mB;function ime(){if(mB)return aS;mB=1;var t=ur(),e=t("match");return aS=function(r){var n=/./;try{"/./"[r](n)}catch{try{return n[e]=!1,"/./"[r](n)}catch{}}return!1},aS}var vB;function sme(){if(vB)return hB;vB=1;var t=Ne(),e=et(),r=nme(),n=qs(),i=ni(),s=ime(),a=e("".indexOf);return t({target:"String",proto:!0,forced:!s("includes")},{includes:function(c){return!!~a(i(n(this)),i(r(c)),arguments.length>1?arguments[1]:void 0)}}),hB}var oS,gB;function ame(){if(gB)return oS;gB=1,sme();var t=kr();return oS=t("String","includes"),oS}var lS,yB;function ome(){if(yB)return lS;yB=1;var t=cr(),e=tme(),r=ame(),n=Array.prototype,i=String.prototype;return lS=function(s){var a=s.includes;return s===n||t(n,s)&&a===n.includes?e:typeof s=="string"||s===i||t(i,s)&&a===i.includes?r:a},lS}var cS,bB;function lme(){if(bB)return cS;bB=1;var t=ome();return cS=t,cS}var uS,xB;function cme(){return xB||(xB=1,uS=lme()),uS}var ume=cme(),Na=ke(ume),wB={},_B;function dme(){if(_B)return wB;_B=1;var t=Ne(),e=Xe(),r=An(),n=tv(),i=ZY(),s=e(function(){n(1)});return t({target:"Object",stat:!0,forced:s,sham:!i},{getPrototypeOf:function(o){return n(r(o))}}),wB}var dS,SB;function hme(){if(SB)return dS;SB=1,dme();var t=mt();return dS=t.Object.getPrototypeOf,dS}var hS,EB;function fme(){if(EB)return hS;EB=1;var t=hme();return hS=t,hS}var fS,NB;function pme(){return NB||(NB=1,fS=fme()),fS}var mme=pme(),jB=ke(mme),pS,CB;function vme(){if(CB)return pS;CB=1,UY();var t=kr();return pS=t("Array","concat"),pS}var mS,OB;function gme(){if(OB)return mS;OB=1;var t=cr(),e=vme(),r=Array.prototype;return mS=function(n){var i=n.concat;return n===r||t(r,n)&&i===r.concat?e:i},mS}var vS,PB;function yme(){if(PB)return vS;PB=1;var t=gme();return vS=t,vS}var gS,TB;function bme(){return TB||(TB=1,gS=yme()),gS}var xme=bme(),wme=ke(xme),IB={},RB;function _me(){if(RB)return IB;RB=1;var t=Ne(),e=Ua().filter,r=Fh(),n=r("filter");return t({target:"Array",proto:!0,forced:!n},{filter:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),IB}var yS,kB;function Sme(){if(kB)return yS;kB=1,_me();var t=kr();return yS=t("Array","filter"),yS}var bS,$B;function Eme(){if($B)return bS;$B=1;var t=cr(),e=Sme(),r=Array.prototype;return bS=function(n){var i=n.filter;return n===r||t(r,n)&&i===r.filter?e:i},bS}var xS,DB;function Nme(){if(DB)return xS;DB=1;var t=Eme();return xS=t,xS}var wS,MB;function jme(){return MB||(MB=1,wS=Nme()),wS}var Cme=jme(),hn=ke(Cme),qB={},_S,AB;function Ome(){if(AB)return _S;AB=1;var t=er(),e=Xe(),r=et(),n=tv(),i=Ah(),s=Ni(),a=Wm().f,o=r(a),c=r([].push),u=t&&e(function(){var h=Object.create(null);return h[2]=2,!o(h,2)}),d=function(h){return function(f){for(var p=s(f),v=i(p),y=u&&n(p)===null,x=v.length,g=0,m=[],w;x>g;)w=v[g++],(!t||(y?w in p:o(p,w)))&&c(m,h?[w,p[w]]:p[w]);return m}};return _S={entries:d(!0),values:d(!1)},_S}var FB;function Pme(){if(FB)return qB;FB=1;var t=Ne(),e=Ome().values;return t({target:"Object",stat:!0},{values:function(n){return e(n)}}),qB}var SS,LB;function Tme(){if(LB)return SS;LB=1,Pme();var t=mt();return SS=t.Object.values,SS}var ES,BB;function Ime(){if(BB)return ES;BB=1;var t=Tme();return ES=t,ES}var NS,zB;function Rme(){return zB||(zB=1,NS=Ime()),NS}var kme=Rme(),$me=ke(kme),UB={},jS,WB;function NP(){return WB||(WB=1,jS=`	
\v\f\r \u2028\u2029\uFEFF`),jS}var CS,VB;function nQ(){if(VB)return CS;VB=1;var t=et(),e=qs(),r=ni(),n=NP(),i=t("".replace),s=RegExp("^["+n+"]+"),a=RegExp("(^|[^"+n+"])["+n+"]+$"),o=function(c){return function(u){var d=r(e(u));return c&1&&(d=i(d,s,"")),c&2&&(d=i(d,a,"$1")),d}};return CS={start:o(1),end:o(2),trim:o(3)},CS}var OS,HB;function Dme(){if(HB)return OS;HB=1;var t=$t(),e=Xe(),r=et(),n=ni(),i=nQ().trim,s=NP(),a=t.parseInt,o=t.Symbol,c=o&&o.iterator,u=/^[+-]?0x/i,d=r(u.exec),h=a(s+"08")!==8||a(s+"0x16")!==22||c&&!e(function(){a(Object(c))});return OS=h?function(p,v){var y=i(n(p));return a(y,v>>>0||(d(u,y)?16:10))}:a,OS}var KB;function Mme(){if(KB)return UB;KB=1;var t=Ne(),e=Dme();return t({global:!0,forced:parseInt!==e},{parseInt:e}),UB}var PS,GB;function qme(){if(GB)return PS;GB=1,Mme();var t=mt();return PS=t.parseInt,PS}var TS,YB;function Ame(){if(YB)return TS;YB=1;var t=qme();return TS=t,TS}var IS,QB;function Fme(){return QB||(QB=1,IS=Ame()),IS}var Lme=Fme(),mi=ke(Lme),XB={},JB;function Bme(){if(JB)return XB;JB=1;var t=Ne(),e=uP(),r=pP().indexOf,n=xu(),i=e([].indexOf),s=!!i&&1/i([1],1,-0)<0,a=s||!n("indexOf");return t({target:"Array",proto:!0,forced:a},{indexOf:function(c){var u=arguments.length>1?arguments[1]:void 0;return s?i(this,c,u)||0:r(this,c,u)}}),XB}var RS,ZB;function zme(){if(ZB)return RS;ZB=1,Bme();var t=kr();return RS=t("Array","indexOf"),RS}var kS,ez;function Ume(){if(ez)return kS;ez=1;var t=cr(),e=zme(),r=Array.prototype;return kS=function(n){var i=n.indexOf;return n===r||t(r,n)&&i===r.indexOf?e:i},kS}var $S,tz;function Wme(){if(tz)return $S;tz=1;var t=Ume();return $S=t,$S}var DS,rz;function Vme(){return rz||(rz=1,DS=Wme()),DS}var Hme=Vme(),ht=ke(Hme),nz={},iz;function Kme(){if(iz)return nz;iz=1;var t=Ne(),e=er(),r=Lh();return t({target:"Object",stat:!0,sham:!e},{create:r}),nz}var MS,sz;function Gme(){if(sz)return MS;sz=1,Kme();var t=mt(),e=t.Object;return MS=function(n,i){return e.create(n,i)},MS}var qS,az;function Yme(){if(az)return qS;az=1;var t=Gme();return qS=t,qS}var AS,oz;function Qme(){return oz||(oz=1,AS=Yme()),AS}var Xme=Qme(),No=ke(Xme),lz={},FS,cz;function Jme(){if(cz)return FS;cz=1;var t=pu(),e=ni(),r=qs(),n=RangeError;return FS=function(s){var a=e(r(this)),o="",c=t(s);if(c<0||c===1/0)throw new n("Wrong number of repetitions");for(;c>0;(c>>>=1)&&(a+=a))c&1&&(o+=a);return o},FS}var LS,uz;function Zme(){if(uz)return LS;uz=1;var t=et(),e=DY(),r=ni(),n=Jme(),i=qs(),s=t(n),a=t("".slice),o=Math.ceil,c=function(u){return function(d,h,f){var p=r(i(d)),v=e(h),y=p.length,x=f===void 0?" ":r(f),g,m;return v<=y||x===""?p:(g=v-y,m=s(x,o(g/x.length)),m.length>g&&(m=a(m,0,g)),u?p+m:m+p)}};return LS={start:c(!1),end:c(!0)},LS}var BS,dz;function eve(){if(dz)return BS;dz=1;var t=et(),e=Xe(),r=Zme().start,n=RangeError,i=isFinite,s=Math.abs,a=Date.prototype,o=a.toISOString,c=t(a.getTime),u=t(a.getUTCDate),d=t(a.getUTCFullYear),h=t(a.getUTCHours),f=t(a.getUTCMilliseconds),p=t(a.getUTCMinutes),v=t(a.getUTCMonth),y=t(a.getUTCSeconds);return BS=e(function(){return o.call(new Date(-5e13-1))!=="0385-07-25T07:06:39.999Z"})||!e(function(){o.call(new Date(NaN))})?function(){if(!i(c(this)))throw new n("Invalid time value");var g=this,m=d(g),w=f(g),b=m<0?"-":m>9999?"+":"";return b+r(s(m),b?6:4,0)+"-"+r(v(g)+1,2,0)+"-"+r(u(g),2,0)+"T"+r(h(g),2,0)+":"+r(p(g),2,0)+":"+r(y(g),2,0)+"."+r(w,3,0)+"Z"}:o,BS}var hz;function tve(){if(hz)return lz;hz=1;var t=Ne(),e=Nn(),r=An(),n=IY(),i=eve(),s=Ki(),a=Xe(),o=a(function(){return new Date(NaN).toJSON()!==null||e(Date.prototype.toJSON,{toISOString:function(){return 1}})!==1});return t({target:"Date",proto:!0,forced:o},{toJSON:function(u){var d=r(this),h=n(d,"number");return typeof h=="number"&&!isFinite(h)?null:!("toISOString"in d)&&s(d)==="Date"?e(i,d):d.toISOString()}}),lz}var zS,fz;function rve(){if(fz)return zS;fz=1,tve(),KY();var t=mt(),e=Um();return t.JSON||(t.JSON={stringify:JSON.stringify}),zS=function(n,i,s){return e(t.JSON.stringify,null,arguments)},zS}var US,pz;function nve(){if(pz)return US;pz=1;var t=rve();return US=t,US}var WS,mz;function ive(){return mz||(mz=1,WS=nve()),WS}var sve=ive(),zh=ke(sve),vz={},gz={},VS,yz;function iQ(){if(yz)return VS;yz=1;var t=$t(),e=lu(),r=Ki(),n=function(i){return e.slice(0,i.length)===i};return VS=function(){return n("Bun/")?"BUN":n("Cloudflare-Workers")?"CLOUDFLARE":n("Deno/")?"DENO":n("Node.js/")?"NODE":t.Bun&&typeof Bun.version=="string"?"BUN":t.Deno&&typeof Deno.version=="object"?"DENO":r(t.process)==="process"?"NODE":t.window&&t.document?"BROWSER":"REST"}(),VS}var HS,bz;function ave(){if(bz)return HS;bz=1;var t=TypeError;return HS=function(e,r){if(e<r)throw new t("Not enough arguments");return e},HS}var KS,xz;function sQ(){if(xz)return KS;xz=1;var t=$t(),e=Um(),r=Er(),n=iQ(),i=lu(),s=mu(),a=ave(),o=t.Function,c=/MSIE .\./.test(i)||n==="BUN"&&function(){var u=t.Bun.version.split(".");return u.length<3||u[0]==="0"&&(u[1]<3||u[1]==="3"&&u[2]==="0")}();return KS=function(u,d){var h=d?2:1;return c?function(f,p){var v=a(arguments.length,1)>h,y=r(f)?f:o(f),x=v?s(arguments,h):[],g=v?function(){e(y,this,x)}:y;return d?u(g,p):u(g)}:u},KS}var wz;function ove(){if(wz)return gz;wz=1;var t=Ne(),e=$t(),r=sQ(),n=r(e.setInterval,!0);return t({global:!0,bind:!0,forced:e.setInterval!==n},{setInterval:n}),gz}var _z={},Sz;function lve(){if(Sz)return _z;Sz=1;var t=Ne(),e=$t(),r=sQ(),n=r(e.setTimeout,!0);return t({global:!0,bind:!0,forced:e.setTimeout!==n},{setTimeout:n}),_z}var Ez;function aQ(){return Ez||(Ez=1,ove(),lve()),vz}var GS,Nz;function cve(){if(Nz)return GS;Nz=1,aQ();var t=mt();return GS=t.setTimeout,GS}var YS,jz;function uve(){return jz||(jz=1,YS=cve()),YS}var dve=uve(),ys=ke(dve),Cz={},QS,Oz;function hve(){if(Oz)return QS;Oz=1;var t=An(),e=Ym(),r=Fs();return QS=function(i){for(var s=t(this),a=r(s),o=arguments.length,c=e(o>1?arguments[1]:void 0,a),u=o>2?arguments[2]:void 0,d=u===void 0?a:e(u,a);d>c;)s[c++]=i;return s},QS}var Pz;function fve(){if(Pz)return Cz;Pz=1;var t=Ne(),e=hve(),r=_P();return t({target:"Array",proto:!0},{fill:e}),r("fill"),Cz}var XS,Tz;function pve(){if(Tz)return XS;Tz=1,fve();var t=kr();return XS=t("Array","fill"),XS}var JS,Iz;function mve(){if(Iz)return JS;Iz=1;var t=cr(),e=pve(),r=Array.prototype;return JS=function(n){var i=n.fill;return n===r||t(r,n)&&i===r.fill?e:i},JS}var ZS,Rz;function vve(){if(Rz)return ZS;Rz=1;var t=mve();return ZS=t,ZS}var eE,kz;function gve(){return kz||(kz=1,eE=vve()),eE}var yve=gve(),Uh=ke(yve);/*! Hammer.JS - v2.0.17-rc - 2019-12-16
 * http://naver.github.io/egjs
 *
 * Forked By Naver egjs
 * Copyright (c) hammerjs
 * Licensed under the MIT license */function _i(){return _i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},_i.apply(this,arguments)}function ii(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function kf(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var sC;typeof Object.assign!="function"?sC=function(e){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(i!=null)for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])}return r}:sC=Object.assign;var Wo=sC,$z=["","webkit","Moz","MS","ms","o"],bve=typeof document>"u"?{style:{}}:document.createElement("div"),xve="function",Hl=Math.round,Vo=Math.abs,jP=Date.now;function rv(t,e){for(var r,n,i=e[0].toUpperCase()+e.slice(1),s=0;s<$z.length;){if(r=$z[s],n=r?r+i:e,n in t)return n;s++}}var bs;typeof window>"u"?bs={}:bs=window;var oQ=rv(bve.style,"touchAction"),lQ=oQ!==void 0;function wve(){if(!lQ)return!1;var t={},e=bs.CSS&&bs.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(r){return t[r]=e?bs.CSS.supports("touch-action",r):!0}),t}var cQ="compute",uQ="auto",aC="manipulation",jo="none",Ud="pan-x",Wd="pan-y",$f=wve(),_ve=/mobile|tablet|ip(ad|hone|od)|android/i,dQ="ontouchstart"in bs,Sve=rv(bs,"PointerEvent")!==void 0,Eve=dQ&&_ve.test(navigator.userAgent),Wh="touch",Nve="pen",CP="mouse",jve="kinect",Cve=25,Zr=1,hl=2,ar=4,_n=8,Gp=1,Vh=2,Hh=4,Kh=8,Ac=16,Wi=Vh|Hh,Co=Kh|Ac,hQ=Wi|Co,fQ=["x","y"],Yp=["clientX","clientY"];function xs(t,e,r){var n;if(t)if(t.forEach)t.forEach(e,r);else if(t.length!==void 0)for(n=0;n<t.length;)e.call(r,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(r,t[n],n,t)}function nv(t,e){return typeof t===xve?t.apply(e&&e[0]||void 0,e):t}function ao(t,e){return t.indexOf(e)>-1}function Ove(t){if(ao(t,jo))return jo;var e=ao(t,Ud),r=ao(t,Wd);return e&&r?jo:e||r?e?Ud:Wd:ao(t,aC)?aC:uQ}var pQ=function(){function t(r,n){this.manager=r,this.set(n)}var e=t.prototype;return e.set=function(n){n===cQ&&(n=this.compute()),lQ&&this.manager.element.style&&$f[n]&&(this.manager.element.style[oQ]=n),this.actions=n.toLowerCase().trim()},e.update=function(){this.set(this.manager.options.touchAction)},e.compute=function(){var n=[];return xs(this.manager.recognizers,function(i){nv(i.options.enable,[i])&&(n=n.concat(i.getTouchAction()))}),Ove(n.join(" "))},e.preventDefaults=function(n){var i=n.srcEvent,s=n.offsetDirection;if(this.manager.session.prevented){i.preventDefault();return}var a=this.actions,o=ao(a,jo)&&!$f[jo],c=ao(a,Wd)&&!$f[Wd],u=ao(a,Ud)&&!$f[Ud];if(o){var d=n.pointers.length===1,h=n.distance<2,f=n.deltaTime<250;if(d&&h&&f)return}if(!(u&&c)&&(o||c&&s&Wi||u&&s&Co))return this.preventSrc(i)},e.preventSrc=function(n){this.manager.session.prevented=!0,n.preventDefault()},t}();function OP(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}function mQ(t){var e=t.length;if(e===1)return{x:Hl(t[0].clientX),y:Hl(t[0].clientY)};for(var r=0,n=0,i=0;i<e;)r+=t[i].clientX,n+=t[i].clientY,i++;return{x:Hl(r/e),y:Hl(n/e)}}function Dz(t){for(var e=[],r=0;r<t.pointers.length;)e[r]={clientX:Hl(t.pointers[r].clientX),clientY:Hl(t.pointers[r].clientY)},r++;return{timeStamp:jP(),pointers:e,center:mQ(e),deltaX:t.deltaX,deltaY:t.deltaY}}function Qp(t,e,r){r||(r=fQ);var n=e[r[0]]-t[r[0]],i=e[r[1]]-t[r[1]];return Math.sqrt(n*n+i*i)}function oC(t,e,r){r||(r=fQ);var n=e[r[0]]-t[r[0]],i=e[r[1]]-t[r[1]];return Math.atan2(i,n)*180/Math.PI}function vQ(t,e){return t===e?Gp:Vo(t)>=Vo(e)?t<0?Vh:Hh:e<0?Kh:Ac}function Pve(t,e){var r=e.center,n=t.offsetDelta||{},i=t.prevDelta||{},s=t.prevInput||{};(e.eventType===Zr||s.eventType===ar)&&(i=t.prevDelta={x:s.deltaX||0,y:s.deltaY||0},n=t.offsetDelta={x:r.x,y:r.y}),e.deltaX=i.x+(r.x-n.x),e.deltaY=i.y+(r.y-n.y)}function gQ(t,e,r){return{x:e/t||0,y:r/t||0}}function Tve(t,e){return Qp(e[0],e[1],Yp)/Qp(t[0],t[1],Yp)}function Ive(t,e){return oC(e[1],e[0],Yp)+oC(t[1],t[0],Yp)}function Rve(t,e){var r=t.lastInterval||e,n=e.timeStamp-r.timeStamp,i,s,a,o;if(e.eventType!==_n&&(n>Cve||r.velocity===void 0)){var c=e.deltaX-r.deltaX,u=e.deltaY-r.deltaY,d=gQ(n,c,u);s=d.x,a=d.y,i=Vo(d.x)>Vo(d.y)?d.x:d.y,o=vQ(c,u),t.lastInterval=e}else i=r.velocity,s=r.velocityX,a=r.velocityY,o=r.direction;e.velocity=i,e.velocityX=s,e.velocityY=a,e.direction=o}function kve(t,e){var r=t.session,n=e.pointers,i=n.length;r.firstInput||(r.firstInput=Dz(e)),i>1&&!r.firstMultiple?r.firstMultiple=Dz(e):i===1&&(r.firstMultiple=!1);var s=r.firstInput,a=r.firstMultiple,o=a?a.center:s.center,c=e.center=mQ(n);e.timeStamp=jP(),e.deltaTime=e.timeStamp-s.timeStamp,e.angle=oC(o,c),e.distance=Qp(o,c),Pve(r,e),e.offsetDirection=vQ(e.deltaX,e.deltaY);var u=gQ(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=u.x,e.overallVelocityY=u.y,e.overallVelocity=Vo(u.x)>Vo(u.y)?u.x:u.y,e.scale=a?Tve(a.pointers,n):1,e.rotation=a?Ive(a.pointers,n):0,e.maxPointers=r.prevInput?e.pointers.length>r.prevInput.maxPointers?e.pointers.length:r.prevInput.maxPointers:e.pointers.length,Rve(r,e);var d=t.element,h=e.srcEvent,f;h.composedPath?f=h.composedPath()[0]:h.path?f=h.path[0]:f=h.target,OP(f,d)&&(d=f),e.target=d}function $ve(t,e,r){var n=r.pointers.length,i=r.changedPointers.length,s=e&Zr&&n-i===0,a=e&(ar|_n)&&n-i===0;r.isFirst=!!s,r.isFinal=!!a,s&&(t.session={}),r.eventType=e,kve(t,r),t.emit("hammer.input",r),t.recognize(r),t.session.prevInput=r}function Vd(t){return t.trim().split(/\s+/g)}function ud(t,e,r){xs(Vd(e),function(n){t.addEventListener(n,r,!1)})}function dd(t,e,r){xs(Vd(e),function(n){t.removeEventListener(n,r,!1)})}function Mz(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||window}var wu=function(){function t(r,n){var i=this;this.manager=r,this.callback=n,this.element=r.element,this.target=r.options.inputTarget,this.domHandler=function(s){nv(r.options.enable,[r])&&i.handler(s)},this.init()}var e=t.prototype;return e.handler=function(){},e.init=function(){this.evEl&&ud(this.element,this.evEl,this.domHandler),this.evTarget&&ud(this.target,this.evTarget,this.domHandler),this.evWin&&ud(Mz(this.element),this.evWin,this.domHandler)},e.destroy=function(){this.evEl&&dd(this.element,this.evEl,this.domHandler),this.evTarget&&dd(this.target,this.evTarget,this.domHandler),this.evWin&&dd(Mz(this.element),this.evWin,this.domHandler)},t}();function Ho(t,e,r){if(t.indexOf&&!r)return t.indexOf(e);for(var n=0;n<t.length;){if(r&&t[n][r]==e||!r&&t[n]===e)return n;n++}return-1}var Dve={pointerdown:Zr,pointermove:hl,pointerup:ar,pointercancel:_n,pointerout:_n},Mve={2:Wh,3:Nve,4:CP,5:jve},yQ="pointerdown",bQ="pointermove pointerup pointercancel";bs.MSPointerEvent&&!bs.PointerEvent&&(yQ="MSPointerDown",bQ="MSPointerMove MSPointerUp MSPointerCancel");var xQ=function(t){ii(e,t);function e(){var n,i=e.prototype;return i.evEl=yQ,i.evWin=bQ,n=t.apply(this,arguments)||this,n.store=n.manager.session.pointerEvents=[],n}var r=e.prototype;return r.handler=function(i){var s=this.store,a=!1,o=i.type.toLowerCase().replace("ms",""),c=Dve[o],u=Mve[i.pointerType]||i.pointerType,d=u===Wh,h=Ho(s,i.pointerId,"pointerId");c&Zr&&(i.button===0||d)?h<0&&(s.push(i),h=s.length-1):c&(ar|_n)&&(a=!0),!(h<0)&&(s[h]=i,this.callback(this.manager,c,{pointers:s,changedPointers:[i],pointerType:u,srcEvent:i}),a&&s.splice(h,1))},e}(wu);function Hd(t){return Array.prototype.slice.call(t,0)}function PP(t,e,r){for(var n=[],i=[],s=0;s<t.length;){var a=e?t[s][e]:t[s];Ho(i,a)<0&&n.push(t[s]),i[s]=a,s++}return r&&(e?n=n.sort(function(o,c){return o[e]>c[e]}):n=n.sort()),n}var qve={touchstart:Zr,touchmove:hl,touchend:ar,touchcancel:_n},Ave="touchstart touchmove touchend touchcancel",TP=function(t){ii(e,t);function e(){var n;return e.prototype.evTarget=Ave,n=t.apply(this,arguments)||this,n.targetIds={},n}var r=e.prototype;return r.handler=function(i){var s=qve[i.type],a=Fve.call(this,i,s);a&&this.callback(this.manager,s,{pointers:a[0],changedPointers:a[1],pointerType:Wh,srcEvent:i})},e}(wu);function Fve(t,e){var r=Hd(t.touches),n=this.targetIds;if(e&(Zr|hl)&&r.length===1)return n[r[0].identifier]=!0,[r,r];var i,s,a=Hd(t.changedTouches),o=[],c=this.target;if(s=r.filter(function(u){return OP(u.target,c)}),e===Zr)for(i=0;i<s.length;)n[s[i].identifier]=!0,i++;for(i=0;i<a.length;)n[a[i].identifier]&&o.push(a[i]),e&(ar|_n)&&delete n[a[i].identifier],i++;if(o.length)return[PP(s.concat(o),"identifier",!0),o]}var Lve={mousedown:Zr,mousemove:hl,mouseup:ar},Bve="mousedown",zve="mousemove mouseup",IP=function(t){ii(e,t);function e(){var n,i=e.prototype;return i.evEl=Bve,i.evWin=zve,n=t.apply(this,arguments)||this,n.pressed=!1,n}var r=e.prototype;return r.handler=function(i){var s=Lve[i.type];s&Zr&&i.button===0&&(this.pressed=!0),s&hl&&i.which!==1&&(s=ar),this.pressed&&(s&ar&&(this.pressed=!1),this.callback(this.manager,s,{pointers:[i],changedPointers:[i],pointerType:CP,srcEvent:i}))},e}(wu),Uve=2500,qz=25;function Az(t){var e=t.changedPointers,r=e[0];if(r.identifier===this.primaryTouch){var n={x:r.clientX,y:r.clientY},i=this.lastTouches;this.lastTouches.push(n);var s=function(){var o=i.indexOf(n);o>-1&&i.splice(o,1)};setTimeout(s,Uve)}}function Wve(t,e){t&Zr?(this.primaryTouch=e.changedPointers[0].identifier,Az.call(this,e)):t&(ar|_n)&&Az.call(this,e)}function Vve(t){for(var e=t.srcEvent.clientX,r=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var i=this.lastTouches[n],s=Math.abs(e-i.x),a=Math.abs(r-i.y);if(s<=qz&&a<=qz)return!0}return!1}var wQ=function(){var t=function(e){ii(r,e);function r(i,s){var a;return a=e.call(this,i,s)||this,a.handler=function(o,c,u){var d=u.pointerType===Wh,h=u.pointerType===CP;if(!(h&&u.sourceCapabilities&&u.sourceCapabilities.firesTouchEvents)){if(d)Wve.call(kf(kf(a)),c,u);else if(h&&Vve.call(kf(kf(a)),u))return;a.callback(o,c,u)}},a.touch=new TP(a.manager,a.handler),a.mouse=new IP(a.manager,a.handler),a.primaryTouch=null,a.lastTouches=[],a}var n=r.prototype;return n.destroy=function(){this.touch.destroy(),this.mouse.destroy()},r}(wu);return t}();function Hve(t){var e,r=t.options.inputClass;return r?e=r:Sve?e=xQ:Eve?e=TP:dQ?e=wQ:e=IP,new e(t,$ve)}function Kl(t,e,r){return Array.isArray(t)?(xs(t,r[e],r),!0):!1}var tp=1,Xn=2,Fc=4,ja=8,ws=ja,Kd=16,qi=32,Kve=1;function Gve(){return Kve++}function Df(t,e){var r=e.manager;return r?r.get(t):t}function Fz(t){return t&Kd?"cancel":t&ja?"end":t&Fc?"move":t&Xn?"start":""}var Gh=function(){function t(r){r===void 0&&(r={}),this.options=_i({enable:!0},r),this.id=Gve(),this.manager=null,this.state=tp,this.simultaneous={},this.requireFail=[]}var e=t.prototype;return e.set=function(n){return Wo(this.options,n),this.manager&&this.manager.touchAction.update(),this},e.recognizeWith=function(n){if(Kl(n,"recognizeWith",this))return this;var i=this.simultaneous;return n=Df(n,this),i[n.id]||(i[n.id]=n,n.recognizeWith(this)),this},e.dropRecognizeWith=function(n){return Kl(n,"dropRecognizeWith",this)?this:(n=Df(n,this),delete this.simultaneous[n.id],this)},e.requireFailure=function(n){if(Kl(n,"requireFailure",this))return this;var i=this.requireFail;return n=Df(n,this),Ho(i,n)===-1&&(i.push(n),n.requireFailure(this)),this},e.dropRequireFailure=function(n){if(Kl(n,"dropRequireFailure",this))return this;n=Df(n,this);var i=Ho(this.requireFail,n);return i>-1&&this.requireFail.splice(i,1),this},e.hasRequireFailures=function(){return this.requireFail.length>0},e.canRecognizeWith=function(n){return!!this.simultaneous[n.id]},e.emit=function(n){var i=this,s=this.state;function a(o){i.manager.emit(o,n)}s<ja&&a(i.options.event+Fz(s)),a(i.options.event),n.additionalEvent&&a(n.additionalEvent),s>=ja&&a(i.options.event+Fz(s))},e.tryEmit=function(n){if(this.canEmit())return this.emit(n);this.state=qi},e.canEmit=function(){for(var n=0;n<this.requireFail.length;){if(!(this.requireFail[n].state&(qi|tp)))return!1;n++}return!0},e.recognize=function(n){var i=Wo({},n);if(!nv(this.options.enable,[this,i])){this.reset(),this.state=qi;return}this.state&(ws|Kd|qi)&&(this.state=tp),this.state=this.process(i),this.state&(Xn|Fc|ja|Kd)&&this.tryEmit(i)},e.process=function(n){},e.getTouchAction=function(){},e.reset=function(){},t}(),lC=function(t){ii(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,_i({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},n))||this,i.pTime=!1,i.pCenter=!1,i._timer=null,i._input=null,i.count=0,i}var r=e.prototype;return r.getTouchAction=function(){return[aC]},r.process=function(i){var s=this,a=this.options,o=i.pointers.length===a.pointers,c=i.distance<a.threshold,u=i.deltaTime<a.time;if(this.reset(),i.eventType&Zr&&this.count===0)return this.failTimeout();if(c&&u&&o){if(i.eventType!==ar)return this.failTimeout();var d=this.pTime?i.timeStamp-this.pTime<a.interval:!0,h=!this.pCenter||Qp(this.pCenter,i.center)<a.posThreshold;this.pTime=i.timeStamp,this.pCenter=i.center,!h||!d?this.count=1:this.count+=1,this._input=i;var f=this.count%a.taps;if(f===0)return this.hasRequireFailures()?(this._timer=setTimeout(function(){s.state=ws,s.tryEmit()},a.interval),Xn):ws}return qi},r.failTimeout=function(){var i=this;return this._timer=setTimeout(function(){i.state=qi},this.options.interval),qi},r.reset=function(){clearTimeout(this._timer)},r.emit=function(){this.state===ws&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},e}(Gh),Lc=function(t){ii(e,t);function e(n){return n===void 0&&(n={}),t.call(this,_i({pointers:1},n))||this}var r=e.prototype;return r.attrTest=function(i){var s=this.options.pointers;return s===0||i.pointers.length===s},r.process=function(i){var s=this.state,a=i.eventType,o=s&(Xn|Fc),c=this.attrTest(i);return o&&(a&_n||!c)?s|Kd:o||c?a&ar?s|ja:s&Xn?s|Fc:Xn:qi},e}(Gh);function _Q(t){return t===Ac?"down":t===Kh?"up":t===Vh?"left":t===Hh?"right":""}var RP=function(t){ii(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,_i({event:"pan",threshold:10,pointers:1,direction:hQ},n))||this,i.pX=null,i.pY=null,i}var r=e.prototype;return r.getTouchAction=function(){var i=this.options.direction,s=[];return i&Wi&&s.push(Wd),i&Co&&s.push(Ud),s},r.directionTest=function(i){var s=this.options,a=!0,o=i.distance,c=i.direction,u=i.deltaX,d=i.deltaY;return c&s.direction||(s.direction&Wi?(c=u===0?Gp:u<0?Vh:Hh,a=u!==this.pX,o=Math.abs(i.deltaX)):(c=d===0?Gp:d<0?Kh:Ac,a=d!==this.pY,o=Math.abs(i.deltaY))),i.direction=c,a&&o>s.threshold&&c&s.direction},r.attrTest=function(i){return Lc.prototype.attrTest.call(this,i)&&(this.state&Xn||!(this.state&Xn)&&this.directionTest(i))},r.emit=function(i){this.pX=i.deltaX,this.pY=i.deltaY;var s=_Q(i.direction);s&&(i.additionalEvent=this.options.event+s),t.prototype.emit.call(this,i)},e}(Lc),SQ=function(t){ii(e,t);function e(n){return n===void 0&&(n={}),t.call(this,_i({event:"swipe",threshold:10,velocity:.3,direction:Wi|Co,pointers:1},n))||this}var r=e.prototype;return r.getTouchAction=function(){return RP.prototype.getTouchAction.call(this)},r.attrTest=function(i){var s=this.options.direction,a;return s&(Wi|Co)?a=i.overallVelocity:s&Wi?a=i.overallVelocityX:s&Co&&(a=i.overallVelocityY),t.prototype.attrTest.call(this,i)&&s&i.offsetDirection&&i.distance>this.options.threshold&&i.maxPointers===this.options.pointers&&Vo(a)>this.options.velocity&&i.eventType&ar},r.emit=function(i){var s=_Q(i.offsetDirection);s&&this.manager.emit(this.options.event+s,i),this.manager.emit(this.options.event,i)},e}(Lc),EQ=function(t){ii(e,t);function e(n){return n===void 0&&(n={}),t.call(this,_i({event:"pinch",threshold:0,pointers:2},n))||this}var r=e.prototype;return r.getTouchAction=function(){return[jo]},r.attrTest=function(i){return t.prototype.attrTest.call(this,i)&&(Math.abs(i.scale-1)>this.options.threshold||this.state&Xn)},r.emit=function(i){if(i.scale!==1){var s=i.scale<1?"in":"out";i.additionalEvent=this.options.event+s}t.prototype.emit.call(this,i)},e}(Lc),NQ=function(t){ii(e,t);function e(n){return n===void 0&&(n={}),t.call(this,_i({event:"rotate",threshold:0,pointers:2},n))||this}var r=e.prototype;return r.getTouchAction=function(){return[jo]},r.attrTest=function(i){return t.prototype.attrTest.call(this,i)&&(Math.abs(i.rotation)>this.options.threshold||this.state&Xn)},e}(Lc),jQ=function(t){ii(e,t);function e(n){var i;return n===void 0&&(n={}),i=t.call(this,_i({event:"press",pointers:1,time:251,threshold:9},n))||this,i._timer=null,i._input=null,i}var r=e.prototype;return r.getTouchAction=function(){return[uQ]},r.process=function(i){var s=this,a=this.options,o=i.pointers.length===a.pointers,c=i.distance<a.threshold,u=i.deltaTime>a.time;if(this._input=i,!c||!o||i.eventType&(ar|_n)&&!u)this.reset();else if(i.eventType&Zr)this.reset(),this._timer=setTimeout(function(){s.state=ws,s.tryEmit()},a.time);else if(i.eventType&ar)return ws;return qi},r.reset=function(){clearTimeout(this._timer)},r.emit=function(i){this.state===ws&&(i&&i.eventType&ar?this.manager.emit(this.options.event+"up",i):(this._input.timeStamp=jP(),this.manager.emit(this.options.event,this._input)))},e}(Gh),CQ={domEvents:!1,touchAction:cQ,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Lz=[[NQ,{enable:!1}],[EQ,{enable:!1},["rotate"]],[SQ,{direction:Wi}],[RP,{direction:Wi},["swipe"]],[lC],[lC,{event:"doubletap",taps:2},["tap"]],[jQ]],Yve=1,Bz=2;function zz(t,e){var r=t.element;if(r.style){var n;xs(t.options.cssProps,function(i,s){n=rv(r.style,s),e?(t.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=t.oldCssProps[n]||""}),e||(t.oldCssProps={})}}function Qve(t,e){var r=document.createEvent("Event");r.initEvent(t,!0,!0),r.gesture=e,e.target.dispatchEvent(r)}var Uz=function(){function t(r,n){var i=this;this.options=Wo({},CQ,n||{}),this.options.inputTarget=this.options.inputTarget||r,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=r,this.input=Hve(this),this.touchAction=new pQ(this,this.options.touchAction),zz(this,!0),xs(this.options.recognizers,function(s){var a=i.add(new s[0](s[1]));s[2]&&a.recognizeWith(s[2]),s[3]&&a.requireFailure(s[3])},this)}var e=t.prototype;return e.set=function(n){return Wo(this.options,n),n.touchAction&&this.touchAction.update(),n.inputTarget&&(this.input.destroy(),this.input.target=n.inputTarget,this.input.init()),this},e.stop=function(n){this.session.stopped=n?Bz:Yve},e.recognize=function(n){var i=this.session;if(!i.stopped){this.touchAction.preventDefaults(n);var s,a=this.recognizers,o=i.curRecognizer;(!o||o&&o.state&ws)&&(i.curRecognizer=null,o=null);for(var c=0;c<a.length;)s=a[c],i.stopped!==Bz&&(!o||s===o||s.canRecognizeWith(o))?s.recognize(n):s.reset(),!o&&s.state&(Xn|Fc|ja)&&(i.curRecognizer=s,o=s),c++}},e.get=function(n){if(n instanceof Gh)return n;for(var i=this.recognizers,s=0;s<i.length;s++)if(i[s].options.event===n)return i[s];return null},e.add=function(n){if(Kl(n,"add",this))return this;var i=this.get(n.options.event);return i&&this.remove(i),this.recognizers.push(n),n.manager=this,this.touchAction.update(),n},e.remove=function(n){if(Kl(n,"remove",this))return this;var i=this.get(n);if(n){var s=this.recognizers,a=Ho(s,i);a!==-1&&(s.splice(a,1),this.touchAction.update())}return this},e.on=function(n,i){if(n===void 0||i===void 0)return this;var s=this.handlers;return xs(Vd(n),function(a){s[a]=s[a]||[],s[a].push(i)}),this},e.off=function(n,i){if(n===void 0)return this;var s=this.handlers;return xs(Vd(n),function(a){i?s[a]&&s[a].splice(Ho(s[a],i),1):delete s[a]}),this},e.emit=function(n,i){this.options.domEvents&&Qve(n,i);var s=this.handlers[n]&&this.handlers[n].slice();if(!(!s||!s.length)){i.type=n,i.preventDefault=function(){i.srcEvent.preventDefault()};for(var a=0;a<s.length;)s[a](i),a++}},e.destroy=function(){this.element&&zz(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},t}(),Xve={touchstart:Zr,touchmove:hl,touchend:ar,touchcancel:_n},Jve="touchstart",Zve="touchstart touchmove touchend touchcancel",ege=function(t){ii(e,t);function e(){var n,i=e.prototype;return i.evTarget=Jve,i.evWin=Zve,n=t.apply(this,arguments)||this,n.started=!1,n}var r=e.prototype;return r.handler=function(i){var s=Xve[i.type];if(s===Zr&&(this.started=!0),!!this.started){var a=tge.call(this,i,s);s&(ar|_n)&&a[0].length-a[1].length===0&&(this.started=!1),this.callback(this.manager,s,{pointers:a[0],changedPointers:a[1],pointerType:Wh,srcEvent:i})}},e}(wu);function tge(t,e){var r=Hd(t.touches),n=Hd(t.changedTouches);return e&(ar|_n)&&(r=PP(r.concat(n),"identifier",!0)),[r,n]}function OQ(t,e,r){var n="DEPRECATED METHOD: "+e+`
`+r+` AT 
`;return function(){var i=new Error("get-stack-trace"),s=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",a=window.console&&(window.console.warn||window.console.log);return a&&a.call(window.console,n,s),t.apply(this,arguments)}}var PQ=OQ(function(t,e,r){for(var n=Object.keys(e),i=0;i<n.length;)(!r||r&&t[n[i]]===void 0)&&(t[n[i]]=e[n[i]]),i++;return t},"extend","Use `assign`."),rge=OQ(function(t,e){return PQ(t,e,!0)},"merge","Use `assign`.");function nge(t,e,r){var n=e.prototype,i;i=t.prototype=Object.create(n),i.constructor=t,i._super=n,r&&Wo(i,r)}function Wz(t,e){return function(){return t.apply(e,arguments)}}var TQ=function(){var t=function(r,n){return n===void 0&&(n={}),new Uz(r,_i({recognizers:Lz.concat()},n))};return t.VERSION="2.0.17-rc",t.DIRECTION_ALL=hQ,t.DIRECTION_DOWN=Ac,t.DIRECTION_LEFT=Vh,t.DIRECTION_RIGHT=Hh,t.DIRECTION_UP=Kh,t.DIRECTION_HORIZONTAL=Wi,t.DIRECTION_VERTICAL=Co,t.DIRECTION_NONE=Gp,t.DIRECTION_DOWN=Ac,t.INPUT_START=Zr,t.INPUT_MOVE=hl,t.INPUT_END=ar,t.INPUT_CANCEL=_n,t.STATE_POSSIBLE=tp,t.STATE_BEGAN=Xn,t.STATE_CHANGED=Fc,t.STATE_ENDED=ja,t.STATE_RECOGNIZED=ws,t.STATE_CANCELLED=Kd,t.STATE_FAILED=qi,t.Manager=Uz,t.Input=wu,t.TouchAction=pQ,t.TouchInput=TP,t.MouseInput=IP,t.PointerEventInput=xQ,t.TouchMouseInput=wQ,t.SingleTouchInput=ege,t.Recognizer=Gh,t.AttrRecognizer=Lc,t.Tap=lC,t.Pan=RP,t.Swipe=SQ,t.Pinch=EQ,t.Rotate=NQ,t.Press=jQ,t.on=ud,t.off=dd,t.each=xs,t.merge=rge,t.extend=PQ,t.bindFn=Wz,t.assign=Wo,t.inherit=nge,t.bindFn=Wz,t.prefixed=rv,t.toArray=Hd,t.inArray=Ho,t.uniqueArray=PP,t.splitStr=Vd,t.boolOrFn=nv,t.hasParent=OP,t.addEventListeners=ud,t.removeEventListeners=dd,t.defaults=Wo({},CQ,{preset:Lz}),t}();TQ.defaults;spe("DELETE");function iv(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return ige(e.length?e:[Kp()])}function ige(t){let[e,r,n]=sge(t),i=1;const s=()=>{const a=2091639*e+i*23283064365386963e-26;return e=r,r=n,n=a-(i=a|0)};return s.uint32=()=>s()*4294967296,s.fract53=()=>s()+(s()*2097152|0)*11102230246251565e-32,s.algorithm="Alea",s.seed=t,s.version="0.9",s}function sge(){const t=age();let e=t(" "),r=t(" "),n=t(" ");for(let i=0;i<arguments.length;i++)e-=t(i<0||arguments.length<=i?void 0:arguments[i]),e<0&&(e+=1),r-=t(i<0||arguments.length<=i?void 0:arguments[i]),r<0&&(r+=1),n-=t(i<0||arguments.length<=i?void 0:arguments[i]),n<0&&(n+=1);return[e,r,n]}function age(){let t=4022871197;return function(e){const r=e.toString();for(let n=0;n<r.length;n++){t+=r.charCodeAt(n);let i=.02519603282416938*t;t=i>>>0,i-=t,i*=t,t=i>>>0,i-=t,t+=i*4294967296}return(t>>>0)*23283064365386963e-26}}function oge(){const t=()=>{};return{on:t,off:t,destroy:t,emit:t,get(){return{set:t}}}}const kP=typeof window<"u"?window.Hammer||TQ:function(){return oge()};function Ai(t){var e;this._cleanupQueue=[],this.active=!1,this._dom={container:t,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push(()=>{this._dom.overlay.parentNode.removeChild(this._dom.overlay)});const r=kP(this._dom.overlay);r.on("tap",re(e=this._onTapOverlay).call(e,this)),this._cleanupQueue.push(()=>{r.destroy()});const n=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];gt(n).call(n,i=>{r.on(i,s=>{s.srcEvent.stopPropagation()})}),document&&document.body&&(this._onClick=i=>{lge(i.target,t)||this.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push(()=>{document.body.removeEventListener("click",this._onClick)})),this._escListener=i=>{("key"in i?i.key==="Escape":i.keyCode===27)&&this.deactivate()}}LY(Ai.prototype);Ai.current=null;Ai.prototype.destroy=function(){this.deactivate();for(const r of Eo(t=gs(e=this._cleanupQueue).call(e,0)).call(t)){var t,e;r()}};Ai.prototype.activate=function(){Ai.current&&Ai.current.deactivate(),Ai.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)};Ai.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")};Ai.prototype._onTapOverlay=function(t){this.activate(),t.srcEvent.stopPropagation()};function lge(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}const cge=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,uge=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,dge=/^rgb\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *\)$/i,hge=/^rgba\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *([01]|0?\.\d+) *\)$/i;function Gs(t){if(t)for(;t.hasChildNodes()===!0;){const e=t.firstChild;e&&(Gs(e),t.removeChild(e))}}function tc(t){return t instanceof String||typeof t=="string"}function Vz(t){return typeof t=="object"&&t!==null}function Ko(t,e,r,n){let i=!1;n===!0&&(i=e[r]===null&&t[r]!==void 0),i?delete t[r]:t[r]=e[r]}function IQ(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;for(const n in t)if(e[n]!==void 0)if(e[n]===null||typeof e[n]!="object")Ko(t,e,n,r);else{const i=t[n],s=e[n];Vz(i)&&Vz(s)&&IQ(i,s,r)}}function _u(t,e,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(Yt(r))throw new TypeError("Arrays are not supported by deepExtend");for(let i=0;i<t.length;i++){const s=t[i];if(Object.prototype.hasOwnProperty.call(r,s))if(r[s]&&r[s].constructor===Object)e[s]===void 0&&(e[s]={}),e[s].constructor===Object?_t(e[s],r[s],!1,n):Ko(e,r,s,n);else{if(Yt(r[s]))throw new TypeError("Arrays are not supported by deepExtend");Ko(e,r,s,n)}}return e}function Xp(t,e,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(Yt(r))throw new TypeError("Arrays are not supported by deepExtend");for(const i in r)if(Object.prototype.hasOwnProperty.call(r,i)&&!Na(t).call(t,i))if(r[i]&&r[i].constructor===Object)e[i]===void 0&&(e[i]={}),e[i].constructor===Object?_t(e[i],r[i]):Ko(e,r,i,n);else if(Yt(r[i])){e[i]=[];for(let s=0;s<r[i].length;s++)e[i].push(r[i][s])}else Ko(e,r,i,n);return e}function _t(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)||r===!0)if(typeof e[s]=="object"&&e[s]!==null&&jB(e[s])===Object.prototype)t[s]===void 0?t[s]=_t({},e[s],r):typeof t[s]=="object"&&t[s]!==null&&jB(t[s])===Object.prototype?_t(t[s],e[s],r):Ko(t,e,s,n);else if(Yt(e[s])){var i;t[s]=Di(i=e[s]).call(i)}else Ko(t,e,s,n);return t}function Jp(t,e){return[...t,e]}function fge(t){return Di(t).call(t)}function pge(t){return t.getBoundingClientRect().left}function mge(t){return t.getBoundingClientRect().top}function Ke(t,e){if(Yt(t)){const r=t.length;for(let n=0;n<r;n++)e(t[n],n,t)}else for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(t[r],r,t)}function $P(t){let e;switch(t.length){case 3:case 4:return e=uge.exec(t),e?{r:mi(e[1]+e[1],16),g:mi(e[2]+e[2],16),b:mi(e[3]+e[3],16)}:null;case 6:case 7:return e=cge.exec(t),e?{r:mi(e[1],16),g:mi(e[2],16),b:mi(e[3],16)}:null;default:return null}}function Kn(t,e){if(Na(t).call(t,"rgba"))return t;if(Na(t).call(t,"rgb")){const r=t.substr(ht(t).call(t,"(")+1).replace(")","").split(",");return"rgba("+r[0]+","+r[1]+","+r[2]+","+e+")"}else{const r=$P(t);return r==null?t:"rgba("+r.r+","+r.g+","+r.b+","+e+")"}}function RQ(t,e,r){var n;return"#"+Di(n=((1<<24)+(t<<16)+(e<<8)+r).toString(16)).call(n,1)}function cC(t,e){if(tc(t)){let n=t;if($Q(n)){var r;const i=qc(r=n.substr(4).substr(0,n.length-5).split(",")).call(r,function(s){return mi(s)});n=RQ(i[0],i[1],i[2])}if(kQ(n)===!0){const i=vge(n),s={h:i.h,s:i.s*.8,v:Math.min(1,i.v*1.02)},a={h:i.h,s:Math.min(1,i.s*1.25),v:i.v*.8},o=uC(a.h,a.s,a.v),c=uC(s.h,s.s,s.v);return{background:n,border:o,highlight:{background:c,border:o},hover:{background:c,border:o}}}else return{background:n,border:n,highlight:{background:n,border:n},hover:{background:n,border:n}}}else return{background:t.background||void 0,border:t.border||void 0,highlight:tc(t.highlight)?{border:t.highlight,background:t.highlight}:{background:t.highlight&&t.highlight.background||void 0,border:t.highlight&&t.highlight.border||void 0},hover:tc(t.hover)?{border:t.hover,background:t.hover}:{border:t.hover&&t.hover.border||void 0,background:t.hover&&t.hover.background||void 0}}}function Gu(t,e,r){t=t/255,e=e/255,r=r/255;const n=Math.min(t,Math.min(e,r)),i=Math.max(t,Math.max(e,r));if(n===i)return{h:0,s:0,v:n};const s=t===n?e-r:r===n?t-e:r-t,o=60*((t===n?3:r===n?1:5)-s/(i-n))/360,c=(i-n)/i;return{h:o,s:c,v:i}}function rp(t,e,r){let n,i,s;const a=Math.floor(t*6),o=t*6-a,c=r*(1-e),u=r*(1-o*e),d=r*(1-(1-o)*e);switch(a%6){case 0:n=r,i=d,s=c;break;case 1:n=u,i=r,s=c;break;case 2:n=c,i=r,s=d;break;case 3:n=c,i=u,s=r;break;case 4:n=d,i=c,s=r;break;case 5:n=r,i=c,s=u;break}return{r:Math.floor(n*255),g:Math.floor(i*255),b:Math.floor(s*255)}}function uC(t,e,r){const n=rp(t,e,r);return RQ(n.r,n.g,n.b)}function vge(t){const e=$P(t);if(!e)throw new TypeError("'".concat(t,"' is not a valid color."));return Gu(e.r,e.g,e.b)}function kQ(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t)}function $Q(t){return dge.test(t)}function gge(t){return hge.test(t)}function Ca(t){if(t===null||typeof t!="object")return null;if(t instanceof Element)return t;const e=No(t);for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&typeof t[r]=="object"&&(e[r]=Ca(t[r]));return e}function Wn(t,e,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=function(p){return p!=null},s=function(p){return p!==null&&typeof p=="object"},a=function(p){for(const v in p)if(Object.prototype.hasOwnProperty.call(p,v))return!1;return!0};if(!s(t))throw new Error("Parameter mergeTarget must be an object");if(!s(e))throw new Error("Parameter options must be an object");if(!i(r))throw new Error("Parameter option must have a value");if(!s(n))throw new Error("Parameter globalOptions must be an object");const o=function(p,v,y){s(p[y])||(p[y]={});const x=v[y],g=p[y];for(const m in x)Object.prototype.hasOwnProperty.call(x,m)&&(g[m]=x[m])},c=e[r],d=s(n)&&!a(n)?n[r]:void 0,h=d?d.enabled:void 0;if(c===void 0)return;if(typeof c=="boolean"){s(t[r])||(t[r]={}),t[r].enabled=c;return}if(c===null&&!s(t[r]))if(i(d))t[r]=No(d);else return;if(!s(c))return;let f=!0;c.enabled!==void 0?f=c.enabled:h!==void 0&&(f=d.enabled),o(t,e,r),t[r].enabled=f}const yge={linear(t){return t},easeInQuad(t){return t*t},easeOutQuad(t){return t*(2-t)},easeInOutQuad(t){return t<.5?2*t*t:-1+(4-2*t)*t},easeInCubic(t){return t*t*t},easeOutCubic(t){return--t*t*t+1},easeInOutCubic(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart(t){return t*t*t*t},easeOutQuart(t){return 1- --t*t*t*t},easeInOutQuart(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint(t){return t*t*t*t*t},easeOutQuint(t){return 1+--t*t*t*t*t},easeInOutQuint(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}};function Ys(t,e){let r;Yt(e)||(e=[e]);for(const n of t)if(n){r=n[e[0]];for(let i=1;i<e.length;i++)r&&(r=r[e[i]]);if(typeof r<"u")break}return r}const bge={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"};let xge=class{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.pixelRatio=e,this.generated=!1,this.centerCoordinates={x:289/2,y:289/2},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=()=>{},this.closeCallback=()=>{},this._create()}insertTo(e){this.hammer!==void 0&&(this.hammer.destroy(),this.hammer=void 0),this.container=e,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}setUpdateCallback(e){if(typeof e=="function")this.updateCallback=e;else throw new Error("Function attempted to set as colorPicker update callback is not a function.")}setCloseCallback(e){if(typeof e=="function")this.closeCallback=e;else throw new Error("Function attempted to set as colorPicker closing callback is not a function.")}_isColorString(e){if(typeof e=="string")return bge[e]}setColor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e==="none")return;let n;const i=this._isColorString(e);if(i!==void 0&&(e=i),tc(e)===!0){if($Q(e)===!0){const s=e.substr(4).substr(0,e.length-5).split(",");n={r:s[0],g:s[1],b:s[2],a:1}}else if(gge(e)===!0){const s=e.substr(5).substr(0,e.length-6).split(",");n={r:s[0],g:s[1],b:s[2],a:s[3]}}else if(kQ(e)===!0){const s=$P(e);n={r:s.r,g:s.g,b:s.b,a:1}}}else if(e instanceof Object&&e.r!==void 0&&e.g!==void 0&&e.b!==void 0){const s=e.a!==void 0?e.a:"1.0";n={r:e.r,g:e.g,b:e.b,a:s}}if(n===void 0)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+zh(e));this._setColor(n,r)}show(){this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}_hide(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0)===!0&&(this.previousColor=sr({},this.color)),this.applied===!0&&this.updateCallback(this.initialColor),this.frame.style.display="none",ys(()=>{this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0)},0)}_save(){this.updateCallback(this.color),this.applied=!1,this._hide()}_apply(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}_loadLast(){this.previousColor!==void 0?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}_setColor(e){(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)===!0&&(this.initialColor=sr({},e)),this.color=e;const n=Gu(e.r,e.g,e.b),i=2*Math.PI,s=this.r*n.s,a=this.centerCoordinates.x+s*Math.sin(i*n.h),o=this.centerCoordinates.y+s*Math.cos(i*n.h);this.colorPickerSelector.style.left=a-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=o-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(e)}_setOpacity(e){this.color.a=e/100,this._updatePicker(this.color)}_setBrightness(e){const r=Gu(this.color.r,this.color.g,this.color.b);r.v=e/100;const n=rp(r.h,r.s,r.v);n.a=this.color.a,this.color=n,this._updatePicker()}_updatePicker(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.color;const r=Gu(e.r,e.g,e.b),n=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1)),n.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);const i=this.colorPickerCanvas.clientWidth,s=this.colorPickerCanvas.clientHeight;n.clearRect(0,0,i,s),n.putImageData(this.hueCircle,0,0),n.fillStyle="rgba(0,0,0,"+(1-r.v)+")",n.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),Uh(n).call(n),this.brightnessRange.value=100*r.v,this.opacityRange.value=100*e.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}_setSize(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}_create(){var e,r,n,i;if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){const a=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{const a=document.createElement("DIV");a.style.color="red",a.style.fontWeight="bold",a.style.padding="10px",a.innerText="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(a)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch{}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch{}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);const s=this;this.opacityRange.onchange=function(){s._setOpacity(this.value)},this.opacityRange.oninput=function(){s._setOpacity(this.value)},this.brightnessRange.onchange=function(){s._setBrightness(this.value)},this.brightnessRange.oninput=function(){s._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerText="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerText="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerText="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerText="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerText="cancel",this.cancelButton.onclick=re(e=this._hide).call(e,this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerText="apply",this.applyButton.onclick=re(r=this._apply).call(r,this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerText="save",this.saveButton.onclick=re(n=this._save).call(n,this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerText="load last",this.loadButton.onclick=re(i=this._loadLast).call(i,this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}_bindHammer(){this.drag={},this.pinch={},this.hammer=new kP(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.on("hammer.input",e=>{e.isFirst&&this._moveSelector(e)}),this.hammer.on("tap",e=>{this._moveSelector(e)}),this.hammer.on("panstart",e=>{this._moveSelector(e)}),this.hammer.on("panmove",e=>{this._moveSelector(e)}),this.hammer.on("panend",e=>{this._moveSelector(e)})}_generateHueCircle(){if(this.generated===!1){const e=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)),e.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);const r=this.colorPickerCanvas.clientWidth,n=this.colorPickerCanvas.clientHeight;e.clearRect(0,0,r,n);let i,s,a,o;this.centerCoordinates={x:r*.5,y:n*.5},this.r=.49*r;const c=2*Math.PI/360,u=1/360,d=1/this.r;let h;for(a=0;a<360;a++)for(o=0;o<this.r;o++)i=this.centerCoordinates.x+o*Math.sin(c*a),s=this.centerCoordinates.y+o*Math.cos(c*a),h=rp(a*u,o*d,1),e.fillStyle="rgb("+h.r+","+h.g+","+h.b+")",e.fillRect(i-.5,s-.5,2,2);e.strokeStyle="rgba(0,0,0,1)",e.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),e.stroke(),this.hueCircle=e.getImageData(0,0,r,n)}this.generated=!0}_moveSelector(e){const r=this.colorPickerDiv.getBoundingClientRect(),n=e.center.x-r.left,i=e.center.y-r.top,s=.5*this.colorPickerDiv.clientHeight,a=.5*this.colorPickerDiv.clientWidth,o=n-a,c=i-s,u=Math.atan2(o,c),d=.98*Math.min(Math.sqrt(o*o+c*c),a),h=Math.cos(u)*d+s,f=Math.sin(u)*d+a;this.colorPickerSelector.style.top=h-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=f-.5*this.colorPickerSelector.clientWidth+"px";let p=u/(2*Math.PI);p=p<0?p+1:p;const v=d/this.r,y=Gu(this.color.r,this.color.g,this.color.b);y.h=p,y.s=v;const x=rp(y.h,y.s,y.v);x.a=this.color.a,this.color=x,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}};function dC(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];if(e.length<1)throw new TypeError("Invalid arguments.");if(e.length===1)return document.createTextNode(e[0]);{const n=document.createElement(e[0]);return n.appendChild(dC(...Di(e).call(e,1))),n}}let wge=class{constructor(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:()=>!1;this.parent=e,this.changedOptions=[],this.container=r,this.allowCreation=!1,this.hideOption=s,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},sr(this.options,this.defaultOptions),this.configureOptions=n,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new xge(i),this.wrapper=void 0}setOptions(e){if(e!==void 0){this.popupHistory={},this._removePopup();let r=!0;if(typeof e=="string")this.options.filter=e;else if(Yt(e))this.options.filter=e.join();else if(typeof e=="object"){if(e==null)throw new TypeError("options cannot be null");e.container!==void 0&&(this.options.container=e.container),hn(e)!==void 0&&(this.options.filter=hn(e)),e.showButton!==void 0&&(this.options.showButton=e.showButton),e.enabled!==void 0&&(r=e.enabled)}else typeof e=="boolean"?(this.options.filter=!0,r=e):typeof e=="function"&&(this.options.filter=e,r=!0);hn(this.options)===!1&&(r=!1),this.options.enabled=r}this._clean()}setModuleOptions(e){this.moduleOptions=e,this.options.enabled===!0&&(this._clean(),this.options.container!==void 0&&(this.container=this.options.container),this._create())}_create(){this._clean(),this.changedOptions=[];const e=hn(this.options);let r=0,n=!1;for(const i in this.configureOptions)Object.prototype.hasOwnProperty.call(this.configureOptions,i)&&(this.allowCreation=!1,n=!1,typeof e=="function"?(n=e(i,[]),n=n||this._handleObject(this.configureOptions[i],[i],!0)):(e===!0||ht(e).call(e,i)!==-1)&&(n=!0),n!==!1&&(this.allowCreation=!0,r>0&&this._makeItem([]),this._makeHeader(i),this._handleObject(this.configureOptions[i],[i])),r++);this._makeButton(),this._push()}_push(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(let e=0;e<this.domElements.length;e++)this.wrapper.appendChild(this.domElements[e]);this._showPopupIfNeeded()}_clean(){for(let e=0;e<this.domElements.length;e++)this.wrapper.removeChild(this.domElements[e]);this.wrapper!==void 0&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}_getValue(e){let r=this.moduleOptions;for(let n=0;n<e.length;n++)if(r[e[n]]!==void 0)r=r[e[n]];else{r=void 0;break}return r}_makeItem(e){if(this.allowCreation===!0){const s=document.createElement("div");s.className="vis-configuration vis-config-item vis-config-s"+e.length;for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return gt(n).call(n,a=>{s.appendChild(a)}),this.domElements.push(s),this.domElements.length}return 0}_makeHeader(e){const r=document.createElement("div");r.className="vis-configuration vis-config-header",r.innerText=e,this._makeItem([],r)}_makeLabel(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const i=document.createElement("div");if(i.className="vis-configuration vis-config-label vis-config-s"+r.length,n===!0){for(;i.firstChild;)i.removeChild(i.firstChild);i.appendChild(dC("i","b",e))}else i.innerText=e+":";return i}_makeDropdown(e,r,n){const i=document.createElement("select");i.className="vis-configuration vis-config-select";let s=0;r!==void 0&&ht(e).call(e,r)!==-1&&(s=ht(e).call(e,r));for(let c=0;c<e.length;c++){const u=document.createElement("option");u.value=e[c],c===s&&(u.selected="selected"),u.innerText=e[c],i.appendChild(u)}const a=this;i.onchange=function(){a._update(this.value,n)};const o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,i)}_makeRange(e,r,n){const i=e[0],s=e[1],a=e[2],o=e[3],c=document.createElement("input");c.className="vis-configuration vis-config-range";try{c.type="range",c.min=s,c.max=a}catch{}c.step=o;let u="",d=0;r!==void 0?(r<0&&r*1.2<s?(c.min=Math.ceil(r*1.2),d=c.min,u="range increased"):r/1.2<s&&(c.min=Math.ceil(r/1.2),d=c.min,u="range increased"),r*1.2>a&&a!==1&&(c.max=Math.ceil(r*1.2),d=c.max,u="range increased"),c.value=r):c.value=i;const h=document.createElement("input");h.className="vis-configuration vis-config-rangeinput",h.value=c.value;const f=this;c.onchange=function(){h.value=this.value,f._update(Number(this.value),n)},c.oninput=function(){h.value=this.value};const p=this._makeLabel(n[n.length-1],n),v=this._makeItem(n,p,c,h);u!==""&&this.popupHistory[v]!==d&&(this.popupHistory[v]=d,this._setupPopup(u,v))}_makeButton(){if(this.options.showButton===!0){const e=document.createElement("div");e.className="vis-configuration vis-config-button",e.innerText="generate options",e.onclick=()=>{this._printOptions()},e.onmouseover=()=>{e.className="vis-configuration vis-config-button hover"},e.onmouseout=()=>{e.className="vis-configuration vis-config-button"},this.optionsContainer=document.createElement("div"),this.optionsContainer.className="vis-configuration vis-config-option-container",this.domElements.push(this.optionsContainer),this.domElements.push(e)}}_setupPopup(e,r){if(this.initialized===!0&&this.allowCreation===!0&&this.popupCounter<this.popupLimit){const n=document.createElement("div");n.id="vis-configuration-popup",n.className="vis-configuration-popup",n.innerText=e,n.onclick=()=>{this._removePopup()},this.popupCounter+=1,this.popupDiv={html:n,index:r}}}_removePopup(){this.popupDiv.html!==void 0&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}_showPopupIfNeeded(){if(this.popupDiv.html!==void 0){const r=this.domElements[this.popupDiv.index].getBoundingClientRect();this.popupDiv.html.style.left=r.left+"px",this.popupDiv.html.style.top=r.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=ys(()=>{this.popupDiv.html.style.opacity=0},1500),this.popupDiv.deleteTimeout=ys(()=>{this._removePopup()},1800)}}_makeCheckbox(e,r,n){const i=document.createElement("input");i.type="checkbox",i.className="vis-configuration vis-config-checkbox",i.checked=e,r!==void 0&&(i.checked=r,r!==e&&(typeof e=="object"?r!==e.enabled&&this.changedOptions.push({path:n,value:r}):this.changedOptions.push({path:n,value:r})));const s=this;i.onchange=function(){s._update(this.checked,n)};const a=this._makeLabel(n[n.length-1],n);this._makeItem(n,a,i)}_makeTextInput(e,r,n){const i=document.createElement("input");i.type="text",i.className="vis-configuration vis-config-text",i.value=r,r!==e&&this.changedOptions.push({path:n,value:r});const s=this;i.onchange=function(){s._update(this.value,n)};const a=this._makeLabel(n[n.length-1],n);this._makeItem(n,a,i)}_makeColorField(e,r,n){const i=e[1],s=document.createElement("div");r=r===void 0?i:r,r!=="none"?(s.className="vis-configuration vis-config-colorBlock",s.style.backgroundColor=r):s.className="vis-configuration vis-config-colorBlock none",r=r===void 0?i:r,s.onclick=()=>{this._showColorPicker(r,s,n)};const a=this._makeLabel(n[n.length-1],n);this._makeItem(n,a,s)}_showColorPicker(e,r,n){r.onclick=function(){},this.colorPicker.insertTo(r),this.colorPicker.show(),this.colorPicker.setColor(e),this.colorPicker.setUpdateCallback(i=>{const s="rgba("+i.r+","+i.g+","+i.b+","+i.a+")";r.style.backgroundColor=s,this._update(s,n)}),this.colorPicker.setCloseCallback(()=>{r.onclick=()=>{this._showColorPicker(e,r,n)}})}_handleObject(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=!1;const s=hn(this.options);let a=!1;for(const o in e)if(Object.prototype.hasOwnProperty.call(e,o)){i=!0;const c=e[o],u=Jp(r,o);if(typeof s=="function"&&(i=s(o,r),i===!1&&!Yt(c)&&typeof c!="string"&&typeof c!="boolean"&&c instanceof Object&&(this.allowCreation=!1,i=this._handleObject(c,u,!0),this.allowCreation=n===!1)),i!==!1){a=!0;const d=this._getValue(u);if(Yt(c))this._handleArray(c,d,u);else if(typeof c=="string")this._makeTextInput(c,d,u);else if(typeof c=="boolean")this._makeCheckbox(c,d,u);else if(c instanceof Object){if(!this.hideOption(r,o,this.moduleOptions))if(c.enabled!==void 0){const h=Jp(u,"enabled"),f=this._getValue(h);if(f===!0){const p=this._makeLabel(o,u,!0);this._makeItem(u,p),a=this._handleObject(c,u)||a}else this._makeCheckbox(c,f,u)}else{const h=this._makeLabel(o,u,!0);this._makeItem(u,h),a=this._handleObject(c,u)||a}}else console.error("dont know how to handle",c,o,u)}}return a}_handleArray(e,r,n){typeof e[0]=="string"&&e[0]==="color"?(this._makeColorField(e,r,n),e[1]!==r&&this.changedOptions.push({path:n,value:r})):typeof e[0]=="string"?(this._makeDropdown(e,r,n),e[0]!==r&&this.changedOptions.push({path:n,value:r})):typeof e[0]=="number"&&(this._makeRange(e,r,n),e[0]!==r&&this.changedOptions.push({path:n,value:Number(r)}))}_update(e,r){const n=this._constructOptions(e,r);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",n),this.initialized=!0,this.parent.setOptions(n)}_constructOptions(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=n;e=e==="true"?!0:e,e=e==="false"?!1:e;for(let s=0;s<r.length;s++)r[s]!=="global"&&(i[r[s]]===void 0&&(i[r[s]]={}),s!==r.length-1?i=i[r[s]]:i[r[s]]=e);return n}_printOptions(){const e=this.getOptions();for(;this.optionsContainer.firstChild;)this.optionsContainer.removeChild(this.optionsContainer.firstChild);this.optionsContainer.appendChild(dC("pre","const options = "+zh(e,null,2)))}getOptions(){const e={};for(let r=0;r<this.changedOptions.length;r++)this._constructOptions(this.changedOptions[r].value,this.changedOptions[r].path,e);return e}},_ge=class{constructor(e,r){this.container=e,this.overflowMethod=r||"cap",this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-tooltip",this.container.appendChild(this.frame)}setPosition(e,r){this.x=mi(e),this.y=mi(r)}setText(e){if(e instanceof Element){for(;this.frame.firstChild;)this.frame.removeChild(this.frame.firstChild);this.frame.appendChild(e)}else this.frame.innerText=e}show(e){if(e===void 0&&(e=!0),e===!0){const r=this.frame.clientHeight,n=this.frame.clientWidth,i=this.frame.parentNode.clientHeight,s=this.frame.parentNode.clientWidth;let a=0,o=0;if(this.overflowMethod=="flip"){let c=!1,u=!0;this.y-r<this.padding&&(u=!1),this.x+n>s-this.padding&&(c=!0),c?a=this.x-n:a=this.x,u?o=this.y-r:o=this.y}else o=this.y-r,o+r+this.padding>i&&(o=i-r-this.padding),o<this.padding&&(o=this.padding),a=this.x,a+n+this.padding>s&&(a=s-n-this.padding),a<this.padding&&(a=this.padding);this.frame.style.left=a+"px",this.frame.style.top=o+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}hide(){this.hidden=!0,this.frame.style.left="0",this.frame.style.top="0",this.frame.style.visibility="hidden"}destroy(){this.frame.parentNode.removeChild(this.frame)}},Bu=!1,Hz;const hC="background: #FFeeee; color: #dd0000";let Sge=class Bt{static validate(e,r,n){Bu=!1,Hz=r;let i=r;return n!==void 0&&(i=r[n]),Bt.parse(e,i,[]),Bu}static parse(e,r,n){for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&Bt.check(i,e,r,n)}static check(e,r,n,i){if(n[e]===void 0&&n.__any__===void 0){Bt.getSuggestion(e,n,i);return}let s=e,a=!0;n[e]===void 0&&n.__any__!==void 0&&(s="__any__",a=Bt.getType(r[e])==="object");let o=n[s];a&&o.__type__!==void 0&&(o=o.__type__),Bt.checkFields(e,r,n,s,o,i)}static checkFields(e,r,n,i,s,a){const o=function(d){console.error("%c"+d+Bt.printLocation(a,e),hC)},c=Bt.getType(r[e]),u=s[c];u!==void 0?Bt.getType(u)==="array"&&ht(u).call(u,r[e])===-1?(o('Invalid option detected in "'+e+'". Allowed values are:'+Bt.print(u)+' not "'+r[e]+'". '),Bu=!0):c==="object"&&i!=="__any__"&&(a=Jp(a,e),Bt.parse(r[e],n[i],a)):s.any===void 0&&(o('Invalid type received for "'+e+'". Expected: '+Bt.print(Ht(s))+". Received ["+c+'] "'+r[e]+'"'),Bu=!0)}static getType(e){const r=typeof e;return r==="object"?e===null?"null":e instanceof Boolean?"boolean":e instanceof Number?"number":e instanceof String?"string":Yt(e)?"array":e instanceof Date?"date":e.nodeType!==void 0?"dom":e._isAMomentObject===!0?"moment":"object":r==="number"?"number":r==="boolean"?"boolean":r==="string"?"string":r===void 0?"undefined":r}static getSuggestion(e,r,n){const i=Bt.findInOptions(e,r,n,!1),s=Bt.findInOptions(e,Hz,[],!0),a=8,o=4;let c;i.indexMatch!==void 0?c=" in "+Bt.printLocation(i.path,e,"")+'Perhaps it was incomplete? Did you mean: "'+i.indexMatch+`"?

`:s.distance<=o&&i.distance>s.distance?c=" in "+Bt.printLocation(i.path,e,"")+"Perhaps it was misplaced? Matching option found at: "+Bt.printLocation(s.path,s.closestMatch,""):i.distance<=a?c='. Did you mean "'+i.closestMatch+'"?'+Bt.printLocation(i.path,e):c=". Did you mean one of these: "+Bt.print(Ht(r))+Bt.printLocation(n,e),console.error('%cUnknown option detected: "'+e+'"'+c,hC),Bu=!0}static findInOptions(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,s=1e9,a="",o=[];const c=e.toLowerCase();let u;for(const h in r){let f;if(r[h].__type__!==void 0&&i===!0){const p=Bt.findInOptions(e,r[h],Jp(n,h));s>p.distance&&(a=p.closestMatch,o=p.path,s=p.distance,u=p.indexMatch)}else{var d;ht(d=h.toLowerCase()).call(d,c)!==-1&&(u=h),f=Bt.levenshteinDistance(e,h),s>f&&(a=h,o=fge(n),s=f)}}return{closestMatch:a,path:o,distance:s,indexMatch:u}}static printLocation(e,r){let i=`

`+(arguments.length>2&&arguments[2]!==void 0?arguments[2]:`Problem value found at: 
`)+`options = {
`;for(let s=0;s<e.length;s++){for(let a=0;a<s+1;a++)i+="  ";i+=e[s]+`: {
`}for(let s=0;s<e.length+1;s++)i+="  ";i+=r+`
`;for(let s=0;s<e.length+1;s++){for(let a=0;a<e.length-s;a++)i+="  ";i+=`}
`}return i+`

`}static print(e){return zh(e).replace(/(")|(\[)|(\])|(,"__type__")/g,"").replace(/(,)/g,", ")}static levenshteinDistance(e,r){if(e.length===0)return r.length;if(r.length===0)return e.length;const n=[];let i;for(i=0;i<=r.length;i++)n[i]=[i];let s;for(s=0;s<=e.length;s++)n[0][s]=s;for(i=1;i<=r.length;i++)for(s=1;s<=e.length;s++)r.charAt(i-1)==e.charAt(s-1)?n[i][s]=n[i-1][s-1]:n[i][s]=Math.min(n[i-1][s-1]+1,Math.min(n[i][s-1]+1,n[i-1][s]+1));return n[r.length][e.length]}};const Ege=Ai,Nge=wge,rc=kP,jge=_ge,DQ=hC,Cge=Sge;function Oge(t){return ha=t,Rge()}var MQ={fontsize:"font.size",fontcolor:"font.color",labelfontcolor:"font.color",fontname:"font.face",color:["color.border","color.background"],fillcolor:"color.background",tooltip:"title",labeltooltip:"title"},DP=No(MQ);DP.color="color.color";DP.style="dashes";var Kr={NULL:0,DELIMITER:1,IDENTIFIER:2,UNKNOWN:3},Kz={"{":!0,"}":!0,"[":!0,"]":!0,";":!0,"=":!0,",":!0,"->":!0,"--":!0},ha="",Bc=0,We="",Pe="",cn=Kr.NULL;function Pge(){Bc=0,We=ha.charAt(0)}function vr(){Bc++,We=ha.charAt(Bc)}function Cl(){return ha.charAt(Bc+1)}function Gz(t){var e=t.charCodeAt(0);return e<47?e===35||e===46:e<59?e>47:e<91?e>64:e<96?e===95:e<123?e>96:!1}function Ra(t,e){if(t||(t={}),e)for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}function Tge(t,e,r){for(var n=e.split("."),i=t;n.length;){var s=n.shift();n.length?(i[s]||(i[s]={}),i=i[s]):i[s]=r}}function qQ(t,e){for(var r,n,i=null,s=[t],a=t;a.parent;)s.push(a.parent),a=a.parent;if(a.nodes){for(r=0,n=a.nodes.length;r<n;r++)if(e.id===a.nodes[r].id){i=a.nodes[r];break}}for(i||(i={id:e.id},t.node&&(i.attr=Ra(i.attr,t.node))),r=s.length-1;r>=0;r--){var o,c=s[r];c.nodes||(c.nodes=[]),ht(o=c.nodes).call(o,i)===-1&&c.nodes.push(i)}e.attr&&(i.attr=Ra(i.attr,e.attr))}function Ige(t,e){if(t.edges||(t.edges=[]),t.edges.push(e),t.edge){var r=Ra({},t.edge);e.attr=Ra(r,e.attr)}}function AQ(t,e,r,n,i){var s={from:e,to:r,type:n};return t.edge&&(s.attr=Ra({},t.edge)),s.attr=Ra(s.attr||{},i),i!=null&&i.hasOwnProperty("arrows")&&i.arrows!=null&&(s.arrows={to:{enabled:!0,type:i.arrows.type}},i.arrows=null),s}function St(){for(cn=Kr.NULL,Pe="";We===" "||We==="	"||We===`
`||We==="\r";)vr();do{var t=!1;if(We==="#"){for(var e=Bc-1;ha.charAt(e)===" "||ha.charAt(e)==="	";)e--;if(ha.charAt(e)===`
`||ha.charAt(e)===""){for(;We!=""&&We!=`
`;)vr();t=!0}}if(We==="/"&&Cl()==="/"){for(;We!=""&&We!=`
`;)vr();t=!0}if(We==="/"&&Cl()==="*"){for(;We!="";)if(We==="*"&&Cl()==="/"){vr(),vr();break}else vr();t=!0}for(;We===" "||We==="	"||We===`
`||We==="\r";)vr()}while(t);if(We===""){cn=Kr.DELIMITER;return}var r=We+Cl();if(Kz[r]){cn=Kr.DELIMITER,Pe=r,vr(),vr();return}if(Kz[We]){cn=Kr.DELIMITER,Pe=We,vr();return}if(Gz(We)||We==="-"){for(Pe+=We,vr();Gz(We);)Pe+=We,vr();Pe==="false"?Pe=!1:Pe==="true"?Pe=!0:isNaN(Number(Pe))||(Pe=Number(Pe)),cn=Kr.IDENTIFIER;return}if(We==='"'){for(vr();We!=""&&(We!='"'||We==='"'&&Cl()==='"');)We==='"'?(Pe+=We,vr()):We==="\\"&&Cl()==="n"?(Pe+=`
`,vr()):Pe+=We,vr();if(We!='"')throw Gr('End of string " expected');vr(),cn=Kr.IDENTIFIER;return}for(cn=Kr.UNKNOWN;We!="";)Pe+=We,vr();throw new SyntaxError('Syntax error in part "'+zQ(Pe,30)+'"')}function Rge(){var t={};if(Pge(),St(),Pe==="strict"&&(t.strict=!0,St()),(Pe==="graph"||Pe==="digraph")&&(t.type=Pe,St()),cn===Kr.IDENTIFIER&&(t.id=Pe,St()),Pe!="{")throw Gr("Angle bracket { expected");if(St(),FQ(t),Pe!="}")throw Gr("Angle bracket } expected");if(St(),Pe!=="")throw Gr("End of file expected");return St(),delete t.node,delete t.edge,delete t.graph,t}function FQ(t){for(;Pe!==""&&Pe!="}";)kge(t),Pe===";"&&St()}function kge(t){var e=LQ(t);if(e){BQ(t,e);return}var r=$ge(t);if(!r){if(cn!=Kr.IDENTIFIER)throw Gr("Identifier expected");var n=Pe;if(St(),Pe==="="){if(St(),cn!=Kr.IDENTIFIER)throw Gr("Identifier expected");t[n]=Pe,St()}else Dge(t,n)}}function LQ(t){var e=null;if(Pe==="subgraph"&&(e={},e.type="subgraph",St(),cn===Kr.IDENTIFIER&&(e.id=Pe,St())),Pe==="{"){if(St(),e||(e={}),e.parent=t,e.node=t.node,e.edge=t.edge,e.graph=t.graph,FQ(e),Pe!="}")throw Gr("Angle bracket } expected");St(),delete e.node,delete e.edge,delete e.graph,delete e.parent,t.subgraphs||(t.subgraphs=[]),t.subgraphs.push(e)}return e}function $ge(t){return Pe==="node"?(St(),t.node=hd(),"node"):Pe==="edge"?(St(),t.edge=hd(),"edge"):Pe==="graph"?(St(),t.graph=hd(),"graph"):null}function Dge(t,e){var r={id:e},n=hd();n&&(r.attr=n),qQ(t,r),BQ(t,e)}function BQ(t,e){for(;Pe==="->"||Pe==="--";){var r,n=Pe;St();var i=LQ(t);if(i)r=i;else{if(cn!=Kr.IDENTIFIER)throw Gr("Identifier or subgraph expected");r=Pe,qQ(t,{id:r}),St()}var s=hd(),a=AQ(t,e,r,n,s);Ige(t,a),e=r}}function hd(){for(var t,e=null,r={dashed:!0,solid:!1,dotted:[1,5]},n={dot:"circle",box:"box",crow:"crow",curve:"curve",icurve:"inv_curve",normal:"triangle",inv:"inv_triangle",diamond:"diamond",tee:"bar",vee:"vee"},i=new Array,s=new Array;Pe==="[";){for(St(),e={};Pe!==""&&Pe!="]";){if(cn!=Kr.IDENTIFIER)throw Gr("Attribute name expected");var a=Pe;if(St(),Pe!="=")throw Gr("Equal sign = expected");if(St(),cn!=Kr.IDENTIFIER)throw Gr("Attribute value expected");var o=Pe;a==="style"&&(o=r[o]);var c;a==="arrowhead"&&(c=n[o],a="arrows",o={to:{enabled:!0,type:c}}),a==="arrowtail"&&(c=n[o],a="arrows",o={from:{enabled:!0,type:c}}),i.push({attr:e,name:a,value:o}),s.push(a),St(),Pe==","&&St()}if(Pe!="]")throw Gr("Bracket ] expected");St()}if(Na(s).call(s,"dir")){var u={};for(u.arrows={},t=0;t<i.length;t++)if(i[t].name==="arrows")if(i[t].value.to!=null)u.arrows.to=t;else if(i[t].value.from!=null)u.arrows.from=t;else throw Gr("Invalid value of arrows");else i[t].name==="dir"&&(u.dir=t);var d=i[u.dir].value;if(!Na(s).call(s,"arrows"))if(d==="both")i.push({attr:i[u.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),u.arrows.to=i.length-1,i.push({attr:i[u.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),u.arrows.from=i.length-1;else if(d==="forward")i.push({attr:i[u.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),u.arrows.to=i.length-1;else if(d==="back")i.push({attr:i[u.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),u.arrows.from=i.length-1;else if(d==="none")i.push({attr:i[u.dir].attr,name:"arrows",value:""}),u.arrows.to=i.length-1;else throw Gr('Invalid dir type "'+d+'"');var h,f;if(d==="both")u.arrows.to&&u.arrows.from?(f=i[u.arrows.to].value.to.type,h=i[u.arrows.from].value.from.type,i[u.arrows.to]={attr:i[u.arrows.to].attr,name:i[u.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}},gs(i).call(i,u.arrows.from,1)):u.arrows.to?(f=i[u.arrows.to].value.to.type,h="arrow",i[u.arrows.to]={attr:i[u.arrows.to].attr,name:i[u.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):u.arrows.from&&(f="arrow",h=i[u.arrows.from].value.from.type,i[u.arrows.from]={attr:i[u.arrows.from].attr,name:i[u.arrows.from].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}});else if(d==="back")u.arrows.to&&u.arrows.from?(f="",h=i[u.arrows.from].value.from.type,i[u.arrows.from]={attr:i[u.arrows.from].attr,name:i[u.arrows.from].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):u.arrows.to?(f="",h="arrow",u.arrows.from=u.arrows.to,i[u.arrows.from]={attr:i[u.arrows.from].attr,name:i[u.arrows.from].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):u.arrows.from&&(f="",h=i[u.arrows.from].value.from.type,i[u.arrows.to]={attr:i[u.arrows.from].attr,name:i[u.arrows.from].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}),i[u.arrows.from]={attr:i[u.arrows.from].attr,name:i[u.arrows.from].name,value:{from:{enabled:!0,type:i[u.arrows.from].value.from.type}}};else if(d==="none"){var p;u.arrows.to?p=u.arrows.to:p=u.arrows.from,i[p]={attr:i[p].attr,name:i[p].name,value:""}}else if(d==="forward")u.arrows.to&&u.arrows.from?(f=i[u.arrows.to].value.to.type,h="",i[u.arrows.to]={attr:i[u.arrows.to].attr,name:i[u.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):u.arrows.to?(f=i[u.arrows.to].value.to.type,h="",i[u.arrows.to]={attr:i[u.arrows.to].attr,name:i[u.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}):u.arrows.from&&(f="arrow",h="",u.arrows.to=u.arrows.from,i[u.arrows.to]={attr:i[u.arrows.to].attr,name:i[u.arrows.to].name,value:{to:{enabled:!0,type:f},from:{enabled:!0,type:h}}}),i[u.arrows.to]={attr:i[u.arrows.to].attr,name:i[u.arrows.to].name,value:{to:{enabled:!0,type:i[u.arrows.to].value.to.type}}};else throw Gr('Invalid dir type "'+d+'"');gs(i).call(i,u.dir,1)}var v;if(Na(s).call(s,"penwidth")){var y=[];for(v=i.length,t=0;t<v;t++)i[t].name!=="width"&&(i[t].name==="penwidth"&&(i[t].name="width"),y.push(i[t]));i=y}for(v=i.length,t=0;t<v;t++)Tge(i[t].attr,i[t].name,i[t].value);return e}function Gr(t){return new SyntaxError(t+', got "'+zQ(Pe,30)+'" (char '+Bc+")")}function zQ(t,e){return t.length<=e?t:t.substr(0,27)+"..."}function Mge(t,e,r){Yt(t)?gt(t).call(t,function(n){Yt(e)?gt(e).call(e,function(i){r(n,i)}):r(n,e)}):Yt(e)?gt(e).call(e,function(n){r(t,n)}):r(t,e)}function tE(t,e,r){for(var n=e.split("."),i=n.pop(),s=t,a=0;a<n.length;a++){var o=n[a];o in s||(s[o]={}),s=s[o]}return s[i]=r,t}function Yz(t,e){var r={};for(var n in t)if(t.hasOwnProperty(n)){var i=e[n];Yt(i)?gt(i).call(i,function(s){tE(r,s,t[n])}):typeof i=="string"?tE(r,i,t[n]):tE(r,n,t[n])}return r}function qge(t){var e=Oge(t),r={nodes:[],edges:[],options:{}};if(e.nodes){var n;gt(n=e.nodes).call(n,function(a){var o={id:a.id,label:String(a.label||a.id)};Ra(o,Yz(a.attr,MQ)),o.image&&(o.shape="image"),r.nodes.push(o)})}if(e.edges){var i,s=function(a){var o={from:a.from,to:a.to};return Ra(o,Yz(a.attr,DP)),o.arrows==null&&a.type==="->"&&(o.arrows="to"),o};gt(i=e.edges).call(i,function(a){var o,c;if(a.from instanceof Object?o=a.from.nodes:o={id:a.from},a.to instanceof Object?c=a.to.nodes:c={id:a.to},a.from instanceof Object&&a.from.edges){var u;gt(u=a.from.edges).call(u,function(h){var f=s(h);r.edges.push(f)})}if(Mge(o,c,function(h,f){var p=AQ(r,h.id,f.id,a.type,a.attr),v=s(p);r.edges.push(v)}),a.to instanceof Object&&a.to.edges){var d;gt(d=a.to.edges).call(d,function(h){var f=s(h);r.edges.push(f)})}})}return e.attr&&(r.options=e.attr),r}function Age(t,e){var r;const n={edges:{inheritColor:!1},nodes:{fixed:!1,parseColor:!1}};e!=null&&(e.fixed!=null&&(n.nodes.fixed=e.fixed),e.parseColor!=null&&(n.nodes.parseColor=e.parseColor),e.inheritColor!=null&&(n.edges.inheritColor=e.inheritColor));const i=t.edges,s=qc(i).call(i,o=>{const c={from:o.source,id:o.id,to:o.target};return o.attributes!=null&&(c.attributes=o.attributes),o.label!=null&&(c.label=o.label),o.attributes!=null&&o.attributes.title!=null&&(c.title=o.attributes.title),o.type==="Directed"&&(c.arrows="to"),o.color&&n.edges.inheritColor===!1&&(c.color=o.color),c});return{nodes:qc(r=t.nodes).call(r,o=>{const c={id:o.id,fixed:n.nodes.fixed&&o.x!=null&&o.y!=null};return o.attributes!=null&&(c.attributes=o.attributes),o.label!=null&&(c.label=o.label),o.size!=null&&(c.size=o.size),o.attributes!=null&&o.attributes.title!=null&&(c.title=o.attributes.title),o.title!=null&&(c.title=o.title),o.x!=null&&(c.x=o.x),o.y!=null&&(c.y=o.y),o.color!=null&&(n.nodes.parseColor===!0?c.color=o.color:c.color={background:o.color,border:o.color,highlight:{background:o.color,border:o.color},hover:{background:o.color,border:o.color}}),c}),edges:s}}const Fge={addDescription:"Click in an empty space to place a new node.",addEdge:"Add Edge",addNode:"Add Node",back:"Back",close:"Close",createEdgeError:"Cannot link edges to a cluster.",del:"Delete selected",deleteClusterError:"Clusters cannot be deleted.",edgeDescription:"Click on a node and drag the edge to another node to connect them.",edit:"Edit",editClusterError:"Clusters cannot be edited.",editEdge:"Edit Edge",editEdgeDescription:"Click on the control points and drag them to a node to connect to it.",editNode:"Edit Node"},Lge={addDescription:"Klicke auf eine freie Stelle, um einen neuen Knoten zu plazieren.",addEdge:"Kante hinzufgen",addNode:"Knoten hinzufgen",back:"Zurck",close:"Schlieen",createEdgeError:"Es ist nicht mglich, Kanten mit Clustern zu verbinden.",del:"Lsche Auswahl",deleteClusterError:"Cluster knnen nicht gelscht werden.",edgeDescription:"Klicke auf einen Knoten und ziehe die Kante zu einem anderen Knoten, um diese zu verbinden.",edit:"Editieren",editClusterError:"Cluster knnen nicht editiert werden.",editEdge:"Kante editieren",editEdgeDescription:"Klicke auf die Verbindungspunkte und ziehe diese auf einen Knoten, um sie zu verbinden.",editNode:"Knoten editieren"},Bge={addDescription:"Haga clic en un lugar vaco para colocar un nuevo nodo.",addEdge:"Aadir arista",addNode:"Aadir nodo",back:"Atrs",close:"Cerrar",createEdgeError:"No se puede conectar una arista a un grupo.",del:"Eliminar seleccin",deleteClusterError:"No es posible eliminar grupos.",edgeDescription:"Haga clic en un nodo y arrastre la arista hacia otro nodo para conectarlos.",edit:"Editar",editClusterError:"No es posible editar grupos.",editEdge:"Editar arista",editEdgeDescription:"Haga clic en un punto de control y arrastrelo a un nodo para conectarlo.",editNode:"Editar nodo"},zge={addDescription:"Clicca per aggiungere un nuovo nodo",addEdge:"Aggiungi un vertice",addNode:"Aggiungi un nodo",back:"Indietro",close:"Chiudere",createEdgeError:"Non si possono collegare vertici ad un cluster",del:"Cancella la selezione",deleteClusterError:"I cluster non possono essere cancellati",edgeDescription:"Clicca su un nodo e trascinalo ad un altro nodo per connetterli.",edit:"Modifica",editClusterError:"I clusters non possono essere modificati.",editEdge:"Modifica il vertice",editEdgeDescription:"Clicca sui Punti di controllo e trascinali ad un nodo per connetterli.",editNode:"Modifica il nodo"},Uge={addDescription:"Klik op een leeg gebied om een nieuwe node te maken.",addEdge:"Link toevoegen",addNode:"Node toevoegen",back:"Terug",close:"Sluiten",createEdgeError:"Kan geen link maken naar een cluster.",del:"Selectie verwijderen",deleteClusterError:"Clusters kunnen niet worden verwijderd.",edgeDescription:"Klik op een node en sleep de link naar een andere node om ze te verbinden.",edit:"Wijzigen",editClusterError:"Clusters kunnen niet worden aangepast.",editEdge:"Link wijzigen",editEdgeDescription:"Klik op de verbindingspunten en sleep ze naar een node om daarmee te verbinden.",editNode:"Node wijzigen"},Wge={addDescription:"Clique em um espao em branco para adicionar um novo n",addEdge:"Adicionar aresta",addNode:"Adicionar n",back:"Voltar",close:"Fechar",createEdgeError:"No foi possvel linkar arestas a um cluster.",del:"Remover selecionado",deleteClusterError:"Clusters no puderam ser removidos.",edgeDescription:"Clique em um n e arraste a aresta at outro n para conect-los",edit:"Editar",editClusterError:"Clusters no puderam ser editados.",editEdge:"Editar aresta",editEdgeDescription:"Clique nos pontos de controle e os arraste para um n para conect-los",editNode:"Editar n"},Vge={addDescription:"   ,    .",addEdge:" ",addNode:" ",back:"",close:"",createEdgeError:"    .",del:" ",deleteClusterError:"    ",edgeDescription:"        ,   .",edit:"",editClusterError:"   .",editEdge:" ",editEdgeDescription:"        ,    .",editNode:" "},Hge={addDescription:"",addEdge:"",addNode:"",back:"",close:"",createEdgeError:"",del:"",deleteClusterError:"",edgeDescription:"",edit:"",editClusterError:"",editEdge:"",editEdgeDescription:"",editNode:""},Kge={addDescription:"K   ,    .",addEdge:" ",addNode:" ",back:"",close:"",createEdgeError:"  '   .",del:" ",deleteClusterError:"    .",edgeDescription:"        ,   '.",edit:"",editClusterError:"   .",editEdge:" ",editEdgeDescription:"        ,    .",editNode:" "},Gge={addDescription:"Cliquez dans un endroit vide pour placer un nud.",addEdge:"Ajouter un lien",addNode:"Ajouter un nud",back:"Retour",close:"Fermer",createEdgeError:"Impossible de crer un lien vers un cluster.",del:"Effacer la slection",deleteClusterError:"Les clusters ne peuvent pas tre effacs.",edgeDescription:"Cliquez sur un nud et glissez le lien vers un autre nud pour les connecter.",edit:"diter",editClusterError:"Les clusters ne peuvent pas tre dits.",editEdge:"diter le lien",editEdgeDescription:"Cliquez sur les points de contrle et glissez-les pour connecter un nud.",editNode:"diter le nud"},Yge={addDescription:"Kluknutm do przdnho prostoru mete pidat nov vrchol.",addEdge:"Pidat hranu",addNode:"Pidat vrchol",back:"Zpt",close:"Zavt",createEdgeError:"Nelze pipojit hranu ke shluku.",del:"Smazat vbr",deleteClusterError:"Nelze mazat shluky.",edgeDescription:"Petaenm z jednoho vrcholu do druhho mete spojit tyto vrcholy novou hranou.",edit:"Upravit",editClusterError:"Nelze upravovat shluky.",editEdge:"Upravit hranu",editEdgeDescription:"Petaenm kontrolnho vrcholu hrany ji mete pipojit k jinmu vrcholu.",editNode:"Upravit vrchol"};var Qge=Object.freeze({__proto__:null,cn:Hge,cs:Yge,de:Lge,en:Fge,es:Bge,fr:Gge,it:zge,nl:Uge,pt:Wge,ru:Vge,uk:Kge});function Xge(t,e){try{const[n,i]=e.split(/[-_ /]/,2),s=n!=null?n.toLowerCase():null,a=i!=null?i.toUpperCase():null;if(s&&a){const o=s+"-"+a;if(Object.prototype.hasOwnProperty.call(t,o))return o;var r;console.warn(wme(r="Unknown variant ".concat(a," of language ")).call(r,s,"."))}if(s){const o=s;if(Object.prototype.hasOwnProperty.call(t,o))return o;console.warn("Unknown language ".concat(s))}return console.warn("Unknown locale ".concat(e,", falling back to English.")),"en"}catch(n){return console.error(n),console.warn("Unexpected error while normalizing locale ".concat(e,", falling back to English.")),"en"}}class Jge{constructor(){this.NUM_ITERATIONS=4,this.image=new Image,this.canvas=document.createElement("canvas")}init(){if(this.initialized())return;this.src=this.image.src;const e=this.image.width,r=this.image.height;this.width=e,this.height=r;const n=Math.floor(r/2),i=Math.floor(r/4),s=Math.floor(r/8),a=Math.floor(r/16),o=Math.floor(e/2),c=Math.floor(e/4),u=Math.floor(e/8),d=Math.floor(e/16);this.canvas.width=3*c,this.canvas.height=n,this.coordinates=[[0,0,o,n],[o,0,c,i],[o,i,u,s],[5*u,i,d,a]],this._fillMipMap()}initialized(){return this.coordinates!==void 0}_fillMipMap(){const e=this.canvas.getContext("2d"),r=this.coordinates[0];e.drawImage(this.image,r[0],r[1],r[2],r[3]);for(let n=1;n<this.NUM_ITERATIONS;n++){const i=this.coordinates[n-1],s=this.coordinates[n];e.drawImage(this.canvas,i[0],i[1],i[2],i[3],s[0],s[1],s[2],s[3])}}drawImageAtPosition(e,r,n,i,s,a){if(this.initialized())if(r>2){r*=.5;let o=0;for(;r>2&&o<this.NUM_ITERATIONS;)r*=.5,o+=1;o>=this.NUM_ITERATIONS&&(o=this.NUM_ITERATIONS-1);const c=this.coordinates[o];e.drawImage(this.canvas,c[0],c[1],c[2],c[3],n,i,s,a)}else e.drawImage(this.image,n,i,s,a)}}class Zge{constructor(e){this.images={},this.imageBroken={},this.callback=e}_tryloadBrokenUrl(e,r,n){if(!(e===void 0||n===void 0)){if(r===void 0){console.warn("No broken url image defined");return}n.image.onerror=()=>{console.error("Could not load brokenImage:",r)},n.image.src=r}}_redrawWithImage(e){this.callback&&this.callback(e)}load(e,r){const n=this.images[e];if(n)return n;const i=new Jge;return this.images[e]=i,i.image.onload=()=>{this._fixImageCoordinates(i.image),i.init(),this._redrawWithImage(i)},i.image.onerror=()=>{console.error("Could not load image:",e),this._tryloadBrokenUrl(e,r,i)},i.image.src=e,i}_fixImageCoordinates(e){e.width===0&&(document.body.appendChild(e),e.width=e.offsetWidth,e.height=e.offsetHeight,document.body.removeChild(e))}}var Qz={},Xz={},rE={exports:{}},nE,Jz;function eye(){if(Jz)return nE;Jz=1;var t=Xe();return nE=t(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}),nE}var iE,Zz;function tye(){if(Zz)return iE;Zz=1;var t=Xe(),e=Nr(),r=Ki(),n=eye(),i=Object.isExtensible,s=t(function(){});return iE=s||n?function(o){return!e(o)||n&&r(o)==="ArrayBuffer"?!1:i?i(o):!0}:i,iE}var sE,e8;function UQ(){if(e8)return sE;e8=1;var t=Xe();return sE=!t(function(){return Object.isExtensible(Object.preventExtensions({}))}),sE}var t8;function sv(){if(t8)return rE.exports;t8=1;var t=Ne(),e=et(),r=qh(),n=Nr(),i=Rr(),s=ri().f,a=Zm(),o=xP(),c=tye(),u=Hm(),d=UQ(),h=!1,f=u("meta"),p=0,v=function(b){s(b,f,{value:{objectID:"O"+p++,weakData:{}}})},y=function(b,_){if(!n(b))return typeof b=="symbol"?b:(typeof b=="string"?"S":"P")+b;if(!i(b,f)){if(!c(b))return"F";if(!_)return"E";v(b)}return b[f].objectID},x=function(b,_){if(!i(b,f)){if(!c(b))return!0;if(!_)return!1;v(b)}return b[f].weakData},g=function(b){return d&&h&&c(b)&&!i(b,f)&&v(b),b},m=function(){w.enable=function(){},h=!0;var b=a.f,_=e([].splice),E={};E[f]=1,b(E).length&&(a.f=function(j){for(var S=b(j),C=0,N=S.length;C<N;C++)if(S[C]===f){_(S,C,1);break}return S},t({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:o.f}))},w=rE.exports={enable:m,fastKey:y,getWeakData:x,onFreeze:g};return r[f]=!0,rE.exports}var aE,r8;function rye(){if(r8)return aE;r8=1;var t=ur(),e=gu(),r=t("iterator"),n=Array.prototype;return aE=function(i){return i!==void 0&&(e.Array===i||n[r]===i)},aE}var oE,n8;function WQ(){if(n8)return oE;n8=1;var t=vu(),e=dP(),r=ou(),n=gu(),i=ur(),s=i("iterator");return oE=function(a){if(!r(a))return e(a,s)||e(a,"@@iterator")||n[t(a)]},oE}var lE,i8;function nye(){if(i8)return lE;i8=1;var t=Nn(),e=As(),r=Gi(),n=uu(),i=WQ(),s=TypeError;return lE=function(a,o){var c=arguments.length<2?i(a):o;if(e(c))return r(t(c,a));throw new s(n(a)+" is not iterable")},lE}var cE,s8;function MP(){if(s8)return cE;s8=1;var t=Nn(),e=Gi(),r=dP();return cE=function(n,i,s){var a,o;e(n);try{if(a=r(n,"return"),!a){if(i==="throw")throw s;return s}a=t(a,n)}catch(c){o=!0,a=c}if(i==="throw")throw s;if(o)throw a;return e(a),s},cE}var uE,a8;function av(){if(a8)return uE;a8=1;var t=Gm(),e=Nn(),r=Gi(),n=uu(),i=rye(),s=Fs(),a=cr(),o=nye(),c=WQ(),u=MP(),d=TypeError,h=function(p,v){this.stopped=p,this.result=v},f=h.prototype;return uE=function(p,v,y){var x=y&&y.that,g=!!(y&&y.AS_ENTRIES),m=!!(y&&y.IS_RECORD),w=!!(y&&y.IS_ITERATOR),b=!!(y&&y.INTERRUPTED),_=t(v,x),E,j,S,C,N,O,T,I=function(F){return E&&u(E,"normal"),new h(!0,F)},D=function(F){return g?(r(F),b?_(F[0],F[1],I):_(F[0],F[1])):b?_(F,I):_(F)};if(m)E=p.iterator;else if(w)E=p;else{if(j=c(p),!j)throw new d(n(p)+" is not iterable");if(i(j)){for(S=0,C=s(p);C>S;S++)if(N=D(p[S]),N&&a(f,N))return N;return new h(!1)}E=o(p,j)}for(O=m?p.next:E.next;!(T=e(O,E)).done;){try{N=D(T.value)}catch(F){u(E,"throw",F)}if(typeof N=="object"&&N&&a(f,N))return N}return new h(!1)},uE}var dE,o8;function qP(){if(o8)return dE;o8=1;var t=cr(),e=TypeError;return dE=function(r,n){if(t(n,r))return r;throw new e("Incorrect invocation")},dE}var hE,l8;function AP(){if(l8)return hE;l8=1;var t=Ne(),e=$t(),r=sv(),n=Xe(),i=fu(),s=av(),a=qP(),o=Er(),c=Nr(),u=ou(),d=ul(),h=ri().f,f=Ua().forEach,p=er(),v=dl(),y=v.set,x=v.getterFor;return hE=function(g,m,w){var b=g.indexOf("Map")!==-1,_=g.indexOf("Weak")!==-1,E=b?"set":"add",j=e[g],S=j&&j.prototype,C={},N;if(!p||!o(j)||!(_||S.forEach&&!n(function(){new j().entries().next()})))N=w.getConstructor(m,g,b,E),r.enable();else{N=m(function(I,D){y(a(I,O),{type:g,collection:new j}),u(D)||s(D,I[E],{that:I,AS_ENTRIES:b})});var O=N.prototype,T=x(g);f(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(I){var D=I==="add"||I==="set";I in S&&!(_&&I==="clear")&&i(O,I,function(F,M){var V=T(this).collection;if(!D&&_&&!c(F))return I==="get"?void 0:!1;var q=V[I](F===0?0:F,M);return D?this:q})}),_||h(O,"size",{configurable:!0,get:function(){return T(this).collection.size}})}return d(N,g,!1,!0),C[g]=N,t({global:!0,forced:!0},C),_||w.setStrong(N,g,b),N},hE}var fE,c8;function FP(){if(c8)return fE;c8=1;var t=Bh();return fE=function(e,r,n){for(var i in r)n&&n.unsafe&&e[i]?e[i]=r[i]:t(e,i,r[i],n);return e},fE}var pE,u8;function iye(){if(u8)return pE;u8=1;var t=qn(),e=wP(),r=ur(),n=er(),i=r("species");return pE=function(s){var a=t(s);n&&a&&!a[i]&&e(a,i,{configurable:!0,get:function(){return this}})},pE}var mE,d8;function VQ(){if(d8)return mE;d8=1;var t=Lh(),e=wP(),r=FP(),n=Gm(),i=qP(),s=ou(),a=av(),o=SP(),c=EP(),u=iye(),d=er(),h=sv().fastKey,f=dl(),p=f.set,v=f.getterFor;return mE={getConstructor:function(y,x,g,m){var w=y(function(S,C){i(S,b),p(S,{type:x,index:t(null),first:null,last:null,size:0}),d||(S.size=0),s(C)||a(C,S[m],{that:S,AS_ENTRIES:g})}),b=w.prototype,_=v(x),E=function(S,C,N){var O=_(S),T=j(S,C),I,D;return T?T.value=N:(O.last=T={index:D=h(C,!0),key:C,value:N,previous:I=O.last,next:null,removed:!1},O.first||(O.first=T),I&&(I.next=T),d?O.size++:S.size++,D!=="F"&&(O.index[D]=T)),S},j=function(S,C){var N=_(S),O=h(C),T;if(O!=="F")return N.index[O];for(T=N.first;T;T=T.next)if(T.key===C)return T};return r(b,{clear:function(){for(var C=this,N=_(C),O=N.first;O;)O.removed=!0,O.previous&&(O.previous=O.previous.next=null),O=O.next;N.first=N.last=null,N.index=t(null),d?N.size=0:C.size=0},delete:function(S){var C=this,N=_(C),O=j(C,S);if(O){var T=O.next,I=O.previous;delete N.index[O.index],O.removed=!0,I&&(I.next=T),T&&(T.previous=I),N.first===O&&(N.first=T),N.last===O&&(N.last=I),d?N.size--:C.size--}return!!O},forEach:function(C){for(var N=_(this),O=n(C,arguments.length>1?arguments[1]:void 0),T;T=T?T.next:N.first;)for(O(T.value,T.key,this);T&&T.removed;)T=T.previous},has:function(C){return!!j(this,C)}}),r(b,g?{get:function(C){var N=j(this,C);return N&&N.value},set:function(C,N){return E(this,C===0?0:C,N)}}:{add:function(C){return E(this,C=C===0?0:C,C)}}),d&&e(b,"size",{configurable:!0,get:function(){return _(this).size}}),w},setStrong:function(y,x,g){var m=x+" Iterator",w=v(x),b=v(m);o(y,x,function(_,E){p(this,{type:m,target:_,state:w(_),kind:E,last:null})},function(){for(var _=b(this),E=_.kind,j=_.last;j&&j.removed;)j=j.previous;return!_.target||!(_.last=j=j?j.next:_.state.first)?(_.target=null,c(void 0,!0)):c(E==="keys"?j.key:E==="values"?j.value:[j.key,j.value],!1)},g?"entries":"values",!g,!0),u(x)}},mE}var h8;function sye(){if(h8)return Xz;h8=1;var t=AP(),e=VQ();return t("Map",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},e),Xz}var f8;function aye(){return f8||(f8=1,sye()),Qz}var p8={},vE,m8;function HQ(){return m8||(m8=1,vE=function(t,e){return e===1?function(r,n){return r[t](n)}:function(r,n,i){return r[t](n,i)}}),vE}var gE,v8;function oye(){if(v8)return gE;v8=1;var t=qn(),e=HQ(),r=t("Map");return gE={Map:r,set:e("set",2),get:e("get",1),has:e("has",1),remove:e("delete",1),proto:r.prototype},gE}var g8;function lye(){if(g8)return p8;g8=1;var t=Ne(),e=et(),r=As(),n=qs(),i=av(),s=oye(),a=du(),o=Xe(),c=s.Map,u=s.has,d=s.get,h=s.set,f=e([].push),p=a||o(function(){return c.groupBy("ab",function(v){return v}).get("a").length!==1});return t({target:"Map",stat:!0,forced:a||p},{groupBy:function(y,x){n(y),r(x);var g=new c,m=0;return i(y,function(w){var b=x(w,m++);u(g,b)?f(d(g,b),w):h(g,b,[w])}),g}}),p8}var y8={},yE,b8;function cye(){if(b8)return yE;b8=1;var t=et(),e=pu(),r=ni(),n=qs(),i=t("".charAt),s=t("".charCodeAt),a=t("".slice),o=function(c){return function(u,d){var h=r(n(u)),f=e(d),p=h.length,v,y;return f<0||f>=p?c?"":void 0:(v=s(h,f),v<55296||v>56319||f+1===p||(y=s(h,f+1))<56320||y>57343?c?i(h,f):v:c?a(h,f,f+2):(v-55296<<10)+(y-56320)+65536)}};return yE={codeAt:o(!1),charAt:o(!0)},yE}var x8;function LP(){if(x8)return y8;x8=1;var t=cye().charAt,e=ni(),r=dl(),n=SP(),i=EP(),s="String Iterator",a=r.set,o=r.getterFor(s);return n(String,"String",function(c){a(this,{type:s,string:e(c),index:0})},function(){var u=o(this),d=u.string,h=u.index,f;return h>=d.length?i(void 0,!0):(f=t(d,h),u.index+=f.length,i(f,!1))}),y8}var bE,w8;function uye(){if(w8)return bE;w8=1,yu(),aye(),lye(),LP();var t=mt();return bE=t.Map,bE}var xE,_8;function dye(){if(_8)return xE;_8=1;var t=uye();return bu(),xE=t,xE}var wE,S8;function hye(){return S8||(S8=1,wE=dye()),wE}var fye=hye(),BP=ke(fye);class pye{constructor(){this.clear(),this._defaultIndex=0,this._groupIndex=0,this._defaultGroups=[{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},{border:"#FFA500",background:"#FFFF00",highlight:{border:"#FFA500",background:"#FFFFA3"},hover:{border:"#FFA500",background:"#FFFFA3"}},{border:"#FA0A10",background:"#FB7E81",highlight:{border:"#FA0A10",background:"#FFAFB1"},hover:{border:"#FA0A10",background:"#FFAFB1"}},{border:"#41A906",background:"#7BE141",highlight:{border:"#41A906",background:"#A1EC76"},hover:{border:"#41A906",background:"#A1EC76"}},{border:"#E129F0",background:"#EB7DF4",highlight:{border:"#E129F0",background:"#F0B3F5"},hover:{border:"#E129F0",background:"#F0B3F5"}},{border:"#7C29F0",background:"#AD85E4",highlight:{border:"#7C29F0",background:"#D3BDF0"},hover:{border:"#7C29F0",background:"#D3BDF0"}},{border:"#C37F00",background:"#FFA807",highlight:{border:"#C37F00",background:"#FFCA66"},hover:{border:"#C37F00",background:"#FFCA66"}},{border:"#4220FB",background:"#6E6EFD",highlight:{border:"#4220FB",background:"#9B9BFD"},hover:{border:"#4220FB",background:"#9B9BFD"}},{border:"#FD5A77",background:"#FFC0CB",highlight:{border:"#FD5A77",background:"#FFD1D9"},hover:{border:"#FD5A77",background:"#FFD1D9"}},{border:"#4AD63A",background:"#C2FABC",highlight:{border:"#4AD63A",background:"#E6FFE3"},hover:{border:"#4AD63A",background:"#E6FFE3"}},{border:"#990000",background:"#EE0000",highlight:{border:"#BB0000",background:"#FF3333"},hover:{border:"#BB0000",background:"#FF3333"}},{border:"#FF6000",background:"#FF6000",highlight:{border:"#FF6000",background:"#FF6000"},hover:{border:"#FF6000",background:"#FF6000"}},{border:"#97C2FC",background:"#2B7CE9",highlight:{border:"#D2E5FF",background:"#2B7CE9"},hover:{border:"#D2E5FF",background:"#2B7CE9"}},{border:"#399605",background:"#255C03",highlight:{border:"#399605",background:"#255C03"},hover:{border:"#399605",background:"#255C03"}},{border:"#B70054",background:"#FF007E",highlight:{border:"#B70054",background:"#FF007E"},hover:{border:"#B70054",background:"#FF007E"}},{border:"#AD85E4",background:"#7C29F0",highlight:{border:"#D3BDF0",background:"#7C29F0"},hover:{border:"#D3BDF0",background:"#7C29F0"}},{border:"#4557FA",background:"#000EA1",highlight:{border:"#6E6EFD",background:"#000EA1"},hover:{border:"#6E6EFD",background:"#000EA1"}},{border:"#FFC0CB",background:"#FD5A77",highlight:{border:"#FFD1D9",background:"#FD5A77"},hover:{border:"#FFD1D9",background:"#FD5A77"}},{border:"#C2FABC",background:"#74D66A",highlight:{border:"#E6FFE3",background:"#74D66A"},hover:{border:"#E6FFE3",background:"#74D66A"}},{border:"#EE0000",background:"#990000",highlight:{border:"#FF3333",background:"#BB0000"},hover:{border:"#FF3333",background:"#BB0000"}}],this.options={},this.defaultOptions={useDefaultGroups:!0},sr(this.options,this.defaultOptions)}setOptions(e){const r=["useDefaultGroups"];if(e!==void 0){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&ht(r).call(r,n)===-1){const i=e[n];this.add(n,i)}}}clear(){this._groups=new BP,this._groupNames=[]}get(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this._groups.get(e);if(n===void 0&&r)if(this.options.useDefaultGroups===!1&&this._groupNames.length>0){const i=this._groupIndex%this._groupNames.length;++this._groupIndex,n={},n.color=this._groups.get(this._groupNames[i]),this._groups.set(e,n)}else{const i=this._defaultIndex%this._defaultGroups.length;this._defaultIndex++,n={},n.color=this._defaultGroups[i],this._groups.set(e,n)}return n}add(e,r){return this._groups.has(e)||this._groupNames.push(e),this._groups.set(e,r),r}}var E8={},N8;function mye(){if(N8)return E8;N8=1;var t=Ne();return t({target:"Number",stat:!0},{isNaN:function(r){return r!==r}}),E8}var _E,j8;function vye(){if(j8)return _E;j8=1,mye();var t=mt();return _E=t.Number.isNaN,_E}var SE,C8;function gye(){if(C8)return SE;C8=1;var t=vye();return SE=t,SE}var EE,O8;function yye(){return O8||(O8=1,EE=gye()),EE}var bye=yye(),fC=ke(bye),P8={},NE,T8;function xye(){if(T8)return NE;T8=1;var t=$t(),e=t.isFinite;return NE=Number.isFinite||function(n){return typeof n=="number"&&e(n)},NE}var I8;function wye(){if(I8)return P8;I8=1;var t=Ne(),e=xye();return t({target:"Number",stat:!0},{isFinite:e}),P8}var jE,R8;function _ye(){if(R8)return jE;R8=1,wye();var t=mt();return jE=t.Number.isFinite,jE}var CE,k8;function Sye(){if(k8)return CE;k8=1;var t=_ye();return CE=t,CE}var OE,$8;function Eye(){return $8||($8=1,OE=Sye()),OE}var Nye=Eye(),oo=ke(Nye),D8={},M8;function jye(){if(M8)return D8;M8=1;var t=Ne(),e=Ua().some,r=xu(),n=r("some");return t({target:"Array",proto:!0,forced:!n},{some:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),D8}var PE,q8;function Cye(){if(q8)return PE;q8=1,jye();var t=kr();return PE=t("Array","some"),PE}var TE,A8;function Oye(){if(A8)return TE;A8=1;var t=cr(),e=Cye(),r=Array.prototype;return TE=function(n){var i=n.some;return n===r||t(r,n)&&i===r.some?e:i},TE}var IE,F8;function Pye(){if(F8)return IE;F8=1;var t=Oye();return IE=t,IE}var RE,L8;function Tye(){return L8||(L8=1,RE=Pye()),RE}var Iye=Tye(),Rye=ke(Iye),kE={exports:{}},B8={},z8;function kye(){if(z8)return B8;z8=1;var t=Ne(),e=er(),r=ri().f;return t({target:"Object",stat:!0,forced:Object.defineProperty!==r,sham:!e},{defineProperty:r}),B8}var U8;function $ye(){if(U8)return kE.exports;U8=1,kye();var t=mt(),e=t.Object,r=kE.exports=function(i,s,a){return e.defineProperty(i,s,a)};return e.defineProperty.sham&&(r.sham=!0),kE.exports}var $E,W8;function KQ(){if(W8)return $E;W8=1;var t=$ye();return $E=t,$E}var DE,V8;function Dye(){if(V8)return DE;V8=1;var t=KQ();return DE=t,DE}var ME,H8;function Mye(){if(H8)return ME;H8=1;var t=Dye();return ME=t,ME}var qE,K8;function qye(){return K8||(K8=1,qE=Mye()),qE}var Aye=qye(),Fye=ke(Aye),G8={},Y8;function Lye(){if(Y8)return G8;Y8=1;var t=ur(),e=ri().f,r=t("metadata"),n=Function.prototype;return n[r]===void 0&&e(n,r,{value:null}),G8}var Q8={},X8;function Bye(){return X8||(X8=1,YY()),Q8}var J8={},Z8;function zye(){return Z8||(Z8=1,QY()),J8}var e7={},t7;function Uye(){if(t7)return e7;t7=1;var t=Lt();return t("metadata"),e7}var AE,r7;function Wye(){if(r7)return AE;r7=1;var t=tQ();return Lye(),Bye(),zye(),Uye(),AE=t,AE}var n7={},FE,i7;function GQ(){if(i7)return FE;i7=1;var t=qn(),e=et(),r=t("Symbol"),n=r.keyFor,i=e(r.prototype.valueOf);return FE=r.isRegisteredSymbol||function(a){try{return n(i(a))!==void 0}catch{return!1}},FE}var s7;function Vye(){if(s7)return n7;s7=1;var t=Ne(),e=GQ();return t({target:"Symbol",stat:!0},{isRegisteredSymbol:e}),n7}var a7={},LE,o7;function YQ(){if(o7)return LE;o7=1;for(var t=hu(),e=qn(),r=et(),n=Mh(),i=ur(),s=e("Symbol"),a=s.isWellKnownSymbol,o=e("Object","getOwnPropertyNames"),c=r(s.prototype.valueOf),u=t("wks"),d=0,h=o(s),f=h.length;d<f;d++)try{var p=h[d];n(s[p])&&i(p)}catch{}return LE=function(y){if(a&&a(y))return!0;try{for(var x=c(y),g=0,m=o(u),w=m.length;g<w;g++)if(u[m[g]]==x)return!0}catch{}return!1},LE}var l7;function Hye(){if(l7)return a7;l7=1;var t=Ne(),e=YQ();return t({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:e}),a7}var c7={},u7;function Kye(){if(u7)return c7;u7=1;var t=Lt();return t("customMatcher"),c7}var d7={},h7;function Gye(){if(h7)return d7;h7=1;var t=Lt();return t("observable"),d7}var f7={},p7;function Yye(){if(p7)return f7;p7=1;var t=Ne(),e=GQ();return t({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:e}),f7}var m7={},v7;function Qye(){if(v7)return m7;v7=1;var t=Ne(),e=YQ();return t({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:e}),m7}var g7={},y7;function Xye(){if(y7)return g7;y7=1;var t=Lt();return t("matcher"),g7}var b7={},x7;function Jye(){if(x7)return b7;x7=1;var t=Lt();return t("metadataKey"),b7}var w7={},_7;function Zye(){if(_7)return w7;_7=1;var t=Lt();return t("patternMatch"),w7}var S7={},E7;function e0e(){if(E7)return S7;E7=1;var t=Lt();return t("replaceAll"),S7}var BE,N7;function t0e(){if(N7)return BE;N7=1;var t=Wye();return Vye(),Hye(),Kye(),Gye(),Yye(),Qye(),Xye(),Jye(),Zye(),e0e(),BE=t,BE}var zE,j7;function r0e(){return j7||(j7=1,zE=t0e()),zE}var n0e=r0e(),Mf=ke(n0e),UE,C7;function i0e(){if(C7)return UE;C7=1,yu(),LP(),XY();var t=ev();return UE=t.f("iterator"),UE}var WE,O7;function s0e(){if(O7)return WE;O7=1;var t=i0e();return bu(),WE=t,WE}var VE,P7;function a0e(){if(P7)return VE;P7=1;var t=s0e();return VE=t,VE}var HE,T7;function o0e(){if(T7)return HE;T7=1;var t=a0e();return HE=t,HE}var KE,I7;function l0e(){return I7||(I7=1,KE=o0e()),KE}var c0e=l0e(),u0e=ke(c0e);function Gd(t){"@babel/helpers - typeof";return Gd=typeof Mf=="function"&&typeof u0e=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Mf=="function"&&e.constructor===Mf&&e!==Mf.prototype?"symbol":typeof e},Gd(t)}var GE,R7;function d0e(){if(R7)return GE;R7=1,JY();var t=ev();return GE=t.f("toPrimitive"),GE}var YE,k7;function h0e(){if(k7)return YE;k7=1;var t=d0e();return YE=t,YE}var QE,$7;function f0e(){if($7)return QE;$7=1;var t=h0e();return QE=t,QE}var XE,D7;function p0e(){if(D7)return XE;D7=1;var t=f0e();return XE=t,XE}var JE,M7;function m0e(){return M7||(M7=1,JE=p0e()),JE}var v0e=m0e(),g0e=ke(v0e);function y0e(t,e){if(Gd(t)!="object"||!t)return t;var r=t[g0e];if(r!==void 0){var n=r.call(t,e);if(Gd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function b0e(t){var e=y0e(t,"string");return Gd(e)=="symbol"?e:e+""}function ds(t,e,r){return(e=b0e(e))in t?Fye(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var q7={},ZE,A7;function x0e(){if(A7)return ZE;A7=1;var t=$t(),e=Xe(),r=et(),n=ni(),i=nQ().trim,s=NP(),a=r("".charAt),o=t.parseFloat,c=t.Symbol,u=c&&c.iterator,d=1/o(s+"-0")!==-1/0||u&&!e(function(){o(Object(u))});return ZE=d?function(f){var p=i(n(f)),v=o(p);return v===0&&a(p,0)==="-"?-0:v}:o,ZE}var F7;function w0e(){if(F7)return q7;F7=1;var t=Ne(),e=x0e();return t({global:!0,forced:parseFloat!==e},{parseFloat:e}),q7}var eN,L7;function _0e(){if(L7)return eN;L7=1,w0e();var t=mt();return eN=t.parseFloat,eN}var tN,B7;function S0e(){if(B7)return tN;B7=1;var t=_0e();return tN=t,tN}var rN,z7;function E0e(){return z7||(z7=1,rN=S0e()),rN}var N0e=E0e(),QQ=ke(N0e),U7={},W7;function j0e(){if(W7)return U7;W7=1;var t=Ne(),e=Xe(),r=xP().f,n=e(function(){return!Object.getOwnPropertyNames(1)});return t({target:"Object",stat:!0,forced:n},{getOwnPropertyNames:r}),U7}var nN,V7;function C0e(){if(V7)return nN;V7=1,j0e();var t=mt(),e=t.Object;return nN=function(n){return e.getOwnPropertyNames(n)},nN}var iN,H7;function O0e(){if(H7)return iN;H7=1;var t=C0e();return iN=t,iN}var sN,K7;function P0e(){return K7||(K7=1,sN=O0e()),sN}var T0e=P0e(),I0e=ke(T0e),aN,G7;function R0e(){if(G7)return aN;G7=1,GY();var t=mt();return aN=t.Object.getOwnPropertySymbols,aN}var oN,Y7;function k0e(){if(Y7)return oN;Y7=1;var t=R0e();return oN=t,oN}var lN,Q7;function $0e(){return Q7||(Q7=1,lN=k0e()),lN}var D0e=$0e(),ka=ke(D0e),cN={exports:{}},X7={},J7;function M0e(){if(J7)return X7;J7=1;var t=Ne(),e=Xe(),r=Ni(),n=Km().f,i=er(),s=!i||e(function(){n(1)});return t({target:"Object",stat:!0,forced:s,sham:!i},{getOwnPropertyDescriptor:function(o,c){return n(r(o),c)}}),X7}var Z7;function q0e(){if(Z7)return cN.exports;Z7=1,M0e();var t=mt(),e=t.Object,r=cN.exports=function(i,s){return e.getOwnPropertyDescriptor(i,s)};return e.getOwnPropertyDescriptor.sham&&(r.sham=!0),cN.exports}var uN,eU;function A0e(){if(eU)return uN;eU=1;var t=q0e();return uN=t,uN}var dN,tU;function F0e(){return tU||(tU=1,dN=A0e()),dN}var L0e=F0e(),Wa=ke(L0e),rU={},nU;function B0e(){if(nU)return rU;nU=1;var t=Ne(),e=er(),r=hpe(),n=Ni(),i=Km(),s=Xm();return t({target:"Object",stat:!0,sham:!e},{getOwnPropertyDescriptors:function(o){for(var c=n(o),u=i.f,d=r(c),h={},f=0,p,v;d.length>f;)v=u(c,p=d[f++]),v!==void 0&&s(h,p,v);return h}}),rU}var hN,iU;function z0e(){if(iU)return hN;iU=1,B0e();var t=mt();return hN=t.Object.getOwnPropertyDescriptors,hN}var fN,sU;function U0e(){if(sU)return fN;sU=1;var t=z0e();return fN=t,fN}var pN,aU;function W0e(){return aU||(aU=1,pN=U0e()),pN}var V0e=W0e(),$a=ke(V0e),mN={exports:{}},oU={},lU;function H0e(){if(lU)return oU;lU=1;var t=Ne(),e=er(),r=bP().f;return t({target:"Object",stat:!0,forced:Object.defineProperties!==r,sham:!e},{defineProperties:r}),oU}var cU;function K0e(){if(cU)return mN.exports;cU=1,H0e();var t=mt(),e=t.Object,r=mN.exports=function(i,s){return e.defineProperties(i,s)};return e.defineProperties.sham&&(r.sham=!0),mN.exports}var vN,uU;function G0e(){if(uU)return vN;uU=1;var t=K0e();return vN=t,vN}var gN,dU;function Y0e(){return dU||(dU=1,gN=G0e()),gN}var Q0e=Y0e(),ov=ke(Q0e),yN,hU;function X0e(){return hU||(hU=1,yN=KQ()),yN}var J0e=X0e(),lv=ke(J0e);function zP(t,e){const r=["node","edge","label"];let n=!0;const i=Ys(e,"chosen");if(typeof i=="boolean")n=i;else if(typeof i=="object"){if(ht(r).call(r,t)===-1)throw new Error("choosify: subOption '"+t+"' should be one of '"+r.join("', '")+"'");const s=Ys(e,["chosen",t]);(typeof s=="boolean"||typeof s=="function")&&(n=s)}return n}function pC(t,e,r){if(t.width<=0||t.height<=0)return!1;if(r!==void 0){const s={x:e.x-r.x,y:e.y-r.y};if(r.angle!==0){const a=-r.angle;e={x:Math.cos(a)*s.x-Math.sin(a)*s.y,y:Math.sin(a)*s.x+Math.cos(a)*s.y}}else e=s}const n=t.x+t.width,i=t.y+t.width;return t.left<e.x&&n>e.x&&t.top<e.y&&i>e.y}function Zp(t){return typeof t=="string"&&t!==""}function XQ(t,e,r,n){let i=n.x,s=n.y;if(typeof n.distanceToBorder=="function"){const a=n.distanceToBorder(t,e),o=Math.sin(e)*a,c=Math.cos(e)*a;c===a?(i+=a,s=n.y):o===a?(i=n.x,s-=a):(i+=c,s-=o)}else n.shape.width>n.shape.height?(i=n.x+n.shape.width*.5,s=n.y-r):(i=n.x+r,s=n.y-n.shape.height*.5);return{x:i,y:s}}var bN,fU;function Z0e(){if(fU)return bN;fU=1,yu();var t=kr();return bN=t("Array","values"),bN}var xN,pU;function ebe(){if(pU)return xN;pU=1;var t=Z0e();return xN=t,xN}var wN,mU;function tbe(){if(mU)return wN;mU=1,bu();var t=vu(),e=Rr(),r=cr(),n=ebe(),i=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return wN=function(a){var o=a.values;return a===i||r(i,a)&&o===i.values||e(s,t(a))?n:o},wN}var _N,vU;function rbe(){return vU||(vU=1,_N=tbe()),_N}var nbe=rbe(),JQ=ke(nbe);class ibe{constructor(e){this.measureText=e,this.current=0,this.width=0,this.height=0,this.lines=[]}_add(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"normal";this.lines[e]===void 0&&(this.lines[e]={width:0,height:0,blocks:[]});let i=r;(r===void 0||r==="")&&(i=" ");const s=this.measureText(i,n),a=sr({},JQ(s));a.text=r,a.width=s.width,a.mod=n,(r===void 0||r==="")&&(a.width=0),this.lines[e].blocks.push(a),this.lines[e].width+=a.width}curWidth(){const e=this.lines[this.current];return e===void 0?0:e.width}append(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal";this._add(this.current,e,r)}newLine(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal";this._add(this.current,e,r),this.current++}determineLineHeights(){for(let e=0;e<this.lines.length;e++){const r=this.lines[e];let n=0;if(r.blocks!==void 0)for(let i=0;i<r.blocks.length;i++){const s=r.blocks[i];n<s.height&&(n=s.height)}r.height=n}}determineLabelSize(){let e=0,r=0;for(let n=0;n<this.lines.length;n++){const i=this.lines[n];i.width>e&&(e=i.width),r+=i.height}this.width=e,this.height=r}removeEmptyBlocks(){const e=[];for(let r=0;r<this.lines.length;r++){const n=this.lines[r];if(n.blocks.length===0||r===this.lines.length-1&&n.width===0)continue;const i={};sr(i,n),i.blocks=[];let s;const a=[];for(let o=0;o<n.blocks.length;o++){const c=n.blocks[o];c.width!==0?a.push(c):s===void 0&&(s=c)}a.length===0&&s!==void 0&&a.push(s),i.blocks=a,e.push(i)}return e}finalize(){this.determineLineHeights(),this.determineLabelSize();const e=this.removeEmptyBlocks();return{width:this.width,height:this.height,lines:e}}}const sbe={"<b>":/<b>/,"<i>":/<i>/,"<code>":/<code>/,"</b>":/<\/b>/,"</i>":/<\/i>/,"</code>":/<\/code>/,"*":/\*/,_:/_/,"`":/`/,afterBold:/[^*]/,afterItal:/[^_]/,afterMono:/[^`]/};class gU{constructor(e){this.text=e,this.bold=!1,this.ital=!1,this.mono=!1,this.spacing=!1,this.position=0,this.buffer="",this.modStack=[],this.blocks=[]}mod(){return this.modStack.length===0?"normal":this.modStack[0]}modName(){if(this.modStack.length===0)return"normal";if(this.modStack[0]==="mono")return"mono";if(this.bold&&this.ital)return"boldital";if(this.bold)return"bold";if(this.ital)return"ital"}emitBlock(){this.spacing&&(this.add(" "),this.spacing=!1),this.buffer.length>0&&(this.blocks.push({text:this.buffer,mod:this.modName()}),this.buffer="")}add(e){e===" "&&(this.spacing=!0),this.spacing&&(this.buffer+=" ",this.spacing=!1),e!=" "&&(this.buffer+=e)}parseWS(e){return/[ \t]/.test(e)?(this.mono?this.add(e):this.spacing=!0,!0):!1}setTag(e){this.emitBlock(),this[e]=!0,this.modStack.unshift(e)}unsetTag(e){this.emitBlock(),this[e]=!1,this.modStack.shift()}parseStartTag(e,r){return!this.mono&&!this[e]&&this.match(r)?(this.setTag(e),!0):!1}match(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const[n,i]=this.prepareRegExp(e),s=n.test(this.text.substr(this.position,i));return s&&r&&(this.position+=i-1),s}parseEndTag(e,r,n){let i=this.mod()===e;return e==="mono"?i=i&&this.mono:i=i&&!this.mono,i&&this.match(r)?(n!==void 0?(this.position===this.text.length-1||this.match(n,!1))&&this.unsetTag(e):this.unsetTag(e),!0):!1}replace(e,r){return this.match(e)?(this.add(r),this.position+=length-1,!0):!1}prepareRegExp(e){let r,n;if(e instanceof RegExp)n=e,r=1;else{const i=sbe[e];i!==void 0?n=i:n=new RegExp(e),r=e.length}return[n,r]}}class abe{constructor(e,r,n,i){this.ctx=e,this.parent=r,this.selected=n,this.hover=i;const s=(a,o)=>{if(a===void 0)return 0;const c=this.parent.getFormattingValues(e,n,i,o);let u=0;return a!==""&&(u=this.ctx.measureText(a).width),{width:u,values:c}};this.lines=new ibe(s)}process(e){if(!Zp(e))return this.lines.finalize();const r=this.parent.fontOptions;e=e.replace(/\r\n/g,`
`),e=e.replace(/\r/g,`
`);const n=String(e).split(`
`),i=n.length;if(r.multi)for(let s=0;s<i;s++){const a=this.splitBlocks(n[s],r.multi);if(a!==void 0){if(a.length===0){this.lines.newLine("");continue}if(r.maxWdt>0)for(let o=0;o<a.length;o++){const c=a[o].mod,u=a[o].text;this.splitStringIntoLines(u,c,!0)}else for(let o=0;o<a.length;o++){const c=a[o].mod,u=a[o].text;this.lines.append(u,c)}this.lines.newLine()}}else if(r.maxWdt>0)for(let s=0;s<i;s++)this.splitStringIntoLines(n[s]);else for(let s=0;s<i;s++)this.lines.newLine(n[s]);return this.lines.finalize()}decodeMarkupSystem(e){let r="none";return e==="markdown"||e==="md"?r="markdown":(e===!0||e==="html")&&(r="html"),r}splitHtmlBlocks(e){const r=new gU(e),n=i=>/&/.test(i)?(r.replace(r.text,"&lt;","<")||r.replace(r.text,"&amp;","&")||r.add("&"),!0):!1;for(;r.position<r.text.length;){const i=r.text.charAt(r.position);r.parseWS(i)||/</.test(i)&&(r.parseStartTag("bold","<b>")||r.parseStartTag("ital","<i>")||r.parseStartTag("mono","<code>")||r.parseEndTag("bold","</b>")||r.parseEndTag("ital","</i>")||r.parseEndTag("mono","</code>"))||n(i)||r.add(i),r.position++}return r.emitBlock(),r.blocks}splitMarkdownBlocks(e){const r=new gU(e);let n=!0;const i=s=>/\\/.test(s)?(r.position<this.text.length+1&&(r.position++,s=this.text.charAt(r.position),/ \t/.test(s)?r.spacing=!0:(r.add(s),n=!1)),!0):!1;for(;r.position<r.text.length;){const s=r.text.charAt(r.position);r.parseWS(s)||i(s)||(n||r.spacing)&&(r.parseStartTag("bold","*")||r.parseStartTag("ital","_")||r.parseStartTag("mono","`"))||r.parseEndTag("bold","*","afterBold")||r.parseEndTag("ital","_","afterItal")||r.parseEndTag("mono","`","afterMono")||(r.add(s),n=!1),r.position++}return r.emitBlock(),r.blocks}splitBlocks(e,r){const n=this.decodeMarkupSystem(r);if(n==="none")return[{text:e,mod:"normal"}];if(n==="markdown")return this.splitMarkdownBlocks(e);if(n==="html")return this.splitHtmlBlocks(e)}overMaxWidth(e){const r=this.ctx.measureText(e).width;return this.lines.curWidth()+r>this.parent.fontOptions.maxWdt}getLongestFit(e){let r="",n=0;for(;n<e.length;){const s=r+(r===""?"":" ")+e[n];if(this.overMaxWidth(s))break;r=s,n++}return n}getLongestFitWord(e){let r=0;for(;r<e.length&&!this.overMaxWidth(Di(e).call(e,0,r));)r++;return r}splitStringIntoLines(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.parent.getFormattingValues(this.ctx,this.selected,this.hover,r),e=e.replace(/^( +)/g,"$1\r"),e=e.replace(/([^\r][^ ]*)( +)/g,"$1\r$2\r");let i=e.split("\r");for(;i.length>0;){let s=this.getLongestFit(i);if(s===0){const a=i[0],o=this.getLongestFitWord(a);this.lines.newLine(Di(a).call(a,0,o),r),i[0]=Di(a).call(a,o)}else{let a=s;i[s-1]===" "?s--:i[a]===" "&&a++;const o=Di(i).call(i,0,s).join("");s==i.length&&n?this.lines.append(o,r):this.lines.newLine(o,r),i=Di(i).call(i,a)}}}}const zu=["bold","ital","boldital","mono"];class nc{constructor(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.body=e,this.pointToSelf=!1,this.baseSize=void 0,this.fontOptions={},this.setOptions(r),this.size={top:0,left:0,width:0,height:0,yLine:0},this.isEdgeLabel=n}setOptions(e){if(this.elementOptions=e,this.initFontOptions(e.font),Zp(e.label)?this.labelDirty=!0:e.label=void 0,e.font!==void 0&&e.font!==null){if(typeof e.font=="string")this.baseSize=this.fontOptions.size;else if(typeof e.font=="object"){const r=e.font.size;r!==void 0&&(this.baseSize=r)}}}initFontOptions(e){if(Ke(zu,r=>{this.fontOptions[r]={}}),nc.parseFontString(this.fontOptions,e)){this.fontOptions.vadjust=0;return}Ke(e,(r,n)=>{r!=null&&typeof r!="object"&&(this.fontOptions[n]=r)})}static parseFontString(e,r){if(!r||typeof r!="string")return!1;const n=r.split(" ");return e.size=+n[0].replace("px",""),e.face=n[1],e.color=n[2],!0}constrain(e){const r={constrainWidth:!1,maxWdt:-1,minWdt:-1,constrainHeight:!1,minHgt:-1,valign:"middle"},n=Ys(e,"widthConstraint");if(typeof n=="number")r.maxWdt=Number(n),r.minWdt=Number(n);else if(typeof n=="object"){const s=Ys(e,["widthConstraint","maximum"]);typeof s=="number"&&(r.maxWdt=Number(s));const a=Ys(e,["widthConstraint","minimum"]);typeof a=="number"&&(r.minWdt=Number(a))}const i=Ys(e,"heightConstraint");if(typeof i=="number")r.minHgt=Number(i);else if(typeof i=="object"){const s=Ys(e,["heightConstraint","minimum"]);typeof s=="number"&&(r.minHgt=Number(s));const a=Ys(e,["heightConstraint","valign"]);typeof a=="string"&&(a==="top"||a==="bottom")&&(r.valign=a)}return r}update(e,r){this.setOptions(e,!0),this.propagateFonts(r),_t(this.fontOptions,this.constrain(r)),this.fontOptions.chooser=zP("label",r)}adjustSizes(e){const r=e?e.right+e.left:0;this.fontOptions.constrainWidth&&(this.fontOptions.maxWdt-=r,this.fontOptions.minWdt-=r);const n=e?e.top+e.bottom:0;this.fontOptions.constrainHeight&&(this.fontOptions.minHgt-=n)}addFontOptionsToPile(e,r){for(let n=0;n<r.length;++n)this.addFontToPile(e,r[n])}addFontToPile(e,r){if(r===void 0||r.font===void 0||r.font===null)return;const n=r.font;e.push(n)}getBasicOptions(e){const r={};for(let n=0;n<e.length;++n){let i=e[n];const s={};nc.parseFontString(s,i)&&(i=s),Ke(i,(a,o)=>{a!==void 0&&(Object.prototype.hasOwnProperty.call(r,o)||(ht(zu).call(zu,o)!==-1?r[o]={}:r[o]=a))})}return r}getFontOption(e,r,n){let i;for(let s=0;s<e.length;++s){const a=e[s];if(Object.prototype.hasOwnProperty.call(a,r)){if(i=a[r],i==null)continue;const o={};if(nc.parseFontString(o,i)&&(i=o),Object.prototype.hasOwnProperty.call(i,n))return i[n]}}if(Object.prototype.hasOwnProperty.call(this.fontOptions,n))return this.fontOptions[n];throw new Error("Did not find value for multi-font for property: '"+n+"'")}getFontOptions(e,r){const n={},i=["color","size","face","mod","vadjust"];for(let s=0;s<i.length;++s){const a=i[s];n[a]=this.getFontOption(e,r,a)}return n}propagateFonts(e){const r=[];this.addFontOptionsToPile(r,e),this.fontOptions=this.getBasicOptions(r);for(let n=0;n<zu.length;++n){const i=zu[n],s=this.fontOptions[i],a=this.getFontOptions(r,i);Ke(a,(o,c)=>{s[c]=o}),s.size=Number(s.size),s.vadjust=Number(s.vadjust)}}draw(e,r,n,i,s){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"middle";if(this.elementOptions.label===void 0)return;let o=this.fontOptions.size*this.body.view.scale;this.elementOptions.label&&o<this.elementOptions.scaling.label.drawThreshold-1||(o>=this.elementOptions.scaling.label.maxVisible&&(o=Number(this.elementOptions.scaling.label.maxVisible)/this.body.view.scale),this.calculateLabelSize(e,i,s,r,n,a),this._drawBackground(e),this._drawText(e,r,this.size.yLine,a,o))}_drawBackground(e){if(this.fontOptions.background!==void 0&&this.fontOptions.background!=="none"){e.fillStyle=this.fontOptions.background;const r=this.getSize();e.fillRect(r.left,r.top,r.width,r.height)}}_drawText(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"middle",s=arguments.length>4?arguments[4]:void 0;[r,n]=this._setAlignment(e,r,n,i),e.textAlign="left",r=r-this.size.width/2,this.fontOptions.valign&&this.size.height>this.size.labelHeight&&(this.fontOptions.valign==="top"&&(n-=(this.size.height-this.size.labelHeight)/2),this.fontOptions.valign==="bottom"&&(n+=(this.size.height-this.size.labelHeight)/2));for(let a=0;a<this.lineCount;a++){const o=this.lines[a];if(o&&o.blocks){let c=0;this.isEdgeLabel||this.fontOptions.align==="center"?c+=(this.size.width-o.width)/2:this.fontOptions.align==="right"&&(c+=this.size.width-o.width);for(let u=0;u<o.blocks.length;u++){const d=o.blocks[u];e.font=d.font;const[h,f]=this._getColor(d.color,s,d.strokeColor);d.strokeWidth>0&&(e.lineWidth=d.strokeWidth,e.strokeStyle=f,e.lineJoin="round"),e.fillStyle=h,d.strokeWidth>0&&e.strokeText(d.text,r+c,n+d.vadjust),e.fillText(d.text,r+c,n+d.vadjust),c+=d.width}n+=o.height}}}_setAlignment(e,r,n,i){if(this.isEdgeLabel&&this.fontOptions.align!=="horizontal"&&this.pointToSelf===!1){r=0,n=0;const s=2;this.fontOptions.align==="top"?(e.textBaseline="alphabetic",n-=2*s):this.fontOptions.align==="bottom"?(e.textBaseline="hanging",n+=2*s):e.textBaseline="middle"}else e.textBaseline=i;return[r,n]}_getColor(e,r,n){let i=e||"#000000",s=n||"#ffffff";if(r<=this.elementOptions.scaling.label.drawThreshold){const a=Math.max(0,Math.min(1,1-(this.elementOptions.scaling.label.drawThreshold-r)));i=Kn(i,a),s=Kn(s,a)}return[i,s]}getTextSize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return this._processLabel(e,r,n),{width:this.size.width,height:this.size.height,lineCount:this.lineCount}}getSize(){let r=this.size.left,n=this.size.top-.5*2;if(this.isEdgeLabel){const s=-this.size.width*.5;switch(this.fontOptions.align){case"middle":r=s,n=-this.size.height*.5;break;case"top":r=s,n=-(this.size.height+2);break;case"bottom":r=s,n=2;break}}return{left:r,top:n,width:this.size.width,height:this.size.height}}calculateLabelSize(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"middle";this._processLabel(e,r,n),this.size.left=i-this.size.width*.5,this.size.top=s-this.size.height*.5,this.size.yLine=s+(1-this.lineCount)*.5*this.fontOptions.size,a==="hanging"&&(this.size.top+=.5*this.fontOptions.size,this.size.top+=4,this.size.yLine+=4)}getFormattingValues(e,r,n,i){const s=function(c,u,d){return u==="normal"?d==="mod"?"":c[d]:c[u][d]!==void 0?c[u][d]:c[d]},a={color:s(this.fontOptions,i,"color"),size:s(this.fontOptions,i,"size"),face:s(this.fontOptions,i,"face"),mod:s(this.fontOptions,i,"mod"),vadjust:s(this.fontOptions,i,"vadjust"),strokeWidth:this.fontOptions.strokeWidth,strokeColor:this.fontOptions.strokeColor};(r||n)&&(i==="normal"&&this.fontOptions.chooser===!0&&this.elementOptions.labelHighlightBold?a.mod="bold":typeof this.fontOptions.chooser=="function"&&this.fontOptions.chooser(a,this.elementOptions.id,r,n));let o="";return a.mod!==void 0&&a.mod!==""&&(o+=a.mod+" "),o+=a.size+"px "+a.face,e.font=o.replace(/"/g,""),a.font=e.font,a.height=a.size,a}differentState(e,r){return e!==this.selectedState||r!==this.hoverState}_processLabelText(e,r,n,i){return new abe(e,this,r,n).process(i)}_processLabel(e,r,n){if(this.labelDirty===!1&&!this.differentState(r,n))return;const i=this._processLabelText(e,r,n,this.elementOptions.label);this.fontOptions.minWdt>0&&i.width<this.fontOptions.minWdt&&(i.width=this.fontOptions.minWdt),this.size.labelHeight=i.height,this.fontOptions.minHgt>0&&i.height<this.fontOptions.minHgt&&(i.height=this.fontOptions.minHgt),this.lines=i.lines,this.lineCount=i.lines.length,this.size.width=i.width,this.size.height=i.height,this.selectedState=r,this.hoverState=n,this.labelDirty=!1}visible(){return!(this.size.width===0||this.size.height===0||this.elementOptions.label===void 0||this.fontOptions.size*this.body.view.scale<this.elementOptions.scaling.label.drawThreshold-1)}}class fl{constructor(e,r,n){this.body=r,this.labelModule=n,this.setOptions(e),this.top=void 0,this.left=void 0,this.height=void 0,this.width=void 0,this.radius=void 0,this.margin=void 0,this.refreshNeeded=!0,this.boundingBox={top:0,left:0,right:0,bottom:0}}setOptions(e){this.options=e}_setMargins(e){this.margin={},this.options.margin&&(typeof this.options.margin=="object"?(this.margin.top=this.options.margin.top,this.margin.right=this.options.margin.right,this.margin.bottom=this.options.margin.bottom,this.margin.left=this.options.margin.left):(this.margin.top=this.options.margin,this.margin.right=this.options.margin,this.margin.bottom=this.options.margin,this.margin.left=this.options.margin)),e.adjustSizes(this.margin)}_distanceToBorder(e,r){const n=this.options.borderWidth;return e&&this.resize(e),Math.min(Math.abs(this.width/2/Math.cos(r)),Math.abs(this.height/2/Math.sin(r)))+n}enableShadow(e,r){r.shadow&&(e.shadowColor=r.shadowColor,e.shadowBlur=r.shadowSize,e.shadowOffsetX=r.shadowX,e.shadowOffsetY=r.shadowY)}disableShadow(e,r){r.shadow&&(e.shadowColor="rgba(0,0,0,0)",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0)}enableBorderDashes(e,r){if(r.borderDashes!==!1)if(e.setLineDash!==void 0){let n=r.borderDashes;n===!0&&(n=[5,15]),e.setLineDash(n)}else console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,r.borderDashes=!1}disableBorderDashes(e,r){r.borderDashes!==!1&&(e.setLineDash!==void 0?e.setLineDash([0]):(console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,r.borderDashes=!1))}needsRefresh(e,r){return this.refreshNeeded===!0?(this.refreshNeeded=!1,!0):this.width===void 0||this.labelModule.differentState(e,r)}initContextForDraw(e,r){const n=r.borderWidth/this.body.view.scale;e.lineWidth=Math.min(this.width,n),e.strokeStyle=r.borderColor,e.fillStyle=r.color}performStroke(e,r){const n=r.borderWidth/this.body.view.scale;e.save(),n>0&&(this.enableBorderDashes(e,r),e.stroke(),this.disableBorderDashes(e,r)),e.restore()}performFill(e,r){e.save(),e.fillStyle=r.color,this.enableShadow(e,r),Uh(e).call(e),this.disableShadow(e,r),e.restore(),this.performStroke(e,r)}_addBoundingBoxMargin(e){this.boundingBox.left-=e,this.boundingBox.top-=e,this.boundingBox.bottom+=e,this.boundingBox.right+=e}_updateBoundingBox(e,r,n,i,s){n!==void 0&&this.resize(n,i,s),this.left=e-this.width/2,this.top=r-this.height/2,this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width}updateBoundingBox(e,r,n,i,s){this._updateBoundingBox(e,r,n,i,s)}getDimensionsFromLabel(e,r,n){this.textSize=this.labelModule.getTextSize(e,r,n);let i=this.textSize.width,s=this.textSize.height;const a=14;return i===0&&(i=a,s=a),{width:i,height:s}}}let obe=class extends fl{constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(r,n)){const i=this.getDimensionsFromLabel(e,r,n);this.width=i.width+this.margin.right+this.margin.left,this.height=i.height+this.margin.top+this.margin.bottom,this.radius=this.width/2}}draw(e,r,n,i,s,a){this.resize(e,i,s),this.left=r-this.width/2,this.top=n-this.height/2,this.initContextForDraw(e,a),qY(e,this.left,this.top,this.width,this.height,a.borderRadius),this.performFill(e,a),this.updateBoundingBox(r,n,e,i,s),this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,i,s)}updateBoundingBox(e,r,n,i,s){this._updateBoundingBox(e,r,n,i,s);const a=this.options.shapeProperties.borderRadius;this._addBoundingBoxMargin(a)}distanceToBorder(e,r){e&&this.resize(e);const n=this.options.borderWidth;return Math.min(Math.abs(this.width/2/Math.cos(r)),Math.abs(this.height/2/Math.sin(r)))+n}};class UP extends fl{constructor(e,r,n){super(e,r,n),this.labelOffset=0,this.selected=!1}setOptions(e,r,n){this.options=e,r===void 0&&n===void 0||this.setImages(r,n)}setImages(e,r){r&&this.selected?(this.imageObj=r,this.imageObjAlt=e):(this.imageObj=e,this.imageObjAlt=r)}switchImages(e){const r=e&&!this.selected||!e&&this.selected;if(this.selected=e,this.imageObjAlt!==void 0&&r){const n=this.imageObj;this.imageObj=this.imageObjAlt,this.imageObjAlt=n}}_getImagePadding(){const e={top:0,right:0,bottom:0,left:0};if(this.options.imagePadding){const r=this.options.imagePadding;typeof r=="object"?(e.top=r.top,e.right=r.right,e.bottom=r.bottom,e.left=r.left):(e.top=r,e.right=r,e.bottom=r,e.left=r)}return e}_resizeImage(){let e,r;if(this.options.shapeProperties.useImageSize===!1){let n=1,i=1;this.imageObj.width&&this.imageObj.height&&(this.imageObj.width>this.imageObj.height?n=this.imageObj.width/this.imageObj.height:i=this.imageObj.height/this.imageObj.width),e=this.options.size*2*n,r=this.options.size*2*i}else{const n=this._getImagePadding();e=this.imageObj.width+n.left+n.right,r=this.imageObj.height+n.top+n.bottom}this.width=e,this.height=r,this.radius=.5*this.width}_drawRawCircle(e,r,n,i){this.initContextForDraw(e,i),vP(e,r,n,i.size),this.performFill(e,i)}_drawImageAtPosition(e,r){if(this.imageObj.width!=0){e.globalAlpha=r.opacity!==void 0?r.opacity:1,this.enableShadow(e,r);let n=1;this.options.shapeProperties.interpolation===!0&&(n=this.imageObj.width/this.width/this.body.view.scale);const i=this._getImagePadding(),s=this.left+i.left,a=this.top+i.top,o=this.width-i.left-i.right,c=this.height-i.top-i.bottom;this.imageObj.drawImageAtPosition(e,n,s,a,o,c),this.disableShadow(e,r)}}_drawImageLabel(e,r,n,i,s){let a=0;if(this.height!==void 0){a=this.height*.5;const c=this.labelModule.getTextSize(e,i,s);c.lineCount>=1&&(a+=c.height/2)}const o=n+a;this.options.label&&(this.labelOffset=a),this.labelModule.draw(e,r,o,i,s,"hanging")}}let lbe=class extends UP{constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(r,n)){const i=this.getDimensionsFromLabel(e,r,n),s=Math.max(i.width+this.margin.right+this.margin.left,i.height+this.margin.top+this.margin.bottom);this.options.size=s/2,this.width=s,this.height=s,this.radius=this.width/2}}draw(e,r,n,i,s,a){this.resize(e,i,s),this.left=r-this.width/2,this.top=n-this.height/2,this._drawRawCircle(e,r,n,a),this.updateBoundingBox(r,n),this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,n,i,s)}updateBoundingBox(e,r){this.boundingBox.top=r-this.options.size,this.boundingBox.left=e-this.options.size,this.boundingBox.right=e+this.options.size,this.boundingBox.bottom=r+this.options.size}distanceToBorder(e){return e&&this.resize(e),this.width*.5}};class cbe extends UP{constructor(e,r,n,i,s){super(e,r,n),this.setImages(i,s)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.imageObj.src===void 0||this.imageObj.width===void 0||this.imageObj.height===void 0){const s=this.options.size*2;this.width=s,this.height=s,this.radius=.5*this.width;return}this.needsRefresh(r,n)&&this._resizeImage()}draw(e,r,n,i,s,a){this.switchImages(i),this.resize();let o=r,c=n;this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=r,this.top=n,o+=this.width/2,c+=this.height/2):(this.left=r-this.width/2,this.top=n-this.height/2),this._drawRawCircle(e,o,c,a),e.save(),e.clip(),this._drawImageAtPosition(e,a),e.restore(),this._drawImageLabel(e,o,c,i,s),this.updateBoundingBox(r,n)}updateBoundingBox(e,r){this.options.shapeProperties.coordinateOrigin==="top-left"?(this.boundingBox.top=r,this.boundingBox.left=e,this.boundingBox.right=e+this.options.size*2,this.boundingBox.bottom=r+this.options.size*2):(this.boundingBox.top=r-this.options.size,this.boundingBox.left=e-this.options.size,this.boundingBox.right=e+this.options.size,this.boundingBox.bottom=r+this.options.size),this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset)}distanceToBorder(e){return e&&this.resize(e),this.width*.5}}class Va extends fl{constructor(e,r,n){super(e,r,n)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{size:this.options.size};if(this.needsRefresh(r,n)){var s,a;this.labelModule.getTextSize(e,r,n);const o=2*i.size;this.width=(s=this.customSizeWidth)!==null&&s!==void 0?s:o,this.height=(a=this.customSizeHeight)!==null&&a!==void 0?a:o,this.radius=.5*this.width}}_drawShape(e,r,n,i,s,a,o,c){return this.resize(e,a,o,c),this.left=i-this.width/2,this.top=s-this.height/2,this.initContextForDraw(e,c),Nfe(r)(e,i,s,c.size),this.performFill(e,c),this.options.icon!==void 0&&this.options.icon.code!==void 0&&(e.font=(a?"bold ":"")+this.height/2+"px "+(this.options.icon.face||"FontAwesome"),e.fillStyle=this.options.icon.color||"black",e.textAlign="center",e.textBaseline="middle",e.fillText(this.options.icon.code,i,s)),{drawExternalLabel:()=>{if(this.options.label!==void 0){this.labelModule.calculateLabelSize(e,a,o,i,s,"hanging");const u=s+.5*this.height+.5*this.labelModule.size.height;this.labelModule.draw(e,i,u,a,o,"hanging")}this.updateBoundingBox(i,s)}}}updateBoundingBox(e,r){this.boundingBox.top=r-this.options.size,this.boundingBox.left=e-this.options.size,this.boundingBox.right=e+this.options.size,this.boundingBox.bottom=r+this.options.size,this.options.label!==void 0&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height))}}function yU(t,e){var r=Ht(t);if(ka){var n=ka(t);e&&(n=hn(n).call(n,function(i){return Wa(t,i).enumerable})),r.push.apply(r,n)}return r}function ube(t){for(var e=1;e<arguments.length;e++){var r,n,i=arguments[e]!=null?arguments[e]:{};e%2?gt(r=yU(Object(i),!0)).call(r,function(s){ds(t,s,i[s])}):$a?ov(t,$a(i)):gt(n=yU(Object(i))).call(n,function(s){lv(t,s,Wa(i,s))})}return t}class dbe extends Va{constructor(e,r,n,i){super(e,r,n,i),this.ctxRenderer=i}draw(e,r,n,i,s,a){this.resize(e,i,s,a),this.left=r-this.width/2,this.top=n-this.height/2,e.save();const o=this.ctxRenderer({ctx:e,id:this.options.id,x:r,y:n,state:{selected:i,hover:s},style:ube({},a),label:this.options.label});if(o.drawNode!=null&&o.drawNode(),e.restore(),o.drawExternalLabel){const c=o.drawExternalLabel;o.drawExternalLabel=()=>{e.save(),c(),e.restore()}}return o.nodeDimensions&&(this.customSizeWidth=o.nodeDimensions.width,this.customSizeHeight=o.nodeDimensions.height),o}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}class hbe extends fl{constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e,r,n){if(this.needsRefresh(r,n)){const s=this.getDimensionsFromLabel(e,r,n).width+this.margin.right+this.margin.left;this.width=s,this.height=s,this.radius=this.width/2}}draw(e,r,n,i,s,a){this.resize(e,i,s),this.left=r-this.width/2,this.top=n-this.height/2,this.initContextForDraw(e,a),AY(e,r-this.width/2,n-this.height/2,this.width,this.height),this.performFill(e,a),this.updateBoundingBox(r,n,e,i,s),this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,i,s)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}let fbe=class extends Va{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,a){return this._drawShape(e,"diamond",4,r,n,i,s,a)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}};class pbe extends Va{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,a){return this._drawShape(e,"circle",2,r,n,i,s,a)}distanceToBorder(e){return e&&this.resize(e),this.options.size}}class bU extends fl{constructor(e,r,n){super(e,r,n)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(r,n)){const i=this.getDimensionsFromLabel(e,r,n);this.height=i.height*2,this.width=i.width+i.height,this.radius=.5*this.width}}draw(e,r,n,i,s,a){this.resize(e,i,s),this.left=r-this.width*.5,this.top=n-this.height*.5,this.initContextForDraw(e,a),iC(e,this.left,this.top,this.width,this.height),this.performFill(e,a),this.updateBoundingBox(r,n,e,i,s),this.labelModule.draw(e,r,n,i,s)}distanceToBorder(e,r){e&&this.resize(e);const n=this.width*.5,i=this.height*.5,s=Math.sin(r)*n,a=Math.cos(r)*i;return n*i/Math.sqrt(s*s+a*a)}}class mbe extends fl{constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e,r,n){this.needsRefresh(r,n)&&(this.iconSize={width:Number(this.options.icon.size),height:Number(this.options.icon.size)},this.width=this.iconSize.width+this.margin.right+this.margin.left,this.height=this.iconSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}draw(e,r,n,i,s,a){return this.resize(e,i,s),this.options.icon.size=this.options.icon.size||50,this.left=r-this.width/2,this.top=n-this.height/2,this._icon(e,r,n,i,s,a),{drawExternalLabel:()=>{this.options.label!==void 0&&this.labelModule.draw(e,this.left+this.iconSize.width/2+this.margin.left,n+this.height/2+5,i),this.updateBoundingBox(r,n)}}}updateBoundingBox(e,r){this.boundingBox.top=r-this.options.icon.size*.5,this.boundingBox.left=e-this.options.icon.size*.5,this.boundingBox.right=e+this.options.icon.size*.5,this.boundingBox.bottom=r+this.options.icon.size*.5,this.options.label!==void 0&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height+5))}_icon(e,r,n,i,s,a){const o=Number(this.options.icon.size);this.options.icon.code!==void 0?(e.font=[this.options.icon.weight!=null?this.options.icon.weight:i?"bold":"",(this.options.icon.weight!=null&&i?5:0)+o+"px",this.options.icon.face].join(" "),e.fillStyle=this.options.icon.color||"black",e.textAlign="center",e.textBaseline="middle",this.enableShadow(e,a),e.fillText(this.options.icon.code,r,n),this.disableShadow(e,a)):console.error("When using the icon shape, you need to define the code in the icon options object. This can be done per node or globally.")}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}let vbe=class extends UP{constructor(e,r,n,i,s){super(e,r,n),this.setImages(i,s)}resize(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.imageObj.src===void 0||this.imageObj.width===void 0||this.imageObj.height===void 0){const s=this.options.size*2;this.width=s,this.height=s;return}this.needsRefresh(r,n)&&this._resizeImage()}draw(e,r,n,i,s,a){e.save(),this.switchImages(i),this.resize();let o=r,c=n;if(this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=r,this.top=n,o+=this.width/2,c+=this.height/2):(this.left=r-this.width/2,this.top=n-this.height/2),this.options.shapeProperties.useBorderWithImage===!0){const u=this.options.borderWidth,d=this.options.borderWidthSelected||2*this.options.borderWidth,h=(i?d:u)/this.body.view.scale;e.lineWidth=Math.min(this.width,h),e.beginPath();let f=i?this.options.color.highlight.border:s?this.options.color.hover.border:this.options.color.border,p=i?this.options.color.highlight.background:s?this.options.color.hover.background:this.options.color.background;a.opacity!==void 0&&(f=Kn(f,a.opacity),p=Kn(p,a.opacity)),e.strokeStyle=f,e.fillStyle=p,e.rect(this.left-.5*e.lineWidth,this.top-.5*e.lineWidth,this.width+e.lineWidth,this.height+e.lineWidth),Uh(e).call(e),this.performStroke(e,a),e.closePath()}this._drawImageAtPosition(e,a),this._drawImageLabel(e,o,c,i,s),this.updateBoundingBox(r,n),e.restore()}updateBoundingBox(e,r){this.resize(),this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=e,this.top=r):(this.left=e-this.width/2,this.top=r-this.height/2),this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width,this.options.label!==void 0&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset))}distanceToBorder(e,r){return this._distanceToBorder(e,r)}};class gbe extends Va{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,a){return this._drawShape(e,"square",2,r,n,i,s,a)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}class ybe extends Va{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,a){return this._drawShape(e,"hexagon",4,r,n,i,s,a)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}class bbe extends Va{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,a){return this._drawShape(e,"star",4,r,n,i,s,a)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}class xbe extends fl{constructor(e,r,n){super(e,r,n),this._setMargins(n)}resize(e,r,n){this.needsRefresh(r,n)&&(this.textSize=this.labelModule.getTextSize(e,r,n),this.width=this.textSize.width+this.margin.right+this.margin.left,this.height=this.textSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}draw(e,r,n,i,s,a){this.resize(e,i,s),this.left=r-this.width/2,this.top=n-this.height/2,this.enableShadow(e,a),this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,i,s),this.disableShadow(e,a),this.updateBoundingBox(r,n,e,i,s)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}let wbe=class extends Va{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,a){return this._drawShape(e,"triangle",3,r,n,i,s,a)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}};class _be extends Va{constructor(e,r,n){super(e,r,n)}draw(e,r,n,i,s,a){return this._drawShape(e,"triangleDown",3,r,n,i,s,a)}distanceToBorder(e,r){return this._distanceToBorder(e,r)}}function xU(t,e){var r=Ht(t);if(ka){var n=ka(t);e&&(n=hn(n).call(n,function(i){return Wa(t,i).enumerable})),r.push.apply(r,n)}return r}function wU(t){for(var e=1;e<arguments.length;e++){var r,n,i=arguments[e]!=null?arguments[e]:{};e%2?gt(r=xU(Object(i),!0)).call(r,function(s){ds(t,s,i[s])}):$a?ov(t,$a(i)):gt(n=xU(Object(i))).call(n,function(s){lv(t,s,Wa(i,s))})}return t}class Rt{constructor(e,r,n,i,s,a){this.options=Ca(s),this.globalOptions=s,this.defaultOptions=a,this.body=r,this.edges=[],this.id=void 0,this.imagelist=n,this.grouplist=i,this.x=void 0,this.y=void 0,this.baseSize=this.options.size,this.baseFontSize=this.options.font.size,this.predefinedPosition=!1,this.selected=!1,this.hover=!1,this.labelModule=new nc(this.body,this.options,!1),this.setOptions(e)}attachEdge(e){var r;ht(r=this.edges).call(r,e)===-1&&this.edges.push(e)}detachEdge(e){var r;const n=ht(r=this.edges).call(r,e);if(n!=-1){var i;gs(i=this.edges).call(i,n,1)}}setOptions(e){const r=this.options.shape;if(!e)return;if(typeof e.color<"u"&&(this._localColor=e.color),e.id!==void 0&&(this.id=e.id),this.id===void 0)throw new Error("Node must have an id");Rt.checkMass(e,this.id),e.x!==void 0&&(e.x===null?(this.x=void 0,this.predefinedPosition=!1):(this.x=mi(e.x),this.predefinedPosition=!0)),e.y!==void 0&&(e.y===null?(this.y=void 0,this.predefinedPosition=!1):(this.y=mi(e.y),this.predefinedPosition=!0)),e.size!==void 0&&(this.baseSize=e.size),e.value!==void 0&&(e.value=QQ(e.value)),Rt.parseOptions(this.options,e,!0,this.globalOptions,this.grouplist);const n=[e,this.options,this.defaultOptions];return this.chooser=zP("node",n),this._load_images(),this.updateLabelModule(e),e.opacity!==void 0&&Rt.checkOpacity(e.opacity)&&(this.options.opacity=e.opacity),this.updateShape(r),e.hidden!==void 0||e.physics!==void 0}_load_images(){if((this.options.shape==="circularImage"||this.options.shape==="image")&&this.options.image===void 0)throw new Error("Option image must be defined for node type '"+this.options.shape+"'");if(this.options.image!==void 0){if(this.imagelist===void 0)throw new Error("Internal Error: No images provided");if(typeof this.options.image=="string")this.imageObj=this.imagelist.load(this.options.image,this.options.brokenImage,this.id);else{if(this.options.image.unselected===void 0)throw new Error("No unselected image provided");this.imageObj=this.imagelist.load(this.options.image.unselected,this.options.brokenImage,this.id),this.options.image.selected!==void 0?this.imageObjAlt=this.imagelist.load(this.options.image.selected,this.options.brokenImage,this.id):this.imageObjAlt=void 0}}}static checkOpacity(e){return 0<=e&&e<=1}static checkCoordinateOrigin(e){return e===void 0||e==="center"||e==="top-left"}static updateGroupOptions(e,r,n){var i;if(n===void 0)return;const s=e.group;if(r!==void 0&&r.group!==void 0&&s!==r.group)throw new Error("updateGroupOptions: group values in options don't match.");if(!(typeof s=="number"||typeof s=="string"&&s!=""))return;const o=n.get(s);o.opacity!==void 0&&r.opacity===void 0&&(Rt.checkOpacity(o.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+o.opacity),o.opacity=void 0));const c=hn(i=I0e(r)).call(i,u=>r[u]!=null);c.push("font"),Xp(c,e,o),e.color=cC(e.color)}static parseOptions(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},s=arguments.length>4?arguments[4]:void 0;if(Xp(["color","fixed","shadow"],e,r,n),Rt.checkMass(r),e.opacity!==void 0&&(Rt.checkOpacity(e.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+e.opacity),e.opacity=void 0)),r.opacity!==void 0&&(Rt.checkOpacity(r.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+r.opacity),r.opacity=void 0)),r.shapeProperties&&!Rt.checkCoordinateOrigin(r.shapeProperties.coordinateOrigin)&&console.error("Invalid option for node coordinateOrigin, found: "+r.shapeProperties.coordinateOrigin),Wn(e,r,"shadow",i),r.color!==void 0&&r.color!==null){const o=cC(r.color);IQ(e.color,o)}else n===!0&&r.color===null&&(e.color=Ca(i.color));r.fixed!==void 0&&r.fixed!==null&&(typeof r.fixed=="boolean"?(e.fixed.x=r.fixed,e.fixed.y=r.fixed):(r.fixed.x!==void 0&&typeof r.fixed.x=="boolean"&&(e.fixed.x=r.fixed.x),r.fixed.y!==void 0&&typeof r.fixed.y=="boolean"&&(e.fixed.y=r.fixed.y))),n===!0&&r.font===null&&(e.font=Ca(i.font)),Rt.updateGroupOptions(e,r,s),r.scaling!==void 0&&Wn(e.scaling,r.scaling,"label",i.scaling)}getFormattingValues(){const e={color:this.options.color.background,opacity:this.options.opacity,borderWidth:this.options.borderWidth,borderColor:this.options.color.border,size:this.options.size,borderDashes:this.options.shapeProperties.borderDashes,borderRadius:this.options.shapeProperties.borderRadius,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y};if(this.selected||this.hover?this.chooser===!0?this.selected?(this.options.borderWidthSelected!=null?e.borderWidth=this.options.borderWidthSelected:e.borderWidth*=2,e.color=this.options.color.highlight.background,e.borderColor=this.options.color.highlight.border,e.shadow=this.options.shadow.enabled):this.hover&&(e.color=this.options.color.hover.background,e.borderColor=this.options.color.hover.border,e.shadow=this.options.shadow.enabled):typeof this.chooser=="function"&&(this.chooser(e,this.options.id,this.selected,this.hover),e.shadow===!1&&(e.shadowColor!==this.options.shadow.color||e.shadowSize!==this.options.shadow.size||e.shadowX!==this.options.shadow.x||e.shadowY!==this.options.shadow.y)&&(e.shadow=!0)):e.shadow=this.options.shadow.enabled,this.options.opacity!==void 0){const r=this.options.opacity;e.borderColor=Kn(e.borderColor,r),e.color=Kn(e.color,r),e.shadowColor=Kn(e.shadowColor,r)}return e}updateLabelModule(e){(this.options.label===void 0||this.options.label===null)&&(this.options.label=""),Rt.updateGroupOptions(this.options,wU(wU({},e),{},{color:e&&e.color||this._localColor||void 0}),this.grouplist);const r=this.grouplist.get(this.options.group,!1),n=[e,this.options,r,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,n),this.labelModule.baseSize!==void 0&&(this.baseFontSize=this.labelModule.baseSize)}updateShape(e){if(e===this.options.shape&&this.shape)this.shape.setOptions(this.options,this.imageObj,this.imageObjAlt);else switch(this.options.shape){case"box":this.shape=new obe(this.options,this.body,this.labelModule);break;case"circle":this.shape=new lbe(this.options,this.body,this.labelModule);break;case"circularImage":this.shape=new cbe(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"custom":this.shape=new dbe(this.options,this.body,this.labelModule,this.options.ctxRenderer);break;case"database":this.shape=new hbe(this.options,this.body,this.labelModule);break;case"diamond":this.shape=new fbe(this.options,this.body,this.labelModule);break;case"dot":this.shape=new pbe(this.options,this.body,this.labelModule);break;case"ellipse":this.shape=new bU(this.options,this.body,this.labelModule);break;case"icon":this.shape=new mbe(this.options,this.body,this.labelModule);break;case"image":this.shape=new vbe(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"square":this.shape=new gbe(this.options,this.body,this.labelModule);break;case"hexagon":this.shape=new ybe(this.options,this.body,this.labelModule);break;case"star":this.shape=new bbe(this.options,this.body,this.labelModule);break;case"text":this.shape=new xbe(this.options,this.body,this.labelModule);break;case"triangle":this.shape=new wbe(this.options,this.body,this.labelModule);break;case"triangleDown":this.shape=new _be(this.options,this.body,this.labelModule);break;default:this.shape=new bU(this.options,this.body,this.labelModule);break}this.needsRefresh()}select(){this.selected=!0,this.needsRefresh()}unselect(){this.selected=!1,this.needsRefresh()}needsRefresh(){this.shape.refreshNeeded=!0}getTitle(){return this.options.title}distanceToBorder(e,r){return this.shape.distanceToBorder(e,r)}isFixed(){return this.options.fixed.x&&this.options.fixed.y}isSelected(){return this.selected}getValue(){return this.options.value}getLabelSize(){return this.labelModule.size()}setValueRange(e,r,n){if(this.options.value!==void 0){const i=this.options.scaling.customScalingFunction(e,r,n,this.options.value),s=this.options.scaling.max-this.options.scaling.min;if(this.options.scaling.label.enabled===!0){const a=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+i*a}this.options.size=this.options.scaling.min+i*s}else this.options.size=this.baseSize,this.options.font.size=this.baseFontSize;this.updateLabelModule()}draw(e){const r=this.getFormattingValues();return this.shape.draw(e,this.x,this.y,this.selected,this.hover,r)||{}}updateBoundingBox(e){this.shape.updateBoundingBox(this.x,this.y,e)}resize(e){const r=this.getFormattingValues();this.shape.resize(e,this.selected,this.hover,r)}getItemsOnPoint(e){const r=[];return this.labelModule.visible()&&pC(this.labelModule.getSize(),e)&&r.push({nodeId:this.id,labelId:0}),pC(this.shape.boundingBox,e)&&r.push({nodeId:this.id}),r}isOverlappingWith(e){return this.shape.left<e.right&&this.shape.left+this.shape.width>e.left&&this.shape.top<e.bottom&&this.shape.top+this.shape.height>e.top}isBoundingBoxOverlappingWith(e){return this.shape.boundingBox.left<e.right&&this.shape.boundingBox.right>e.left&&this.shape.boundingBox.top<e.bottom&&this.shape.boundingBox.bottom>e.top}static checkMass(e,r){if(e.mass!==void 0&&e.mass<=0){let n="";r!==void 0&&(n=" in node id: "+r),console.error("%cNegative or zero mass disallowed"+n+", setting mass to 1.",DQ),e.mass=1}}}class Sbe{constructor(e,r,n,i){var s;if(this.body=e,this.images=r,this.groups=n,this.layoutEngine=i,this.body.functions.createNode=re(s=this.create).call(s,this),this.nodesListeners={add:(a,o)=>{this.add(o.items)},update:(a,o)=>{this.update(o.items,o.data,o.oldData)},remove:(a,o)=>{this.remove(o.items)}},this.defaultOptions={borderWidth:1,borderWidthSelected:void 0,brokenImage:void 0,color:{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},opacity:void 0,fixed:{x:!1,y:!1},font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:0,strokeColor:"#ffffff",align:"center",vadjust:0,multi:!1,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"monospace",vadjust:2}},group:void 0,hidden:!1,icon:{face:"FontAwesome",code:void 0,size:50,color:"#2B7CE9"},image:void 0,imagePadding:{top:0,right:0,bottom:0,left:0},label:void 0,labelHighlightBold:!0,level:void 0,margin:{top:5,right:5,bottom:5,left:5},mass:1,physics:!0,scaling:{min:10,max:30,label:{enabled:!1,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(a,o,c,u){if(o===a)return .5;{const d=1/(o-a);return Math.max(0,(u-a)*d)}}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},shape:"ellipse",shapeProperties:{borderDashes:!1,borderRadius:6,interpolation:!0,useImageSize:!1,useBorderWithImage:!1,coordinateOrigin:"center"},size:25,title:void 0,value:void 0,x:void 0,y:void 0},this.defaultOptions.mass<=0)throw"Internal error: mass in defaultOptions of NodesHandler may not be zero or negative";this.options=Ca(this.defaultOptions),this.bindEventListeners()}bindEventListeners(){var e,r;this.body.emitter.on("refreshNodes",re(e=this.refresh).call(e,this)),this.body.emitter.on("refresh",re(r=this.refresh).call(r,this)),this.body.emitter.on("destroy",()=>{Ke(this.nodesListeners,(n,i)=>{this.body.data.nodes&&this.body.data.nodes.off(i,n)}),delete this.body.functions.createNode,delete this.nodesListeners.add,delete this.nodesListeners.update,delete this.nodesListeners.remove,delete this.nodesListeners})}setOptions(e){if(e!==void 0){if(Rt.parseOptions(this.options,e),e.opacity!==void 0&&(fC(e.opacity)||!oo(e.opacity)||e.opacity<0||e.opacity>1?console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+e.opacity):this.options.opacity=e.opacity),e.shape!==void 0)for(const r in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,r)&&this.body.nodes[r].updateShape();if(typeof e.font<"u"||typeof e.widthConstraint<"u"||typeof e.heightConstraint<"u")for(const r of Ht(this.body.nodes))this.body.nodes[r].updateLabelModule(),this.body.nodes[r].needsRefresh();if(e.size!==void 0)for(const r in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,r)&&this.body.nodes[r].needsRefresh();(e.hidden!==void 0||e.physics!==void 0)&&this.body.emitter.emit("_dataChanged")}}setData(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.body.data.nodes;if(PY("id",e))this.body.data.nodes=e;else if(Yt(e))this.body.data.nodes=new Mc,this.body.data.nodes.add(e);else if(!e)this.body.data.nodes=new Mc;else throw new TypeError("Array or DataSet expected");if(n&&Ke(this.nodesListeners,function(i,s){n.off(s,i)}),this.body.nodes={},this.body.data.nodes){const i=this;Ke(this.nodesListeners,function(a,o){i.body.data.nodes.on(o,a)});const s=this.body.data.nodes.getIds();this.add(s,!0)}r===!1&&this.body.emitter.emit("_dataChanged")}add(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n;const i=[];for(let s=0;s<e.length;s++){n=e[s];const a=this.body.data.nodes.get(n),o=this.create(a);i.push(o),this.body.nodes[n]=o}this.layoutEngine.positionInitially(i),r===!1&&this.body.emitter.emit("_dataChanged")}update(e,r,n){const i=this.body.nodes;let s=!1;for(let a=0;a<e.length;a++){const o=e[a];let c=i[o];const u=r[a];c!==void 0?c.setOptions(u)&&(s=!0):(s=!0,c=this.create(u),i[o]=c)}!s&&n!==void 0&&(s=Rye(r).call(r,function(a,o){const c=n[o];return c&&c.level!==a.level})),s===!0?this.body.emitter.emit("_dataChanged"):this.body.emitter.emit("_dataUpdated")}remove(e){const r=this.body.nodes;for(let n=0;n<e.length;n++){const i=e[n];delete r[i]}this.body.emitter.emit("_dataChanged")}create(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Rt;return new r(e,this.body,this.images,this.groups,this.options,this.defaultOptions)}refresh(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;Ke(this.body.nodes,(r,n)=>{const i=this.body.data.nodes.get(n);i!==void 0&&(e===!0&&r.setOptions({x:null,y:null}),r.setOptions({fixed:!1}),r.setOptions(i))})}getPositions(e){const r={};if(e!==void 0){if(Yt(e)===!0){for(let n=0;n<e.length;n++)if(this.body.nodes[e[n]]!==void 0){const i=this.body.nodes[e[n]];r[e[n]]={x:Math.round(i.x),y:Math.round(i.y)}}}else if(this.body.nodes[e]!==void 0){const n=this.body.nodes[e];r[e]={x:Math.round(n.x),y:Math.round(n.y)}}}else for(let n=0;n<this.body.nodeIndices.length;n++){const i=this.body.nodes[this.body.nodeIndices[n]];r[this.body.nodeIndices[n]]={x:Math.round(i.x),y:Math.round(i.y)}}return r}getPosition(e){if(e==null)throw new TypeError("No id was specified for getPosition method.");if(this.body.nodes[e]==null)throw new ReferenceError("NodeId provided for getPosition does not exist. Provided: ".concat(e));return{x:Math.round(this.body.nodes[e].x),y:Math.round(this.body.nodes[e].y)}}storePositions(){const e=[],r=this.body.data.nodes.getDataSet();for(const n of r.get()){const i=n.id,s=this.body.nodes[i],a=Math.round(s.x),o=Math.round(s.y);(n.x!==a||n.y!==o)&&e.push({id:i,x:a,y:o})}r.update(e)}getBoundingBox(e){if(this.body.nodes[e]!==void 0)return this.body.nodes[e].shape.boundingBox}getConnectedNodes(e,r){const n=[];if(this.body.nodes[e]!==void 0){const i=this.body.nodes[e],s={};for(let a=0;a<i.edges.length;a++){const o=i.edges[a];r!=="to"&&o.toId==i.id?s[o.fromId]===void 0&&(n.push(o.fromId),s[o.fromId]=!0):r!=="from"&&o.fromId==i.id&&s[o.toId]===void 0&&(n.push(o.toId),s[o.toId]=!0)}}return n}getConnectedEdges(e){const r=[];if(this.body.nodes[e]!==void 0){const n=this.body.nodes[e];for(let i=0;i<n.edges.length;i++)r.push(n.edges[i].id)}else console.error("NodeId provided for getConnectedEdges does not exist. Provided: ",e);return r}moveNode(e,r,n){this.body.nodes[e]!==void 0?(this.body.nodes[e].x=Number(r),this.body.nodes[e].y=Number(n),ys(()=>{this.body.emitter.emit("startSimulation")},0)):console.error("Node id supplied to moveNode does not exist. Provided: ",e)}}var _U={},SU;function Ebe(){if(SU)return _U;SU=1;var t=Ne(),e=Math.hypot,r=Math.abs,n=Math.sqrt,i=!!e&&e(1/0,NaN)!==1/0;return t({target:"Math",stat:!0,arity:2,forced:i},{hypot:function(a,o){for(var c=0,u=0,d=arguments.length,h=0,f,p;u<d;)f=r(arguments[u++]),h<f?(p=h/f,c=c*p*p+1,h=f):f>0?(p=f/h,c+=p*p):c+=f;return h===1/0?1/0:h*n(c)}}),_U}var SN,EU;function Nbe(){if(EU)return SN;EU=1,Ebe();var t=mt();return SN=t.Math.hypot,SN}var EN,NU;function jbe(){if(NU)return EN;NU=1;var t=Nbe();return EN=t,EN}var NN,jU;function Cbe(){return jU||(jU=1,NN=jbe()),NN}var Obe=Cbe(),Pbe=ke(Obe);class Jt{static transform(e,r){Yt(e)||(e=[e]);const n=r.point.x,i=r.point.y,s=r.angle,a=r.length;for(let o=0;o<e.length;++o){const c=e[o],u=c.x*Math.cos(s)-c.y*Math.sin(s),d=c.x*Math.sin(s)+c.y*Math.cos(s);c.x=n+a*u,c.y=i+a*d}}static drawPath(e,r){e.beginPath(),e.moveTo(r[0].x,r[0].y);for(let n=1;n<r.length;++n)e.lineTo(r[n].x,r[n].y);e.closePath()}}let Tbe=class extends Jt{static draw(e,r){if(r.image){e.save(),e.translate(r.point.x,r.point.y),e.rotate(Math.PI/2+r.angle);const n=r.imageWidth!=null?r.imageWidth:r.image.width,i=r.imageHeight!=null?r.imageHeight:r.image.height;r.image.drawImageAtPosition(e,1,-n/2,0,n,i),e.restore()}return!1}};class Ibe extends Jt{static draw(e,r){const n=[{x:0,y:0},{x:-1,y:.3},{x:-.9,y:0},{x:-1,y:-.3}];return Jt.transform(n,r),Jt.drawPath(e,n),!0}}class Rbe{static draw(e,r){const n=[{x:-1,y:0},{x:0,y:.3},{x:-.4,y:0},{x:0,y:-.3}];return Jt.transform(n,r),Jt.drawPath(e,n),!0}}class kbe{static draw(e,r){const n={x:-.4,y:0};Jt.transform(n,r),e.strokeStyle=e.fillStyle,e.fillStyle="rgba(0, 0, 0, 0)";const i=Math.PI,s=r.angle-i/2,a=r.angle+i/2;return e.beginPath(),e.arc(n.x,n.y,r.length*.4,s,a,!1),e.stroke(),!0}}class $be{static draw(e,r){const n={x:-.3,y:0};Jt.transform(n,r),e.strokeStyle=e.fillStyle,e.fillStyle="rgba(0, 0, 0, 0)";const i=Math.PI,s=r.angle+i/2,a=r.angle+3*i/2;return e.beginPath(),e.arc(n.x,n.y,r.length*.4,s,a,!1),e.stroke(),!0}}class Dbe{static draw(e,r){const n=[{x:.02,y:0},{x:-1,y:.3},{x:-1,y:-.3}];return Jt.transform(n,r),Jt.drawPath(e,n),!0}}class Mbe{static draw(e,r){const n=[{x:0,y:.3},{x:0,y:-.3},{x:-1,y:0}];return Jt.transform(n,r),Jt.drawPath(e,n),!0}}class qbe{static draw(e,r){const n={x:-.4,y:0};return Jt.transform(n,r),vP(e,n.x,n.y,r.length*.4),!0}}class Abe{static draw(e,r){const n=[{x:0,y:.5},{x:0,y:-.5},{x:-.15,y:-.5},{x:-.15,y:.5}];return Jt.transform(n,r),Jt.drawPath(e,n),!0}}class Fbe{static draw(e,r){const n=[{x:0,y:.3},{x:0,y:-.3},{x:-.6,y:-.3},{x:-.6,y:.3}];return Jt.transform(n,r),Jt.drawPath(e,n),!0}}class Lbe{static draw(e,r){const n=[{x:0,y:0},{x:-.5,y:-.3},{x:-1,y:0},{x:-.5,y:.3}];return Jt.transform(n,r),Jt.drawPath(e,n),!0}}class Bbe{static draw(e,r){const n=[{x:-1,y:.3},{x:-.5,y:0},{x:-1,y:-.3},{x:0,y:0}];return Jt.transform(n,r),Jt.drawPath(e,n),!0}}class ZQ{static draw(e,r){let n;switch(r.type&&(n=r.type.toLowerCase()),n){case"image":return Tbe.draw(e,r);case"circle":return qbe.draw(e,r);case"box":return Fbe.draw(e,r);case"crow":return Rbe.draw(e,r);case"curve":return kbe.draw(e,r);case"diamond":return Lbe.draw(e,r);case"inv_curve":return $be.draw(e,r);case"triangle":return Dbe.draw(e,r);case"inv_triangle":return Mbe.draw(e,r);case"bar":return Abe.draw(e,r);case"vee":return Bbe.draw(e,r);case"arrow":default:return Ibe.draw(e,r)}}}function CU(t,e){var r=Ht(t);if(ka){var n=ka(t);e&&(n=hn(n).call(n,function(i){return Wa(t,i).enumerable})),r.push.apply(r,n)}return r}function OU(t){for(var e=1;e<arguments.length;e++){var r,n,i=arguments[e]!=null?arguments[e]:{};e%2?gt(r=CU(Object(i),!0)).call(r,function(s){ds(t,s,i[s])}):$a?ov(t,$a(i)):gt(n=CU(Object(i))).call(n,function(s){lv(t,s,Wa(i,s))})}return t}class eX{constructor(e,r,n){ds(this,"color",{}),ds(this,"colorDirty",!0),ds(this,"hoverWidth",1.5),ds(this,"selectionWidth",2),this._body=r,this._labelModule=n,this.setOptions(e),this.fromPoint=this.from,this.toPoint=this.to}connect(){this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to]}cleanup(){return!1}setOptions(e){this.options=e,this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.id=this.options.id}drawLine(e,r,n,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.getViaNode();e.strokeStyle=this.getColor(e,r),e.lineWidth=r.width,r.dashes!==!1?this._drawDashedLine(e,r,s):this._drawLine(e,r,s)}_drawLine(e,r,n,i,s){if(this.from!=this.to)this._line(e,r,n,i,s);else{const[a,o,c]=this._getCircleData(e);this._circle(e,r,a,o,c)}}_drawDashedLine(e,r,n,i,s){e.lineCap="round";const a=Yt(r.dashes)?r.dashes:[5,5];if(e.setLineDash!==void 0){if(e.save(),e.setLineDash(a),e.lineDashOffset=0,this.from!=this.to)this._line(e,r,n);else{const[o,c,u]=this._getCircleData(e);this._circle(e,r,o,c,u)}e.setLineDash([0]),e.lineDashOffset=0,e.restore()}else{if(this.from!=this.to)FY(e,this.from.x,this.from.y,this.to.x,this.to.y,a);else{const[o,c,u]=this._getCircleData(e);this._circle(e,r,o,c,u)}this.enableShadow(e,r),e.stroke(),this.disableShadow(e,r)}}findBorderPosition(e,r,n){return this.from!=this.to?this._findBorderPosition(e,r,n):this._findBorderPositionCircle(e,r,n)}findBorderPositions(e){if(this.from!=this.to)return{from:this._findBorderPosition(this.from,e),to:this._findBorderPosition(this.to,e)};{var r;const[n,i]=Di(r=this._getCircleData(e)).call(r,0,2);return{from:this._findBorderPositionCircle(this.from,e,{x:n,y:i,low:.25,high:.6,direction:-1}),to:this._findBorderPositionCircle(this.from,e,{x:n,y:i,low:.6,high:.8,direction:1})}}}_getCircleData(e){const r=this.options.selfReference.size;e!==void 0&&this.from.shape.width===void 0&&this.from.shape.resize(e);const n=XQ(e,this.options.selfReference.angle,r,this.from);return[n.x,n.y,r]}_pointOnCircle(e,r,n,i){const s=i*2*Math.PI;return{x:e+n*Math.cos(s),y:r-n*Math.sin(s)}}_findBorderPositionCircle(e,r,n){const i=n.x,s=n.y;let a=n.low,o=n.high;const c=n.direction,u=10,d=this.options.selfReference.size,h=.05;let f,p=(a+o)*.5,v=0;this.options.arrowStrikethrough===!0&&(c===-1?v=this.options.endPointOffset.from:c===1&&(v=this.options.endPointOffset.to));let y=0;do{p=(a+o)*.5,f=this._pointOnCircle(i,s,d,p);const x=Math.atan2(e.y-f.y,e.x-f.x),g=e.distanceToBorder(r,x)+v,m=Math.sqrt(Math.pow(f.x-e.x,2)+Math.pow(f.y-e.y,2)),w=g-m;if(Math.abs(w)<h)break;w>0?c>0?a=p:o=p:c>0?o=p:a=p,++y}while(a<=o&&y<u);return OU(OU({},f),{},{t:p})}getLineWidth(e,r){return e===!0?Math.max(this.selectionWidth,.3/this._body.view.scale):r===!0?Math.max(this.hoverWidth,.3/this._body.view.scale):Math.max(this.options.width,.3/this._body.view.scale)}getColor(e,r){if(r.inheritsColor!==!1){if(r.inheritsColor==="both"&&this.from.id!==this.to.id){const n=e.createLinearGradient(this.from.x,this.from.y,this.to.x,this.to.y);let i=this.from.options.color.highlight.border,s=this.to.options.color.highlight.border;return this.from.selected===!1&&this.to.selected===!1?(i=Kn(this.from.options.color.border,r.opacity),s=Kn(this.to.options.color.border,r.opacity)):this.from.selected===!0&&this.to.selected===!1?s=this.to.options.color.border:this.from.selected===!1&&this.to.selected===!0&&(i=this.from.options.color.border),n.addColorStop(0,i),n.addColorStop(1,s),n}return r.inheritsColor==="to"?Kn(this.to.options.color.border,r.opacity):Kn(this.from.options.color.border,r.opacity)}else return Kn(r.color,r.opacity)}_circle(e,r,n,i,s){this.enableShadow(e,r);let a=0,o=Math.PI*2;if(!this.options.selfReference.renderBehindTheNode){const c=this.options.selfReference.angle,u=this.options.selfReference.angle+Math.PI,d=this._findBorderPositionCircle(this.from,e,{x:n,y:i,low:c,high:u,direction:-1}),h=this._findBorderPositionCircle(this.from,e,{x:n,y:i,low:c,high:u,direction:1});a=Math.atan2(d.y-i,d.x-n),o=Math.atan2(h.y-i,h.x-n)}e.beginPath(),e.arc(n,i,s,a,o,!1),e.stroke(),this.disableShadow(e,r)}getDistanceToEdge(e,r,n,i,s,a){if(this.from!=this.to)return this._getDistanceToEdge(e,r,n,i,s,a);{const[o,c,u]=this._getCircleData(void 0),d=o-s,h=c-a;return Math.abs(Math.sqrt(d*d+h*h)-u)}}_getDistanceToLine(e,r,n,i,s,a){const o=n-e,c=i-r,u=o*o+c*c;let d=((s-e)*o+(a-r)*c)/u;d>1?d=1:d<0&&(d=0);const h=e+d*o,f=r+d*c,p=h-s,v=f-a;return Math.sqrt(p*p+v*v)}getArrowData(e,r,n,i,s,a){let o,c,u,d,h,f,p;const v=a.width;r==="from"?(u=this.from,d=this.to,h=a.fromArrowScale<0,f=Math.abs(a.fromArrowScale),p=a.fromArrowType):r==="to"?(u=this.to,d=this.from,h=a.toArrowScale<0,f=Math.abs(a.toArrowScale),p=a.toArrowType):(u=this.to,d=this.from,h=a.middleArrowScale<0,f=Math.abs(a.middleArrowScale),p=a.middleArrowType);const y=15*f+3*v;if(u!=d){const w=Pbe(u.x-d.x,u.y-d.y),b=y/w;if(r!=="middle")if(this.options.smooth.enabled===!0){const _=this._findBorderPosition(u,e,{via:n}),E=this.getPoint(_.t+b*(r==="from"?1:-1),n);o=Math.atan2(_.y-E.y,_.x-E.x),c=_}else o=Math.atan2(u.y-d.y,u.x-d.x),c=this._findBorderPosition(u,e);else{const _=(h?-b:b)/2,E=this.getPoint(.5+_,n),j=this.getPoint(.5-_,n);o=Math.atan2(E.y-j.y,E.x-j.x),c=this.getPoint(.5,n)}}else{const[w,b,_]=this._getCircleData(e);if(r==="from"){const E=this.options.selfReference.angle,j=this.options.selfReference.angle+Math.PI,S=this._findBorderPositionCircle(this.from,e,{x:w,y:b,low:E,high:j,direction:-1});o=S.t*-2*Math.PI+1.5*Math.PI+.1*Math.PI,c=S}else if(r==="to"){const E=this.options.selfReference.angle,j=this.options.selfReference.angle+Math.PI,S=this._findBorderPositionCircle(this.from,e,{x:w,y:b,low:E,high:j,direction:1});o=S.t*-2*Math.PI+1.5*Math.PI-1.1*Math.PI,c=S}else{const E=this.options.selfReference.angle/(2*Math.PI);c=this._pointOnCircle(w,b,_,E),o=E*-2*Math.PI+1.5*Math.PI+.1*Math.PI}}const x=c.x-y*.9*Math.cos(o),g=c.y-y*.9*Math.sin(o);return{point:c,core:{x,y:g},angle:o,length:y,type:p}}drawArrowHead(e,r,n,i,s){e.strokeStyle=this.getColor(e,r),e.fillStyle=e.strokeStyle,e.lineWidth=r.width,ZQ.draw(e,s)&&(this.enableShadow(e,r),Uh(e).call(e),this.disableShadow(e,r))}enableShadow(e,r){r.shadow===!0&&(e.shadowColor=r.shadowColor,e.shadowBlur=r.shadowSize,e.shadowOffsetX=r.shadowX,e.shadowOffsetY=r.shadowY)}disableShadow(e,r){r.shadow===!0&&(e.shadowColor="rgba(0,0,0,0)",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0)}drawBackground(e,r){if(r.background!==!1){const n={strokeStyle:e.strokeStyle,lineWidth:e.lineWidth,dashes:e.dashes};e.strokeStyle=r.backgroundColor,e.lineWidth=r.backgroundSize,this.setStrokeDashed(e,r.backgroundDashes),e.stroke(),e.strokeStyle=n.strokeStyle,e.lineWidth=n.lineWidth,e.dashes=n.dashes,this.setStrokeDashed(e,r.dashes)}}setStrokeDashed(e,r){if(r!==!1)if(e.setLineDash!==void 0){const n=Yt(r)?r:[5,5];e.setLineDash(n)}else console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.");else e.setLineDash!==void 0?e.setLineDash([]):console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.")}}function PU(t,e){var r=Ht(t);if(ka){var n=ka(t);e&&(n=hn(n).call(n,function(i){return Wa(t,i).enumerable})),r.push.apply(r,n)}return r}function TU(t){for(var e=1;e<arguments.length;e++){var r,n,i=arguments[e]!=null?arguments[e]:{};e%2?gt(r=PU(Object(i),!0)).call(r,function(s){ds(t,s,i[s])}):$a?ov(t,$a(i)):gt(n=PU(Object(i))).call(n,function(s){lv(t,s,Wa(i,s))})}return t}class WP extends eX{constructor(e,r,n){super(e,r,n)}_findBorderPositionBezier(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this._getViaCoordinates();const i=10,s=.2;let a=!1,o=1,c=0,u=this.to,d,h,f=this.options.endPointOffset?this.options.endPointOffset.to:0;e.id===this.from.id&&(u=this.from,a=!0,f=this.options.endPointOffset?this.options.endPointOffset.from:0),this.options.arrowStrikethrough===!1&&(f=0);let p=0;do{h=(c+o)*.5,d=this.getPoint(h,n);const v=Math.atan2(u.y-d.y,u.x-d.x),y=u.distanceToBorder(r,v)+f,x=Math.sqrt(Math.pow(d.x-u.x,2)+Math.pow(d.y-u.y,2)),g=y-x;if(Math.abs(g)<s)break;g<0?a===!1?c=h:o=h:a===!1?o=h:c=h,++p}while(c<=o&&p<i);return TU(TU({},d),{},{t:h})}_getDistanceToBezierEdge(e,r,n,i,s,a,o){let c=1e9,u,d,h,f,p,v=e,y=r;for(d=1;d<10;d++)h=.1*d,f=Math.pow(1-h,2)*e+2*h*(1-h)*o.x+Math.pow(h,2)*n,p=Math.pow(1-h,2)*r+2*h*(1-h)*o.y+Math.pow(h,2)*i,d>0&&(u=this._getDistanceToLine(v,y,f,p,s,a),c=u<c?u:c),v=f,y=p;return c}_bezierCurve(e,r,n,i){e.beginPath(),e.moveTo(this.fromPoint.x,this.fromPoint.y),n!=null&&n.x!=null?i!=null&&i.x!=null?e.bezierCurveTo(n.x,n.y,i.x,i.y,this.toPoint.x,this.toPoint.y):e.quadraticCurveTo(n.x,n.y,this.toPoint.x,this.toPoint.y):e.lineTo(this.toPoint.x,this.toPoint.y),this.drawBackground(e,r),this.enableShadow(e,r),e.stroke(),this.disableShadow(e,r)}getViaNode(){return this._getViaCoordinates()}}class IU extends WP{constructor(e,r,n){super(e,r,n),ds(this,"via",this.via),this._boundFunction=()=>{this.positionBezierNode()},this._body.emitter.on("_repositionBezierNodes",this._boundFunction)}setOptions(e){super.setOptions(e);let r=!1;this.options.physics!==e.physics&&(r=!0),this.options=e,this.id=this.options.id,this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.setupSupportNode(),this.connect(),r===!0&&(this.via.setOptions({physics:this.options.physics}),this.positionBezierNode())}connect(){this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.from===void 0||this.to===void 0||this.options.physics===!1?this.via.setOptions({physics:!1}):this.from.id===this.to.id?this.via.setOptions({physics:!1}):this.via.setOptions({physics:!0})}cleanup(){return this._body.emitter.off("_repositionBezierNodes",this._boundFunction),this.via!==void 0?(delete this._body.nodes[this.via.id],this.via=void 0,!0):!1}setupSupportNode(){if(this.via===void 0){const e="edgeId:"+this.id,r=this._body.functions.createNode({id:e,shape:"circle",physics:!0,hidden:!0});this._body.nodes[e]=r,this.via=r,this.via.parentEdgeId=this.id,this.positionBezierNode()}}positionBezierNode(){this.via!==void 0&&this.from!==void 0&&this.to!==void 0?(this.via.x=.5*(this.from.x+this.to.x),this.via.y=.5*(this.from.y+this.to.y)):this.via!==void 0&&(this.via.x=0,this.via.y=0)}_line(e,r,n){this._bezierCurve(e,r,n)}_getViaCoordinates(){return this.via}getViaNode(){return this.via}getPoint(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.via;if(this.from===this.to){const[n,i,s]=this._getCircleData(),a=2*Math.PI*(1-e);return{x:n+s*Math.sin(a),y:i+s-s*(1-Math.cos(a))}}else return{x:Math.pow(1-e,2)*this.fromPoint.x+2*e*(1-e)*r.x+Math.pow(e,2)*this.toPoint.x,y:Math.pow(1-e,2)*this.fromPoint.y+2*e*(1-e)*r.y+Math.pow(e,2)*this.toPoint.y}}_findBorderPosition(e,r){return this._findBorderPositionBezier(e,r,this.via)}_getDistanceToEdge(e,r,n,i,s,a){return this._getDistanceToBezierEdge(e,r,n,i,s,a,this.via)}}class RU extends WP{constructor(e,r,n){super(e,r,n)}_line(e,r,n){this._bezierCurve(e,r,n)}getViaNode(){return this._getViaCoordinates()}_getViaCoordinates(){const e=this.options.smooth.roundness,r=this.options.smooth.type;let n=Math.abs(this.from.x-this.to.x),i=Math.abs(this.from.y-this.to.y);if(r==="discrete"||r==="diagonalCross"){let s,a;n<=i?s=a=e*i:s=a=e*n,this.from.x>this.to.x&&(s=-s),this.from.y>=this.to.y&&(a=-a);let o=this.from.x+s,c=this.from.y+a;return r==="discrete"&&(n<=i?o=n<e*i?this.from.x:o:c=i<e*n?this.from.y:c),{x:o,y:c}}else if(r==="straightCross"){let s=(1-e)*n,a=(1-e)*i;return n<=i?(s=0,this.from.y<this.to.y&&(a=-a)):(this.from.x<this.to.x&&(s=-s),a=0),{x:this.to.x+s,y:this.to.y+a}}else if(r==="horizontal"){let s=(1-e)*n;return this.from.x<this.to.x&&(s=-s),{x:this.to.x+s,y:this.from.y}}else if(r==="vertical"){let s=(1-e)*i;return this.from.y<this.to.y&&(s=-s),{x:this.from.x,y:this.to.y+s}}else if(r==="curvedCW"){n=this.to.x-this.from.x,i=this.from.y-this.to.y;const s=Math.sqrt(n*n+i*i),a=Math.PI,c=(Math.atan2(i,n)+(e*.5+.5)*a)%(2*a);return{x:this.from.x+(e*.5+.5)*s*Math.sin(c),y:this.from.y+(e*.5+.5)*s*Math.cos(c)}}else if(r==="curvedCCW"){n=this.to.x-this.from.x,i=this.from.y-this.to.y;const s=Math.sqrt(n*n+i*i),a=Math.PI,c=(Math.atan2(i,n)+(-e*.5+.5)*a)%(2*a);return{x:this.from.x+(e*.5+.5)*s*Math.sin(c),y:this.from.y+(e*.5+.5)*s*Math.cos(c)}}else{let s,a;n<=i?s=a=e*i:s=a=e*n,this.from.x>this.to.x&&(s=-s),this.from.y>=this.to.y&&(a=-a);let o=this.from.x+s,c=this.from.y+a;return n<=i?this.from.x<=this.to.x?o=this.to.x<o?this.to.x:o:o=this.to.x>o?this.to.x:o:this.from.y>=this.to.y?c=this.to.y>c?this.to.y:c:c=this.to.y<c?this.to.y:c,{x:o,y:c}}}_findBorderPosition(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this._findBorderPositionBezier(e,r,n.via)}_getDistanceToEdge(e,r,n,i,s,a){let o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:this._getViaCoordinates();return this._getDistanceToBezierEdge(e,r,n,i,s,a,o)}getPoint(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getViaCoordinates();const n=e,i=Math.pow(1-n,2)*this.fromPoint.x+2*n*(1-n)*r.x+Math.pow(n,2)*this.toPoint.x,s=Math.pow(1-n,2)*this.fromPoint.y+2*n*(1-n)*r.y+Math.pow(n,2)*this.toPoint.y;return{x:i,y:s}}}class zbe extends WP{constructor(e,r,n){super(e,r,n)}_getDistanceToBezierEdge2(e,r,n,i,s,a,o,c){let u=1e9,d=e,h=r;const f=[0,0,0,0];for(let p=1;p<10;p++){const v=.1*p;f[0]=Math.pow(1-v,3),f[1]=3*v*Math.pow(1-v,2),f[2]=3*Math.pow(v,2)*(1-v),f[3]=Math.pow(v,3);const y=f[0]*e+f[1]*o.x+f[2]*c.x+f[3]*n,x=f[0]*r+f[1]*o.y+f[2]*c.y+f[3]*i;if(p>0){const g=this._getDistanceToLine(d,h,y,x,s,a);u=g<u?g:u}d=y,h=x}return u}}class kU extends zbe{constructor(e,r,n){super(e,r,n)}_line(e,r,n){const i=n[0],s=n[1];this._bezierCurve(e,r,i,s)}_getViaCoordinates(){const e=this.from.x-this.to.x,r=this.from.y-this.to.y;let n,i,s,a;const o=this.options.smooth.roundness;return(Math.abs(e)>Math.abs(r)||this.options.smooth.forceDirection===!0||this.options.smooth.forceDirection==="horizontal")&&this.options.smooth.forceDirection!=="vertical"?(i=this.from.y,a=this.to.y,n=this.from.x-o*e,s=this.to.x+o*e):(i=this.from.y-o*r,a=this.to.y+o*r,n=this.from.x,s=this.to.x),[{x:n,y:i},{x:s,y:a}]}getViaNode(){return this._getViaCoordinates()}_findBorderPosition(e,r){return this._findBorderPositionBezier(e,r)}_getDistanceToEdge(e,r,n,i,s,a){let[o,c]=arguments.length>6&&arguments[6]!==void 0?arguments[6]:this._getViaCoordinates();return this._getDistanceToBezierEdge2(e,r,n,i,s,a,o,c)}getPoint(e){let[r,n]=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getViaCoordinates();const i=e,s=[Math.pow(1-i,3),3*i*Math.pow(1-i,2),3*Math.pow(i,2)*(1-i),Math.pow(i,3)],a=s[0]*this.fromPoint.x+s[1]*r.x+s[2]*n.x+s[3]*this.toPoint.x,o=s[0]*this.fromPoint.y+s[1]*r.y+s[2]*n.y+s[3]*this.toPoint.y;return{x:a,y:o}}}class $U extends eX{constructor(e,r,n){super(e,r,n)}_line(e,r){e.beginPath(),e.moveTo(this.fromPoint.x,this.fromPoint.y),e.lineTo(this.toPoint.x,this.toPoint.y),this.enableShadow(e,r),e.stroke(),this.disableShadow(e,r)}getViaNode(){}getPoint(e){return{x:(1-e)*this.fromPoint.x+e*this.toPoint.x,y:(1-e)*this.fromPoint.y+e*this.toPoint.y}}_findBorderPosition(e,r){let n=this.to,i=this.from;e.id===this.from.id&&(n=this.from,i=this.to);const s=Math.atan2(n.y-i.y,n.x-i.x),a=n.x-i.x,o=n.y-i.y,c=Math.sqrt(a*a+o*o),u=e.distanceToBorder(r,s),d=(c-u)/c;return{x:(1-d)*i.x+d*n.x,y:(1-d)*i.y+d*n.y,t:0}}_getDistanceToEdge(e,r,n,i,s,a){return this._getDistanceToLine(e,r,n,i,s,a)}}class Oa{constructor(e,r,n,i,s){if(r===void 0)throw new Error("No body provided");this.options=Ca(i),this.globalOptions=i,this.defaultOptions=s,this.body=r,this.imagelist=n,this.id=void 0,this.fromId=void 0,this.toId=void 0,this.selected=!1,this.hover=!1,this.labelDirty=!0,this.baseWidth=this.options.width,this.baseFontSize=this.options.font.size,this.from=void 0,this.to=void 0,this.edgeType=void 0,this.connected=!1,this.labelModule=new nc(this.body,this.options,!0),this.setOptions(e)}setOptions(e){if(!e)return;let r=typeof e.physics<"u"&&this.options.physics!==e.physics||typeof e.hidden<"u"&&(this.options.hidden||!1)!==(e.hidden||!1)||typeof e.from<"u"&&this.options.from!==e.from||typeof e.to<"u"&&this.options.to!==e.to;Oa.parseOptions(this.options,e,!0,this.globalOptions),e.id!==void 0&&(this.id=e.id),e.from!==void 0&&(this.fromId=e.from),e.to!==void 0&&(this.toId=e.to),e.title!==void 0&&(this.title=e.title),e.value!==void 0&&(e.value=QQ(e.value));const n=[e,this.options,this.defaultOptions];return this.chooser=zP("edge",n),this.updateLabelModule(e),r=this.updateEdgeType()||r,this._setInteractionWidths(),this.connect(),r}static parseOptions(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(_u(["endPointOffset","arrowStrikethrough","id","from","hidden","hoverWidth","labelHighlightBold","length","line","opacity","physics","scaling","selectionWidth","selfReferenceSize","selfReference","to","title","value","width","font","chosen","widthConstraint"],e,r,n),r.endPointOffset!==void 0&&r.endPointOffset.from!==void 0&&(oo(r.endPointOffset.from)?e.endPointOffset.from=r.endPointOffset.from:(e.endPointOffset.from=i.endPointOffset.from!==void 0?i.endPointOffset.from:0,console.error("endPointOffset.from is not a valid number"))),r.endPointOffset!==void 0&&r.endPointOffset.to!==void 0&&(oo(r.endPointOffset.to)?e.endPointOffset.to=r.endPointOffset.to:(e.endPointOffset.to=i.endPointOffset.to!==void 0?i.endPointOffset.to:0,console.error("endPointOffset.to is not a valid number"))),Zp(r.label)?e.label=r.label:Zp(e.label)||(e.label=void 0),Wn(e,r,"smooth",i),Wn(e,r,"shadow",i),Wn(e,r,"background",i),r.dashes!==void 0&&r.dashes!==null?e.dashes=r.dashes:n===!0&&r.dashes===null&&(e.dashes=No(i.dashes)),r.scaling!==void 0&&r.scaling!==null?(r.scaling.min!==void 0&&(e.scaling.min=r.scaling.min),r.scaling.max!==void 0&&(e.scaling.max=r.scaling.max),Wn(e.scaling,r.scaling,"label",i.scaling)):n===!0&&r.scaling===null&&(e.scaling=No(i.scaling)),r.arrows!==void 0&&r.arrows!==null)if(typeof r.arrows=="string"){const o=r.arrows.toLowerCase();e.arrows.to.enabled=ht(o).call(o,"to")!=-1,e.arrows.middle.enabled=ht(o).call(o,"middle")!=-1,e.arrows.from.enabled=ht(o).call(o,"from")!=-1}else if(typeof r.arrows=="object")Wn(e.arrows,r.arrows,"to",i.arrows),Wn(e.arrows,r.arrows,"middle",i.arrows),Wn(e.arrows,r.arrows,"from",i.arrows);else throw new Error("The arrow newOptions can only be an object or a string. Refer to the documentation. You used:"+zh(r.arrows));else n===!0&&r.arrows===null&&(e.arrows=No(i.arrows));if(r.color!==void 0&&r.color!==null){const o=tc(r.color)?{color:r.color,highlight:r.color,hover:r.color,inherit:!1,opacity:1}:r.color,c=e.color;if(s)_t(c,i.color,!1,n);else for(const u in c)Object.prototype.hasOwnProperty.call(c,u)&&delete c[u];if(tc(c))c.color=c,c.highlight=c,c.hover=c,c.inherit=!1,o.opacity===void 0&&(c.opacity=1);else{let u=!1;o.color!==void 0&&(c.color=o.color,u=!0),o.highlight!==void 0&&(c.highlight=o.highlight,u=!0),o.hover!==void 0&&(c.hover=o.hover,u=!0),o.inherit!==void 0&&(c.inherit=o.inherit),o.opacity!==void 0&&(c.opacity=Math.min(1,Math.max(0,o.opacity))),u===!0?c.inherit=!1:c.inherit===void 0&&(c.inherit="from")}}else n===!0&&r.color===null&&(e.color=Ca(i.color));n===!0&&r.font===null&&(e.font=Ca(i.font)),Object.prototype.hasOwnProperty.call(r,"selfReferenceSize")&&(console.warn("The selfReferenceSize property has been deprecated. Please use selfReference property instead. The selfReference can be set like thise selfReference:{size:30, angle:Math.PI / 4}"),e.selfReference.size=r.selfReferenceSize)}getFormattingValues(){const e=this.options.arrows.to===!0||this.options.arrows.to.enabled===!0,r=this.options.arrows.from===!0||this.options.arrows.from.enabled===!0,n=this.options.arrows.middle===!0||this.options.arrows.middle.enabled===!0,i=this.options.color.inherit,s={toArrow:e,toArrowScale:this.options.arrows.to.scaleFactor,toArrowType:this.options.arrows.to.type,toArrowSrc:this.options.arrows.to.src,toArrowImageWidth:this.options.arrows.to.imageWidth,toArrowImageHeight:this.options.arrows.to.imageHeight,middleArrow:n,middleArrowScale:this.options.arrows.middle.scaleFactor,middleArrowType:this.options.arrows.middle.type,middleArrowSrc:this.options.arrows.middle.src,middleArrowImageWidth:this.options.arrows.middle.imageWidth,middleArrowImageHeight:this.options.arrows.middle.imageHeight,fromArrow:r,fromArrowScale:this.options.arrows.from.scaleFactor,fromArrowType:this.options.arrows.from.type,fromArrowSrc:this.options.arrows.from.src,fromArrowImageWidth:this.options.arrows.from.imageWidth,fromArrowImageHeight:this.options.arrows.from.imageHeight,arrowStrikethrough:this.options.arrowStrikethrough,color:i?void 0:this.options.color.color,inheritsColor:i,opacity:this.options.color.opacity,hidden:this.options.hidden,length:this.options.length,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y,dashes:this.options.dashes,width:this.options.width,background:this.options.background.enabled,backgroundColor:this.options.background.color,backgroundSize:this.options.background.size,backgroundDashes:this.options.background.dashes};if(this.selected||this.hover)if(this.chooser===!0){if(this.selected){const a=this.options.selectionWidth;typeof a=="function"?s.width=a(s.width):typeof a=="number"&&(s.width+=a),s.width=Math.max(s.width,.3/this.body.view.scale),s.color=this.options.color.highlight,s.shadow=this.options.shadow.enabled}else if(this.hover){const a=this.options.hoverWidth;typeof a=="function"?s.width=a(s.width):typeof a=="number"&&(s.width+=a),s.width=Math.max(s.width,.3/this.body.view.scale),s.color=this.options.color.hover,s.shadow=this.options.shadow.enabled}}else typeof this.chooser=="function"&&(this.chooser(s,this.options.id,this.selected,this.hover),s.color!==void 0&&(s.inheritsColor=!1),s.shadow===!1&&(s.shadowColor!==this.options.shadow.color||s.shadowSize!==this.options.shadow.size||s.shadowX!==this.options.shadow.x||s.shadowY!==this.options.shadow.y)&&(s.shadow=!0));else s.shadow=this.options.shadow.enabled,s.width=Math.max(s.width,.3/this.body.view.scale);return s}updateLabelModule(e){const r=[e,this.options,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,r),this.labelModule.baseSize!==void 0&&(this.baseFontSize=this.labelModule.baseSize)}updateEdgeType(){const e=this.options.smooth;let r=!1,n=!0;return this.edgeType!==void 0&&((this.edgeType instanceof IU&&e.enabled===!0&&e.type==="dynamic"||this.edgeType instanceof kU&&e.enabled===!0&&e.type==="cubicBezier"||this.edgeType instanceof RU&&e.enabled===!0&&e.type!=="dynamic"&&e.type!=="cubicBezier"||this.edgeType instanceof $U&&e.type.enabled===!1)&&(n=!1),n===!0&&(r=this.cleanup())),n===!0?e.enabled===!0?e.type==="dynamic"?(r=!0,this.edgeType=new IU(this.options,this.body,this.labelModule)):e.type==="cubicBezier"?this.edgeType=new kU(this.options,this.body,this.labelModule):this.edgeType=new RU(this.options,this.body,this.labelModule):this.edgeType=new $U(this.options,this.body,this.labelModule):this.edgeType.setOptions(this.options),r}connect(){this.disconnect(),this.from=this.body.nodes[this.fromId]||void 0,this.to=this.body.nodes[this.toId]||void 0,this.connected=this.from!==void 0&&this.to!==void 0,this.connected===!0?(this.from.attachEdge(this),this.to.attachEdge(this)):(this.from&&this.from.detachEdge(this),this.to&&this.to.detachEdge(this)),this.edgeType.connect()}disconnect(){this.from&&(this.from.detachEdge(this),this.from=void 0),this.to&&(this.to.detachEdge(this),this.to=void 0),this.connected=!1}getTitle(){return this.title}isSelected(){return this.selected}getValue(){return this.options.value}setValueRange(e,r,n){if(this.options.value!==void 0){const i=this.options.scaling.customScalingFunction(e,r,n,this.options.value),s=this.options.scaling.max-this.options.scaling.min;if(this.options.scaling.label.enabled===!0){const a=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+i*a}this.options.width=this.options.scaling.min+i*s}else this.options.width=this.baseWidth,this.options.font.size=this.baseFontSize;this._setInteractionWidths(),this.updateLabelModule()}_setInteractionWidths(){typeof this.options.hoverWidth=="function"?this.edgeType.hoverWidth=this.options.hoverWidth(this.options.width):this.edgeType.hoverWidth=this.options.hoverWidth+this.options.width,typeof this.options.selectionWidth=="function"?this.edgeType.selectionWidth=this.options.selectionWidth(this.options.width):this.edgeType.selectionWidth=this.options.selectionWidth+this.options.width}draw(e){const r=this.getFormattingValues();if(r.hidden)return;const n=this.edgeType.getViaNode();this.edgeType.drawLine(e,r,this.selected,this.hover,n),this.drawLabel(e,n)}drawArrows(e){const r=this.getFormattingValues();if(r.hidden)return;const n=this.edgeType.getViaNode(),i={};this.edgeType.fromPoint=this.edgeType.from,this.edgeType.toPoint=this.edgeType.to,r.fromArrow&&(i.from=this.edgeType.getArrowData(e,"from",n,this.selected,this.hover,r),r.arrowStrikethrough===!1&&(this.edgeType.fromPoint=i.from.core),r.fromArrowSrc&&(i.from.image=this.imagelist.load(r.fromArrowSrc)),r.fromArrowImageWidth&&(i.from.imageWidth=r.fromArrowImageWidth),r.fromArrowImageHeight&&(i.from.imageHeight=r.fromArrowImageHeight)),r.toArrow&&(i.to=this.edgeType.getArrowData(e,"to",n,this.selected,this.hover,r),r.arrowStrikethrough===!1&&(this.edgeType.toPoint=i.to.core),r.toArrowSrc&&(i.to.image=this.imagelist.load(r.toArrowSrc)),r.toArrowImageWidth&&(i.to.imageWidth=r.toArrowImageWidth),r.toArrowImageHeight&&(i.to.imageHeight=r.toArrowImageHeight)),r.middleArrow&&(i.middle=this.edgeType.getArrowData(e,"middle",n,this.selected,this.hover,r),r.middleArrowSrc&&(i.middle.image=this.imagelist.load(r.middleArrowSrc)),r.middleArrowImageWidth&&(i.middle.imageWidth=r.middleArrowImageWidth),r.middleArrowImageHeight&&(i.middle.imageHeight=r.middleArrowImageHeight)),r.fromArrow&&this.edgeType.drawArrowHead(e,r,this.selected,this.hover,i.from),r.middleArrow&&this.edgeType.drawArrowHead(e,r,this.selected,this.hover,i.middle),r.toArrow&&this.edgeType.drawArrowHead(e,r,this.selected,this.hover,i.to)}drawLabel(e,r){if(this.options.label!==void 0){const n=this.from,i=this.to;this.labelModule.differentState(this.selected,this.hover)&&this.labelModule.getTextSize(e,this.selected,this.hover);let s;if(n.id!=i.id){this.labelModule.pointToSelf=!1,s=this.edgeType.getPoint(.5,r),e.save();const a=this._getRotation(e);a.angle!=0&&(e.translate(a.x,a.y),e.rotate(a.angle)),this.labelModule.draw(e,s.x,s.y,this.selected,this.hover),e.restore()}else{this.labelModule.pointToSelf=!0;const a=XQ(e,this.options.selfReference.angle,this.options.selfReference.size,n);s=this._pointOnCircle(a.x,a.y,this.options.selfReference.size,this.options.selfReference.angle),this.labelModule.draw(e,s.x,s.y,this.selected,this.hover)}}}getItemsOnPoint(e){const r=[];if(this.labelModule.visible()){const i=this._getRotation();pC(this.labelModule.getSize(),e,i)&&r.push({edgeId:this.id,labelId:0})}const n={left:e.x,top:e.y};return this.isOverlappingWith(n)&&r.push({edgeId:this.id}),r}isOverlappingWith(e){if(this.connected){const n=this.from.x,i=this.from.y,s=this.to.x,a=this.to.y,o=e.left,c=e.top;return this.edgeType.getDistanceToEdge(n,i,s,a,o,c)<10}else return!1}_getRotation(e){const r=this.edgeType.getViaNode(),n=this.edgeType.getPoint(.5,r);e!==void 0&&this.labelModule.calculateLabelSize(e,this.selected,this.hover,n.x,n.y);const i={x:n.x,y:this.labelModule.size.yLine,angle:0};if(!this.labelModule.visible()||this.options.font.align==="horizontal")return i;const s=this.from.y-this.to.y,a=this.from.x-this.to.x;let o=Math.atan2(s,a);return(o<-1&&a<0||o>0&&a<0)&&(o+=Math.PI),i.angle=o,i}_pointOnCircle(e,r,n,i){return{x:e+n*Math.cos(i),y:r-n*Math.sin(i)}}select(){this.selected=!0}unselect(){this.selected=!1}cleanup(){return this.edgeType.cleanup()}remove(){this.cleanup(),this.disconnect(),delete this.body.edges[this.id]}endPointsValid(){return this.body.nodes[this.fromId]!==void 0&&this.body.nodes[this.toId]!==void 0}}class Ube{constructor(e,r,n){var i;this.body=e,this.images=r,this.groups=n,this.body.functions.createEdge=re(i=this.create).call(i,this),this.edgesListeners={add:(s,a)=>{this.add(a.items)},update:(s,a)=>{this.update(a.items)},remove:(s,a)=>{this.remove(a.items)}},this.options={},this.defaultOptions={arrows:{to:{enabled:!1,scaleFactor:1,type:"arrow"},middle:{enabled:!1,scaleFactor:1,type:"arrow"},from:{enabled:!1,scaleFactor:1,type:"arrow"}},endPointOffset:{from:0,to:0},arrowStrikethrough:!0,color:{color:"#848484",highlight:"#848484",hover:"#848484",inherit:"from",opacity:1},dashes:!1,font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:2,strokeColor:"#ffffff",align:"horizontal",multi:!1,vadjust:0,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"courier new",vadjust:2}},hidden:!1,hoverWidth:1.5,label:void 0,labelHighlightBold:!0,length:void 0,physics:!0,scaling:{min:1,max:15,label:{enabled:!0,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(s,a,o,c){if(a===s)return .5;{const u=1/(a-s);return Math.max(0,(c-s)*u)}}},selectionWidth:1.5,selfReference:{size:20,angle:Math.PI/4,renderBehindTheNode:!0},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},background:{enabled:!1,color:"rgba(111,111,111,1)",size:10,dashes:!1},smooth:{enabled:!0,type:"dynamic",forceDirection:"none",roundness:.5},title:void 0,width:1,value:void 0},_t(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){var e=this,r,n;this.body.emitter.on("_forceDisableDynamicCurves",function(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;i==="dynamic"&&(i="continuous");let a=!1;for(const o in e.body.edges)if(Object.prototype.hasOwnProperty.call(e.body.edges,o)){const c=e.body.edges[o],u=e.body.data.edges.get(o);if(u!=null){const d=u.smooth;d!==void 0&&d.enabled===!0&&d.type==="dynamic"&&(i===void 0?c.setOptions({smooth:!1}):c.setOptions({smooth:{type:i}}),a=!0)}}s===!0&&a===!0&&e.body.emitter.emit("_dataChanged")}),this.body.emitter.on("_dataUpdated",()=>{this.reconnectEdges()}),this.body.emitter.on("refreshEdges",re(r=this.refresh).call(r,this)),this.body.emitter.on("refresh",re(n=this.refresh).call(n,this)),this.body.emitter.on("destroy",()=>{Ke(this.edgesListeners,(i,s)=>{this.body.data.edges&&this.body.data.edges.off(s,i)}),delete this.body.functions.createEdge,delete this.edgesListeners.add,delete this.edgesListeners.update,delete this.edgesListeners.remove,delete this.edgesListeners})}setOptions(e){if(e!==void 0){Oa.parseOptions(this.options,e,!0,this.defaultOptions,!0);let r=!1;if(e.smooth!==void 0)for(const n in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,n)&&(r=this.body.edges[n].updateEdgeType()||r);if(e.font!==void 0)for(const n in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,n)&&this.body.edges[n].updateLabelModule();(e.hidden!==void 0||e.physics!==void 0||r===!0)&&this.body.emitter.emit("_dataChanged")}}setData(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.body.data.edges;if(PY("id",e))this.body.data.edges=e;else if(Yt(e))this.body.data.edges=new Mc,this.body.data.edges.add(e);else if(!e)this.body.data.edges=new Mc;else throw new TypeError("Array or DataSet expected");if(n&&Ke(this.edgesListeners,(i,s)=>{n.off(s,i)}),this.body.edges={},this.body.data.edges){Ke(this.edgesListeners,(s,a)=>{this.body.data.edges.on(a,s)});const i=this.body.data.edges.getIds();this.add(i,!0)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),r===!1&&this.body.emitter.emit("_dataChanged")}add(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.body.edges,i=this.body.data.edges;for(let s=0;s<e.length;s++){const a=e[s],o=n[a];o&&o.disconnect();const c=i.get(a,{showInternalIds:!0});n[a]=this.create(c)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),r===!1&&this.body.emitter.emit("_dataChanged")}update(e){const r=this.body.edges,n=this.body.data.edges;let i=!1;for(let s=0;s<e.length;s++){const a=e[s],o=n.get(a),c=r[a];c!==void 0?(c.disconnect(),i=c.setOptions(o)||i,c.connect()):(this.body.edges[a]=this.create(o),i=!0)}i===!0?(this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),this.body.emitter.emit("_dataChanged")):this.body.emitter.emit("_dataUpdated")}remove(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.length===0)return;const n=this.body.edges;Ke(e,i=>{const s=n[i];s!==void 0&&s.remove()}),r&&this.body.emitter.emit("_dataChanged")}refresh(){Ke(this.body.edges,(e,r)=>{const n=this.body.data.edges.get(r);n!==void 0&&e.setOptions(n)})}create(e){return new Oa(e,this.body,this.images,this.options,this.defaultOptions)}reconnectEdges(){let e;const r=this.body.nodes,n=this.body.edges;for(e in r)Object.prototype.hasOwnProperty.call(r,e)&&(r[e].edges=[]);for(e in n)if(Object.prototype.hasOwnProperty.call(n,e)){const i=n[e];i.from=null,i.to=null,i.connect()}}getConnectedNodes(e){const r=[];if(this.body.edges[e]!==void 0){const n=this.body.edges[e];n.fromId!==void 0&&r.push(n.fromId),n.toId!==void 0&&r.push(n.toId)}return r}_updateState(){this._addMissingEdges(),this._removeInvalidEdges()}_removeInvalidEdges(){const e=[];Ke(this.body.edges,(r,n)=>{const i=this.body.nodes[r.toId],s=this.body.nodes[r.fromId];i!==void 0&&i.isCluster===!0||s!==void 0&&s.isCluster===!0||(i===void 0||s===void 0)&&e.push(n)}),this.remove(e,!1)}_addMissingEdges(){const e=this.body.data.edges;if(e==null)return;const r=this.body.edges,n=[];gt(e).call(e,(i,s)=>{r[s]===void 0&&n.push(s)}),this.add(n,!0)}}class tX{constructor(e,r,n){this.body=e,this.physicsBody=r,this.barnesHutTree,this.setOptions(n),this._rng=iv("BARNES HUT SOLVER")}setOptions(e){this.options=e,this.thetaInversed=1/this.options.theta,this.overlapAvoidanceFactor=1-Math.max(0,Math.min(1,this.options.avoidOverlap))}solve(){if(this.options.gravitationalConstant!==0&&this.physicsBody.physicsNodeIndices.length>0){let e;const r=this.body.nodes,n=this.physicsBody.physicsNodeIndices,i=n.length,s=this._formBarnesHutTree(r,n);this.barnesHutTree=s;for(let a=0;a<i;a++)e=r[n[a]],e.options.mass>0&&this._getForceContributions(s.root,e)}}_getForceContributions(e,r){this._getForceContribution(e.children.NW,r),this._getForceContribution(e.children.NE,r),this._getForceContribution(e.children.SW,r),this._getForceContribution(e.children.SE,r)}_getForceContribution(e,r){if(e.childrenCount>0){const n=e.centerOfMass.x-r.x,i=e.centerOfMass.y-r.y,s=Math.sqrt(n*n+i*i);s*e.calcSize>this.thetaInversed?this._calculateForces(s,n,i,r,e):e.childrenCount===4?this._getForceContributions(e,r):e.children.data.id!=r.id&&this._calculateForces(s,n,i,r,e)}}_calculateForces(e,r,n,i,s){e===0&&(e=.1,r=e),this.overlapAvoidanceFactor<1&&i.shape.radius&&(e=Math.max(.1+this.overlapAvoidanceFactor*i.shape.radius,e-i.shape.radius));const a=this.options.gravitationalConstant*s.mass*i.options.mass/Math.pow(e,3),o=r*a,c=n*a;this.physicsBody.forces[i.id].x+=o,this.physicsBody.forces[i.id].y+=c}_formBarnesHutTree(e,r){let n;const i=r.length;let s=e[r[0]].x,a=e[r[0]].y,o=e[r[0]].x,c=e[r[0]].y;for(let x=1;x<i;x++){const g=e[r[x]],m=g.x,w=g.y;g.options.mass>0&&(m<s&&(s=m),m>o&&(o=m),w<a&&(a=w),w>c&&(c=w))}const u=Math.abs(o-s)-Math.abs(c-a);u>0?(a-=.5*u,c+=.5*u):(s+=.5*u,o-=.5*u);const h=Math.max(1e-5,Math.abs(o-s)),f=.5*h,p=.5*(s+o),v=.5*(a+c),y={root:{centerOfMass:{x:0,y:0},mass:0,range:{minX:p-f,maxX:p+f,minY:v-f,maxY:v+f},size:h,calcSize:1/h,children:{data:null},maxWidth:0,level:0,childrenCount:4}};this._splitBranch(y.root);for(let x=0;x<i;x++)n=e[r[x]],n.options.mass>0&&this._placeInTree(y.root,n);return y}_updateBranchMass(e,r){const n=e.centerOfMass,i=e.mass+r.options.mass,s=1/i;n.x=n.x*e.mass+r.x*r.options.mass,n.x*=s,n.y=n.y*e.mass+r.y*r.options.mass,n.y*=s,e.mass=i;const a=Math.max(Math.max(r.height,r.radius),r.width);e.maxWidth=e.maxWidth<a?a:e.maxWidth}_placeInTree(e,r,n){(n!=!0||n===void 0)&&this._updateBranchMass(e,r);const i=e.children.NW.range;let s;i.maxX>r.x?i.maxY>r.y?s="NW":s="SW":i.maxY>r.y?s="NE":s="SE",this._placeInRegion(e,r,s)}_placeInRegion(e,r,n){const i=e.children[n];switch(i.childrenCount){case 0:i.children.data=r,i.childrenCount=1,this._updateBranchMass(i,r);break;case 1:i.children.data.x===r.x&&i.children.data.y===r.y?(r.x+=this._rng(),r.y+=this._rng()):(this._splitBranch(i),this._placeInTree(i,r));break;case 4:this._placeInTree(i,r);break}}_splitBranch(e){let r=null;e.childrenCount===1&&(r=e.children.data,e.mass=0,e.centerOfMass.x=0,e.centerOfMass.y=0),e.childrenCount=4,e.children.data=null,this._insertRegion(e,"NW"),this._insertRegion(e,"NE"),this._insertRegion(e,"SW"),this._insertRegion(e,"SE"),r!=null&&this._placeInTree(e,r)}_insertRegion(e,r){let n,i,s,a;const o=.5*e.size;switch(r){case"NW":n=e.range.minX,i=e.range.minX+o,s=e.range.minY,a=e.range.minY+o;break;case"NE":n=e.range.minX+o,i=e.range.maxX,s=e.range.minY,a=e.range.minY+o;break;case"SW":n=e.range.minX,i=e.range.minX+o,s=e.range.minY+o,a=e.range.maxY;break;case"SE":n=e.range.minX+o,i=e.range.maxX,s=e.range.minY+o,a=e.range.maxY;break}e.children[r]={centerOfMass:{x:0,y:0},mass:0,range:{minX:n,maxX:i,minY:s,maxY:a},size:.5*e.size,calcSize:2*e.calcSize,children:{data:null},maxWidth:0,level:e.level+1,childrenCount:0}}_debug(e,r){this.barnesHutTree!==void 0&&(e.lineWidth=1,this._drawBranch(this.barnesHutTree.root,e,r))}_drawBranch(e,r,n){n===void 0&&(n="#FF0000"),e.childrenCount===4&&(this._drawBranch(e.children.NW,r),this._drawBranch(e.children.NE,r),this._drawBranch(e.children.SE,r),this._drawBranch(e.children.SW,r)),r.strokeStyle=n,r.beginPath(),r.moveTo(e.range.minX,e.range.minY),r.lineTo(e.range.maxX,e.range.minY),r.stroke(),r.beginPath(),r.moveTo(e.range.maxX,e.range.minY),r.lineTo(e.range.maxX,e.range.maxY),r.stroke(),r.beginPath(),r.moveTo(e.range.maxX,e.range.maxY),r.lineTo(e.range.minX,e.range.maxY),r.stroke(),r.beginPath(),r.moveTo(e.range.minX,e.range.maxY),r.lineTo(e.range.minX,e.range.minY),r.stroke()}}class Wbe{constructor(e,r,n){this._rng=iv("REPULSION SOLVER"),this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e}solve(){let e,r,n,i,s,a,o,c;const u=this.body.nodes,d=this.physicsBody.physicsNodeIndices,h=this.physicsBody.forces,f=this.options.nodeDistance,p=-2/3/f,v=4/3;for(let y=0;y<d.length-1;y++){o=u[d[y]];for(let x=y+1;x<d.length;x++)c=u[d[x]],e=c.x-o.x,r=c.y-o.y,n=Math.sqrt(e*e+r*r),n===0&&(n=.1*this._rng(),e=n),n<2*f&&(n<.5*f?a=1:a=p*n+v,a=a/n,i=e*a,s=r*a,h[o.id].x-=i,h[o.id].y-=s,h[c.id].x+=i,h[c.id].y+=s)}}}class Vbe{constructor(e,r,n){this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e,this.overlapAvoidanceFactor=Math.max(0,Math.min(1,this.options.avoidOverlap||0))}solve(){const e=this.body.nodes,r=this.physicsBody.physicsNodeIndices,n=this.physicsBody.forces,i=this.options.nodeDistance;for(let s=0;s<r.length-1;s++){const a=e[r[s]];for(let o=s+1;o<r.length;o++){const c=e[r[o]];if(a.level===c.level){const u=i+this.overlapAvoidanceFactor*((a.shape.radius||0)/2+(c.shape.radius||0)/2),d=c.x-a.x,h=c.y-a.y,f=Math.sqrt(d*d+h*h),p=.05;let v;f<u?v=-Math.pow(p*f,2)+Math.pow(p*u,2):v=0,f!==0&&(v=v/f);const y=d*v,x=h*v;n[a.id].x-=y,n[a.id].y-=x,n[c.id].x+=y,n[c.id].y+=x}}}}}class jN{constructor(e,r,n){this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e}solve(){let e,r;const n=this.physicsBody.physicsEdgeIndices,i=this.body.edges;let s,a,o;for(let c=0;c<n.length;c++)r=i[n[c]],r.connected===!0&&r.toId!==r.fromId&&this.body.nodes[r.toId]!==void 0&&this.body.nodes[r.fromId]!==void 0&&(r.edgeType.via!==void 0?(e=r.options.length===void 0?this.options.springLength:r.options.length,s=r.to,a=r.edgeType.via,o=r.from,this._calculateSpringForce(s,a,.5*e),this._calculateSpringForce(a,o,.5*e)):(e=r.options.length===void 0?this.options.springLength*1.5:r.options.length,this._calculateSpringForce(r.from,r.to,e)))}_calculateSpringForce(e,r,n){const i=e.x-r.x,s=e.y-r.y,a=Math.max(Math.sqrt(i*i+s*s),.01),o=this.options.springConstant*(n-a)/a,c=i*o,u=s*o;this.physicsBody.forces[e.id]!==void 0&&(this.physicsBody.forces[e.id].x+=c,this.physicsBody.forces[e.id].y+=u),this.physicsBody.forces[r.id]!==void 0&&(this.physicsBody.forces[r.id].x-=c,this.physicsBody.forces[r.id].y-=u)}}class Hbe{constructor(e,r,n){this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e}solve(){let e,r,n,i,s,a,o,c;const u=this.body.edges,d=.5,h=this.physicsBody.physicsEdgeIndices,f=this.physicsBody.physicsNodeIndices,p=this.physicsBody.forces;for(let b=0;b<f.length;b++){const _=f[b];p[_].springFx=0,p[_].springFy=0}for(let b=0;b<h.length;b++)r=u[h[b]],r.connected===!0&&(e=r.options.length===void 0?this.options.springLength:r.options.length,n=r.from.x-r.to.x,i=r.from.y-r.to.y,c=Math.sqrt(n*n+i*i),c=c===0?.01:c,o=this.options.springConstant*(e-c)/c,s=n*o,a=i*o,r.to.level!=r.from.level?(p[r.toId]!==void 0&&(p[r.toId].springFx-=s,p[r.toId].springFy-=a),p[r.fromId]!==void 0&&(p[r.fromId].springFx+=s,p[r.fromId].springFy+=a)):(p[r.toId]!==void 0&&(p[r.toId].x-=d*s,p[r.toId].y-=d*a),p[r.fromId]!==void 0&&(p[r.fromId].x+=d*s,p[r.fromId].y+=d*a)));o=1;let v,y;for(let b=0;b<f.length;b++){const _=f[b];v=Math.min(o,Math.max(-o,p[_].springFx)),y=Math.min(o,Math.max(-o,p[_].springFy)),p[_].x+=v,p[_].y+=y}let x=0,g=0;for(let b=0;b<f.length;b++){const _=f[b];x+=p[_].x,g+=p[_].y}const m=x/f.length,w=g/f.length;for(let b=0;b<f.length;b++){const _=f[b];p[_].x-=m,p[_].y-=w}}}class np{constructor(e,r,n){this.body=e,this.physicsBody=r,this.setOptions(n)}setOptions(e){this.options=e}solve(){let e,r,n,i;const s=this.body.nodes,a=this.physicsBody.physicsNodeIndices,o=this.physicsBody.forces;for(let c=0;c<a.length;c++){const u=a[c];i=s[u],e=-i.x,r=-i.y,n=Math.sqrt(e*e+r*r),this._calculateForces(n,e,r,o,i)}}_calculateForces(e,r,n,i,s){const a=e===0?0:this.options.centralGravity/e;i[s.id].x=r*a,i[s.id].y=n*a}}class Kbe extends tX{constructor(e,r,n){super(e,r,n),this._rng=iv("FORCE ATLAS 2 BASED REPULSION SOLVER")}_calculateForces(e,r,n,i,s){e===0&&(e=.1*this._rng(),r=e),this.overlapAvoidanceFactor<1&&i.shape.radius&&(e=Math.max(.1+this.overlapAvoidanceFactor*i.shape.radius,e-i.shape.radius));const a=i.edges.length+1,o=this.options.gravitationalConstant*s.mass*i.options.mass*a/Math.pow(e,2),c=r*o,u=n*o;this.physicsBody.forces[i.id].x+=c,this.physicsBody.forces[i.id].y+=u}}class Gbe extends np{constructor(e,r,n){super(e,r,n)}_calculateForces(e,r,n,i,s){if(e>0){const a=s.edges.length+1,o=this.options.centralGravity*a*s.options.mass;i[s.id].x=r*o,i[s.id].y=n*o}}}class Ybe{constructor(e){this.body=e,this.physicsBody={physicsNodeIndices:[],physicsEdgeIndices:[],forces:{},velocities:{}},this.physicsEnabled=!0,this.simulationInterval=1e3/60,this.requiresTimeout=!0,this.previousStates={},this.referenceState={},this.freezeCache={},this.renderTimer=void 0,this.adaptiveTimestep=!1,this.adaptiveTimestepEnabled=!1,this.adaptiveCounter=0,this.adaptiveInterval=3,this.stabilized=!1,this.startedStabilization=!1,this.stabilizationIterations=0,this.ready=!1,this.options={},this.defaultOptions={enabled:!0,barnesHut:{theta:.5,gravitationalConstant:-2e3,centralGravity:.3,springLength:95,springConstant:.04,damping:.09,avoidOverlap:0},forceAtlas2Based:{theta:.5,gravitationalConstant:-50,centralGravity:.01,springConstant:.08,springLength:100,damping:.4,avoidOverlap:0},repulsion:{centralGravity:.2,springLength:200,springConstant:.05,nodeDistance:100,damping:.09,avoidOverlap:0},hierarchicalRepulsion:{centralGravity:0,springLength:100,springConstant:.01,nodeDistance:120,damping:.09},maxVelocity:50,minVelocity:.75,solver:"barnesHut",stabilization:{enabled:!0,iterations:1e3,updateInterval:50,onlyDynamicEdges:!1,fit:!0},timestep:.5,adaptiveTimestep:!0,wind:{x:0,y:0}},sr(this.options,this.defaultOptions),this.timestep=.5,this.layoutFailed=!1,this.bindEventListeners()}bindEventListeners(){this.body.emitter.on("initPhysics",()=>{this.initPhysics()}),this.body.emitter.on("_layoutFailed",()=>{this.layoutFailed=!0}),this.body.emitter.on("resetPhysics",()=>{this.stopSimulation(),this.ready=!1}),this.body.emitter.on("disablePhysics",()=>{this.physicsEnabled=!1,this.stopSimulation()}),this.body.emitter.on("restorePhysics",()=>{this.setOptions(this.options),this.ready===!0&&this.startSimulation()}),this.body.emitter.on("startSimulation",()=>{this.ready===!0&&this.startSimulation()}),this.body.emitter.on("stopSimulation",()=>{this.stopSimulation()}),this.body.emitter.on("destroy",()=>{this.stopSimulation(!1),this.body.emitter.off()}),this.body.emitter.on("_dataChanged",()=>{this.updatePhysicsData()})}setOptions(e){if(e!==void 0)if(e===!1)this.options.enabled=!1,this.physicsEnabled=!1,this.stopSimulation();else if(e===!0)this.options.enabled=!0,this.physicsEnabled=!0,this.startSimulation();else{this.physicsEnabled=!0,Xp(["stabilization"],this.options,e),Wn(this.options,e,"stabilization"),e.enabled===void 0&&(this.options.enabled=!0),this.options.enabled===!1&&(this.physicsEnabled=!1,this.stopSimulation());const r=this.options.wind;r&&((typeof r.x!="number"||fC(r.x))&&(r.x=0),(typeof r.y!="number"||fC(r.y))&&(r.y=0)),this.timestep=this.options.timestep}this.init()}init(){let e;this.options.solver==="forceAtlas2Based"?(e=this.options.forceAtlas2Based,this.nodesSolver=new Kbe(this.body,this.physicsBody,e),this.edgesSolver=new jN(this.body,this.physicsBody,e),this.gravitySolver=new Gbe(this.body,this.physicsBody,e)):this.options.solver==="repulsion"?(e=this.options.repulsion,this.nodesSolver=new Wbe(this.body,this.physicsBody,e),this.edgesSolver=new jN(this.body,this.physicsBody,e),this.gravitySolver=new np(this.body,this.physicsBody,e)):this.options.solver==="hierarchicalRepulsion"?(e=this.options.hierarchicalRepulsion,this.nodesSolver=new Vbe(this.body,this.physicsBody,e),this.edgesSolver=new Hbe(this.body,this.physicsBody,e),this.gravitySolver=new np(this.body,this.physicsBody,e)):(e=this.options.barnesHut,this.nodesSolver=new tX(this.body,this.physicsBody,e),this.edgesSolver=new jN(this.body,this.physicsBody,e),this.gravitySolver=new np(this.body,this.physicsBody,e)),this.modelOptions=e}initPhysics(){this.physicsEnabled===!0&&this.options.enabled===!0?this.options.stabilization.enabled===!0?this.stabilize():(this.stabilized=!1,this.ready=!0,this.body.emitter.emit("fit",{},this.layoutFailed),this.startSimulation()):(this.ready=!0,this.body.emitter.emit("fit"))}startSimulation(){if(this.physicsEnabled===!0&&this.options.enabled===!0){if(this.stabilized=!1,this.adaptiveTimestep=!1,this.body.emitter.emit("_resizeNodes"),this.viewFunction===void 0){var e;this.viewFunction=re(e=this.simulationStep).call(e,this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering")}}else this.body.emitter.emit("_redraw")}stopSimulation(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.stabilized=!0,e===!0&&this._emitStabilized(),this.viewFunction!==void 0&&(this.body.emitter.off("initRedraw",this.viewFunction),this.viewFunction=void 0,e===!0&&this.body.emitter.emit("_stopRendering"))}simulationStep(){const e=Kp();this.physicsTick(),(Kp()-e<.4*this.simulationInterval||this.runDoubleSpeed===!0)&&this.stabilized===!1&&(this.physicsTick(),this.runDoubleSpeed=!0),this.stabilized===!0&&this.stopSimulation()}_emitStabilized(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.stabilizationIterations;(this.stabilizationIterations>1||this.startedStabilization===!0)&&ys(()=>{this.body.emitter.emit("stabilized",{iterations:e}),this.startedStabilization=!1,this.stabilizationIterations=0},0)}physicsStep(){this.gravitySolver.solve(),this.nodesSolver.solve(),this.edgesSolver.solve(),this.moveNodes()}adjustTimeStep(){this._evaluateStepQuality()===!0?this.timestep=1.2*this.timestep:this.timestep/1.2<this.options.timestep?this.timestep=this.options.timestep:(this.adaptiveCounter=-1,this.timestep=Math.max(this.options.timestep,this.timestep/1.2))}physicsTick(){this._startStabilizing(),this.stabilized!==!0&&(this.adaptiveTimestep===!0&&this.adaptiveTimestepEnabled===!0?(this.adaptiveCounter%this.adaptiveInterval===0?(this.timestep=2*this.timestep,this.physicsStep(),this.revert(),this.timestep=.5*this.timestep,this.physicsStep(),this.physicsStep(),this.adjustTimeStep()):this.physicsStep(),this.adaptiveCounter+=1):(this.timestep=this.options.timestep,this.physicsStep()),this.stabilized===!0&&this.revert(),this.stabilizationIterations++)}updatePhysicsData(){this.physicsBody.forces={},this.physicsBody.physicsNodeIndices=[],this.physicsBody.physicsEdgeIndices=[];const e=this.body.nodes,r=this.body.edges;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&e[n].options.physics===!0&&this.physicsBody.physicsNodeIndices.push(e[n].id);for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&r[n].options.physics===!0&&this.physicsBody.physicsEdgeIndices.push(r[n].id);for(let n=0;n<this.physicsBody.physicsNodeIndices.length;n++){const i=this.physicsBody.physicsNodeIndices[n];this.physicsBody.forces[i]={x:0,y:0},this.physicsBody.velocities[i]===void 0&&(this.physicsBody.velocities[i]={x:0,y:0})}for(const n in this.physicsBody.velocities)e[n]===void 0&&delete this.physicsBody.velocities[n]}revert(){const e=Ht(this.previousStates),r=this.body.nodes,n=this.physicsBody.velocities;this.referenceState={};for(let i=0;i<e.length;i++){const s=e[i];r[s]!==void 0?r[s].options.physics===!0&&(this.referenceState[s]={positions:{x:r[s].x,y:r[s].y}},n[s].x=this.previousStates[s].vx,n[s].y=this.previousStates[s].vy,r[s].x=this.previousStates[s].x,r[s].y=this.previousStates[s].y):delete this.previousStates[s]}}_evaluateStepQuality(){let e,r,n;const i=this.body.nodes,s=this.referenceState,a=.3;for(const o in this.referenceState)if(Object.prototype.hasOwnProperty.call(this.referenceState,o)&&i[o]!==void 0&&(e=i[o].x-s[o].positions.x,r=i[o].y-s[o].positions.y,n=Math.sqrt(Math.pow(e,2)+Math.pow(r,2)),n>a))return!1;return!0}moveNodes(){const e=this.physicsBody.physicsNodeIndices;let r=0,n=0;const i=5;for(let s=0;s<e.length;s++){const a=e[s],o=this._performStep(a);r=Math.max(r,o),n+=o}this.adaptiveTimestepEnabled=n/e.length<i,this.stabilized=r<this.options.minVelocity}calculateComponentVelocity(e,r,n){const i=this.modelOptions.damping*e,s=(r-i)/n;e+=s*this.timestep;const a=this.options.maxVelocity||1e9;return Math.abs(e)>a&&(e=e>0?a:-a),e}_performStep(e){const r=this.body.nodes[e],n=this.physicsBody.forces[e];this.options.wind&&(n.x+=this.options.wind.x,n.y+=this.options.wind.y);const i=this.physicsBody.velocities[e];return this.previousStates[e]={x:r.x,y:r.y,vx:i.x,vy:i.y},r.options.fixed.x===!1?(i.x=this.calculateComponentVelocity(i.x,n.x,r.options.mass),r.x+=i.x*this.timestep):(n.x=0,i.x=0),r.options.fixed.y===!1?(i.y=this.calculateComponentVelocity(i.y,n.y,r.options.mass),r.y+=i.y*this.timestep):(n.y=0,i.y=0),Math.sqrt(Math.pow(i.x,2)+Math.pow(i.y,2))}_freezeNodes(){const e=this.body.nodes;for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&e[r].x&&e[r].y){const n=e[r].options.fixed;this.freezeCache[r]={x:n.x,y:n.y},n.x=!0,n.y=!0}}_restoreFrozenNodes(){const e=this.body.nodes;for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&this.freezeCache[r]!==void 0&&(e[r].options.fixed.x=this.freezeCache[r].x,e[r].options.fixed.y=this.freezeCache[r].y);this.freezeCache={}}stabilize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.stabilization.iterations;if(typeof e!="number"&&(e=this.options.stabilization.iterations,console.error("The stabilize method needs a numeric amount of iterations. Switching to default: ",e)),this.physicsBody.physicsNodeIndices.length===0){this.ready=!0;return}this.adaptiveTimestep=this.options.adaptiveTimestep,this.body.emitter.emit("_resizeNodes"),this.stopSimulation(),this.stabilized=!1,this.body.emitter.emit("_blockRedraw"),this.targetIterations=e,this.options.stabilization.onlyDynamicEdges===!0&&this._freezeNodes(),this.stabilizationIterations=0,ys(()=>this._stabilizationBatch(),0)}_startStabilizing(){return this.startedStabilization===!0?!1:(this.body.emitter.emit("startStabilizing"),this.startedStabilization=!0,!0)}_stabilizationBatch(){const e=()=>this.stabilized===!1&&this.stabilizationIterations<this.targetIterations,r=()=>{this.body.emitter.emit("stabilizationProgress",{iterations:this.stabilizationIterations,total:this.targetIterations})};this._startStabilizing()&&r();let n=0;for(;e()&&n<this.options.stabilization.updateInterval;)this.physicsTick(),n++;if(r(),e()){var i;ys(re(i=this._stabilizationBatch).call(i,this),0)}else this._finalizeStabilization()}_finalizeStabilization(){this.body.emitter.emit("_allowRedraw"),this.options.stabilization.fit===!0&&this.body.emitter.emit("fit"),this.options.stabilization.onlyDynamicEdges===!0&&this._restoreFrozenNodes(),this.body.emitter.emit("stabilizationIterationsDone"),this.body.emitter.emit("_requestRedraw"),this.stabilized===!0?this._emitStabilized():this.startSimulation(),this.ready=!0}_drawForces(e){for(let r=0;r<this.physicsBody.physicsNodeIndices.length;r++){const n=this.physicsBody.physicsNodeIndices[r],i=this.body.nodes[n],s=this.physicsBody.forces[n],a=20,o=.03,c=Math.sqrt(Math.pow(s.x,2)+Math.pow(s.x,2)),u=Math.min(Math.max(5,c),15),d=3*u,h=uC((180-Math.min(1,Math.max(0,o*c))*180)/360,1,1),f={x:i.x+a*s.x,y:i.y+a*s.y};e.lineWidth=u,e.strokeStyle=h,e.beginPath(),e.moveTo(i.x,i.y),e.lineTo(f.x,f.y),e.stroke();const p=Math.atan2(s.y,s.x);e.fillStyle=h,ZQ.draw(e,{type:"arrow",point:f,angle:p,length:d}),Uh(e).call(e)}}}const Cr=[];for(let t=0;t<256;++t)Cr.push((t+256).toString(16).slice(1));function Qbe(t,e=0){return(Cr[t[e+0]]+Cr[t[e+1]]+Cr[t[e+2]]+Cr[t[e+3]]+"-"+Cr[t[e+4]]+Cr[t[e+5]]+"-"+Cr[t[e+6]]+Cr[t[e+7]]+"-"+Cr[t[e+8]]+Cr[t[e+9]]+"-"+Cr[t[e+10]]+Cr[t[e+11]]+Cr[t[e+12]]+Cr[t[e+13]]+Cr[t[e+14]]+Cr[t[e+15]]).toLowerCase()}let CN;const Xbe=new Uint8Array(16);function Jbe(){if(!CN){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");CN=crypto.getRandomValues.bind(crypto)}return CN(Xbe)}const Zbe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var DU={randomUUID:Zbe};function exe(t,e,r){var i;t=t||{};const n=t.random??((i=t.rng)==null?void 0:i.call(t))??Jbe();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,Qbe(n)}function fd(t,e,r){return DU.randomUUID&&!t?DU.randomUUID():exe(t)}class Yr{constructor(){}static getRange(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=1e9,i=-1e9,s=1e9,a=-1e9,o;if(r.length>0)for(let c=0;c<r.length;c++)o=e[r[c]],s>o.shape.boundingBox.left&&(s=o.shape.boundingBox.left),a<o.shape.boundingBox.right&&(a=o.shape.boundingBox.right),n>o.shape.boundingBox.top&&(n=o.shape.boundingBox.top),i<o.shape.boundingBox.bottom&&(i=o.shape.boundingBox.bottom);return s===1e9&&a===-1e9&&n===1e9&&i===-1e9&&(n=0,i=0,s=0,a=0),{minX:s,maxX:a,minY:n,maxY:i}}static getRangeCore(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=1e9,i=-1e9,s=1e9,a=-1e9,o;if(r.length>0)for(let c=0;c<r.length;c++)o=e[r[c]],s>o.x&&(s=o.x),a<o.x&&(a=o.x),n>o.y&&(n=o.y),i<o.y&&(i=o.y);return s===1e9&&a===-1e9&&n===1e9&&i===-1e9&&(n=0,i=0,s=0,a=0),{minX:s,maxX:a,minY:n,maxY:i}}static findCenter(e){return{x:.5*(e.maxX+e.minX),y:.5*(e.maxY+e.minY)}}static cloneOptions(e,r){const n={};return r===void 0||r==="node"?(_t(n,e.options,!0),n.x=e.x,n.y=e.y,n.amountOfConnections=e.edges.length):_t(n,e.options,!0),n}}class txe extends Rt{constructor(e,r,n,i,s,a){super(e,r,n,i,s,a),this.isCluster=!0,this.containedNodes={},this.containedEdges={}}_openChildCluster(e){const r=this.body.nodes[e];if(this.containedNodes[e]===void 0)throw new Error("node with id: "+e+" not in current cluster");if(!r.isCluster)throw new Error("node with id: "+e+" is not a cluster");delete this.containedNodes[e],Ke(r.edges,n=>{delete this.containedEdges[n.id]}),Ke(r.containedNodes,(n,i)=>{this.containedNodes[i]=n}),r.containedNodes={},Ke(r.containedEdges,(n,i)=>{this.containedEdges[i]=n}),r.containedEdges={},Ke(r.edges,n=>{Ke(this.edges,i=>{var s,a;const o=ht(s=i.clusteringEdgeReplacingIds).call(s,n.id);o!==-1&&(Ke(n.clusteringEdgeReplacingIds,c=>{i.clusteringEdgeReplacingIds.push(c),this.body.edges[c].edgeReplacedById=i.id}),gs(a=i.clusteringEdgeReplacingIds).call(a,o,1))})}),r.edges=[]}}class rxe{constructor(e){this.body=e,this.clusteredNodes={},this.clusteredEdges={},this.options={},this.defaultOptions={},sr(this.options,this.defaultOptions),this.body.emitter.on("_resetData",()=>{this.clusteredNodes={},this.clusteredEdges={}})}clusterByHubsize(e,r){e===void 0?e=this._getHubSize():typeof e=="object"&&(r=this._checkOptions(e),e=this._getHubSize());const n=[];for(let i=0;i<this.body.nodeIndices.length;i++){const s=this.body.nodes[this.body.nodeIndices[i]];s.edges.length>=e&&n.push(s.id)}for(let i=0;i<n.length;i++)this.clusterByConnection(n[i],r,!0);this.body.emitter.emit("_dataChanged")}cluster(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.joinCondition===void 0)throw new Error("Cannot call clusterByNodeData without a joinCondition function in the options.");e=this._checkOptions(e);const n={},i={};Ke(this.body.nodes,(s,a)=>{s.options&&e.joinCondition(s.options)===!0&&(n[a]=s,Ke(s.edges,o=>{this.clusteredEdges[o.id]===void 0&&(i[o.id]=o)}))}),this._cluster(n,i,e,r)}clusterByEdgeCount(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;r=this._checkOptions(r);const i=[],s={};let a,o,c;for(let u=0;u<this.body.nodeIndices.length;u++){const d={},h={},f=this.body.nodeIndices[u],p=this.body.nodes[f];if(s[f]===void 0){c=0,o=[];for(let v=0;v<p.edges.length;v++)a=p.edges[v],this.clusteredEdges[a.id]===void 0&&(a.toId!==a.fromId&&c++,o.push(a));if(c===e){const v=function(x){if(r.joinCondition===void 0||r.joinCondition===null)return!0;const g=Yr.cloneOptions(x);return r.joinCondition(g)};let y=!0;for(let x=0;x<o.length;x++){a=o[x];const g=this._getConnectedId(a,f);if(v(p))h[a.id]=a,d[f]=p,d[g]=this.body.nodes[g],s[f]=!0;else{y=!1;break}}if(Ht(d).length>0&&Ht(h).length>0&&y===!0){const g=function(){for(let m=0;m<i.length;++m)for(const w in d)if(i[m].nodes[w]!==void 0)return i[m]}();if(g!==void 0){for(const m in d)g.nodes[m]===void 0&&(g.nodes[m]=d[m]);for(const m in h)g.edges[m]===void 0&&(g.edges[m]=h[m])}else i.push({nodes:d,edges:h})}}}}for(let u=0;u<i.length;u++)this._cluster(i[u].nodes,i[u].edges,r,!1);n===!0&&this.body.emitter.emit("_dataChanged")}clusterOutliers(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.clusterByEdgeCount(1,e,r)}clusterBridges(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.clusterByEdgeCount(2,e,r)}clusterByConnection(e,r){var n;let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0)throw new Error("No nodeId supplied to clusterByConnection!");if(this.body.nodes[e]===void 0)throw new Error("The nodeId given to clusterByConnection does not exist!");const s=this.body.nodes[e];r=this._checkOptions(r,s),r.clusterNodeProperties.x===void 0&&(r.clusterNodeProperties.x=s.x),r.clusterNodeProperties.y===void 0&&(r.clusterNodeProperties.y=s.y),r.clusterNodeProperties.fixed===void 0&&(r.clusterNodeProperties.fixed={},r.clusterNodeProperties.fixed.x=s.options.fixed.x,r.clusterNodeProperties.fixed.y=s.options.fixed.y);const a={},o={},c=s.id,u=Yr.cloneOptions(s);a[c]=s;for(let h=0;h<s.edges.length;h++){const f=s.edges[h];if(this.clusteredEdges[f.id]===void 0){const p=this._getConnectedId(f,c);if(this.clusteredNodes[p]===void 0)if(p!==c)if(r.joinCondition===void 0)o[f.id]=f,a[p]=this.body.nodes[p];else{const v=Yr.cloneOptions(this.body.nodes[p]);r.joinCondition(u,v)===!0&&(o[f.id]=f,a[p]=this.body.nodes[p])}else o[f.id]=f}}const d=qc(n=Ht(a)).call(n,function(h){return a[h].id});for(const h in a){if(!Object.prototype.hasOwnProperty.call(a,h))continue;const f=a[h];for(let p=0;p<f.edges.length;p++){const v=f.edges[p];ht(d).call(d,this._getConnectedId(v,f.id))>-1&&(o[v.id]=v)}}this._cluster(a,o,r,i)}_createClusterEdges(e,r,n,i){let s,a,o,c,u,d;const h=Ht(e),f=[];for(let y=0;y<h.length;y++){a=h[y],o=e[a];for(let x=0;x<o.edges.length;x++)s=o.edges[x],this.clusteredEdges[s.id]===void 0&&(s.toId==s.fromId?r[s.id]=s:s.toId==a?(c=n.id,u=s.fromId,d=u):(c=s.toId,u=n.id,d=c),e[d]===void 0&&f.push({edge:s,fromId:u,toId:c}))}const p=[],v=function(y){for(let x=0;x<p.length;x++){const g=p[x],m=y.fromId===g.fromId&&y.toId===g.toId,w=y.fromId===g.toId&&y.toId===g.fromId;if(m||w)return g}return null};for(let y=0;y<f.length;y++){const x=f[y],g=x.edge;let m=v(x);m===null?(m=this._createClusteredEdge(x.fromId,x.toId,g,i),p.push(m)):m.clusteringEdgeReplacingIds.push(g.id),this.body.edges[g.id].edgeReplacedById=m.id,this._backupEdgeOptions(g),g.setOptions({physics:!1})}}_checkOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e.clusterEdgeProperties===void 0&&(e.clusterEdgeProperties={}),e.clusterNodeProperties===void 0&&(e.clusterNodeProperties={}),e}_cluster(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;const s=[];for(const d in e)Object.prototype.hasOwnProperty.call(e,d)&&this.clusteredNodes[d]!==void 0&&s.push(d);for(let d=0;d<s.length;++d)delete e[s[d]];if(Ht(e).length==0||Ht(e).length==1&&n.clusterNodeProperties.allowSingleNodeCluster!=!0)return;let a=_t({},n.clusterNodeProperties);if(n.processProperties!==void 0){const d=[];for(const f in e)if(Object.prototype.hasOwnProperty.call(e,f)){const p=Yr.cloneOptions(e[f]);d.push(p)}const h=[];for(const f in r)if(Object.prototype.hasOwnProperty.call(r,f)&&f.substr(0,12)!=="clusterEdge:"){const p=Yr.cloneOptions(r[f],"edge");h.push(p)}if(a=n.processProperties(a,d,h),!a)throw new Error("The processProperties function does not return properties!")}a.id===void 0&&(a.id="cluster:"+fd());const o=a.id;a.label===void 0&&(a.label="cluster");let c;a.x===void 0&&(c=this._getClusterPosition(e),a.x=c.x),a.y===void 0&&(c===void 0&&(c=this._getClusterPosition(e)),a.y=c.y),a.id=o;const u=this.body.functions.createNode(a,txe);u.containedNodes=e,u.containedEdges=r,u.clusterEdgeProperties=n.clusterEdgeProperties,this.body.nodes[a.id]=u,this._clusterEdges(e,r,a,n.clusterEdgeProperties),a.id=void 0,i===!0&&this.body.emitter.emit("_dataChanged")}_backupEdgeOptions(e){this.clusteredEdges[e.id]===void 0&&(this.clusteredEdges[e.id]={physics:e.options.physics})}_restoreEdge(e){const r=this.clusteredEdges[e.id];r!==void 0&&(e.setOptions({physics:r.physics}),delete this.clusteredEdges[e.id])}isCluster(e){return this.body.nodes[e]!==void 0?this.body.nodes[e].isCluster===!0:(console.error("Node does not exist."),!1)}_getClusterPosition(e){const r=Ht(e);let n=e[r[0]].x,i=e[r[0]].x,s=e[r[0]].y,a=e[r[0]].y,o;for(let c=1;c<r.length;c++)o=e[r[c]],n=o.x<n?o.x:n,i=o.x>i?o.x:i,s=o.y<s?o.y:s,a=o.y>a?o.y:a;return{x:.5*(n+i),y:.5*(s+a)}}openCluster(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0)throw new Error("No clusterNodeId supplied to openCluster.");const i=this.body.nodes[e];if(i===void 0)throw new Error("The clusterNodeId supplied to openCluster does not exist.");if(i.isCluster!==!0||i.containedNodes===void 0||i.containedEdges===void 0)throw new Error("The node:"+e+" is not a valid cluster.");const s=this.findNode(e),a=ht(s).call(s,e)-1;if(a>=0){const d=s[a];this.body.nodes[d]._openChildCluster(e),delete this.body.nodes[e],n===!0&&this.body.emitter.emit("_dataChanged");return}const o=i.containedNodes,c=i.containedEdges;if(r!==void 0&&r.releaseFunction!==void 0&&typeof r.releaseFunction=="function"){const d={},h={x:i.x,y:i.y};for(const p in o)if(Object.prototype.hasOwnProperty.call(o,p)){const v=this.body.nodes[p];d[p]={x:v.x,y:v.y}}const f=r.releaseFunction(h,d);for(const p in o)if(Object.prototype.hasOwnProperty.call(o,p)){const v=this.body.nodes[p];f[p]!==void 0&&(v.x=f[p].x===void 0?i.x:f[p].x,v.y=f[p].y===void 0?i.y:f[p].y)}}else Ke(o,function(d){d.options.fixed.x===!1&&(d.x=i.x),d.options.fixed.y===!1&&(d.y=i.y)});for(const d in o)if(Object.prototype.hasOwnProperty.call(o,d)){const h=this.body.nodes[d];h.vx=i.vx,h.vy=i.vy,h.setOptions({physics:!0}),delete this.clusteredNodes[d]}const u=[];for(let d=0;d<i.edges.length;d++)u.push(i.edges[d]);for(let d=0;d<u.length;d++){const h=u[d],f=this._getConnectedId(h,e),p=this.clusteredNodes[f];for(let v=0;v<h.clusteringEdgeReplacingIds.length;v++){const y=h.clusteringEdgeReplacingIds[v],x=this.body.edges[y];if(x!==void 0)if(p!==void 0){const g=this.body.nodes[p.clusterId];g.containedEdges[x.id]=x,delete c[x.id];let m=x.fromId,w=x.toId;x.toId==f?w=p.clusterId:m=p.clusterId,this._createClusteredEdge(m,w,x,g.clusterEdgeProperties,{hidden:!1,physics:!0})}else this._restoreEdge(x)}h.remove()}for(const d in c)Object.prototype.hasOwnProperty.call(c,d)&&this._restoreEdge(c[d]);delete this.body.nodes[e],n===!0&&this.body.emitter.emit("_dataChanged")}getNodesInCluster(e){const r=[];if(this.isCluster(e)===!0){const n=this.body.nodes[e].containedNodes;for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&r.push(this.body.nodes[i].id)}return r}findNode(e){const r=[];let i=0,s;for(;this.clusteredNodes[e]!==void 0&&i<100;){if(s=this.body.nodes[e],s===void 0)return[];r.push(s.id),e=this.clusteredNodes[e].clusterId,i++}return s=this.body.nodes[e],s===void 0?[]:(r.push(s.id),Eo(r).call(r),r)}updateClusteredNode(e,r){if(e===void 0)throw new Error("No clusteredNodeId supplied to updateClusteredNode.");if(r===void 0)throw new Error("No newOptions supplied to updateClusteredNode.");if(this.body.nodes[e]===void 0)throw new Error("The clusteredNodeId supplied to updateClusteredNode does not exist.");this.body.nodes[e].setOptions(r),this.body.emitter.emit("_dataChanged")}updateEdge(e,r){if(e===void 0)throw new Error("No startEdgeId supplied to updateEdge.");if(r===void 0)throw new Error("No newOptions supplied to updateEdge.");if(this.body.edges[e]===void 0)throw new Error("The startEdgeId supplied to updateEdge does not exist.");const n=this.getClusteredEdges(e);for(let i=0;i<n.length;i++)this.body.edges[n[i]].setOptions(r);this.body.emitter.emit("_dataChanged")}getClusteredEdges(e){const r=[];let i=0;for(;e!==void 0&&this.body.edges[e]!==void 0&&i<100;)r.push(this.body.edges[e].id),e=this.body.edges[e].edgeReplacedById,i++;return Eo(r).call(r),r}getBaseEdge(e){return this.getBaseEdges(e)[0]}getBaseEdges(e){const r=[e],n=[],i=[],s=100;let a=0;for(;r.length>0&&a<s;){const o=r.pop();if(o===void 0)continue;const c=this.body.edges[o];if(c===void 0)continue;a++;const u=c.clusteringEdgeReplacingIds;if(u===void 0)i.push(o);else for(let d=0;d<u.length;++d){const h=u[d];ht(r).call(r,u)!==-1||ht(n).call(n,u)!==-1||r.push(h)}n.push(o)}return i}_getConnectedId(e,r){return e.toId!=r?e.toId:(e.fromId!=r,e.fromId)}_getHubSize(){let e=0,r=0,n=0,i=0;for(let c=0;c<this.body.nodeIndices.length;c++){const u=this.body.nodes[this.body.nodeIndices[c]];u.edges.length>i&&(i=u.edges.length),e+=u.edges.length,r+=Math.pow(u.edges.length,2),n+=1}e=e/n,r=r/n;const s=r-Math.pow(e,2),a=Math.sqrt(s);let o=Math.floor(e+2*a);return o>i&&(o=i),o}_createClusteredEdge(e,r,n,i,s){const a=Yr.cloneOptions(n,"edge");_t(a,i),a.from=e,a.to=r,a.id="clusterEdge:"+fd(),s!==void 0&&_t(a,s);const o=this.body.functions.createEdge(a);return o.clusteringEdgeReplacingIds=[n.id],o.connect(),this.body.edges[o.id]=o,o}_clusterEdges(e,r,n,i){if(r instanceof Oa){const s=r,a={};a[s.id]=s,r=a}if(e instanceof Rt){const s=e,a={};a[s.id]=s,e=a}if(n==null)throw new Error("_clusterEdges: parameter clusterNode required");i===void 0&&(i=n.clusterEdgeProperties),this._createClusterEdges(e,r,n,i);for(const s in r)if(Object.prototype.hasOwnProperty.call(r,s)&&this.body.edges[s]!==void 0){const a=this.body.edges[s];this._backupEdgeOptions(a),a.setOptions({physics:!1})}for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(this.clusteredNodes[s]={clusterId:n.id,node:this.body.nodes[s]},this.body.nodes[s].setOptions({physics:!1}))}_getClusterNodeForNode(e){if(e===void 0)return;const r=this.clusteredNodes[e];if(r===void 0)return;const n=r.clusterId;if(n!==void 0)return this.body.nodes[n]}_filter(e,r){const n=[];return Ke(e,i=>{r(i)&&n.push(i)}),n}_updateState(){let e;const r=[],n={},i=c=>{Ke(this.body.nodes,u=>{u.isCluster===!0&&c(u)})};for(e in this.clusteredNodes){if(!Object.prototype.hasOwnProperty.call(this.clusteredNodes,e))continue;this.body.nodes[e]===void 0&&r.push(e)}i(function(c){for(let u=0;u<r.length;u++)delete c.containedNodes[r[u]]});for(let c=0;c<r.length;c++)delete this.clusteredNodes[r[c]];Ke(this.clusteredEdges,c=>{const u=this.body.edges[c];(u===void 0||!u.endPointsValid())&&(n[c]=c)}),i(function(c){Ke(c.containedEdges,(u,d)=>{!u.endPointsValid()&&!n[d]&&(n[d]=d)})}),Ke(this.body.edges,(c,u)=>{let d=!0;const h=c.clusteringEdgeReplacingIds;if(h!==void 0){let f=0;Ke(h,p=>{const v=this.body.edges[p];v!==void 0&&v.endPointsValid()&&(f+=1)}),d=f>0}(!c.endPointsValid()||!d)&&(n[u]=u)}),i(c=>{Ke(n,u=>{delete c.containedEdges[u],Ke(c.edges,(d,h)=>{if(d.id===u){c.edges[h]=null;return}d.clusteringEdgeReplacingIds=this._filter(d.clusteringEdgeReplacingIds,function(f){return!n[f]})}),c.edges=this._filter(c.edges,function(d){return d!==null})})}),Ke(n,c=>{delete this.clusteredEdges[c]}),Ke(n,c=>{delete this.body.edges[c]});const s=Ht(this.body.edges);Ke(s,c=>{const u=this.body.edges[c],d=this._isClusteredNode(u.fromId)||this._isClusteredNode(u.toId);if(d!==this._isClusteredEdge(u.id))if(d){const h=this._getClusterNodeForNode(u.fromId);h!==void 0&&this._clusterEdges(this.body.nodes[u.fromId],u,h);const f=this._getClusterNodeForNode(u.toId);f!==void 0&&this._clusterEdges(this.body.nodes[u.toId],u,f)}else delete this._clusterEdges[c],this._restoreEdge(u)});let a=!1,o=!0;for(;o;){const c=[];i(function(u){const d=Ht(u.containedNodes).length,h=u.options.allowSingleNodeCluster===!0;(h&&d<1||!h&&d<2)&&c.push(u.id)});for(let u=0;u<c.length;++u)this.openCluster(c[u],{},!1);o=c.length>0,a=a||o}a&&this._updateState()}_isClusteredNode(e){return this.clusteredNodes[e]!==void 0}_isClusteredEdge(e){return this.clusteredEdges[e]!==void 0}}class nxe{constructor(e,r){this.body=e,this.canvas=r,this.redrawRequested=!1,this.requestAnimationFrameRequestId=void 0,this.renderingActive=!1,this.renderRequests=0,this.allowRedraw=!0,this.dragging=!1,this.zooming=!1,this.options={},this.defaultOptions={hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1},sr(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){var e;this.body.emitter.on("dragStart",()=>{this.dragging=!0}),this.body.emitter.on("dragEnd",()=>{this.dragging=!1}),this.body.emitter.on("zoom",()=>{this.zooming=!0,window.clearTimeout(this.zoomTimeoutId),this.zoomTimeoutId=ys(()=>{var r;this.zooming=!1,re(r=this._requestRedraw).call(r,this)()},250)}),this.body.emitter.on("_resizeNodes",()=>{this._resizeNodes()}),this.body.emitter.on("_redraw",()=>{this.renderingActive===!1&&this._redraw()}),this.body.emitter.on("_blockRedraw",()=>{this.allowRedraw=!1}),this.body.emitter.on("_allowRedraw",()=>{this.allowRedraw=!0,this.redrawRequested=!1}),this.body.emitter.on("_requestRedraw",re(e=this._requestRedraw).call(e,this)),this.body.emitter.on("_startRendering",()=>{this.renderRequests+=1,this.renderingActive=!0,this._startRendering()}),this.body.emitter.on("_stopRendering",()=>{this.renderRequests-=1,this.renderingActive=this.renderRequests>0,this.requestAnimationFrameRequestId=void 0}),this.body.emitter.on("destroy",()=>{this.renderRequests=0,this.allowRedraw=!1,this.renderingActive=!1,window.cancelAnimationFrame(this.requestAnimationFrameRequestId),this.body.emitter.off()})}setOptions(e){e!==void 0&&_u(["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag"],this.options,e)}_startRendering(){if(this.renderingActive===!0&&this.requestAnimationFrameRequestId===void 0){var e;this.requestAnimationFrameRequestId=window.requestAnimationFrame(re(e=this._renderStep).call(e,this),this.simulationInterval)}}_renderStep(){this.renderingActive===!0&&(this.requestAnimationFrameRequestId=void 0,this._startRendering(),this._redraw())}redraw(){this.body.emitter.emit("setSize"),this._redraw()}_requestRedraw(){this.redrawRequested!==!0&&this.renderingActive===!1&&this.allowRedraw===!0&&(this.redrawRequested=!0,window.requestAnimationFrame(()=>{this._redraw(!1)}))}_redraw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.allowRedraw===!0){this.body.emitter.emit("initRedraw"),this.redrawRequested=!1;const r={drawExternalLabels:null};(this.canvas.frame.canvas.width===0||this.canvas.frame.canvas.height===0)&&this.canvas.setSize(),this.canvas.setTransform();const n=this.canvas.getContext(),i=this.canvas.frame.canvas.clientWidth,s=this.canvas.frame.canvas.clientHeight;if(n.clearRect(0,0,i,s),this.canvas.frame.clientWidth===0)return;if(n.save(),n.translate(this.body.view.translation.x,this.body.view.translation.y),n.scale(this.body.view.scale,this.body.view.scale),n.beginPath(),this.body.emitter.emit("beforeDrawing",n),n.closePath(),e===!1&&(this.dragging===!1||this.dragging===!0&&this.options.hideEdgesOnDrag===!1)&&(this.zooming===!1||this.zooming===!0&&this.options.hideEdgesOnZoom===!1)&&this._drawEdges(n),this.dragging===!1||this.dragging===!0&&this.options.hideNodesOnDrag===!1){const{drawExternalLabels:a}=this._drawNodes(n,e);r.drawExternalLabels=a}e===!1&&(this.dragging===!1||this.dragging===!0&&this.options.hideEdgesOnDrag===!1)&&(this.zooming===!1||this.zooming===!0&&this.options.hideEdgesOnZoom===!1)&&this._drawArrows(n),r.drawExternalLabels!=null&&r.drawExternalLabels(),e===!1&&this._drawSelectionBox(n),n.beginPath(),this.body.emitter.emit("afterDrawing",n),n.closePath(),n.restore(),e===!0&&n.clearRect(0,0,i,s)}}_resizeNodes(){this.canvas.setTransform();const e=this.canvas.getContext();e.save(),e.translate(this.body.view.translation.x,this.body.view.translation.y),e.scale(this.body.view.scale,this.body.view.scale);const r=this.body.nodes;let n;for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n=r[i],n.resize(e),n.updateBoundingBox(e,n.selected));e.restore()}_drawNodes(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.body.nodes,i=this.body.nodeIndices;let s;const a=[],o=[],c=20,u=this.canvas.DOMtoCanvas({x:-c,y:-c}),d=this.canvas.DOMtoCanvas({x:this.canvas.frame.canvas.clientWidth+c,y:this.canvas.frame.canvas.clientHeight+c}),h={top:u.y,left:u.x,bottom:d.y,right:d.x},f=[];for(let x=0;x<i.length;x++)if(s=n[i[x]],s.hover)o.push(i[x]);else if(s.isSelected())a.push(i[x]);else if(r===!0){const g=s.draw(e);g.drawExternalLabel!=null&&f.push(g.drawExternalLabel)}else if(s.isBoundingBoxOverlappingWith(h)===!0){const g=s.draw(e);g.drawExternalLabel!=null&&f.push(g.drawExternalLabel)}else s.updateBoundingBox(e,s.selected);let p;const v=a.length,y=o.length;for(p=0;p<v;p++){s=n[a[p]];const x=s.draw(e);x.drawExternalLabel!=null&&f.push(x.drawExternalLabel)}for(p=0;p<y;p++){s=n[o[p]];const x=s.draw(e);x.drawExternalLabel!=null&&f.push(x.drawExternalLabel)}return{drawExternalLabels:()=>{for(const x of f)x()}}}_drawEdges(e){const r=this.body.edges,n=this.body.edgeIndices;for(let i=0;i<n.length;i++){const s=r[n[i]];s.connected===!0&&s.draw(e)}}_drawArrows(e){const r=this.body.edges,n=this.body.edgeIndices;for(let i=0;i<n.length;i++){const s=r[n[i]];s.connected===!0&&s.drawArrows(e)}}_drawSelectionBox(e){if(this.body.selectionBox.show){e.beginPath();const r=this.body.selectionBox.position.end.x-this.body.selectionBox.position.start.x,n=this.body.selectionBox.position.end.y-this.body.selectionBox.position.start.y;e.rect(this.body.selectionBox.position.start.x,this.body.selectionBox.position.start.y,r,n),e.fillStyle="rgba(151, 194, 252, 0.2)",e.fillRect(this.body.selectionBox.position.start.x,this.body.selectionBox.position.start.y,r,n),e.strokeStyle="rgba(151, 194, 252, 1)",e.stroke()}else e.closePath()}}var ON,MU;function ixe(){if(MU)return ON;MU=1,aQ();var t=mt();return ON=t.setInterval,ON}var PN,qU;function sxe(){return qU||(qU=1,PN=ixe()),PN}var axe=sxe(),oxe=ke(axe);function em(t,e){e.inputHandler=function(r){r.isFirst&&e(r)},t.on("hammer.input",e.inputHandler)}function rX(t,e){return e.inputHandler=function(r){r.isFinal&&e(r)},t.on("hammer.input",e.inputHandler)}class lxe{constructor(e){this.body=e,this.pixelRatio=1,this.cameraState={},this.initialized=!1,this.canvasViewCenter={},this._cleanupCallbacks=[],this.options={},this.defaultOptions={autoResize:!0,height:"100%",width:"100%"},sr(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){var e;this.body.emitter.once("resize",r=>{r.width!==0&&(this.body.view.translation.x=r.width*.5),r.height!==0&&(this.body.view.translation.y=r.height*.5)}),this.body.emitter.on("setSize",re(e=this.setSize).call(e,this)),this.body.emitter.on("destroy",()=>{this.hammerFrame.destroy(),this.hammer.destroy(),this._cleanUp()})}setOptions(e){if(e!==void 0&&_u(["width","height","autoResize"],this.options,e),this._cleanUp(),this.options.autoResize===!0){var r;if(window.ResizeObserver){const i=new ResizeObserver(()=>{this.setSize()===!0&&this.body.emitter.emit("_requestRedraw")}),{frame:s}=this;i.observe(s),this._cleanupCallbacks.push(()=>{i.unobserve(s)})}else{const i=oxe(()=>{this.setSize()===!0&&this.body.emitter.emit("_requestRedraw")},1e3);this._cleanupCallbacks.push(()=>{clearInterval(i)})}const n=re(r=this._onResize).call(r,this);window.addEventListener("resize",n),this._cleanupCallbacks.push(()=>{window.removeEventListener("resize",n)})}}_cleanUp(){var e,r,n;gt(e=Eo(r=gs(n=this._cleanupCallbacks).call(n,0)).call(r)).call(e,i=>{try{i()}catch(s){console.error(s)}})}_onResize(){this.setSize(),this.body.emitter.emit("_redraw")}_getCameraState(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.pixelRatio;this.initialized===!0&&(this.cameraState.previousWidth=this.frame.canvas.width/e,this.cameraState.previousHeight=this.frame.canvas.height/e,this.cameraState.scale=this.body.view.scale,this.cameraState.position=this.DOMtoCanvas({x:.5*this.frame.canvas.width/e,y:.5*this.frame.canvas.height/e}))}_setCameraState(){if(this.cameraState.scale!==void 0&&this.frame.canvas.clientWidth!==0&&this.frame.canvas.clientHeight!==0&&this.pixelRatio!==0&&this.cameraState.previousWidth>0&&this.cameraState.previousHeight>0){const e=this.frame.canvas.width/this.pixelRatio/this.cameraState.previousWidth,r=this.frame.canvas.height/this.pixelRatio/this.cameraState.previousHeight;let n=this.cameraState.scale;e!=1&&r!=1?n=this.cameraState.scale*.5*(e+r):e!=1?n=this.cameraState.scale*e:r!=1&&(n=this.cameraState.scale*r),this.body.view.scale=n;const i=this.DOMtoCanvas({x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight}),s={x:i.x-this.cameraState.position.x,y:i.y-this.cameraState.position.y};this.body.view.translation.x+=s.x*this.body.view.scale,this.body.view.translation.y+=s.y*this.body.view.scale}}_prepareValue(e){if(typeof e=="number")return e+"px";if(typeof e=="string"){if(ht(e).call(e,"%")!==-1||ht(e).call(e,"px")!==-1)return e;if(ht(e).call(e,"%")===-1)return e+"px"}throw new Error("Could not use the value supplied for width or height:"+e)}_create(){for(;this.body.container.hasChildNodes();)this.body.container.removeChild(this.body.container.firstChild);if(this.frame=document.createElement("div"),this.frame.className="vis-network",this.frame.style.position="relative",this.frame.style.overflow="hidden",this.frame.tabIndex=0,this.frame.canvas=document.createElement("canvas"),this.frame.canvas.style.position="relative",this.frame.appendChild(this.frame.canvas),this.frame.canvas.getContext)this._setPixelRatio(),this.setTransform();else{const e=document.createElement("DIV");e.style.color="red",e.style.fontWeight="bold",e.style.padding="10px",e.innerText="Error: your browser does not support HTML canvas",this.frame.canvas.appendChild(e)}this.body.container.appendChild(this.frame),this.body.view.scale=1,this.body.view.translation={x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight},this._bindHammer()}_bindHammer(){this.hammer!==void 0&&this.hammer.destroy(),this.drag={},this.pinch={},this.hammer=new rc(this.frame.canvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.get("pan").set({threshold:5,direction:rc.DIRECTION_ALL}),em(this.hammer,e=>{this.body.eventListeners.onTouch(e)}),this.hammer.on("tap",e=>{this.body.eventListeners.onTap(e)}),this.hammer.on("doubletap",e=>{this.body.eventListeners.onDoubleTap(e)}),this.hammer.on("press",e=>{this.body.eventListeners.onHold(e)}),this.hammer.on("panstart",e=>{this.body.eventListeners.onDragStart(e)}),this.hammer.on("panmove",e=>{this.body.eventListeners.onDrag(e)}),this.hammer.on("panend",e=>{this.body.eventListeners.onDragEnd(e)}),this.hammer.on("pinch",e=>{this.body.eventListeners.onPinch(e)}),this.frame.canvas.addEventListener("wheel",e=>{this.body.eventListeners.onMouseWheel(e)}),this.frame.canvas.addEventListener("mousemove",e=>{this.body.eventListeners.onMouseMove(e)}),this.frame.canvas.addEventListener("contextmenu",e=>{this.body.eventListeners.onContext(e)}),this.hammerFrame=new rc(this.frame),rX(this.hammerFrame,e=>{this.body.eventListeners.onRelease(e)})}setSize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.width,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.height;e=this._prepareValue(e),r=this._prepareValue(r);let n=!1;const i=this.frame.canvas.width,s=this.frame.canvas.height,a=this.pixelRatio;if(this._setPixelRatio(),e!=this.options.width||r!=this.options.height||this.frame.style.width!=e||this.frame.style.height!=r)this._getCameraState(a),this.frame.style.width=e,this.frame.style.height=r,this.frame.canvas.style.width="100%",this.frame.canvas.style.height="100%",this.frame.canvas.width=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),this.frame.canvas.height=Math.round(this.frame.canvas.clientHeight*this.pixelRatio),this.options.width=e,this.options.height=r,this.canvasViewCenter={x:.5*this.frame.clientWidth,y:.5*this.frame.clientHeight},n=!0;else{const o=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),c=Math.round(this.frame.canvas.clientHeight*this.pixelRatio);(this.frame.canvas.width!==o||this.frame.canvas.height!==c)&&this._getCameraState(a),this.frame.canvas.width!==o&&(this.frame.canvas.width=o,n=!0),this.frame.canvas.height!==c&&(this.frame.canvas.height=c,n=!0)}return n===!0&&(this.body.emitter.emit("resize",{width:Math.round(this.frame.canvas.width/this.pixelRatio),height:Math.round(this.frame.canvas.height/this.pixelRatio),oldWidth:Math.round(i/this.pixelRatio),oldHeight:Math.round(s/this.pixelRatio)}),this._setCameraState()),this.initialized=!0,n}getContext(){return this.frame.canvas.getContext("2d")}_determinePixelRatio(){const e=this.getContext();if(e===void 0)throw new Error("Could not get canvax context");let r=1;typeof window<"u"&&(r=window.devicePixelRatio||1);const n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return r/n}_setPixelRatio(){this.pixelRatio=this._determinePixelRatio()}setTransform(){const e=this.getContext();if(e===void 0)throw new Error("Could not get canvax context");e.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}_XconvertDOMtoCanvas(e){return(e-this.body.view.translation.x)/this.body.view.scale}_XconvertCanvasToDOM(e){return e*this.body.view.scale+this.body.view.translation.x}_YconvertDOMtoCanvas(e){return(e-this.body.view.translation.y)/this.body.view.scale}_YconvertCanvasToDOM(e){return e*this.body.view.scale+this.body.view.translation.y}canvasToDOM(e){return{x:this._XconvertCanvasToDOM(e.x),y:this._YconvertCanvasToDOM(e.y)}}DOMtoCanvas(e){return{x:this._XconvertDOMtoCanvas(e.x),y:this._YconvertDOMtoCanvas(e.y)}}}function cxe(t,e){const r=sr({nodes:e,minZoomLevel:Number.MIN_VALUE,maxZoomLevel:1},t??{});if(!Yt(r.nodes))throw new TypeError("Nodes has to be an array of ids.");if(r.nodes.length===0&&(r.nodes=e),!(typeof r.minZoomLevel=="number"&&r.minZoomLevel>0))throw new TypeError("Min zoom level has to be a number higher than zero.");if(!(typeof r.maxZoomLevel=="number"&&r.minZoomLevel<=r.maxZoomLevel))throw new TypeError("Max zoom level has to be a number higher than min zoom level.");return r}class uxe{constructor(e,r){var n,i;this.body=e,this.canvas=r,this.animationSpeed=1/this.renderRefreshRate,this.animationEasingFunction="easeInOutQuint",this.easingTime=0,this.sourceScale=0,this.targetScale=0,this.sourceTranslation=0,this.targetTranslation=0,this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0,this.touchTime=0,this.viewFunction=void 0,this.body.emitter.on("fit",re(n=this.fit).call(n,this)),this.body.emitter.on("animationFinished",()=>{this.body.emitter.emit("_stopRendering")}),this.body.emitter.on("unlockNode",re(i=this.releaseNode).call(i,this))}setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.options=e}fit(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;e=cxe(e,this.body.nodeIndices);const n=this.canvas.frame.canvas.clientWidth,i=this.canvas.frame.canvas.clientHeight;let s,a;if(n===0||i===0)a=1,s=Yr.getRange(this.body.nodes,e.nodes);else if(r===!0){let u=0;for(const f in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,f)&&this.body.nodes[f].predefinedPosition===!0&&(u+=1);if(u>.5*this.body.nodeIndices.length){this.fit(e,!1);return}s=Yr.getRange(this.body.nodes,e.nodes),a=12.662/(this.body.nodeIndices.length+7.4147)+.0964822;const h=Math.min(n/600,i/600);a*=h}else{this.body.emitter.emit("_resizeNodes"),s=Yr.getRange(this.body.nodes,e.nodes);const u=Math.abs(s.maxX-s.minX)*1.1,d=Math.abs(s.maxY-s.minY)*1.1,h=n/u,f=i/d;a=h<=f?h:f}a>e.maxZoomLevel?a=e.maxZoomLevel:a<e.minZoomLevel&&(a=e.minZoomLevel);const c={position:Yr.findCenter(s),scale:a,animation:e.animation};this.moveTo(c)}focus(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.body.nodes[e]!==void 0){const n={x:this.body.nodes[e].x,y:this.body.nodes[e].y};r.position=n,r.lockedOnNode=e,this.moveTo(r)}else console.error("Node: "+e+" cannot be found.")}moveTo(e){if(e===void 0){e={};return}if(e.offset!=null){if(e.offset.x!=null){if(e.offset.x=+e.offset.x,!oo(e.offset.x))throw new TypeError('The option "offset.x" has to be a finite number.')}else e.offset.x=0;if(e.offset.y!=null){if(e.offset.y=+e.offset.y,!oo(e.offset.y))throw new TypeError('The option "offset.y" has to be a finite number.')}else e.offset.x=0}else e.offset={x:0,y:0};if(e.position!=null){if(e.position.x!=null){if(e.position.x=+e.position.x,!oo(e.position.x))throw new TypeError('The option "position.x" has to be a finite number.')}else e.position.x=0;if(e.position.y!=null){if(e.position.y=+e.position.y,!oo(e.position.y))throw new TypeError('The option "position.y" has to be a finite number.')}else e.position.x=0}else e.position=this.getViewPosition();if(e.scale!=null){if(e.scale=+e.scale,!(e.scale>0))throw new TypeError('The option "scale" has to be a number greater than zero.')}else e.scale=this.body.view.scale;e.animation===void 0&&(e.animation={duration:0}),e.animation===!1&&(e.animation={duration:0}),e.animation===!0&&(e.animation={}),e.animation.duration===void 0&&(e.animation.duration=1e3),e.animation.easingFunction===void 0&&(e.animation.easingFunction="easeInOutQuad"),this.animateView(e)}animateView(e){if(e===void 0)return;this.animationEasingFunction=e.animation.easingFunction,this.releaseNode(),e.locked===!0&&(this.lockedOnNodeId=e.lockedOnNode,this.lockedOnNodeOffset=e.offset),this.easingTime!=0&&this._transitionRedraw(!0),this.sourceScale=this.body.view.scale,this.sourceTranslation=this.body.view.translation,this.targetScale=e.scale,this.body.view.scale=this.targetScale;const r=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),n={x:r.x-e.position.x,y:r.y-e.position.y};if(this.targetTranslation={x:this.sourceTranslation.x+n.x*this.targetScale+e.offset.x,y:this.sourceTranslation.y+n.y*this.targetScale+e.offset.y},e.animation.duration===0)if(this.lockedOnNodeId!=null){var i;this.viewFunction=re(i=this._lockedRedraw).call(i,this),this.body.emitter.on("initRedraw",this.viewFunction)}else this.body.view.scale=this.targetScale,this.body.view.translation=this.targetTranslation,this.body.emitter.emit("_requestRedraw");else{var s;this.animationSpeed=1/(60*e.animation.duration*.001)||1/60,this.animationEasingFunction=e.animation.easingFunction,this.viewFunction=re(s=this._transitionRedraw).call(s,this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering")}}_lockedRedraw(){const e={x:this.body.nodes[this.lockedOnNodeId].x,y:this.body.nodes[this.lockedOnNodeId].y},r=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),n={x:r.x-e.x,y:r.y-e.y},i=this.body.view.translation,s={x:i.x+n.x*this.body.view.scale+this.lockedOnNodeOffset.x,y:i.y+n.y*this.body.view.scale+this.lockedOnNodeOffset.y};this.body.view.translation=s}releaseNode(){this.lockedOnNodeId!==void 0&&this.viewFunction!==void 0&&(this.body.emitter.off("initRedraw",this.viewFunction),this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0)}_transitionRedraw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.easingTime+=this.animationSpeed,this.easingTime=e===!0?1:this.easingTime;const r=yge[this.animationEasingFunction](this.easingTime);if(this.body.view.scale=this.sourceScale+(this.targetScale-this.sourceScale)*r,this.body.view.translation={x:this.sourceTranslation.x+(this.targetTranslation.x-this.sourceTranslation.x)*r,y:this.sourceTranslation.y+(this.targetTranslation.y-this.sourceTranslation.y)*r},this.easingTime>=1){if(this.body.emitter.off("initRedraw",this.viewFunction),this.easingTime=0,this.lockedOnNodeId!=null){var n;this.viewFunction=re(n=this._lockedRedraw).call(n,this),this.body.emitter.on("initRedraw",this.viewFunction)}this.body.emitter.emit("animationFinished")}}getScale(){return this.body.view.scale}getViewPosition(){return this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight})}}function AU(t){var e=t&&t.preventDefault||!1,r=t&&t.container||window,n={},i={keydown:{},keyup:{}},s={},a;for(a=97;a<=122;a++)s[String.fromCharCode(a)]={code:65+(a-97),shift:!1};for(a=65;a<=90;a++)s[String.fromCharCode(a)]={code:a,shift:!0};for(a=0;a<=9;a++)s[""+a]={code:48+a,shift:!1};for(a=1;a<=12;a++)s["F"+a]={code:111+a,shift:!1};for(a=0;a<=9;a++)s["num"+a]={code:96+a,shift:!1};s["num*"]={code:106,shift:!1},s["num+"]={code:107,shift:!1},s["num-"]={code:109,shift:!1},s["num/"]={code:111,shift:!1},s["num."]={code:110,shift:!1},s.left={code:37,shift:!1},s.up={code:38,shift:!1},s.right={code:39,shift:!1},s.down={code:40,shift:!1},s.space={code:32,shift:!1},s.enter={code:13,shift:!1},s.shift={code:16,shift:void 0},s.esc={code:27,shift:!1},s.backspace={code:8,shift:!1},s.tab={code:9,shift:!1},s.ctrl={code:17,shift:!1},s.alt={code:18,shift:!1},s.delete={code:46,shift:!1},s.pageup={code:33,shift:!1},s.pagedown={code:34,shift:!1},s["="]={code:187,shift:!1},s["-"]={code:189,shift:!1},s["]"]={code:221,shift:!1},s["["]={code:219,shift:!1};var o=function(d){u(d,"keydown")},c=function(d){u(d,"keyup")},u=function(d,h){if(i[h][d.keyCode]!==void 0){for(var f=i[h][d.keyCode],p=0;p<f.length;p++)(f[p].shift===void 0||f[p].shift==!0&&d.shiftKey==!0||f[p].shift==!1&&d.shiftKey==!1)&&f[p].fn(d);e==!0&&d.preventDefault()}};return n.bind=function(d,h,f){if(f===void 0&&(f="keydown"),s[d]===void 0)throw new Error("unsupported key: "+d);i[f][s[d].code]===void 0&&(i[f][s[d].code]=[]),i[f][s[d].code].push({fn:h,shift:s[d].shift})},n.bindAll=function(d,h){h===void 0&&(h="keydown");for(var f in s)s.hasOwnProperty(f)&&n.bind(f,d,h)},n.getKey=function(d){for(var h in s)if(s.hasOwnProperty(h)){if(d.shiftKey==!0&&s[h].shift==!0&&d.keyCode==s[h].code)return h;if(d.shiftKey==!1&&s[h].shift==!1&&d.keyCode==s[h].code)return h;if(d.keyCode==s[h].code&&h=="shift")return h}return"unknown key, currently not supported"},n.unbind=function(d,h,f){if(f===void 0&&(f="keydown"),s[d]===void 0)throw new Error("unsupported key: "+d);if(h!==void 0){var p=[],v=i[f][s[d].code];if(v!==void 0)for(var y=0;y<v.length;y++)v[y].fn==h&&v[y].shift==s[d].shift||p.push(i[f][s[d].code][y]);i[f][s[d].code]=p}else i[f][s[d].code]=[]},n.reset=function(){i={keydown:{},keyup:{}}},n.destroy=function(){i={keydown:{},keyup:{}},r.removeEventListener("keydown",o,!0),r.removeEventListener("keyup",c,!0)},r.addEventListener("keydown",o,!0),r.addEventListener("keyup",c,!0),n}class dxe{constructor(e,r){this.body=e,this.canvas=r,this.iconsCreated=!1,this.navigationHammers=[],this.boundFunctions={},this.touchTime=0,this.activated=!1,this.body.emitter.on("activate",()=>{this.activated=!0,this.configureKeyboardBindings()}),this.body.emitter.on("deactivate",()=>{this.activated=!1,this.configureKeyboardBindings()}),this.body.emitter.on("destroy",()=>{this.keycharm!==void 0&&this.keycharm.destroy()}),this.options={}}setOptions(e){e!==void 0&&(this.options=e,this.create())}create(){this.options.navigationButtons===!0?this.iconsCreated===!1&&this.loadNavigationElements():this.iconsCreated===!0&&this.cleanNavigation(),this.configureKeyboardBindings()}cleanNavigation(){if(this.navigationHammers.length!=0){for(let e=0;e<this.navigationHammers.length;e++)this.navigationHammers[e].destroy();this.navigationHammers=[]}this.navigationDOM&&this.navigationDOM.wrapper&&this.navigationDOM.wrapper.parentNode&&this.navigationDOM.wrapper.parentNode.removeChild(this.navigationDOM.wrapper),this.iconsCreated=!1}loadNavigationElements(){this.cleanNavigation(),this.navigationDOM={};const e=["up","down","left","right","zoomIn","zoomOut","zoomExtends"],r=["_moveUp","_moveDown","_moveLeft","_moveRight","_zoomIn","_zoomOut","_fit"];this.navigationDOM.wrapper=document.createElement("div"),this.navigationDOM.wrapper.className="vis-navigation",this.canvas.frame.appendChild(this.navigationDOM.wrapper);for(let a=0;a<e.length;a++){this.navigationDOM[e[a]]=document.createElement("div"),this.navigationDOM[e[a]].className="vis-button vis-"+e[a],this.navigationDOM.wrapper.appendChild(this.navigationDOM[e[a]]);const o=new rc(this.navigationDOM[e[a]]);if(r[a]==="_fit"){var n;em(o,re(n=this._fit).call(n,this))}else{var i;em(o,re(i=this.bindToRedraw).call(i,this,r[a]))}this.navigationHammers.push(o)}const s=new rc(this.canvas.frame);rX(s,()=>{this._stopMovement()}),this.navigationHammers.push(s),this.iconsCreated=!0}bindToRedraw(e){if(this.boundFunctions[e]===void 0){var r;this.boundFunctions[e]=re(r=this[e]).call(r,this),this.body.emitter.on("initRedraw",this.boundFunctions[e]),this.body.emitter.emit("_startRendering")}}unbindFromRedraw(e){this.boundFunctions[e]!==void 0&&(this.body.emitter.off("initRedraw",this.boundFunctions[e]),this.body.emitter.emit("_stopRendering"),delete this.boundFunctions[e])}_fit(){new Date().valueOf()-this.touchTime>700&&(this.body.emitter.emit("fit",{duration:700}),this.touchTime=new Date().valueOf())}_stopMovement(){for(const e in this.boundFunctions)Object.prototype.hasOwnProperty.call(this.boundFunctions,e)&&(this.body.emitter.off("initRedraw",this.boundFunctions[e]),this.body.emitter.emit("_stopRendering"));this.boundFunctions={}}_moveUp(){this.body.view.translation.y+=this.options.keyboard.speed.y}_moveDown(){this.body.view.translation.y-=this.options.keyboard.speed.y}_moveLeft(){this.body.view.translation.x+=this.options.keyboard.speed.x}_moveRight(){this.body.view.translation.x-=this.options.keyboard.speed.x}_zoomIn(){const e=this.body.view.scale,r=this.body.view.scale*(1+this.options.keyboard.speed.zoom),n=this.body.view.translation,i=r/e,s=(1-i)*this.canvas.canvasViewCenter.x+n.x*i,a=(1-i)*this.canvas.canvasViewCenter.y+n.y*i;this.body.view.scale=r,this.body.view.translation={x:s,y:a},this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:null})}_zoomOut(){const e=this.body.view.scale,r=this.body.view.scale/(1+this.options.keyboard.speed.zoom),n=this.body.view.translation,i=r/e,s=(1-i)*this.canvas.canvasViewCenter.x+n.x*i,a=(1-i)*this.canvas.canvasViewCenter.y+n.y*i;this.body.view.scale=r,this.body.view.translation={x:s,y:a},this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:null})}configureKeyboardBindings(){if(this.keycharm!==void 0&&this.keycharm.destroy(),this.options.keyboard.enabled===!0&&(this.options.keyboard.bindToWindow===!0?this.keycharm=AU({container:window,preventDefault:!0}):this.keycharm=AU({container:this.canvas.frame,preventDefault:!0}),this.keycharm.reset(),this.activated===!0)){var e,r,n,i,s,a,o,c,u,d,h,f,p,v,y,x,g,m,w,b,_,E,j,S;re(e=this.keycharm).call(e,"up",()=>{this.bindToRedraw("_moveUp")},"keydown"),re(r=this.keycharm).call(r,"down",()=>{this.bindToRedraw("_moveDown")},"keydown"),re(n=this.keycharm).call(n,"left",()=>{this.bindToRedraw("_moveLeft")},"keydown"),re(i=this.keycharm).call(i,"right",()=>{this.bindToRedraw("_moveRight")},"keydown"),re(s=this.keycharm).call(s,"=",()=>{this.bindToRedraw("_zoomIn")},"keydown"),re(a=this.keycharm).call(a,"num+",()=>{this.bindToRedraw("_zoomIn")},"keydown"),re(o=this.keycharm).call(o,"num-",()=>{this.bindToRedraw("_zoomOut")},"keydown"),re(c=this.keycharm).call(c,"-",()=>{this.bindToRedraw("_zoomOut")},"keydown"),re(u=this.keycharm).call(u,"[",()=>{this.bindToRedraw("_zoomOut")},"keydown"),re(d=this.keycharm).call(d,"]",()=>{this.bindToRedraw("_zoomIn")},"keydown"),re(h=this.keycharm).call(h,"pageup",()=>{this.bindToRedraw("_zoomIn")},"keydown"),re(f=this.keycharm).call(f,"pagedown",()=>{this.bindToRedraw("_zoomOut")},"keydown"),re(p=this.keycharm).call(p,"up",()=>{this.unbindFromRedraw("_moveUp")},"keyup"),re(v=this.keycharm).call(v,"down",()=>{this.unbindFromRedraw("_moveDown")},"keyup"),re(y=this.keycharm).call(y,"left",()=>{this.unbindFromRedraw("_moveLeft")},"keyup"),re(x=this.keycharm).call(x,"right",()=>{this.unbindFromRedraw("_moveRight")},"keyup"),re(g=this.keycharm).call(g,"=",()=>{this.unbindFromRedraw("_zoomIn")},"keyup"),re(m=this.keycharm).call(m,"num+",()=>{this.unbindFromRedraw("_zoomIn")},"keyup"),re(w=this.keycharm).call(w,"num-",()=>{this.unbindFromRedraw("_zoomOut")},"keyup"),re(b=this.keycharm).call(b,"-",()=>{this.unbindFromRedraw("_zoomOut")},"keyup"),re(_=this.keycharm).call(_,"[",()=>{this.unbindFromRedraw("_zoomOut")},"keyup"),re(E=this.keycharm).call(E,"]",()=>{this.unbindFromRedraw("_zoomIn")},"keyup"),re(j=this.keycharm).call(j,"pageup",()=>{this.unbindFromRedraw("_zoomIn")},"keyup"),re(S=this.keycharm).call(S,"pagedown",()=>{this.unbindFromRedraw("_zoomOut")},"keyup")}}}class hxe{constructor(e,r,n){var i,s,a,o,c,u,d,h,f,p,v,y,x;this.body=e,this.canvas=r,this.selectionHandler=n,this.navigationHandler=new dxe(e,r),this.body.eventListeners.onTap=re(i=this.onTap).call(i,this),this.body.eventListeners.onTouch=re(s=this.onTouch).call(s,this),this.body.eventListeners.onDoubleTap=re(a=this.onDoubleTap).call(a,this),this.body.eventListeners.onHold=re(o=this.onHold).call(o,this),this.body.eventListeners.onDragStart=re(c=this.onDragStart).call(c,this),this.body.eventListeners.onDrag=re(u=this.onDrag).call(u,this),this.body.eventListeners.onDragEnd=re(d=this.onDragEnd).call(d,this),this.body.eventListeners.onMouseWheel=re(h=this.onMouseWheel).call(h,this),this.body.eventListeners.onPinch=re(f=this.onPinch).call(f,this),this.body.eventListeners.onMouseMove=re(p=this.onMouseMove).call(p,this),this.body.eventListeners.onRelease=re(v=this.onRelease).call(v,this),this.body.eventListeners.onContext=re(y=this.onContext).call(y,this),this.touchTime=0,this.drag={},this.pinch={},this.popup=void 0,this.popupObj=void 0,this.popupTimer=void 0,this.body.functions.getPointer=re(x=this.getPointer).call(x,this),this.options={},this.defaultOptions={dragNodes:!0,dragView:!0,hover:!1,keyboard:{enabled:!1,speed:{x:10,y:10,zoom:.02},bindToWindow:!0,autoFocus:!0},navigationButtons:!1,tooltipDelay:300,zoomView:!0,zoomSpeed:1},sr(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){this.body.emitter.on("destroy",()=>{clearTimeout(this.popupTimer),delete this.body.functions.getPointer})}setOptions(e){e!==void 0&&(Xp(["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag","keyboard","multiselect","selectable","selectConnectedEdges"],this.options,e),Wn(this.options,e,"keyboard"),e.tooltip&&(sr(this.options.tooltip,e.tooltip),e.tooltip.color&&(this.options.tooltip.color=cC(e.tooltip.color)))),this.navigationHandler.setOptions(this.options)}getPointer(e){return{x:e.x-pge(this.canvas.frame.canvas),y:e.y-mge(this.canvas.frame.canvas)}}onTouch(e){new Date().valueOf()-this.touchTime>50&&(this.drag.pointer=this.getPointer(e.center),this.drag.pinched=!1,this.pinch.scale=this.body.view.scale,this.touchTime=new Date().valueOf())}onTap(e){const r=this.getPointer(e.center),n=this.selectionHandler.options.multiselect&&(e.changedPointers[0].ctrlKey||e.changedPointers[0].metaKey);this.checkSelectionChanges(r,n),this.selectionHandler.commitAndEmit(r,e),this.selectionHandler.generateClickEvent("click",e,r)}onDoubleTap(e){const r=this.getPointer(e.center);this.selectionHandler.generateClickEvent("doubleClick",e,r)}onHold(e){const r=this.getPointer(e.center),n=this.selectionHandler.options.multiselect;this.checkSelectionChanges(r,n),this.selectionHandler.commitAndEmit(r,e),this.selectionHandler.generateClickEvent("click",e,r),this.selectionHandler.generateClickEvent("hold",e,r)}onRelease(e){if(new Date().valueOf()-this.touchTime>10){const r=this.getPointer(e.center);this.selectionHandler.generateClickEvent("release",e,r),this.touchTime=new Date().valueOf()}}onContext(e){const r=this.getPointer({x:e.clientX,y:e.clientY});this.selectionHandler.generateClickEvent("oncontext",e,r)}checkSelectionChanges(e){(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)===!0?this.selectionHandler.selectAdditionalOnPoint(e):this.selectionHandler.selectOnPoint(e)}_determineDifference(e,r){const n=function(i,s){const a=[];for(let o=0;o<i.length;o++){const c=i[o];ht(s).call(s,c)===-1&&a.push(c)}return a};return{nodes:n(e.nodes,r.nodes),edges:n(e.edges,r.edges)}}onDragStart(e){if(this.drag.dragging)return;this.drag.pointer===void 0&&this.onTouch(e);const r=this.selectionHandler.getNodeAt(this.drag.pointer);if(this.drag.dragging=!0,this.drag.selection=[],this.drag.translation=sr({},this.body.view.translation),this.drag.nodeId=void 0,e.srcEvent.shiftKey){this.body.selectionBox.show=!0;const n=this.getPointer(e.center);this.body.selectionBox.position.start={x:this.canvas._XconvertDOMtoCanvas(n.x),y:this.canvas._YconvertDOMtoCanvas(n.y)},this.body.selectionBox.position.end={x:this.canvas._XconvertDOMtoCanvas(n.x),y:this.canvas._YconvertDOMtoCanvas(n.y)}}else if(r!==void 0&&this.options.dragNodes===!0){this.drag.nodeId=r.id,r.isSelected()===!1&&this.selectionHandler.setSelection({nodes:[r.id]}),this.selectionHandler.generateClickEvent("dragStart",e,this.drag.pointer);for(const n of this.selectionHandler.getSelectedNodes()){const i={id:n.id,node:n,x:n.x,y:n.y,xFixed:n.options.fixed.x,yFixed:n.options.fixed.y};n.options.fixed.x=!0,n.options.fixed.y=!0,this.drag.selection.push(i)}}else this.selectionHandler.generateClickEvent("dragStart",e,this.drag.pointer,void 0,!0)}onDrag(e){if(this.drag.pinched===!0)return;this.body.emitter.emit("unlockNode");const r=this.getPointer(e.center),n=this.drag.selection;if(n&&n.length&&this.options.dragNodes===!0){this.selectionHandler.generateClickEvent("dragging",e,r);const i=r.x-this.drag.pointer.x,s=r.y-this.drag.pointer.y;gt(n).call(n,a=>{const o=a.node;a.xFixed===!1&&(o.x=this.canvas._XconvertDOMtoCanvas(this.canvas._XconvertCanvasToDOM(a.x)+i)),a.yFixed===!1&&(o.y=this.canvas._YconvertDOMtoCanvas(this.canvas._YconvertCanvasToDOM(a.y)+s))}),this.body.emitter.emit("startSimulation")}else{if(e.srcEvent.shiftKey){if(this.selectionHandler.generateClickEvent("dragging",e,r,void 0,!0),this.drag.pointer===void 0){this.onDragStart(e);return}this.body.selectionBox.position.end={x:this.canvas._XconvertDOMtoCanvas(r.x),y:this.canvas._YconvertDOMtoCanvas(r.y)},this.body.emitter.emit("_requestRedraw")}if(this.options.dragView===!0&&!e.srcEvent.shiftKey){if(this.selectionHandler.generateClickEvent("dragging",e,r,void 0,!0),this.drag.pointer===void 0){this.onDragStart(e);return}const i=r.x-this.drag.pointer.x,s=r.y-this.drag.pointer.y;this.body.view.translation={x:this.drag.translation.x+i,y:this.drag.translation.y+s},this.body.emitter.emit("_requestRedraw")}}}onDragEnd(e){if(this.drag.dragging=!1,this.body.selectionBox.show){var r;this.body.selectionBox.show=!1;const n=this.body.selectionBox.position,i={minX:Math.min(n.start.x,n.end.x),minY:Math.min(n.start.y,n.end.y),maxX:Math.max(n.start.x,n.end.x),maxY:Math.max(n.start.y,n.end.y)},s=hn(r=this.body.nodeIndices).call(r,o=>{const c=this.body.nodes[o];return c.x>=i.minX&&c.x<=i.maxX&&c.y>=i.minY&&c.y<=i.maxY});gt(s).call(s,o=>this.selectionHandler.selectObject(this.body.nodes[o]));const a=this.getPointer(e.center);this.selectionHandler.commitAndEmit(a,e),this.selectionHandler.generateClickEvent("dragEnd",e,this.getPointer(e.center),void 0,!0),this.body.emitter.emit("_requestRedraw")}else{const n=this.drag.selection;n&&n.length?(gt(n).call(n,function(i){i.node.options.fixed.x=i.xFixed,i.node.options.fixed.y=i.yFixed}),this.selectionHandler.generateClickEvent("dragEnd",e,this.getPointer(e.center)),this.body.emitter.emit("startSimulation")):(this.selectionHandler.generateClickEvent("dragEnd",e,this.getPointer(e.center),void 0,!0),this.body.emitter.emit("_requestRedraw"))}}onPinch(e){const r=this.getPointer(e.center);this.drag.pinched=!0,this.pinch.scale===void 0&&(this.pinch.scale=1);const n=this.pinch.scale*e.scale;this.zoom(n,r)}zoom(e,r){if(this.options.zoomView===!0){const n=this.body.view.scale;e<1e-5&&(e=1e-5),e>10&&(e=10);let i;this.drag!==void 0&&this.drag.dragging===!0&&(i=this.canvas.DOMtoCanvas(this.drag.pointer));const s=this.body.view.translation,a=e/n,o=(1-a)*r.x+s.x*a,c=(1-a)*r.y+s.y*a;if(this.body.view.scale=e,this.body.view.translation={x:o,y:c},i!=null){const u=this.canvas.canvasToDOM(i);this.drag.pointer.x=u.x,this.drag.pointer.y=u.y}this.body.emitter.emit("_requestRedraw"),n<e?this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:r}):this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:r})}}onMouseWheel(e){if(this.options.zoomView===!0){if(e.deltaY!==0){let r=this.body.view.scale;r*=1+(e.deltaY<0?1:-1)*(this.options.zoomSpeed*.1);const n=this.getPointer({x:e.clientX,y:e.clientY});this.zoom(r,n)}e.preventDefault()}}onMouseMove(e){const r=this.getPointer({x:e.clientX,y:e.clientY});let n=!1;this.popup!==void 0&&(this.popup.hidden===!1&&this._checkHidePopup(r),this.popup.hidden===!1&&(n=!0,this.popup.setPosition(r.x+3,r.y-5),this.popup.show())),this.options.keyboard.autoFocus&&this.options.keyboard.bindToWindow===!1&&this.options.keyboard.enabled===!0&&this.canvas.frame.focus(),n===!1&&(this.popupTimer!==void 0&&(clearInterval(this.popupTimer),this.popupTimer=void 0),this.drag.dragging||(this.popupTimer=ys(()=>this._checkShowPopup(r),this.options.tooltipDelay))),this.options.hover===!0&&this.selectionHandler.hoverObject(e,r)}_checkShowPopup(e){const r=this.canvas._XconvertDOMtoCanvas(e.x),n=this.canvas._YconvertDOMtoCanvas(e.y),i={left:r,top:n,right:r,bottom:n},s=this.popupObj===void 0?void 0:this.popupObj.id;let a=!1,o="node";if(this.popupObj===void 0){const c=this.body.nodeIndices,u=this.body.nodes;let d;const h=[];for(let f=0;f<c.length;f++)d=u[c[f]],d.isOverlappingWith(i)===!0&&(a=!0,d.getTitle()!==void 0&&h.push(c[f]));h.length>0&&(this.popupObj=u[h[h.length-1]],a=!0)}if(this.popupObj===void 0&&a===!1){const c=this.body.edgeIndices,u=this.body.edges;let d;const h=[];for(let f=0;f<c.length;f++)d=u[c[f]],d.isOverlappingWith(i)===!0&&d.connected===!0&&d.getTitle()!==void 0&&h.push(c[f]);h.length>0&&(this.popupObj=u[h[h.length-1]],o="edge")}this.popupObj!==void 0?this.popupObj.id!==s&&(this.popup===void 0&&(this.popup=new jge(this.canvas.frame)),this.popup.popupTargetType=o,this.popup.popupTargetId=this.popupObj.id,this.popup.setPosition(e.x+3,e.y-5),this.popup.setText(this.popupObj.getTitle()),this.popup.show(),this.body.emitter.emit("showPopup",this.popupObj.id)):this.popup!==void 0&&(this.popup.hide(),this.body.emitter.emit("hidePopup"))}_checkHidePopup(e){const r=this.selectionHandler._pointerToPositionObject(e);let n=!1;if(this.popup.popupTargetType==="node"){if(this.body.nodes[this.popup.popupTargetId]!==void 0&&(n=this.body.nodes[this.popup.popupTargetId].isOverlappingWith(r),n===!0)){const i=this.selectionHandler.getNodeAt(e);n=i===void 0?!1:i.id===this.popup.popupTargetId}}else this.selectionHandler.getNodeAt(e)===void 0&&this.body.edges[this.popup.popupTargetId]!==void 0&&(n=this.body.edges[this.popup.popupTargetId].isOverlappingWith(r));n===!1&&(this.popupObj=void 0,this.popup.hide(),this.body.emitter.emit("hidePopup"))}}var FU={},LU={},BU;function fxe(){if(BU)return LU;BU=1;var t=AP(),e=VQ();return t("Set",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},e),LU}var zU;function pxe(){return zU||(zU=1,fxe()),FU}var UU={},TN,WU;function pl(){if(WU)return TN;WU=1;var t=uu(),e=TypeError;return TN=function(r){if(typeof r=="object"&&"size"in r&&"has"in r&&"add"in r&&"delete"in r&&"keys"in r)return r;throw new e(t(r)+" is not a set")},TN}var IN,VU;function ml(){if(VU)return IN;VU=1;var t=qn(),e=HQ(),r=t("Set"),n=r.prototype;return IN={Set:r,add:e("add",1),has:e("has",1),remove:e("delete",1),proto:n},IN}var RN,HU;function vl(){if(HU)return RN;HU=1;var t=Nn();return RN=function(e,r,n){for(var i=n?e:e.iterator,s=e.next,a,o;!(a=t(s,i)).done;)if(o=r(a.value),o!==void 0)return o},RN}var kN,KU;function Yh(){if(KU)return kN;KU=1;var t=vl();return kN=function(e,r,n){return n?t(e.keys(),r,!0):e.forEach(r)},kN}var $N,GU;function VP(){if(GU)return $N;GU=1;var t=ml(),e=Yh(),r=t.Set,n=t.add;return $N=function(i){var s=new r;return e(i,function(a){n(s,a)}),s},$N}var DN,YU;function Qh(){return YU||(YU=1,DN=function(t){return t.size}),DN}var MN,QU;function mxe(){return QU||(QU=1,MN=function(t){return{iterator:t,next:t.next,done:!1}}),MN}var qN,XU;function gl(){if(XU)return qN;XU=1;var t=As(),e=Gi(),r=Nn(),n=pu(),i=mxe(),s="Invalid size",a=RangeError,o=TypeError,c=Math.max,u=function(d,h){this.set=d,this.size=c(h,0),this.has=t(d.has),this.keys=t(d.keys)};return u.prototype={getIterator:function(){return i(e(r(this.keys,this.set)))},includes:function(d){return r(this.has,this.set,d)}},qN=function(d){e(d);var h=+d.size;if(h!==h)throw new o(s);var f=n(h);if(f<0)throw new a(s);return new u(d,f)},qN}var AN,JU;function vxe(){if(JU)return AN;JU=1;var t=pl(),e=ml(),r=VP(),n=Qh(),i=gl(),s=Yh(),a=vl(),o=e.has,c=e.remove;return AN=function(d){var h=t(this),f=i(d),p=r(h);return n(h)<=f.size?s(h,function(v){f.includes(v)&&c(p,v)}):a(f.getIterator(),function(v){o(p,v)&&c(p,v)}),p},AN}var FN,ZU;function yl(){return ZU||(ZU=1,FN=function(){return!1}),FN}var e9;function gxe(){if(e9)return UU;e9=1;var t=Ne(),e=vxe(),r=Xe(),n=yl(),i=!n("difference",function(a){return a.size===0}),s=i||r(function(){var a={size:1,has:function(){return!0},keys:function(){var c=0;return{next:function(){var u=c++>1;return o.has(1)&&o.clear(),{done:u,value:2}}}}},o=new Set([1,2,3,4]);return o.difference(a).size!==3});return t({target:"Set",proto:!0,real:!0,forced:s},{difference:e}),UU}var t9={},LN,r9;function yxe(){if(r9)return LN;r9=1;var t=pl(),e=ml(),r=Qh(),n=gl(),i=Yh(),s=vl(),a=e.Set,o=e.add,c=e.has;return LN=function(d){var h=t(this),f=n(d),p=new a;return r(h)>f.size?s(f.getIterator(),function(v){c(h,v)&&o(p,v)}):i(h,function(v){f.includes(v)&&o(p,v)}),p},LN}var n9;function bxe(){if(n9)return t9;n9=1;var t=Ne(),e=Xe(),r=yxe(),n=yl(),i=!n("intersection",function(s){return s.size===2&&s.has(1)&&s.has(2)})||e(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});return t({target:"Set",proto:!0,real:!0,forced:i},{intersection:r}),t9}var i9={},BN,s9;function xxe(){if(s9)return BN;s9=1;var t=pl(),e=ml().has,r=Qh(),n=gl(),i=Yh(),s=vl(),a=MP();return BN=function(c){var u=t(this),d=n(c);if(r(u)<=d.size)return i(u,function(f){if(d.includes(f))return!1},!0)!==!1;var h=d.getIterator();return s(h,function(f){if(e(u,f))return a(h,"normal",!1)})!==!1},BN}var a9;function wxe(){if(a9)return i9;a9=1;var t=Ne(),e=xxe(),r=yl(),n=!r("isDisjointFrom",function(i){return!i});return t({target:"Set",proto:!0,real:!0,forced:n},{isDisjointFrom:e}),i9}var o9={},zN,l9;function _xe(){if(l9)return zN;l9=1;var t=pl(),e=Qh(),r=Yh(),n=gl();return zN=function(s){var a=t(this),o=n(s);return e(a)>o.size?!1:r(a,function(c){if(!o.includes(c))return!1},!0)!==!1},zN}var c9;function Sxe(){if(c9)return o9;c9=1;var t=Ne(),e=_xe(),r=yl(),n=!r("isSubsetOf",function(i){return i});return t({target:"Set",proto:!0,real:!0,forced:n},{isSubsetOf:e}),o9}var u9={},UN,d9;function Exe(){if(d9)return UN;d9=1;var t=pl(),e=ml().has,r=Qh(),n=gl(),i=vl(),s=MP();return UN=function(o){var c=t(this),u=n(o);if(r(c)<u.size)return!1;var d=u.getIterator();return i(d,function(h){if(!e(c,h))return s(d,"normal",!1)})!==!1},UN}var h9;function Nxe(){if(h9)return u9;h9=1;var t=Ne(),e=Exe(),r=yl(),n=!r("isSupersetOf",function(i){return!i});return t({target:"Set",proto:!0,real:!0,forced:n},{isSupersetOf:e}),u9}var f9={},WN,p9;function jxe(){if(p9)return WN;p9=1;var t=pl(),e=ml(),r=VP(),n=gl(),i=vl(),s=e.add,a=e.has,o=e.remove;return WN=function(u){var d=t(this),h=n(u).getIterator(),f=r(d);return i(h,function(p){a(d,p)?o(f,p):s(f,p)}),f},WN}var VN,m9;function nX(){return m9||(m9=1,VN=function(t){try{var e=new Set,r={size:0,has:function(){return!0},keys:function(){return Object.defineProperty({},"next",{get:function(){return e.clear(),e.add(4),function(){return{done:!0}}}})}},n=e[t](r);return n.size===1&&n.values().next().value===4}catch{return!1}}),VN}var v9;function Cxe(){if(v9)return f9;v9=1;var t=Ne(),e=jxe(),r=nX(),n=yl(),i=!n("symmetricDifference")||!r("symmetricDifference");return t({target:"Set",proto:!0,real:!0,forced:i},{symmetricDifference:e}),f9}var g9={},HN,y9;function Oxe(){if(y9)return HN;y9=1;var t=pl(),e=ml().add,r=VP(),n=gl(),i=vl();return HN=function(a){var o=t(this),c=n(a).getIterator(),u=r(o);return i(c,function(d){e(u,d)}),u},HN}var b9;function Pxe(){if(b9)return g9;b9=1;var t=Ne(),e=Oxe(),r=nX(),n=yl(),i=!n("union")||!r("union");return t({target:"Set",proto:!0,real:!0,forced:i},{union:e}),g9}var KN,x9;function Txe(){if(x9)return KN;x9=1,yu(),pxe(),gxe(),bxe(),wxe(),Sxe(),Nxe(),Cxe(),Pxe(),LP();var t=mt();return KN=t.Set,KN}var GN,w9;function Ixe(){if(w9)return GN;w9=1;var t=Txe();return bu(),GN=t,GN}var YN,_9;function Rxe(){return _9||(_9=1,YN=Ixe()),YN}var kxe=Rxe(),Js=ke(kxe),S9={},E9={},QN,N9;function $xe(){if(N9)return QN;N9=1;var t=et(),e=FP(),r=sv().getWeakData,n=qP(),i=Gi(),s=ou(),a=Nr(),o=av(),c=Ua(),u=Rr(),d=dl(),h=d.set,f=d.getterFor,p=c.find,v=c.findIndex,y=t([].splice),x=0,g=function(b){return b.frozen||(b.frozen=new m)},m=function(){this.entries=[]},w=function(b,_){return p(b.entries,function(E){return E[0]===_})};return m.prototype={get:function(b){var _=w(this,b);if(_)return _[1]},has:function(b){return!!w(this,b)},set:function(b,_){var E=w(this,b);E?E[1]=_:this.entries.push([b,_])},delete:function(b){var _=v(this.entries,function(E){return E[0]===b});return~_&&y(this.entries,_,1),!!~_}},QN={getConstructor:function(b,_,E,j){var S=b(function(T,I){n(T,C),h(T,{type:_,id:x++,frozen:null}),s(I)||o(I,T[j],{that:T,AS_ENTRIES:E})}),C=S.prototype,N=f(_),O=function(T,I,D){var F=N(T),M=r(i(I),!0);return M===!0?g(F).set(I,D):M[F.id]=D,T};return e(C,{delete:function(T){var I=N(this);if(!a(T))return!1;var D=r(T);return D===!0?g(I).delete(T):D&&u(D,I.id)&&delete D[I.id]},has:function(I){var D=N(this);if(!a(I))return!1;var F=r(I);return F===!0?g(D).has(I):F&&u(F,D.id)}}),e(C,E?{get:function(I){var D=N(this);if(a(I)){var F=r(I);if(F===!0)return g(D).get(I);if(F)return F[D.id]}},set:function(I,D){return O(this,I,D)}}:{add:function(I){return O(this,I,!0)}}),S}},QN}var j9;function Dxe(){if(j9)return E9;j9=1;var t=UQ(),e=$t(),r=et(),n=FP(),i=sv(),s=AP(),a=$xe(),o=Nr(),c=dl().enforce,u=Xe(),d=VY(),h=Object,f=Array.isArray,p=h.isExtensible,v=h.isFrozen,y=h.isSealed,x=h.freeze,g=h.seal,m=!e.ActiveXObject&&"ActiveXObject"in e,w,b=function(T){return function(){return T(this,arguments.length?arguments[0]:void 0)}},_=s("WeakMap",b,a),E=_.prototype,j=r(E.set),S=function(){return t&&u(function(){var T=x([]);return j(new _,T,1),!v(T)})};if(d)if(m){w=a.getConstructor(b,"WeakMap",!0),i.enable();var C=r(E.delete),N=r(E.has),O=r(E.get);n(E,{delete:function(T){if(o(T)&&!p(T)){var I=c(this);return I.frozen||(I.frozen=new w),C(this,T)||I.frozen.delete(T)}return C(this,T)},has:function(I){if(o(I)&&!p(I)){var D=c(this);return D.frozen||(D.frozen=new w),N(this,I)||D.frozen.has(I)}return N(this,I)},get:function(I){if(o(I)&&!p(I)){var D=c(this);return D.frozen||(D.frozen=new w),N(this,I)?O(this,I):D.frozen.get(I)}return O(this,I)},set:function(I,D){if(o(I)&&!p(I)){var F=c(this);F.frozen||(F.frozen=new w),N(this,I)?j(this,I,D):F.frozen.set(I,D)}else j(this,I,D);return this}})}else S()&&n(E,{set:function(I,D){var F;return f(I)&&(v(I)?F=x:y(I)&&(F=g)),j(this,I,D),F&&F(I),this}});return E9}var C9;function Mxe(){return C9||(C9=1,Dxe()),S9}var XN,O9;function qxe(){if(O9)return XN;O9=1,yu(),Mxe();var t=mt();return XN=t.WeakMap,XN}var JN,P9;function Axe(){if(P9)return JN;P9=1;var t=qxe();return bu(),JN=t,JN}var ZN,T9;function Fxe(){return T9||(T9=1,ZN=Axe()),ZN}var Lxe=Fxe(),Xh=ke(Lxe);function pd(t,e,r){Bxe(t,e),e.set(t,r)}function Bxe(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function mC(t,e,r){return t.set(iX(t,e),r),r}function wt(t,e){return t.get(iX(t,e))}function iX(t,e,r){if(typeof t=="function"?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}function I9(t,e){const r=new Js;for(const n of e)t.has(n)||r.add(n);return r}var Ol=new Xh,li=new Xh;class R9{constructor(){pd(this,Ol,new Js),pd(this,li,new Js)}get size(){return wt(li,this).size}add(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];for(const i of r)wt(li,this).add(i)}delete(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];for(const i of r)wt(li,this).delete(i)}clear(){wt(li,this).clear()}getSelection(){return[...wt(li,this)]}getChanges(){return{added:[...I9(wt(Ol,this),wt(li,this))],deleted:[...I9(wt(li,this),wt(Ol,this))],previous:[...new Js(wt(Ol,this))],current:[...new Js(wt(li,this))]}}commit(){const e=this.getChanges();mC(Ol,this,wt(li,this)),mC(li,this,new Js(wt(Ol,this)));for(const r of e.added)r.select();for(const r of e.deleted)r.unselect();return e}}var Ka=new Xh,Ga=new Xh,e2=new Xh;class zxe{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:()=>{};pd(this,Ka,new R9),pd(this,Ga,new R9),pd(this,e2,void 0),mC(e2,this,e)}get sizeNodes(){return wt(Ka,this).size}get sizeEdges(){return wt(Ga,this).size}getNodes(){return wt(Ka,this).getSelection()}getEdges(){return wt(Ga,this).getSelection()}addNodes(){wt(Ka,this).add(...arguments)}addEdges(){wt(Ga,this).add(...arguments)}deleteNodes(e){wt(Ka,this).delete(e)}deleteEdges(e){wt(Ga,this).delete(e)}clear(){wt(Ka,this).clear(),wt(Ga,this).clear()}commit(){const e={nodes:wt(Ka,this).commit(),edges:wt(Ga,this).commit()};for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return wt(e2,this).call(this,e,...n),e}}class Uxe{constructor(e,r){this.body=e,this.canvas=r,this._selectionAccumulator=new zxe,this.hoverObj={nodes:{},edges:{}},this.options={},this.defaultOptions={multiselect:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0},sr(this.options,this.defaultOptions),this.body.emitter.on("_dataChanged",()=>{this.updateSelection()})}setOptions(e){e!==void 0&&_u(["multiselect","hoverConnectedEdges","selectable","selectConnectedEdges"],this.options,e)}selectOnPoint(e){let r=!1;if(this.options.selectable===!0){const n=this.getNodeAt(e)||this.getEdgeAt(e);this.unselectAll(),n!==void 0&&(r=this.selectObject(n)),this.body.emitter.emit("_requestRedraw")}return r}selectAdditionalOnPoint(e){let r=!1;if(this.options.selectable===!0){const n=this.getNodeAt(e)||this.getEdgeAt(e);n!==void 0&&(r=!0,n.isSelected()===!0?this.deselectObject(n):this.selectObject(n),this.body.emitter.emit("_requestRedraw"))}return r}_initBaseEvent(e,r){const n={};return n.pointer={DOM:{x:r.x,y:r.y},canvas:this.canvas.DOMtoCanvas(r)},n.event=e,n}generateClickEvent(e,r,n,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;const a=this._initBaseEvent(r,n);if(s===!0)a.nodes=[],a.edges=[];else{const o=this.getSelection();a.nodes=o.nodes,a.edges=o.edges}i!==void 0&&(a.previousSelection=i),e=="click"&&(a.items=this.getClickedItems(n)),r.controlEdge!==void 0&&(a.controlEdge=r.controlEdge),this.body.emitter.emit(e,a)}selectObject(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.selectConnectedEdges;return e!==void 0?(e instanceof Rt?(r===!0&&this._selectionAccumulator.addEdges(...e.edges),this._selectionAccumulator.addNodes(e)):this._selectionAccumulator.addEdges(e),!0):!1}deselectObject(e){e.isSelected()===!0&&(e.selected=!1,this._removeFromSelection(e))}_getAllNodesOverlappingWith(e){const r=[],n=this.body.nodes;for(let i=0;i<this.body.nodeIndices.length;i++){const s=this.body.nodeIndices[i];n[s].isOverlappingWith(e)&&r.push(s)}return r}_pointerToPositionObject(e){const r=this.canvas.DOMtoCanvas(e);return{left:r.x-1,top:r.y+1,right:r.x+1,bottom:r.y-1}}getNodeAt(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const n=this._pointerToPositionObject(e),i=this._getAllNodesOverlappingWith(n);if(i.length>0)return r===!0?this.body.nodes[i[i.length-1]]:i[i.length-1]}_getEdgesOverlappingWith(e,r){const n=this.body.edges;for(let i=0;i<this.body.edgeIndices.length;i++){const s=this.body.edgeIndices[i];n[s].isOverlappingWith(e)&&r.push(s)}}_getAllEdgesOverlappingWith(e){const r=[];return this._getEdgesOverlappingWith(e,r),r}getEdgeAt(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const n=this.canvas.DOMtoCanvas(e);let i=10,s=null;const a=this.body.edges;for(let o=0;o<this.body.edgeIndices.length;o++){const c=this.body.edgeIndices[o],u=a[c];if(u.connected){const d=u.from.x,h=u.from.y,f=u.to.x,p=u.to.y,v=u.edgeType.getDistanceToEdge(d,h,f,p,n.x,n.y);v<i&&(s=c,i=v)}}if(s!==null)return r===!0?this.body.edges[s]:s}_addToHover(e){e instanceof Rt?this.hoverObj.nodes[e.id]=e:this.hoverObj.edges[e.id]=e}_removeFromSelection(e){e instanceof Rt?(this._selectionAccumulator.deleteNodes(e),this._selectionAccumulator.deleteEdges(...e.edges)):this._selectionAccumulator.deleteEdges(e)}unselectAll(){this._selectionAccumulator.clear()}getSelectedNodeCount(){return this._selectionAccumulator.sizeNodes}getSelectedEdgeCount(){return this._selectionAccumulator.sizeEdges}_hoverConnectedEdges(e){for(let r=0;r<e.edges.length;r++){const n=e.edges[r];n.hover=!0,this._addToHover(n)}}emitBlurEvent(e,r,n){const i=this._initBaseEvent(e,r);n.hover===!0&&(n.hover=!1,n instanceof Rt?(i.node=n.id,this.body.emitter.emit("blurNode",i)):(i.edge=n.id,this.body.emitter.emit("blurEdge",i)))}emitHoverEvent(e,r,n){const i=this._initBaseEvent(e,r);let s=!1;return n.hover===!1&&(n.hover=!0,this._addToHover(n),s=!0,n instanceof Rt?(i.node=n.id,this.body.emitter.emit("hoverNode",i)):(i.edge=n.id,this.body.emitter.emit("hoverEdge",i))),s}hoverObject(e,r){let n=this.getNodeAt(r);n===void 0&&(n=this.getEdgeAt(r));let i=!1;for(const s in this.hoverObj.nodes)Object.prototype.hasOwnProperty.call(this.hoverObj.nodes,s)&&(n===void 0||n instanceof Rt&&n.id!=s||n instanceof Oa)&&(this.emitBlurEvent(e,r,this.hoverObj.nodes[s]),delete this.hoverObj.nodes[s],i=!0);for(const s in this.hoverObj.edges)Object.prototype.hasOwnProperty.call(this.hoverObj.edges,s)&&(i===!0?(this.hoverObj.edges[s].hover=!1,delete this.hoverObj.edges[s]):(n===void 0||n instanceof Oa&&n.id!=s||n instanceof Rt&&!n.hover)&&(this.emitBlurEvent(e,r,this.hoverObj.edges[s]),delete this.hoverObj.edges[s],i=!0));if(n!==void 0){const s=Ht(this.hoverObj.edges).length,a=Ht(this.hoverObj.nodes).length,o=n instanceof Oa&&s===0&&a===0,c=n instanceof Rt&&s===0&&a===0;(i||o||c)&&(i=this.emitHoverEvent(e,r,n)),n instanceof Rt&&this.options.hoverConnectedEdges===!0&&this._hoverConnectedEdges(n)}i===!0&&this.body.emitter.emit("_requestRedraw")}commitWithoutEmitting(){this._selectionAccumulator.commit()}commitAndEmit(e,r){let n=!1;const i=this._selectionAccumulator.commit(),s={nodes:i.nodes.previous,edges:i.edges.previous};i.edges.deleted.length>0&&(this.generateClickEvent("deselectEdge",r,e,s),n=!0),i.nodes.deleted.length>0&&(this.generateClickEvent("deselectNode",r,e,s),n=!0),i.nodes.added.length>0&&(this.generateClickEvent("selectNode",r,e),n=!0),i.edges.added.length>0&&(this.generateClickEvent("selectEdge",r,e),n=!0),n===!0&&this.generateClickEvent("select",r,e)}getSelection(){return{nodes:this.getSelectedNodeIds(),edges:this.getSelectedEdgeIds()}}getSelectedNodes(){return this._selectionAccumulator.getNodes()}getSelectedEdges(){return this._selectionAccumulator.getEdges()}getSelectedNodeIds(){var e;return qc(e=this._selectionAccumulator.getNodes()).call(e,r=>r.id)}getSelectedEdgeIds(){var e;return qc(e=this._selectionAccumulator.getEdges()).call(e,r=>r.id)}setSelection(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!e||!e.nodes&&!e.edges)throw new TypeError("Selection must be an object with nodes and/or edges properties");if((r.unselectAll||r.unselectAll===void 0)&&this.unselectAll(),e.nodes)for(const n of e.nodes){const i=this.body.nodes[n];if(!i)throw new RangeError('Node with id "'+n+'" not found');this.selectObject(i,r.highlightEdges)}if(e.edges)for(const n of e.edges){const i=this.body.edges[n];if(!i)throw new RangeError('Edge with id "'+n+'" not found');this.selectObject(i)}this.body.emitter.emit("_requestRedraw"),this._selectionAccumulator.commit()}selectNodes(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!e||e.length===void 0)throw"Selection must be an array with ids";this.setSelection({nodes:e},{highlightEdges:r})}selectEdges(e){if(!e||e.length===void 0)throw"Selection must be an array with ids";this.setSelection({edges:e})}updateSelection(){for(const e in this._selectionAccumulator.getNodes())Object.prototype.hasOwnProperty.call(this.body.nodes,e.id)||this._selectionAccumulator.deleteNodes(e);for(const e in this._selectionAccumulator.getEdges())Object.prototype.hasOwnProperty.call(this.body.edges,e.id)||this._selectionAccumulator.deleteEdges(e)}getClickedItems(e){const r=this.canvas.DOMtoCanvas(e),n=[],i=this.body.nodeIndices,s=this.body.nodes;for(let c=i.length-1;c>=0;c--){const d=s[i[c]].getItemsOnPoint(r);n.push.apply(n,d)}const a=this.body.edgeIndices,o=this.body.edges;for(let c=a.length-1;c>=0;c--){const d=o[a[c]].getItemsOnPoint(r);n.push.apply(n,d)}return n}}var k9={},t2,$9;function Wxe(){if($9)return t2;$9=1;var t=mu(),e=Math.floor,r=function(n,i){var s=n.length;if(s<8)for(var a=1,o,c;a<s;){for(c=a,o=n[a];c&&i(n[c-1],o)>0;)n[c]=n[--c];c!==a++&&(n[c]=o)}else for(var u=e(s/2),d=r(t(n,0,u),i),h=r(t(n,u),i),f=d.length,p=h.length,v=0,y=0;v<f||y<p;)n[v+y]=v<f&&y<p?i(d[v],h[y])<=0?d[v++]:h[y++]:v<f?d[v++]:h[y++];return n};return t2=r,t2}var r2,D9;function Vxe(){if(D9)return r2;D9=1;var t=lu(),e=t.match(/firefox\/(\d+)/i);return r2=!!e&&+e[1],r2}var n2,M9;function Hxe(){if(M9)return n2;M9=1;var t=lu();return n2=/MSIE|Trident/.test(t),n2}var i2,q9;function Kxe(){if(q9)return i2;q9=1;var t=lu(),e=t.match(/AppleWebKit\/(\d+)\./);return i2=!!e&&+e[1],i2}var A9;function Gxe(){if(A9)return k9;A9=1;var t=Ne(),e=et(),r=As(),n=An(),i=Fs(),s=rQ(),a=ni(),o=Xe(),c=Wxe(),u=xu(),d=Vxe(),h=Hxe(),f=Dh(),p=Kxe(),v=[],y=e(v.sort),x=e(v.push),g=o(function(){v.sort(void 0)}),m=o(function(){v.sort(null)}),w=u("sort"),b=!o(function(){if(f)return f<70;if(!(d&&d>3)){if(h)return!0;if(p)return p<603;var j="",S,C,N,O;for(S=65;S<76;S++){switch(C=String.fromCharCode(S),S){case 66:case 69:case 70:case 72:N=3;break;case 68:case 71:N=4;break;default:N=2}for(O=0;O<47;O++)v.push({k:C+O,v:N})}for(v.sort(function(T,I){return I.v-T.v}),O=0;O<v.length;O++)C=v[O].k.charAt(0),j.charAt(j.length-1)!==C&&(j+=C);return j!=="DGBEFHACIJK"}}),_=g||!m||!w||!b,E=function(j){return function(S,C){return C===void 0?-1:S===void 0?1:j!==void 0?+j(S,C)||0:a(S)>a(C)?1:-1}};return t({target:"Array",proto:!0,forced:_},{sort:function(S){S!==void 0&&r(S);var C=n(this);if(b)return S===void 0?y(C):y(C,S);var N=[],O=i(C),T,I;for(I=0;I<O;I++)I in C&&x(N,C[I]);for(c(N,E(S)),T=i(N),I=0;I<T;)C[I]=N[I++];for(;I<O;)s(C,I++);return C}}),k9}var s2,F9;function Yxe(){if(F9)return s2;F9=1,Gxe();var t=kr();return s2=t("Array","sort"),s2}var a2,L9;function Qxe(){if(L9)return a2;L9=1;var t=cr(),e=Yxe(),r=Array.prototype;return a2=function(n){var i=n.sort;return n===r||t(r,n)&&i===r.sort?e:i},a2}var o2,B9;function Xxe(){if(B9)return o2;B9=1;var t=Qxe();return o2=t,o2}var l2,z9;function Jxe(){return z9||(z9=1,l2=Xxe()),l2}var Zxe=Jxe(),ic=ke(Zxe),U9={},c2,W9;function e1e(){if(W9)return c2;W9=1;var t=As(),e=An(),r=Vm(),n=Fs(),i=TypeError,s="Reduce of empty array with no initial value",a=function(o){return function(c,u,d,h){var f=e(c),p=r(f),v=n(f);if(t(u),v===0&&d<2)throw new i(s);var y=o?v-1:0,x=o?-1:1;if(d<2)for(;;){if(y in p){h=p[y],y+=x;break}if(y+=x,o?y<0:v<=y)throw new i(s)}for(;o?y>=0:v>y;y+=x)y in p&&(h=u(h,p[y],y,f));return h}};return c2={left:a(!1),right:a(!0)},c2}var u2,V9;function t1e(){if(V9)return u2;V9=1;var t=iQ();return u2=t==="NODE",u2}var H9;function r1e(){if(H9)return U9;H9=1;var t=Ne(),e=e1e().left,r=xu(),n=Dh(),i=t1e(),s=!i&&n>79&&n<83,a=s||!r("reduce");return t({target:"Array",proto:!0,forced:a},{reduce:function(c){var u=arguments.length;return e(this,c,u,u>1?arguments[1]:void 0)}}),U9}var d2,K9;function n1e(){if(K9)return d2;K9=1,r1e();var t=kr();return d2=t("Array","reduce"),d2}var h2,G9;function i1e(){if(G9)return h2;G9=1;var t=cr(),e=n1e(),r=Array.prototype;return h2=function(n){var i=n.reduce;return n===r||t(r,n)&&i===r.reduce?e:i},h2}var f2,Y9;function s1e(){if(Y9)return f2;Y9=1;var t=i1e();return f2=t,f2}var p2,Q9;function a1e(){return Q9||(Q9=1,p2=s1e()),p2}var o1e=a1e(),sX=ke(o1e);class aX{abstract(){throw new Error("Can't instantiate abstract class!")}fake_use(){}curveType(){return this.abstract()}getPosition(e){return this.fake_use(e),this.abstract()}setPosition(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;this.fake_use(e,r,n),this.abstract()}getTreeSize(e){return this.fake_use(e),this.abstract()}sort(e){this.fake_use(e),this.abstract()}fix(e,r){this.fake_use(e,r),this.abstract()}shift(e,r){this.fake_use(e,r),this.abstract()}}class l1e extends aX{constructor(e){super(),this.layout=e}curveType(){return"horizontal"}getPosition(e){return e.x}setPosition(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;n!==void 0&&this.layout.hierarchical.addToOrdering(e,n),e.x=r}getTreeSize(e){const r=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,e);return{min:r.min_x,max:r.max_x}}sort(e){ic(e).call(e,function(r,n){return r.x-n.x})}fix(e,r){e.y=this.layout.options.hierarchical.levelSeparation*r,e.options.fixed.y=!0}shift(e,r){this.layout.body.nodes[e].x+=r}}class c1e extends aX{constructor(e){super(),this.layout=e}curveType(){return"vertical"}getPosition(e){return e.y}setPosition(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;n!==void 0&&this.layout.hierarchical.addToOrdering(e,n),e.y=r}getTreeSize(e){const r=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,e);return{min:r.min_y,max:r.max_y}}sort(e){ic(e).call(e,function(r,n){return r.y-n.y})}fix(e,r){e.x=this.layout.options.hierarchical.levelSeparation*r,e.options.fixed.x=!0}shift(e,r){this.layout.body.nodes[e].y+=r}}var X9={},J9;function u1e(){if(J9)return X9;J9=1;var t=Ne(),e=Ua().every,r=xu(),n=r("every");return t({target:"Array",proto:!0,forced:!n},{every:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),X9}var m2,Z9;function d1e(){if(Z9)return m2;Z9=1,u1e();var t=kr();return m2=t("Array","every"),m2}var v2,eW;function h1e(){if(eW)return v2;eW=1;var t=cr(),e=d1e(),r=Array.prototype;return v2=function(n){var i=n.every;return n===r||t(r,n)&&i===r.every?e:i},v2}var g2,tW;function f1e(){if(tW)return g2;tW=1;var t=h1e();return g2=t,g2}var y2,rW;function p1e(){return rW||(rW=1,y2=f1e()),y2}var m1e=p1e(),oX=ke(m1e);function v1e(t,e){const r=new Js;return gt(t).call(t,n=>{var i;gt(i=n.edges).call(i,s=>{s.connected&&r.add(s)})}),gt(r).call(r,n=>{const i=n.from.id,s=n.to.id;e[i]==null&&(e[i]=0),(e[s]==null||e[i]>=e[s])&&(e[s]=e[i]+1)}),e}function g1e(t){return lX(e=>{var r,n;return oX(r=hn(n=e.edges).call(n,i=>t.has(i.toId))).call(r,i=>i.to===e)},(e,r)=>r>e,"from",t)}function y1e(t){return lX(e=>{var r,n;return oX(r=hn(n=e.edges).call(n,i=>t.has(i.toId))).call(r,i=>i.from===e)},(e,r)=>r<e,"to",t)}function lX(t,e,r,n){var i;const s=No(null),a=sX(i=[...JQ(n).call(n)]).call(i,(h,f)=>h+1+f.edges.length,0),o=r+"Id",c=r==="to"?1:-1;for(const[h,f]of n){if(!n.has(h)||!t(f))continue;s[h]=0;const p=[f];let v=0,y;for(;y=p.pop();){var u,d;if(!n.has(h))continue;const x=s[y.id]+c;if(gt(u=hn(d=y.edges).call(d,g=>g.connected&&g.to!==g.from&&g[r]!==y&&n.has(g.toId)&&n.has(g.fromId))).call(u,g=>{const m=g[o],w=s[m];(w==null||e(x,w))&&(s[m]=x,p.push(g[r]))}),v>a)return v1e(n,s);++v}}return s}class b1e{constructor(){this.childrenReference={},this.parentReference={},this.trees={},this.distributionOrdering={},this.levels={},this.distributionIndex={},this.isTree=!1,this.treeIndex=-1}addRelation(e,r){this.childrenReference[e]===void 0&&(this.childrenReference[e]=[]),this.childrenReference[e].push(r),this.parentReference[r]===void 0&&(this.parentReference[r]=[]),this.parentReference[r].push(e)}checkIfTree(){for(const e in this.parentReference)if(this.parentReference[e].length>1){this.isTree=!1;return}this.isTree=!0}numTrees(){return this.treeIndex+1}setTreeIndex(e,r){r!==void 0&&this.trees[e.id]===void 0&&(this.trees[e.id]=r,this.treeIndex=Math.max(r,this.treeIndex))}ensureLevel(e){this.levels[e]===void 0&&(this.levels[e]=0)}getMaxLevel(e){const r={},n=i=>{if(r[i]!==void 0)return r[i];let s=this.levels[i];if(this.childrenReference[i]){const a=this.childrenReference[i];if(a.length>0)for(let o=0;o<a.length;o++)s=Math.max(s,n(a[o]))}return r[i]=s,s};return n(e)}levelDownstream(e,r){this.levels[r.id]===void 0&&(this.levels[e.id]===void 0&&(this.levels[e.id]=0),this.levels[r.id]=this.levels[e.id]+1)}setMinLevelToZero(){var e;const r=new BP;let n=0;const i=ic(e=[...new Js($me(this.levels))]).call(e,(s,a)=>s-a);for(const s of i)r.set(s,n++);for(const s in this.levels)Object.prototype.hasOwnProperty.call(this.levels,s)&&(this.levels[s]=r.get(this.levels[s]))}getTreeSize(e,r){let n=1e9,i=-1e9,s=1e9,a=-1e9;for(const o in this.trees)if(Object.prototype.hasOwnProperty.call(this.trees,o)&&this.trees[o]===r){const c=e[o];n=Math.min(c.x,n),i=Math.max(c.x,i),s=Math.min(c.y,s),a=Math.max(c.y,a)}return{min_x:n,max_x:i,min_y:s,max_y:a}}hasSameParent(e,r){const n=this.parentReference[e.id],i=this.parentReference[r.id];if(n===void 0||i===void 0)return!1;for(let s=0;s<n.length;s++)for(let a=0;a<i.length;a++)if(n[s]==i[a])return!0;return!1}inSameSubNetwork(e,r){return this.trees[e.id]===this.trees[r.id]}getLevels(){return Ht(this.distributionOrdering)}addToOrdering(e,r){this.distributionOrdering[r]===void 0&&(this.distributionOrdering[r]=[]);let n=!1;const i=this.distributionOrdering[r];for(const s in i)if(i[s]===e){n=!0;break}n||(this.distributionOrdering[r].push(e),this.distributionIndex[e.id]=this.distributionOrdering[r].length-1)}}class x1e{constructor(e){this.body=e,this._resetRNG(Math.random()+":"+Kp()),this.setPhysics=!1,this.options={},this.optionsBackup={physics:{}},this.defaultOptions={randomSeed:void 0,improvedLayout:!0,clusterThreshold:150,hierarchical:{enabled:!1,levelSeparation:150,nodeSpacing:100,treeSpacing:200,blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:"UD",sortMethod:"hubsize"}},sr(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){this.body.emitter.on("_dataChanged",()=>{this.setupHierarchicalLayout()}),this.body.emitter.on("_dataLoaded",()=>{this.layoutNetwork()}),this.body.emitter.on("_resetHierarchicalLayout",()=>{this.setupHierarchicalLayout()}),this.body.emitter.on("_adjustEdgesForHierarchicalLayout",()=>{if(this.options.hierarchical.enabled!==!0)return;const e=this.direction.curveType();this.body.emitter.emit("_forceDisableDynamicCurves",e,!1)})}setOptions(e,r){if(e!==void 0){const n=this.options.hierarchical,i=n.enabled;if(_u(["randomSeed","improvedLayout","clusterThreshold"],this.options,e),Wn(this.options,e,"hierarchical"),e.randomSeed!==void 0&&this._resetRNG(e.randomSeed),n.enabled===!0)return i===!0&&this.body.emitter.emit("refresh",!0),n.direction==="RL"||n.direction==="DU"?n.levelSeparation>0&&(n.levelSeparation*=-1):n.levelSeparation<0&&(n.levelSeparation*=-1),this.setDirectionStrategy(),this.body.emitter.emit("_resetHierarchicalLayout"),this.adaptAllOptionsForHierarchicalLayout(r);if(i===!0)return this.body.emitter.emit("refresh"),_t(r,this.optionsBackup)}return r}_resetRNG(e){this.initialRandomSeed=e,this._rng=iv(this.initialRandomSeed)}adaptAllOptionsForHierarchicalLayout(e){if(this.options.hierarchical.enabled===!0){const r=this.optionsBackup.physics;e.physics===void 0||e.physics===!0?(e.physics={enabled:r.enabled===void 0?!0:r.enabled,solver:"hierarchicalRepulsion"},r.enabled=r.enabled===void 0?!0:r.enabled,r.solver=r.solver||"barnesHut"):typeof e.physics=="object"?(r.enabled=e.physics.enabled===void 0?!0:e.physics.enabled,r.solver=e.physics.solver||"barnesHut",e.physics.solver="hierarchicalRepulsion"):e.physics!==!1&&(r.solver="barnesHut",e.physics={solver:"hierarchicalRepulsion"});let n=this.direction.curveType();if(e.edges===void 0)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},e.edges={smooth:!1};else if(e.edges.smooth===void 0)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},e.edges.smooth=!1;else if(typeof e.edges.smooth=="boolean")this.optionsBackup.edges={smooth:e.edges.smooth},e.edges.smooth={enabled:e.edges.smooth,type:n};else{const i=e.edges.smooth;i.type!==void 0&&i.type!=="dynamic"&&(n=i.type),this.optionsBackup.edges={smooth:{enabled:i.enabled===void 0?!0:i.enabled,type:i.type===void 0?"dynamic":i.type,roundness:i.roundness===void 0?.5:i.roundness,forceDirection:i.forceDirection===void 0?!1:i.forceDirection}},e.edges.smooth={enabled:i.enabled===void 0?!0:i.enabled,type:n,roundness:i.roundness===void 0?.5:i.roundness,forceDirection:i.forceDirection===void 0?!1:i.forceDirection}}this.body.emitter.emit("_forceDisableDynamicCurves",n)}return e}positionInitially(e){if(this.options.hierarchical.enabled!==!0){this._resetRNG(this.initialRandomSeed);const r=e.length+50;for(let n=0;n<e.length;n++){const i=e[n],s=2*Math.PI*this._rng();i.x===void 0&&(i.x=r*Math.cos(s)),i.y===void 0&&(i.y=r*Math.sin(s))}}}layoutNetwork(){if(this.options.hierarchical.enabled!==!0&&this.options.improvedLayout===!0){const e=this.body.nodeIndices;let r=0;for(let n=0;n<e.length;n++)this.body.nodes[e[n]].predefinedPosition===!0&&(r+=1);if(r<.5*e.length){let i=0;const s=this.options.clusterThreshold,a={clusterNodeProperties:{shape:"ellipse",label:"",group:"",font:{multi:!1}},clusterEdgeProperties:{label:"",font:{multi:!1},smooth:{enabled:!1}}};if(e.length>s){const c=e.length;for(;e.length>s&&i<=10;){i+=1;const u=e.length;i%3===0?this.body.modules.clustering.clusterBridges(a):this.body.modules.clustering.clusterOutliers(a);const d=e.length;if(u==d&&i%3!==0){this._declusterAll(),this.body.emitter.emit("_layoutFailed"),console.info("This network could not be positioned by this version of the improved layout algorithm. Please disable improvedLayout for better performance.");return}}this.body.modules.kamadaKawai.setOptions({springLength:Math.max(150,2*c)})}i>10&&console.info("The clustering didn't succeed within the amount of interations allowed, progressing with partial result."),this.body.modules.kamadaKawai.solve(e,this.body.edgeIndices,!0),this._shiftToCenter();const o=70;for(let c=0;c<e.length;c++){const u=this.body.nodes[e[c]];u.predefinedPosition===!1&&(u.x+=(.5-this._rng())*o,u.y+=(.5-this._rng())*o)}this._declusterAll(),this.body.emitter.emit("_repositionBezierNodes")}}}_shiftToCenter(){const e=Yr.getRangeCore(this.body.nodes,this.body.nodeIndices),r=Yr.findCenter(e);for(let n=0;n<this.body.nodeIndices.length;n++){const i=this.body.nodes[this.body.nodeIndices[n]];i.x-=r.x,i.y-=r.y}}_declusterAll(){let e=!0;for(;e===!0;){e=!1;for(let r=0;r<this.body.nodeIndices.length;r++)this.body.nodes[this.body.nodeIndices[r]].isCluster===!0&&(e=!0,this.body.modules.clustering.openCluster(this.body.nodeIndices[r],{},!1));e===!0&&this.body.emitter.emit("_dataChanged")}}getSeed(){return this.initialRandomSeed}setupHierarchicalLayout(){if(this.options.hierarchical.enabled===!0&&this.body.nodeIndices.length>0){let e,r,n=!1,i=!1;this.lastNodeOnLevel={},this.hierarchical=new b1e;for(r in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,r)&&(e=this.body.nodes[r],e.options.level!==void 0?(n=!0,this.hierarchical.levels[r]=e.options.level):i=!0);if(i===!0&&n===!0)throw new Error("To use the hierarchical layout, nodes require either no predefined levels or levels have to be defined for all nodes.");{if(i===!0){const a=this.options.hierarchical.sortMethod;a==="hubsize"?this._determineLevelsByHubsize():a==="directed"?this._determineLevelsDirected():a==="custom"&&this._determineLevelsCustomCallback()}for(const a in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,a)&&this.hierarchical.ensureLevel(a);const s=this._getDistribution();this._generateMap(),this._placeNodesByHierarchy(s),this._condenseHierarchy(),this._shiftToCenter()}}}_condenseHierarchy(){var e=this;let r=!1;const n={},i=()=>{const g=a();let m=0;for(let w=0;w<g.length-1;w++){const b=g[w].max-g[w+1].min;m+=b+this.options.hierarchical.treeSpacing,s(w+1,m)}},s=(g,m)=>{const w=this.hierarchical.trees;for(const b in w)Object.prototype.hasOwnProperty.call(w,b)&&w[b]===g&&this.direction.shift(b,m)},a=()=>{const g=[];for(let m=0;m<this.hierarchical.numTrees();m++)g.push(this.direction.getTreeSize(m));return g},o=(g,m)=>{if(!m[g.id]&&(m[g.id]=!0,this.hierarchical.childrenReference[g.id])){const w=this.hierarchical.childrenReference[g.id];if(w.length>0)for(let b=0;b<w.length;b++)o(this.body.nodes[w[b]],m)}},c=function(g){let m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e9,w=1e9,b=1e9,_=1e9,E=-1e9;for(const j in g)if(Object.prototype.hasOwnProperty.call(g,j)){const S=e.body.nodes[j],C=e.hierarchical.levels[S.id],N=e.direction.getPosition(S),[O,T]=e._getSpaceAroundNode(S,g);w=Math.min(O,w),b=Math.min(T,b),C<=m&&(_=Math.min(N,_),E=Math.max(N,E))}return[_,E,w,b]},u=(g,m)=>{const w=this.hierarchical.getMaxLevel(g.id),b=this.hierarchical.getMaxLevel(m.id);return Math.min(w,b)},d=(g,m,w)=>{const b=this.hierarchical;for(let _=0;_<m.length;_++){const E=m[_],j=b.distributionOrdering[E];if(j.length>1)for(let S=0;S<j.length-1;S++){const C=j[S],N=j[S+1];b.hasSameParent(C,N)&&b.inSameSubNetwork(C,N)&&g(C,N,w)}}},h=function(g,m){let w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const b=e.direction.getPosition(g),_=e.direction.getPosition(m),E=Math.abs(_-b),j=e.options.hierarchical.nodeSpacing;if(E>j){const S={},C={};o(g,S),o(m,C);const N=u(g,m),O=c(S,N),T=c(C,N),I=O[1],D=T[0],F=T[2];if(Math.abs(I-D)>j){let V=I-D+j;V<-F+j&&(V=-F+j),V<0&&(e._shiftBlock(m.id,V),r=!0,w===!0&&e._centerParent(m))}}},f=(g,m)=>{const w=m.id,b=m.edges,_=this.hierarchical.levels[m.id],E=this.options.hierarchical.levelSeparation*this.options.hierarchical.levelSeparation,j={},S=[];for(let F=0;F<b.length;F++){const M=b[F];if(M.toId!=M.fromId){const V=M.toId==w?M.from:M.to;j[b[F].id]=V,this.hierarchical.levels[V.id]<_&&S.push(M)}}const C=(F,M)=>{let V=0;for(let q=0;q<M.length;q++)if(j[M[q].id]!==void 0){const H=this.direction.getPosition(j[M[q].id])-F;V+=H/Math.sqrt(H*H+E)}return V},N=(F,M)=>{let V=0;for(let q=0;q<M.length;q++)if(j[M[q].id]!==void 0){const H=this.direction.getPosition(j[M[q].id])-F;V-=E*Math.pow(H*H+E,-1.5)}return V},O=(F,M)=>{let V=this.direction.getPosition(m);const q={};for(let H=0;H<F;H++){const B=C(V,M),W=N(V,M),K=40,ue=Math.max(-K,Math.min(K,Math.round(B/W)));if(V=V-ue,q[V]!==void 0)break;q[V]=H}return V},T=F=>{const M=this.direction.getPosition(m);if(n[m.id]===void 0){const K={};o(m,K),n[m.id]=K}const V=c(n[m.id]),q=V[2],H=V[3],B=F-M;let W=0;B>0?W=Math.min(B,H-this.options.hierarchical.nodeSpacing):B<0&&(W=-Math.min(-B,q-this.options.hierarchical.nodeSpacing)),W!=0&&(this._shiftBlock(m.id,W),r=!0)},I=F=>{const M=this.direction.getPosition(m),[V,q]=this._getSpaceAroundNode(m),H=F-M;let B=M;H>0?B=Math.min(M+(q-this.options.hierarchical.nodeSpacing),F):H<0&&(B=Math.max(M-(V-this.options.hierarchical.nodeSpacing),F)),B!==M&&(this.direction.setPosition(m,B),r=!0)};let D=O(g,S);T(D),D=O(g,b),I(D)},p=g=>{let m=this.hierarchical.getLevels();m=Eo(m).call(m);for(let w=0;w<g;w++){r=!1;for(let b=0;b<m.length;b++){const _=m[b],E=this.hierarchical.distributionOrdering[_];for(let j=0;j<E.length;j++)f(1e3,E[j])}if(r!==!0)break}},v=g=>{let m=this.hierarchical.getLevels();m=Eo(m).call(m);for(let w=0;w<g&&(r=!1,d(h,m,!0),r===!0);w++);},y=()=>{for(const g in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,g)&&this._centerParent(this.body.nodes[g])},x=()=>{let g=this.hierarchical.getLevels();g=Eo(g).call(g);for(let m=0;m<g.length;m++){const w=g[m],b=this.hierarchical.distributionOrdering[w];for(let _=0;_<b.length;_++)this._centerParent(b[_])}};this.options.hierarchical.blockShifting===!0&&(v(5),y()),this.options.hierarchical.edgeMinimization===!0&&p(20),this.options.hierarchical.parentCentralization===!0&&x(),i()}_getSpaceAroundNode(e,r){let n=!0;r===void 0&&(n=!1);const i=this.hierarchical.levels[e.id];if(i!==void 0){const s=this.hierarchical.distributionIndex[e.id],a=this.direction.getPosition(e),o=this.hierarchical.distributionOrdering[i];let c=1e9,u=1e9;if(s!==0){const d=o[s-1];if(n===!0&&r[d.id]===void 0||n===!1){const h=this.direction.getPosition(d);c=a-h}}if(s!=o.length-1){const d=o[s+1];if(n===!0&&r[d.id]===void 0||n===!1){const h=this.direction.getPosition(d);u=Math.min(u,h-a)}}return[c,u]}else return[0,0]}_centerParent(e){if(this.hierarchical.parentReference[e.id]){const r=this.hierarchical.parentReference[e.id];for(let n=0;n<r.length;n++){const i=r[n],s=this.body.nodes[i],a=this.hierarchical.childrenReference[i];if(a!==void 0){const o=this._getCenterPosition(a),c=this.direction.getPosition(s),[u,d]=this._getSpaceAroundNode(s),h=c-o;(h<0&&Math.abs(h)<d-this.options.hierarchical.nodeSpacing||h>0&&Math.abs(h)<u-this.options.hierarchical.nodeSpacing)&&this.direction.setPosition(s,o)}}}}_placeNodesByHierarchy(e){this.positionedNodes={};for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r;let i=Ht(e[n]);i=this._indexArrayToNodes(i),ic(r=this.direction).call(r,i);let s=0;for(let a=0;a<i.length;a++){const o=i[a];if(this.positionedNodes[o.id]===void 0){const c=this.options.hierarchical.nodeSpacing;let u=c*s;s>0&&(u=this.direction.getPosition(i[a-1])+c),this.direction.setPosition(o,u,n),this._validatePositionAndContinue(o,n,u),s++}}}}_placeBranchNodes(e,r){var n;const i=this.hierarchical.childrenReference[e];if(i===void 0)return;const s=[];for(let o=0;o<i.length;o++)s.push(this.body.nodes[i[o]]);ic(n=this.direction).call(n,s);for(let o=0;o<s.length;o++){const c=s[o],u=this.hierarchical.levels[c.id];if(u>r&&this.positionedNodes[c.id]===void 0){const d=this.options.hierarchical.nodeSpacing;let h;o===0?h=this.direction.getPosition(this.body.nodes[e]):h=this.direction.getPosition(s[o-1])+d,this.direction.setPosition(c,h,u),this._validatePositionAndContinue(c,u,h)}else return}const a=this._getCenterPosition(s);this.direction.setPosition(this.body.nodes[e],a,r)}_validatePositionAndContinue(e,r,n){if(this.hierarchical.isTree){if(this.lastNodeOnLevel[r]!==void 0){const i=this.direction.getPosition(this.body.nodes[this.lastNodeOnLevel[r]]);if(n-i<this.options.hierarchical.nodeSpacing){const s=i+this.options.hierarchical.nodeSpacing-n,a=this._findCommonParent(this.lastNodeOnLevel[r],e.id);this._shiftBlock(a.withChild,s)}}this.lastNodeOnLevel[r]=e.id,this.positionedNodes[e.id]=!0,this._placeBranchNodes(e.id,r)}}_indexArrayToNodes(e){const r=[];for(let n=0;n<e.length;n++)r.push(this.body.nodes[e[n]]);return r}_getDistribution(){const e={};let r,n;for(r in this.body.nodes)if(Object.prototype.hasOwnProperty.call(this.body.nodes,r)){n=this.body.nodes[r];const i=this.hierarchical.levels[r]===void 0?0:this.hierarchical.levels[r];this.direction.fix(n,i),e[i]===void 0&&(e[i]={}),e[i][r]=n}return e}_getActiveEdges(e){const r=[];return Ke(e.edges,n=>{var i;ht(i=this.body.edgeIndices).call(i,n.id)!==-1&&r.push(n)}),r}_getHubSizes(){const e={},r=this.body.nodeIndices;Ke(r,i=>{const s=this.body.nodes[i],a=this._getActiveEdges(s).length;e[a]=!0});const n=[];return Ke(e,i=>{n.push(Number(i))}),ic(n).call(n,function(i,s){return s-i}),n}_determineLevelsByHubsize(){const e=(n,i)=>{this.hierarchical.levelDownstream(n,i)},r=this._getHubSizes();for(let n=0;n<r.length;++n){const i=r[n];if(i===0)break;Ke(this.body.nodeIndices,s=>{const a=this.body.nodes[s];i===this._getActiveEdges(a).length&&this._crawlNetwork(e,s)})}}_determineLevelsCustomCallback(){const r=function(i,s,a){},n=(i,s,a)=>{let o=this.hierarchical.levels[i.id];o===void 0&&(o=this.hierarchical.levels[i.id]=1e5);const c=r(Yr.cloneOptions(i,"node"),Yr.cloneOptions(s,"node"),Yr.cloneOptions(a,"edge"));this.hierarchical.levels[s.id]=o+c};this._crawlNetwork(n),this.hierarchical.setMinLevelToZero()}_determineLevelsDirected(){var e;const r=sX(e=this.body.nodeIndices).call(e,(n,i)=>(n.set(i,this.body.nodes[i]),n),new BP);this.options.hierarchical.shakeTowards==="roots"?this.hierarchical.levels=y1e(r):this.hierarchical.levels=g1e(r),this.hierarchical.setMinLevelToZero()}_generateMap(){const e=(r,n)=>{this.hierarchical.levels[n.id]>this.hierarchical.levels[r.id]&&this.hierarchical.addRelation(r.id,n.id)};this._crawlNetwork(e),this.hierarchical.checkIfTree()}_crawlNetwork(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){},r=arguments.length>1?arguments[1]:void 0;const n={},i=(s,a)=>{if(n[s.id]===void 0){this.hierarchical.setTreeIndex(s,a),n[s.id]=!0;let o;const c=this._getActiveEdges(s);for(let u=0;u<c.length;u++){const d=c[u];d.connected===!0&&(d.toId==s.id?o=d.from:o=d.to,s.id!=o.id&&(e(s,o,d),i(o,a)))}}};if(r===void 0){let s=0;for(let a=0;a<this.body.nodeIndices.length;a++){const o=this.body.nodeIndices[a];if(n[o]===void 0){const c=this.body.nodes[o];i(c,s),s+=1}}}else{const s=this.body.nodes[r];if(s===void 0){console.error("Node not found:",r);return}i(s)}}_shiftBlock(e,r){const n={},i=s=>{if(n[s])return;n[s]=!0,this.direction.shift(s,r);const a=this.hierarchical.childrenReference[s];if(a!==void 0)for(let o=0;o<a.length;o++)i(a[o])};i(e)}_findCommonParent(e,r){const n={},i=(a,o)=>{const c=this.hierarchical.parentReference[o];if(c!==void 0)for(let u=0;u<c.length;u++){const d=c[u];a[d]=!0,i(a,d)}},s=(a,o)=>{const c=this.hierarchical.parentReference[o];if(c!==void 0)for(let u=0;u<c.length;u++){const d=c[u];if(a[d]!==void 0)return{foundParent:d,withChild:o};const h=s(a,d);if(h.foundParent!==null)return h}return{foundParent:null,withChild:o}};return i(n,e),s(n,r)}setDirectionStrategy(){this.options.hierarchical.direction==="UD"||this.options.hierarchical.direction==="DU"?this.direction=new l1e(this):this.direction=new c1e(this)}_getCenterPosition(e){let r=1e9,n=-1e9;for(let i=0;i<e.length;i++){let s;if(e[i].id!==void 0)s=e[i];else{const o=e[i];s=this.body.nodes[o]}const a=this.direction.getPosition(s);r=Math.min(r,a),n=Math.max(n,a)}return .5*(r+n)}}class w1e{constructor(e,r,n,i){var s,a;this.body=e,this.canvas=r,this.selectionHandler=n,this.interactionHandler=i,this.editMode=!1,this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0,this._domEventListenerCleanupQueue=[],this.temporaryUIFunctions={},this.temporaryEventFunctions=[],this.touchTime=0,this.temporaryIds={nodes:[],edges:[]},this.guiEnabled=!1,this.inMode=!1,this.selectedControlNode=void 0,this.options={},this.defaultOptions={enabled:!1,initiallyActive:!1,addNode:!0,addEdge:!0,editNode:void 0,editEdge:!0,deleteNode:!0,deleteEdge:!0,controlNodeStyle:{shape:"dot",size:6,color:{background:"#ff0000",border:"#3c3c3c",highlight:{background:"#07f968",border:"#3c3c3c"}},borderWidth:2,borderWidthSelected:2}},sr(this.options,this.defaultOptions),this.body.emitter.on("destroy",()=>{this._clean()}),this.body.emitter.on("_dataChanged",re(s=this._restore).call(s,this)),this.body.emitter.on("_resetData",re(a=this._restore).call(a,this))}_restore(){this.inMode!==!1&&(this.options.initiallyActive===!0?this.enableEditMode():this.disableEditMode())}setOptions(e,r,n){r!==void 0&&(r.locale!==void 0?this.options.locale=r.locale:this.options.locale=n.locale,r.locales!==void 0?this.options.locales=r.locales:this.options.locales=n.locales),e!==void 0&&(typeof e=="boolean"?this.options.enabled=e:(this.options.enabled=!0,_t(this.options,e)),this.options.initiallyActive===!0&&(this.editMode=!0),this._setup())}toggleEditMode(){this.editMode===!0?this.disableEditMode():this.enableEditMode()}enableEditMode(){this.editMode=!0,this._clean(),this.guiEnabled===!0&&(this.manipulationDiv.style.display="block",this.closeDiv.style.display="block",this.editModeDiv.style.display="none",this.showManipulatorToolbar())}disableEditMode(){this.editMode=!1,this._clean(),this.guiEnabled===!0&&(this.manipulationDiv.style.display="none",this.closeDiv.style.display="none",this.editModeDiv.style.display="block",this._createEditButton())}showManipulatorToolbar(){if(this._clean(),this.manipulationDOM={},this.guiEnabled===!0){var e,r;this.editMode=!0,this.manipulationDiv.style.display="block",this.closeDiv.style.display="block";const n=this.selectionHandler.getSelectedNodeCount(),i=this.selectionHandler.getSelectedEdgeCount(),s=n+i,a=this.options.locales[this.options.locale];let o=!1;this.options.addNode!==!1&&(this._createAddNodeButton(a),o=!0),this.options.addEdge!==!1&&(o===!0?this._createSeperator(1):o=!0,this._createAddEdgeButton(a)),n===1&&typeof this.options.editNode=="function"?(o===!0?this._createSeperator(2):o=!0,this._createEditNodeButton(a)):i===1&&n===0&&this.options.editEdge!==!1&&(o===!0?this._createSeperator(3):o=!0,this._createEditEdgeButton(a)),s!==0&&(n>0&&this.options.deleteNode!==!1?(o===!0&&this._createSeperator(4),this._createDeleteButton(a)):n===0&&this.options.deleteEdge!==!1&&(o===!0&&this._createSeperator(4),this._createDeleteButton(a))),this._bindElementEvents(this.closeDiv,re(e=this.toggleEditMode).call(e,this)),this._temporaryBindEvent("select",re(r=this.showManipulatorToolbar).call(r,this))}this.body.emitter.emit("_redraw")}addNodeMode(){var e;if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="addNode",this.guiEnabled===!0){var r;const n=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(n),this._createSeperator(),this._createDescription(n.addDescription||this.options.locales.en.addDescription),this._bindElementEvents(this.closeDiv,re(r=this.toggleEditMode).call(r,this))}this._temporaryBindEvent("click",re(e=this._performAddNode).call(e,this))}editNode(){this.editMode!==!0&&this.enableEditMode(),this._clean();const e=this.selectionHandler.getSelectedNodes()[0];if(e!==void 0)if(this.inMode="editNode",typeof this.options.editNode=="function")if(e.isCluster!==!0){const r=_t({},e.options,!1);if(r.x=e.x,r.y=e.y,this.options.editNode.length===2)this.options.editNode(r,n=>{n!=null&&this.inMode==="editNode"&&this.body.data.nodes.getDataSet().update(n),this.showManipulatorToolbar()});else throw new Error("The function for edit does not support two arguments (data, callback)")}else alert(this.options.locales[this.options.locale].editClusterError||this.options.locales.en.editClusterError);else throw new Error("No function has been configured to handle the editing of nodes.");else this.showManipulatorToolbar()}addEdgeMode(){var e,r,n,i,s;if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="addEdge",this.guiEnabled===!0){var a;const o=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(o),this._createSeperator(),this._createDescription(o.edgeDescription||this.options.locales.en.edgeDescription),this._bindElementEvents(this.closeDiv,re(a=this.toggleEditMode).call(a,this))}this._temporaryBindUI("onTouch",re(e=this._handleConnect).call(e,this)),this._temporaryBindUI("onDragEnd",re(r=this._finishConnect).call(r,this)),this._temporaryBindUI("onDrag",re(n=this._dragControlNode).call(n,this)),this._temporaryBindUI("onRelease",re(i=this._finishConnect).call(i,this)),this._temporaryBindUI("onDragStart",re(s=this._dragStartEdge).call(s,this)),this._temporaryBindUI("onHold",()=>{})}editEdgeMode(){if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="editEdge",typeof this.options.editEdge=="object"&&typeof this.options.editEdge.editWithoutDrag=="function"&&(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdgeIds()[0],this.edgeBeingEditedId!==void 0)){const a=this.body.edges[this.edgeBeingEditedId];this._performEditEdge(a.from.id,a.to.id);return}if(this.guiEnabled===!0){var e;const a=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(a),this._createSeperator(),this._createDescription(a.editEdgeDescription||this.options.locales.en.editEdgeDescription),this._bindElementEvents(this.closeDiv,re(e=this.toggleEditMode).call(e,this))}if(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdgeIds()[0],this.edgeBeingEditedId!==void 0){var r,n,i,s;const a=this.body.edges[this.edgeBeingEditedId],o=this._getNewTargetNode(a.from.x,a.from.y),c=this._getNewTargetNode(a.to.x,a.to.y);this.temporaryIds.nodes.push(o.id),this.temporaryIds.nodes.push(c.id),this.body.nodes[o.id]=o,this.body.nodeIndices.push(o.id),this.body.nodes[c.id]=c,this.body.nodeIndices.push(c.id),this._temporaryBindUI("onTouch",re(r=this._controlNodeTouch).call(r,this)),this._temporaryBindUI("onTap",()=>{}),this._temporaryBindUI("onHold",()=>{}),this._temporaryBindUI("onDragStart",re(n=this._controlNodeDragStart).call(n,this)),this._temporaryBindUI("onDrag",re(i=this._controlNodeDrag).call(i,this)),this._temporaryBindUI("onDragEnd",re(s=this._controlNodeDragEnd).call(s,this)),this._temporaryBindUI("onMouseMove",()=>{}),this._temporaryBindEvent("beforeDrawing",u=>{const d=a.edgeType.findBorderPositions(u);o.selected===!1&&(o.x=d.from.x,o.y=d.from.y),c.selected===!1&&(c.x=d.to.x,c.y=d.to.y)}),this.body.emitter.emit("_redraw")}else this.showManipulatorToolbar()}deleteSelected(){this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="delete";const e=this.selectionHandler.getSelectedNodeIds(),r=this.selectionHandler.getSelectedEdgeIds();let n;if(e.length>0){for(let i=0;i<e.length;i++)if(this.body.nodes[e[i]].isCluster===!0){alert(this.options.locales[this.options.locale].deleteClusterError||this.options.locales.en.deleteClusterError);return}typeof this.options.deleteNode=="function"&&(n=this.options.deleteNode)}else r.length>0&&typeof this.options.deleteEdge=="function"&&(n=this.options.deleteEdge);if(typeof n=="function"){const i={nodes:e,edges:r};if(n.length===2)n(i,s=>{s!=null&&this.inMode==="delete"?(this.body.data.edges.getDataSet().remove(s.edges),this.body.data.nodes.getDataSet().remove(s.nodes),this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar()):(this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar())});else throw new Error("The function for delete does not support two arguments (data, callback)")}else this.body.data.edges.getDataSet().remove(r),this.body.data.nodes.getDataSet().remove(e),this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar()}_setup(){this.options.enabled===!0?(this.guiEnabled=!0,this._createWrappers(),this.editMode===!1?this._createEditButton():this.showManipulatorToolbar()):(this._removeManipulationDOM(),this.guiEnabled=!1)}_createWrappers(){if(this.manipulationDiv===void 0&&(this.manipulationDiv=document.createElement("div"),this.manipulationDiv.className="vis-manipulation",this.editMode===!0?this.manipulationDiv.style.display="block":this.manipulationDiv.style.display="none",this.canvas.frame.appendChild(this.manipulationDiv)),this.editModeDiv===void 0&&(this.editModeDiv=document.createElement("div"),this.editModeDiv.className="vis-edit-mode",this.editMode===!0?this.editModeDiv.style.display="none":this.editModeDiv.style.display="block",this.canvas.frame.appendChild(this.editModeDiv)),this.closeDiv===void 0){var e,r;this.closeDiv=document.createElement("button"),this.closeDiv.className="vis-close",this.closeDiv.setAttribute("aria-label",(e=(r=this.options.locales[this.options.locale])===null||r===void 0?void 0:r.close)!==null&&e!==void 0?e:this.options.locales.en.close),this.closeDiv.style.display=this.manipulationDiv.style.display,this.canvas.frame.appendChild(this.closeDiv)}}_getNewTargetNode(e,r){const n=_t({},this.options.controlNodeStyle);n.id="targetNode"+fd(),n.hidden=!1,n.physics=!1,n.x=e,n.y=r;const i=this.body.functions.createNode(n);return i.shape.boundingBox={left:e,right:e,top:r,bottom:r},i}_createEditButton(){var e;this._clean(),this.manipulationDOM={},Gs(this.editModeDiv);const r=this.options.locales[this.options.locale],n=this._createButton("editMode","vis-edit vis-edit-mode",r.edit||this.options.locales.en.edit);this.editModeDiv.appendChild(n),this._bindElementEvents(n,re(e=this.toggleEditMode).call(e,this))}_clean(){this.inMode=!1,this.guiEnabled===!0&&(Gs(this.editModeDiv),Gs(this.manipulationDiv),this._cleanupDOMEventListeners()),this._cleanupTemporaryNodesAndEdges(),this._unbindTemporaryUIs(),this._unbindTemporaryEvents(),this.body.emitter.emit("restorePhysics")}_cleanupDOMEventListeners(){for(const r of gs(e=this._domEventListenerCleanupQueue).call(e,0)){var e;r()}}_removeManipulationDOM(){this._clean(),Gs(this.manipulationDiv),Gs(this.editModeDiv),Gs(this.closeDiv),this.manipulationDiv&&this.canvas.frame.removeChild(this.manipulationDiv),this.editModeDiv&&this.canvas.frame.removeChild(this.editModeDiv),this.closeDiv&&this.canvas.frame.removeChild(this.closeDiv),this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0}_createSeperator(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.manipulationDOM["seperatorLineDiv"+e]=document.createElement("div"),this.manipulationDOM["seperatorLineDiv"+e].className="vis-separator-line",this.manipulationDiv.appendChild(this.manipulationDOM["seperatorLineDiv"+e])}_createAddNodeButton(e){var r;const n=this._createButton("addNode","vis-add",e.addNode||this.options.locales.en.addNode);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,re(r=this.addNodeMode).call(r,this))}_createAddEdgeButton(e){var r;const n=this._createButton("addEdge","vis-connect",e.addEdge||this.options.locales.en.addEdge);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,re(r=this.addEdgeMode).call(r,this))}_createEditNodeButton(e){var r;const n=this._createButton("editNode","vis-edit",e.editNode||this.options.locales.en.editNode);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,re(r=this.editNode).call(r,this))}_createEditEdgeButton(e){var r;const n=this._createButton("editEdge","vis-edit",e.editEdge||this.options.locales.en.editEdge);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,re(r=this.editEdgeMode).call(r,this))}_createDeleteButton(e){var r;let n;this.options.rtl?n="vis-delete-rtl":n="vis-delete";const i=this._createButton("delete",n,e.del||this.options.locales.en.del);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,re(r=this.deleteSelected).call(r,this))}_createBackButton(e){var r;const n=this._createButton("back","vis-back",e.back||this.options.locales.en.back);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,re(r=this.showManipulatorToolbar).call(r,this))}_createButton(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"vis-label";return this.manipulationDOM[e+"Div"]=document.createElement("button"),this.manipulationDOM[e+"Div"].className="vis-button "+r,this.manipulationDOM[e+"Label"]=document.createElement("div"),this.manipulationDOM[e+"Label"].className=i,this.manipulationDOM[e+"Label"].innerText=n,this.manipulationDOM[e+"Div"].appendChild(this.manipulationDOM[e+"Label"]),this.manipulationDOM[e+"Div"]}_createDescription(e){this.manipulationDOM.descriptionLabel=document.createElement("div"),this.manipulationDOM.descriptionLabel.className="vis-none",this.manipulationDOM.descriptionLabel.innerText=e,this.manipulationDiv.appendChild(this.manipulationDOM.descriptionLabel)}_temporaryBindEvent(e,r){this.temporaryEventFunctions.push({event:e,boundFunction:r}),this.body.emitter.on(e,r)}_temporaryBindUI(e,r){if(this.body.eventListeners[e]!==void 0)this.temporaryUIFunctions[e]=this.body.eventListeners[e],this.body.eventListeners[e]=r;else throw new Error("This UI function does not exist. Typo? You tried: "+e+" possible are: "+zh(Ht(this.body.eventListeners)))}_unbindTemporaryUIs(){for(const e in this.temporaryUIFunctions)Object.prototype.hasOwnProperty.call(this.temporaryUIFunctions,e)&&(this.body.eventListeners[e]=this.temporaryUIFunctions[e],delete this.temporaryUIFunctions[e]);this.temporaryUIFunctions={}}_unbindTemporaryEvents(){for(let e=0;e<this.temporaryEventFunctions.length;e++){const r=this.temporaryEventFunctions[e].event,n=this.temporaryEventFunctions[e].boundFunction;this.body.emitter.off(r,n)}this.temporaryEventFunctions=[]}_bindElementEvents(e,r){const n=new rc(e,{});em(n,r),this._domEventListenerCleanupQueue.push(()=>{n.destroy()});const i=s=>{let{keyCode:a,key:o}=s;(o==="Enter"||o===" "||a===13||a===32)&&r()};e.addEventListener("keyup",i,!1),this._domEventListenerCleanupQueue.push(()=>{e.removeEventListener("keyup",i,!1)})}_cleanupTemporaryNodesAndEdges(){for(let s=0;s<this.temporaryIds.edges.length;s++){var e;this.body.edges[this.temporaryIds.edges[s]].disconnect(),delete this.body.edges[this.temporaryIds.edges[s]];const a=ht(e=this.body.edgeIndices).call(e,this.temporaryIds.edges[s]);if(a!==-1){var r;gs(r=this.body.edgeIndices).call(r,a,1)}}for(let s=0;s<this.temporaryIds.nodes.length;s++){var n;delete this.body.nodes[this.temporaryIds.nodes[s]];const a=ht(n=this.body.nodeIndices).call(n,this.temporaryIds.nodes[s]);if(a!==-1){var i;gs(i=this.body.nodeIndices).call(i,a,1)}}this.temporaryIds={nodes:[],edges:[]}}_controlNodeTouch(e){this.selectionHandler.unselectAll(),this.lastTouch=this.body.functions.getPointer(e.center),this.lastTouch.translation=sr({},this.body.view.translation)}_controlNodeDragStart(){const e=this.lastTouch,r=this.selectionHandler._pointerToPositionObject(e),n=this.body.nodes[this.temporaryIds.nodes[0]],i=this.body.nodes[this.temporaryIds.nodes[1]],s=this.body.edges[this.edgeBeingEditedId];this.selectedControlNode=void 0;const a=n.isOverlappingWith(r),o=i.isOverlappingWith(r);a===!0?(this.selectedControlNode=n,s.edgeType.from=n):o===!0&&(this.selectedControlNode=i,s.edgeType.to=i),this.selectedControlNode!==void 0&&this.selectionHandler.selectObject(this.selectedControlNode),this.body.emitter.emit("_redraw")}_controlNodeDrag(e){this.body.emitter.emit("disablePhysics");const r=this.body.functions.getPointer(e.center),n=this.canvas.DOMtoCanvas(r);this.selectedControlNode!==void 0?(this.selectedControlNode.x=n.x,this.selectedControlNode.y=n.y):this.interactionHandler.onDrag(e),this.body.emitter.emit("_redraw")}_controlNodeDragEnd(e){const r=this.body.functions.getPointer(e.center),n=this.selectionHandler._pointerToPositionObject(r),i=this.body.edges[this.edgeBeingEditedId];if(this.selectedControlNode===void 0)return;this.selectionHandler.unselectAll();const s=this.selectionHandler._getAllNodesOverlappingWith(n);let a;for(let o=s.length-1;o>=0;o--)if(s[o]!==this.selectedControlNode.id){a=this.body.nodes[s[o]];break}if(a!==void 0&&this.selectedControlNode!==void 0)if(a.isCluster===!0)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{const o=this.body.nodes[this.temporaryIds.nodes[0]];this.selectedControlNode.id===o.id?this._performEditEdge(a.id,i.to.id):this._performEditEdge(i.from.id,a.id)}else i.updateEdgeType(),this.body.emitter.emit("restorePhysics");this.body.emitter.emit("_redraw")}_handleConnect(e){if(new Date().valueOf()-this.touchTime>100){this.lastTouch=this.body.functions.getPointer(e.center),this.lastTouch.translation=sr({},this.body.view.translation),this.interactionHandler.drag.pointer=this.lastTouch,this.interactionHandler.drag.translation=this.lastTouch.translation;const r=this.lastTouch,n=this.selectionHandler.getNodeAt(r);if(n!==void 0)if(n.isCluster===!0)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{const i=this._getNewTargetNode(n.x,n.y);this.body.nodes[i.id]=i,this.body.nodeIndices.push(i.id);const s=this.body.functions.createEdge({id:"connectionEdge"+fd(),from:n.id,to:i.id,physics:!1,smooth:{enabled:!0,type:"continuous",roundness:.5}});this.body.edges[s.id]=s,this.body.edgeIndices.push(s.id),this.temporaryIds.nodes.push(i.id),this.temporaryIds.edges.push(s.id)}this.touchTime=new Date().valueOf()}}_dragControlNode(e){const r=this.body.functions.getPointer(e.center),n=this.selectionHandler._pointerToPositionObject(r);let i;this.temporaryIds.edges[0]!==void 0&&(i=this.body.edges[this.temporaryIds.edges[0]].fromId);const s=this.selectionHandler._getAllNodesOverlappingWith(n);let a;for(let c=s.length-1;c>=0;c--){var o;if(ht(o=this.temporaryIds.nodes).call(o,s[c])===-1){a=this.body.nodes[s[c]];break}}if(e.controlEdge={from:i,to:a?a.id:void 0},this.selectionHandler.generateClickEvent("controlNodeDragging",e,r),this.temporaryIds.nodes[0]!==void 0){const c=this.body.nodes[this.temporaryIds.nodes[0]];c.x=this.canvas._XconvertDOMtoCanvas(r.x),c.y=this.canvas._YconvertDOMtoCanvas(r.y),this.body.emitter.emit("_redraw")}else this.interactionHandler.onDrag(e)}_finishConnect(e){const r=this.body.functions.getPointer(e.center),n=this.selectionHandler._pointerToPositionObject(r);let i;this.temporaryIds.edges[0]!==void 0&&(i=this.body.edges[this.temporaryIds.edges[0]].fromId);const s=this.selectionHandler._getAllNodesOverlappingWith(n);let a;for(let c=s.length-1;c>=0;c--){var o;if(ht(o=this.temporaryIds.nodes).call(o,s[c])===-1){a=this.body.nodes[s[c]];break}}this._cleanupTemporaryNodesAndEdges(),a!==void 0&&(a.isCluster===!0?alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError):this.body.nodes[i]!==void 0&&this.body.nodes[a.id]!==void 0&&this._performAddEdge(i,a.id)),e.controlEdge={from:i,to:a?a.id:void 0},this.selectionHandler.generateClickEvent("controlNodeDragEnd",e,r),this.body.emitter.emit("_redraw")}_dragStartEdge(e){const r=this.lastTouch;this.selectionHandler.generateClickEvent("dragStart",e,r,void 0,!0)}_performAddNode(e){const r={id:fd(),x:e.pointer.canvas.x,y:e.pointer.canvas.y,label:"new"};if(typeof this.options.addNode=="function")if(this.options.addNode.length===2)this.options.addNode(r,n=>{n!=null&&this.inMode==="addNode"&&this.body.data.nodes.getDataSet().add(n),this.showManipulatorToolbar()});else throw this.showManipulatorToolbar(),new Error("The function for add does not support two arguments (data,callback)");else this.body.data.nodes.getDataSet().add(r),this.showManipulatorToolbar()}_performAddEdge(e,r){const n={from:e,to:r};if(typeof this.options.addEdge=="function")if(this.options.addEdge.length===2)this.options.addEdge(n,i=>{i!=null&&this.inMode==="addEdge"&&(this.body.data.edges.getDataSet().add(i),this.selectionHandler.unselectAll(),this.showManipulatorToolbar())});else throw new Error("The function for connect does not support two arguments (data,callback)");else this.body.data.edges.getDataSet().add(n),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}_performEditEdge(e,r){const n={id:this.edgeBeingEditedId,from:e,to:r,label:this.body.data.edges.get(this.edgeBeingEditedId).label};let i=this.options.editEdge;if(typeof i=="object"&&(i=i.editWithoutDrag),typeof i=="function")if(i.length===2)i(n,s=>{s==null||this.inMode!=="editEdge"?(this.body.edges[n.id].updateEdgeType(),this.body.emitter.emit("_redraw"),this.showManipulatorToolbar()):(this.body.data.edges.getDataSet().update(s),this.selectionHandler.unselectAll(),this.showManipulatorToolbar())});else throw new Error("The function for edit does not support two arguments (data, callback)");else this.body.data.edges.getDataSet().update(n),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}}const ae="string",ee="boolean",U="number",Yu="array",Ee="object",cX="dom",_1e="any",b2=["arrow","bar","box","circle","crow","curve","diamond","image","inv_curve","inv_triangle","triangle","vee"],x2={borderWidth:{number:U},borderWidthSelected:{number:U,undefined:"undefined"},brokenImage:{string:ae,undefined:"undefined"},chosen:{label:{boolean:ee,function:"function"},node:{boolean:ee,function:"function"},__type__:{object:Ee,boolean:ee}},color:{border:{string:ae},background:{string:ae},highlight:{border:{string:ae},background:{string:ae},__type__:{object:Ee,string:ae}},hover:{border:{string:ae},background:{string:ae},__type__:{object:Ee,string:ae}},__type__:{object:Ee,string:ae}},opacity:{number:U,undefined:"undefined"},fixed:{x:{boolean:ee},y:{boolean:ee},__type__:{object:Ee,boolean:ee}},font:{align:{string:ae},color:{string:ae},size:{number:U},face:{string:ae},background:{string:ae},strokeWidth:{number:U},strokeColor:{string:ae},vadjust:{number:U},multi:{boolean:ee,string:ae},bold:{color:{string:ae},size:{number:U},face:{string:ae},mod:{string:ae},vadjust:{number:U},__type__:{object:Ee,string:ae}},boldital:{color:{string:ae},size:{number:U},face:{string:ae},mod:{string:ae},vadjust:{number:U},__type__:{object:Ee,string:ae}},ital:{color:{string:ae},size:{number:U},face:{string:ae},mod:{string:ae},vadjust:{number:U},__type__:{object:Ee,string:ae}},mono:{color:{string:ae},size:{number:U},face:{string:ae},mod:{string:ae},vadjust:{number:U},__type__:{object:Ee,string:ae}},__type__:{object:Ee,string:ae}},group:{string:ae,number:U,undefined:"undefined"},heightConstraint:{minimum:{number:U},valign:{string:ae},__type__:{object:Ee,boolean:ee,number:U}},hidden:{boolean:ee},icon:{face:{string:ae},code:{string:ae},size:{number:U},color:{string:ae},weight:{string:ae,number:U},__type__:{object:Ee}},id:{string:ae,number:U},image:{selected:{string:ae,undefined:"undefined"},unselected:{string:ae,undefined:"undefined"},__type__:{object:Ee,string:ae}},imagePadding:{top:{number:U},right:{number:U},bottom:{number:U},left:{number:U},__type__:{object:Ee,number:U}},label:{string:ae,undefined:"undefined"},labelHighlightBold:{boolean:ee},level:{number:U,undefined:"undefined"},margin:{top:{number:U},right:{number:U},bottom:{number:U},left:{number:U},__type__:{object:Ee,number:U}},mass:{number:U},physics:{boolean:ee},scaling:{min:{number:U},max:{number:U},label:{enabled:{boolean:ee},min:{number:U},max:{number:U},maxVisible:{number:U},drawThreshold:{number:U},__type__:{object:Ee,boolean:ee}},customScalingFunction:{function:"function"},__type__:{object:Ee}},shadow:{enabled:{boolean:ee},color:{string:ae},size:{number:U},x:{number:U},y:{number:U},__type__:{object:Ee,boolean:ee}},shape:{string:["custom","ellipse","circle","database","box","text","image","circularImage","diamond","dot","star","triangle","triangleDown","square","icon","hexagon"]},ctxRenderer:{function:"function"},shapeProperties:{borderDashes:{boolean:ee,array:Yu},borderRadius:{number:U},interpolation:{boolean:ee},useImageSize:{boolean:ee},useBorderWithImage:{boolean:ee},coordinateOrigin:{string:["center","top-left"]},__type__:{object:Ee}},size:{number:U},title:{string:ae,dom:cX,undefined:"undefined"},value:{number:U,undefined:"undefined"},widthConstraint:{minimum:{number:U},maximum:{number:U},__type__:{object:Ee,boolean:ee,number:U}},x:{number:U},y:{number:U},__type__:{object:Ee}},S1e={configure:{enabled:{boolean:ee},filter:{boolean:ee,string:ae,array:Yu,function:"function"},container:{dom:cX},showButton:{boolean:ee},__type__:{object:Ee,boolean:ee,string:ae,array:Yu,function:"function"}},edges:{arrows:{to:{enabled:{boolean:ee},scaleFactor:{number:U},type:{string:b2},imageHeight:{number:U},imageWidth:{number:U},src:{string:ae},__type__:{object:Ee,boolean:ee}},middle:{enabled:{boolean:ee},scaleFactor:{number:U},type:{string:b2},imageWidth:{number:U},imageHeight:{number:U},src:{string:ae},__type__:{object:Ee,boolean:ee}},from:{enabled:{boolean:ee},scaleFactor:{number:U},type:{string:b2},imageWidth:{number:U},imageHeight:{number:U},src:{string:ae},__type__:{object:Ee,boolean:ee}},__type__:{string:["from","to","middle"],object:Ee}},endPointOffset:{from:{number:U},to:{number:U},__type__:{object:Ee,number:U}},arrowStrikethrough:{boolean:ee},background:{enabled:{boolean:ee},color:{string:ae},size:{number:U},dashes:{boolean:ee,array:Yu},__type__:{object:Ee,boolean:ee}},chosen:{label:{boolean:ee,function:"function"},edge:{boolean:ee,function:"function"},__type__:{object:Ee,boolean:ee}},color:{color:{string:ae},highlight:{string:ae},hover:{string:ae},inherit:{string:["from","to","both"],boolean:ee},opacity:{number:U},__type__:{object:Ee,string:ae}},dashes:{boolean:ee,array:Yu},font:{color:{string:ae},size:{number:U},face:{string:ae},background:{string:ae},strokeWidth:{number:U},strokeColor:{string:ae},align:{string:["horizontal","top","middle","bottom"]},vadjust:{number:U},multi:{boolean:ee,string:ae},bold:{color:{string:ae},size:{number:U},face:{string:ae},mod:{string:ae},vadjust:{number:U},__type__:{object:Ee,string:ae}},boldital:{color:{string:ae},size:{number:U},face:{string:ae},mod:{string:ae},vadjust:{number:U},__type__:{object:Ee,string:ae}},ital:{color:{string:ae},size:{number:U},face:{string:ae},mod:{string:ae},vadjust:{number:U},__type__:{object:Ee,string:ae}},mono:{color:{string:ae},size:{number:U},face:{string:ae},mod:{string:ae},vadjust:{number:U},__type__:{object:Ee,string:ae}},__type__:{object:Ee,string:ae}},hidden:{boolean:ee},hoverWidth:{function:"function",number:U},label:{string:ae,undefined:"undefined"},labelHighlightBold:{boolean:ee},length:{number:U,undefined:"undefined"},physics:{boolean:ee},scaling:{min:{number:U},max:{number:U},label:{enabled:{boolean:ee},min:{number:U},max:{number:U},maxVisible:{number:U},drawThreshold:{number:U},__type__:{object:Ee,boolean:ee}},customScalingFunction:{function:"function"},__type__:{object:Ee}},selectionWidth:{function:"function",number:U},selfReferenceSize:{number:U},selfReference:{size:{number:U},angle:{number:U},renderBehindTheNode:{boolean:ee},__type__:{object:Ee}},shadow:{enabled:{boolean:ee},color:{string:ae},size:{number:U},x:{number:U},y:{number:U},__type__:{object:Ee,boolean:ee}},smooth:{enabled:{boolean:ee},type:{string:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"]},roundness:{number:U},forceDirection:{string:["horizontal","vertical","none"],boolean:ee},__type__:{object:Ee,boolean:ee}},title:{string:ae,undefined:"undefined"},width:{number:U},widthConstraint:{maximum:{number:U},__type__:{object:Ee,boolean:ee,number:U}},value:{number:U,undefined:"undefined"},__type__:{object:Ee}},groups:{useDefaultGroups:{boolean:ee},__any__:x2,__type__:{object:Ee}},interaction:{dragNodes:{boolean:ee},dragView:{boolean:ee},hideEdgesOnDrag:{boolean:ee},hideEdgesOnZoom:{boolean:ee},hideNodesOnDrag:{boolean:ee},hover:{boolean:ee},keyboard:{enabled:{boolean:ee},speed:{x:{number:U},y:{number:U},zoom:{number:U},__type__:{object:Ee}},bindToWindow:{boolean:ee},autoFocus:{boolean:ee},__type__:{object:Ee,boolean:ee}},multiselect:{boolean:ee},navigationButtons:{boolean:ee},selectable:{boolean:ee},selectConnectedEdges:{boolean:ee},hoverConnectedEdges:{boolean:ee},tooltipDelay:{number:U},zoomView:{boolean:ee},zoomSpeed:{number:U},__type__:{object:Ee}},layout:{randomSeed:{undefined:"undefined",number:U,string:ae},improvedLayout:{boolean:ee},clusterThreshold:{number:U},hierarchical:{enabled:{boolean:ee},levelSeparation:{number:U},nodeSpacing:{number:U},treeSpacing:{number:U},blockShifting:{boolean:ee},edgeMinimization:{boolean:ee},parentCentralization:{boolean:ee},direction:{string:["UD","DU","LR","RL"]},sortMethod:{string:["hubsize","directed"]},shakeTowards:{string:["leaves","roots"]},__type__:{object:Ee,boolean:ee}},__type__:{object:Ee}},manipulation:{enabled:{boolean:ee},initiallyActive:{boolean:ee},addNode:{boolean:ee,function:"function"},addEdge:{boolean:ee,function:"function"},editNode:{function:"function"},editEdge:{editWithoutDrag:{function:"function"},__type__:{object:Ee,boolean:ee,function:"function"}},deleteNode:{boolean:ee,function:"function"},deleteEdge:{boolean:ee,function:"function"},controlNodeStyle:x2,__type__:{object:Ee,boolean:ee}},nodes:x2,physics:{enabled:{boolean:ee},barnesHut:{theta:{number:U},gravitationalConstant:{number:U},centralGravity:{number:U},springLength:{number:U},springConstant:{number:U},damping:{number:U},avoidOverlap:{number:U},__type__:{object:Ee}},forceAtlas2Based:{theta:{number:U},gravitationalConstant:{number:U},centralGravity:{number:U},springLength:{number:U},springConstant:{number:U},damping:{number:U},avoidOverlap:{number:U},__type__:{object:Ee}},repulsion:{centralGravity:{number:U},springLength:{number:U},springConstant:{number:U},nodeDistance:{number:U},damping:{number:U},__type__:{object:Ee}},hierarchicalRepulsion:{centralGravity:{number:U},springLength:{number:U},springConstant:{number:U},nodeDistance:{number:U},damping:{number:U},avoidOverlap:{number:U},__type__:{object:Ee}},maxVelocity:{number:U},minVelocity:{number:U},solver:{string:["barnesHut","repulsion","hierarchicalRepulsion","forceAtlas2Based"]},stabilization:{enabled:{boolean:ee},iterations:{number:U},updateInterval:{number:U},onlyDynamicEdges:{boolean:ee},fit:{boolean:ee},__type__:{object:Ee,boolean:ee}},timestep:{number:U},adaptiveTimestep:{boolean:ee},wind:{x:{number:U},y:{number:U},__type__:{object:Ee}},__type__:{object:Ee,boolean:ee}},autoResize:{boolean:ee},clickToUse:{boolean:ee},locale:{string:ae},locales:{__any__:{any:_1e},__type__:{object:Ee}},height:{string:ae},width:{string:ae},__type__:{object:Ee}},uX={nodes:{borderWidth:[1,0,10,1],borderWidthSelected:[2,0,10,1],color:{border:["color","#2B7CE9"],background:["color","#97C2FC"],highlight:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]},hover:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]}},opacity:[0,0,1,.1],fixed:{x:!1,y:!1},font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[0,0,50,1],strokeColor:["color","#ffffff"]},hidden:!1,labelHighlightBold:!0,physics:!0,scaling:{min:[10,0,200,1],max:[30,0,200,1],label:{enabled:!1,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},shape:["ellipse","box","circle","database","diamond","dot","square","star","text","triangle","triangleDown","hexagon"],shapeProperties:{borderDashes:!1,borderRadius:[6,0,20,1],interpolation:!0,useImageSize:!1},size:[25,0,200,1]},edges:{arrows:{to:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},middle:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},from:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"}},endPointOffset:{from:[0,-10,10,1],to:[0,-10,10,1]},arrowStrikethrough:!0,color:{color:["color","#848484"],highlight:["color","#848484"],hover:["color","#848484"],inherit:["from","to","both",!0,!1],opacity:[1,0,1,.05]},dashes:!1,font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[2,0,50,1],strokeColor:["color","#ffffff"],align:["horizontal","top","middle","bottom"]},hidden:!1,hoverWidth:[1.5,0,5,.1],labelHighlightBold:!0,physics:!0,scaling:{min:[1,0,100,1],max:[15,0,100,1],label:{enabled:!0,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},selectionWidth:[1.5,0,5,.1],selfReferenceSize:[20,0,200,1],selfReference:{size:[20,0,200,1],angle:[Math.PI/2,-6*Math.PI,6*Math.PI,Math.PI/8],renderBehindTheNode:!0},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},smooth:{enabled:!0,type:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"],forceDirection:["horizontal","vertical","none"],roundness:[.5,0,1,.05]},width:[1,0,30,1]},layout:{hierarchical:{enabled:!1,levelSeparation:[150,20,500,5],nodeSpacing:[100,20,500,5],treeSpacing:[200,20,500,5],blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:["UD","DU","LR","RL"],sortMethod:["hubsize","directed"],shakeTowards:["leaves","roots"]}},interaction:{dragNodes:!0,dragView:!0,hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1,hover:!1,keyboard:{enabled:!1,speed:{x:[10,0,40,1],y:[10,0,40,1],zoom:[.02,0,.1,.005]},bindToWindow:!0,autoFocus:!0},multiselect:!1,navigationButtons:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0,tooltipDelay:[300,0,1e3,25],zoomView:!0,zoomSpeed:[1,.1,2,.1]},manipulation:{enabled:!1,initiallyActive:!1},physics:{enabled:!0,barnesHut:{theta:[.5,.1,1,.05],gravitationalConstant:[-2e3,-3e4,0,50],centralGravity:[.3,0,10,.05],springLength:[95,0,500,5],springConstant:[.04,0,1.2,.005],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},forceAtlas2Based:{theta:[.5,.1,1,.05],gravitationalConstant:[-50,-500,0,1],centralGravity:[.01,0,1,.005],springLength:[95,0,500,5],springConstant:[.08,0,1.2,.005],damping:[.4,0,1,.01],avoidOverlap:[0,0,1,.01]},repulsion:{centralGravity:[.2,0,10,.05],springLength:[200,0,500,5],springConstant:[.05,0,1.2,.005],nodeDistance:[100,0,500,5],damping:[.09,0,1,.01]},hierarchicalRepulsion:{centralGravity:[.2,0,10,.05],springLength:[100,0,500,5],springConstant:[.01,0,1.2,.005],nodeDistance:[120,0,500,5],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},maxVelocity:[50,0,150,1],minVelocity:[.1,.01,.5,.01],solver:["barnesHut","forceAtlas2Based","repulsion","hierarchicalRepulsion"],timestep:[.5,.01,1,.01],wind:{x:[0,-10,10,.1],y:[0,-10,10,.1]}}},E1e=(t,e,r)=>{var n;return!!(Na(t).call(t,"physics")&&Na(n=uX.physics.solver).call(n,e)&&r.physics.solver!==e&&e!=="wind")};class N1e{constructor(){}getDistances(e,r,n){const i={},s=e.edges;for(let o=0;o<r.length;o++){const c=r[o],u={};i[c]=u;for(let d=0;d<r.length;d++)u[r[d]]=o==d?0:1e9}for(let o=0;o<n.length;o++){const c=s[n[o]];c.connected===!0&&i[c.fromId]!==void 0&&i[c.toId]!==void 0&&(i[c.fromId][c.toId]=1,i[c.toId][c.fromId]=1)}const a=r.length;for(let o=0;o<a;o++){const c=r[o],u=i[c];for(let d=0;d<a-1;d++){const h=r[d],f=i[h];for(let p=d+1;p<a;p++){const v=r[p],y=i[v],x=Math.min(f[v],f[c]+u[v]);f[v]=x,y[h]=x}}}return i}}class j1e{constructor(e,r,n){this.body=e,this.springLength=r,this.springConstant=n,this.distanceSolver=new N1e}setOptions(e){e&&(e.springLength&&(this.springLength=e.springLength),e.springConstant&&(this.springConstant=e.springConstant))}solve(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const i=this.distanceSolver.getDistances(this.body,e,r);this._createL_matrix(i),this._createK_matrix(i),this._createE_matrix();const s=.01,a=1;let o=0;const c=Math.max(1e3,Math.min(10*this.body.nodeIndices.length,6e3)),u=5;let d=1e9,h=0,f=0,p=0,v=0,y=0;for(;d>s&&o<c;)for(o+=1,[h,d,f,p]=this._getHighestEnergyNode(n),v=d,y=0;v>a&&y<u;)y+=1,this._moveNode(h,f,p),[v,f,p]=this._getEnergy(h)}_getHighestEnergyNode(e){const r=this.body.nodeIndices,n=this.body.nodes;let i=0,s=r[0],a=0,o=0;for(let c=0;c<r.length;c++){const u=r[c];if(n[u].predefinedPosition!==!0||n[u].isCluster===!0&&e===!0||n[u].options.fixed.x!==!0||n[u].options.fixed.y!==!0){const[d,h,f]=this._getEnergy(u);i<d&&(i=d,s=u,a=h,o=f)}}return[s,i,a,o]}_getEnergy(e){const[r,n]=this.E_sums[e];return[Math.sqrt(r**2+n**2),r,n]}_moveNode(e,r,n){const i=this.body.nodeIndices,s=this.body.nodes;let a=0,o=0,c=0;const u=s[e].x,d=s[e].y,h=this.K_matrix[e],f=this.L_matrix[e];for(let b=0;b<i.length;b++){const _=i[b];if(_!==e){const E=s[_].x,j=s[_].y,S=h[_],C=f[_],N=1/((u-E)**2+(d-j)**2)**1.5;a+=S*(1-C*(d-j)**2*N),o+=S*(C*(u-E)*(d-j)*N),c+=S*(1-C*(u-E)**2*N)}}const p=a,v=o,y=r,x=c,g=n,m=(y/p+g/v)/(v/p-x/v),w=-(v*m+y)/p;s[e].x+=w,s[e].y+=m,this._updateE_matrix(e)}_createL_matrix(e){const r=this.body.nodeIndices,n=this.springLength;this.L_matrix=[];for(let i=0;i<r.length;i++){this.L_matrix[r[i]]={};for(let s=0;s<r.length;s++)this.L_matrix[r[i]][r[s]]=n*e[r[i]][r[s]]}}_createK_matrix(e){const r=this.body.nodeIndices,n=this.springConstant;this.K_matrix=[];for(let i=0;i<r.length;i++){this.K_matrix[r[i]]={};for(let s=0;s<r.length;s++)this.K_matrix[r[i]][r[s]]=n*e[r[i]][r[s]]**-2}}_createE_matrix(){const e=this.body.nodeIndices,r=this.body.nodes;this.E_matrix={},this.E_sums={};for(let n=0;n<e.length;n++)this.E_matrix[e[n]]=[];for(let n=0;n<e.length;n++){const i=e[n],s=r[i].x,a=r[i].y;let o=0,c=0;for(let u=n;u<e.length;u++){const d=e[u];if(d!==i){const h=r[d].x,f=r[d].y,p=1/Math.sqrt((s-h)**2+(a-f)**2);this.E_matrix[i][u]=[this.K_matrix[i][d]*(s-h-this.L_matrix[i][d]*(s-h)*p),this.K_matrix[i][d]*(a-f-this.L_matrix[i][d]*(a-f)*p)],this.E_matrix[d][n]=this.E_matrix[i][u],o+=this.E_matrix[i][u][0],c+=this.E_matrix[i][u][1]}}this.E_sums[i]=[o,c]}}_updateE_matrix(e){const r=this.body.nodeIndices,n=this.body.nodes,i=this.E_matrix[e],s=this.K_matrix[e],a=this.L_matrix[e],o=n[e].x,c=n[e].y;let u=0,d=0;for(let h=0;h<r.length;h++){const f=r[h];if(f!==e){const p=i[h],v=p[0],y=p[1],x=n[f].x,g=n[f].y,m=1/Math.sqrt((o-x)**2+(c-g)**2),w=s[f]*(o-x-a[f]*(o-x)*m),b=s[f]*(c-g-a[f]*(c-g)*m);i[h]=[w,b],u+=w,d+=b;const _=this.E_sums[f];_[0]+=w-v,_[1]+=b-y}}this.E_sums[e]=[u,d]}}function we(t,e,r){var n,i,s,a;if(!(this instanceof we))throw new SyntaxError("Constructor must be called with the new operator");this.options={},this.defaultOptions={locale:"en",locales:Qge,clickToUse:!1},sr(this.options,this.defaultOptions),this.body={container:t,nodes:{},nodeIndices:[],edges:{},edgeIndices:[],emitter:{on:re(n=this.on).call(n,this),off:re(i=this.off).call(i,this),emit:re(s=this.emit).call(s,this),once:re(a=this.once).call(a,this)},eventListeners:{onTap:function(){},onTouch:function(){},onDoubleTap:function(){},onHold:function(){},onDragStart:function(){},onDrag:function(){},onDragEnd:function(){},onMouseWheel:function(){},onPinch:function(){},onMouseMove:function(){},onRelease:function(){},onContext:function(){}},data:{nodes:null,edges:null},functions:{createNode:function(){},createEdge:function(){},getPointer:function(){}},modules:{},view:{scale:1,translation:{x:0,y:0}},selectionBox:{show:!1,position:{start:{x:0,y:0},end:{x:0,y:0}}}},this.bindEventListeners(),this.images=new Zge(()=>this.body.emitter.emit("_requestRedraw")),this.groups=new pye,this.canvas=new lxe(this.body),this.selectionHandler=new Uxe(this.body,this.canvas),this.interactionHandler=new hxe(this.body,this.canvas,this.selectionHandler),this.view=new uxe(this.body,this.canvas),this.renderer=new nxe(this.body,this.canvas),this.physics=new Ybe(this.body),this.layoutEngine=new x1e(this.body),this.clustering=new rxe(this.body),this.manipulation=new w1e(this.body,this.canvas,this.selectionHandler,this.interactionHandler),this.nodesHandler=new Sbe(this.body,this.images,this.groups,this.layoutEngine),this.edgesHandler=new Ube(this.body,this.images,this.groups),this.body.modules.kamadaKawai=new j1e(this.body,150,.05),this.body.modules.clustering=this.clustering,this.canvas._create(),this.setOptions(r),this.setData(e)}LY(we.prototype);we.prototype.setOptions=function(t){if(t===null&&(t=void 0),t!==void 0){if(Cge.validate(t,S1e)===!0&&console.error("%cErrors have been found in the supplied options object.",DQ),_u(["locale","locales","clickToUse"],this.options,t),t.locale!==void 0&&(t.locale=Xge(t.locales||this.options.locales,t.locale)),t=this.layoutEngine.setOptions(t.layout,t),this.canvas.setOptions(t),this.groups.setOptions(t.groups),this.nodesHandler.setOptions(t.nodes),this.edgesHandler.setOptions(t.edges),this.physics.setOptions(t.physics),this.manipulation.setOptions(t.manipulation,t,this.options),this.interactionHandler.setOptions(t.interaction),this.renderer.setOptions(t.interaction),this.selectionHandler.setOptions(t.interaction),t.groups!==void 0&&this.body.emitter.emit("refreshNodes"),"configure"in t&&(this.configurator||(this.configurator=new Nge(this,this.body.container,uX,this.canvas.pixelRatio,E1e)),this.configurator.setOptions(t.configure)),this.configurator&&this.configurator.options.enabled===!0){const n={nodes:{},edges:{},layout:{},interaction:{},manipulation:{},physics:{},global:{}};_t(n.nodes,this.nodesHandler.options),_t(n.edges,this.edgesHandler.options),_t(n.layout,this.layoutEngine.options),_t(n.interaction,this.selectionHandler.options),_t(n.interaction,this.renderer.options),_t(n.interaction,this.interactionHandler.options),_t(n.manipulation,this.manipulation.options),_t(n.physics,this.physics.options),_t(n.global,this.canvas.options),_t(n.global,this.options),this.configurator.setModuleOptions(n)}t.clickToUse!==void 0?t.clickToUse===!0?this.activator===void 0&&(this.activator=new Ege(this.canvas.frame),this.activator.on("change",()=>{this.body.emitter.emit("activate")})):(this.activator!==void 0&&(this.activator.destroy(),delete this.activator),this.body.emitter.emit("activate")):this.body.emitter.emit("activate"),this.canvas.setSize(),this.body.emitter.emit("startSimulation")}};we.prototype._updateVisibleIndices=function(){const t=this.body.nodes,e=this.body.edges;this.body.nodeIndices=[],this.body.edgeIndices=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&!this.clustering._isClusteredNode(r)&&t[r].options.hidden===!1&&this.body.nodeIndices.push(t[r].id);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const n=e[r],i=t[n.fromId],s=t[n.toId],a=i!==void 0&&s!==void 0;!this.clustering._isClusteredEdge(r)&&n.options.hidden===!1&&a&&i.options.hidden===!1&&s.options.hidden===!1&&this.body.edgeIndices.push(n.id)}};we.prototype.bindEventListeners=function(){this.body.emitter.on("_dataChanged",()=>{this.edgesHandler._updateState(),this.body.emitter.emit("_dataUpdated")}),this.body.emitter.on("_dataUpdated",()=>{this.clustering._updateState(),this._updateVisibleIndices(),this._updateValueRange(this.body.nodes),this._updateValueRange(this.body.edges),this.body.emitter.emit("startSimulation"),this.body.emitter.emit("_requestRedraw")})};we.prototype.setData=function(t){if(this.body.emitter.emit("resetPhysics"),this.body.emitter.emit("_resetData"),this.selectionHandler.unselectAll(),t&&t.dot&&(t.nodes||t.edges))throw new SyntaxError('Data must contain either parameter "dot" or  parameter pair "nodes" and "edges", but not both.');if(this.setOptions(t&&t.options),t&&t.dot){console.warn("The dot property has been deprecated. Please use the static convertDot method to convert DOT into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertDot(dotString);");const e=qge(t.dot);this.setData(e);return}else if(t&&t.gephi){console.warn("The gephi property has been deprecated. Please use the static convertGephi method to convert gephi into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertGephi(gephiJson);");const e=Age(t.gephi);this.setData(e);return}else this.nodesHandler.setData(t&&t.nodes,!0),this.edgesHandler.setData(t&&t.edges,!0);this.body.emitter.emit("_dataChanged"),this.body.emitter.emit("_dataLoaded"),this.body.emitter.emit("initPhysics")};we.prototype.destroy=function(){this.body.emitter.emit("destroy"),this.body.emitter.off(),this.off(),delete this.groups,delete this.canvas,delete this.selectionHandler,delete this.interactionHandler,delete this.view,delete this.renderer,delete this.physics,delete this.layoutEngine,delete this.clustering,delete this.manipulation,delete this.nodesHandler,delete this.edgesHandler,delete this.configurator,delete this.images;for(const t in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,t)&&delete this.body.nodes[t];for(const t in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,t)&&delete this.body.edges[t];Gs(this.body.container)};we.prototype._updateValueRange=function(t){let e,r,n,i=0;for(e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const s=t[e].getValue();s!==void 0&&(r=r===void 0?s:Math.min(s,r),n=n===void 0?s:Math.max(s,n),i+=s)}if(r!==void 0&&n!==void 0)for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&t[e].setValueRange(r,n,i)};we.prototype.isActive=function(){return!this.activator||this.activator.active};we.prototype.setSize=function(){return this.canvas.setSize.apply(this.canvas,arguments)};we.prototype.canvasToDOM=function(){return this.canvas.canvasToDOM.apply(this.canvas,arguments)};we.prototype.DOMtoCanvas=function(){return this.canvas.DOMtoCanvas.apply(this.canvas,arguments)};we.prototype.findNode=function(){return this.clustering.findNode.apply(this.clustering,arguments)};we.prototype.isCluster=function(){return this.clustering.isCluster.apply(this.clustering,arguments)};we.prototype.openCluster=function(){return this.clustering.openCluster.apply(this.clustering,arguments)};we.prototype.cluster=function(){return this.clustering.cluster.apply(this.clustering,arguments)};we.prototype.getNodesInCluster=function(){return this.clustering.getNodesInCluster.apply(this.clustering,arguments)};we.prototype.clusterByConnection=function(){return this.clustering.clusterByConnection.apply(this.clustering,arguments)};we.prototype.clusterByHubsize=function(){return this.clustering.clusterByHubsize.apply(this.clustering,arguments)};we.prototype.updateClusteredNode=function(){return this.clustering.updateClusteredNode.apply(this.clustering,arguments)};we.prototype.getClusteredEdges=function(){return this.clustering.getClusteredEdges.apply(this.clustering,arguments)};we.prototype.getBaseEdge=function(){return this.clustering.getBaseEdge.apply(this.clustering,arguments)};we.prototype.getBaseEdges=function(){return this.clustering.getBaseEdges.apply(this.clustering,arguments)};we.prototype.updateEdge=function(){return this.clustering.updateEdge.apply(this.clustering,arguments)};we.prototype.clusterOutliers=function(){return this.clustering.clusterOutliers.apply(this.clustering,arguments)};we.prototype.getSeed=function(){return this.layoutEngine.getSeed.apply(this.layoutEngine,arguments)};we.prototype.enableEditMode=function(){return this.manipulation.enableEditMode.apply(this.manipulation,arguments)};we.prototype.disableEditMode=function(){return this.manipulation.disableEditMode.apply(this.manipulation,arguments)};we.prototype.addNodeMode=function(){return this.manipulation.addNodeMode.apply(this.manipulation,arguments)};we.prototype.editNode=function(){return this.manipulation.editNode.apply(this.manipulation,arguments)};we.prototype.editNodeMode=function(){return console.warn("Deprecated: Please use editNode instead of editNodeMode."),this.manipulation.editNode.apply(this.manipulation,arguments)};we.prototype.addEdgeMode=function(){return this.manipulation.addEdgeMode.apply(this.manipulation,arguments)};we.prototype.editEdgeMode=function(){return this.manipulation.editEdgeMode.apply(this.manipulation,arguments)};we.prototype.deleteSelected=function(){return this.manipulation.deleteSelected.apply(this.manipulation,arguments)};we.prototype.getPositions=function(){return this.nodesHandler.getPositions.apply(this.nodesHandler,arguments)};we.prototype.getPosition=function(){return this.nodesHandler.getPosition.apply(this.nodesHandler,arguments)};we.prototype.storePositions=function(){return this.nodesHandler.storePositions.apply(this.nodesHandler,arguments)};we.prototype.moveNode=function(){return this.nodesHandler.moveNode.apply(this.nodesHandler,arguments)};we.prototype.getBoundingBox=function(){return this.nodesHandler.getBoundingBox.apply(this.nodesHandler,arguments)};we.prototype.getConnectedNodes=function(t){return this.body.nodes[t]!==void 0?this.nodesHandler.getConnectedNodes.apply(this.nodesHandler,arguments):this.edgesHandler.getConnectedNodes.apply(this.edgesHandler,arguments)};we.prototype.getConnectedEdges=function(){return this.nodesHandler.getConnectedEdges.apply(this.nodesHandler,arguments)};we.prototype.startSimulation=function(){return this.physics.startSimulation.apply(this.physics,arguments)};we.prototype.stopSimulation=function(){return this.physics.stopSimulation.apply(this.physics,arguments)};we.prototype.stabilize=function(){return this.physics.stabilize.apply(this.physics,arguments)};we.prototype.getSelection=function(){return this.selectionHandler.getSelection.apply(this.selectionHandler,arguments)};we.prototype.setSelection=function(){return this.selectionHandler.setSelection.apply(this.selectionHandler,arguments)};we.prototype.getSelectedNodes=function(){return this.selectionHandler.getSelectedNodeIds.apply(this.selectionHandler,arguments)};we.prototype.getSelectedEdges=function(){return this.selectionHandler.getSelectedEdgeIds.apply(this.selectionHandler,arguments)};we.prototype.getNodeAt=function(){const t=this.selectionHandler.getNodeAt.apply(this.selectionHandler,arguments);return t!==void 0&&t.id!==void 0?t.id:t};we.prototype.getEdgeAt=function(){const t=this.selectionHandler.getEdgeAt.apply(this.selectionHandler,arguments);return t!==void 0&&t.id!==void 0?t.id:t};we.prototype.selectNodes=function(){return this.selectionHandler.selectNodes.apply(this.selectionHandler,arguments)};we.prototype.selectEdges=function(){return this.selectionHandler.selectEdges.apply(this.selectionHandler,arguments)};we.prototype.unselectAll=function(){this.selectionHandler.unselectAll.apply(this.selectionHandler,arguments),this.selectionHandler.commitWithoutEmitting.apply(this.selectionHandler),this.redraw()};we.prototype.redraw=function(){return this.renderer.redraw.apply(this.renderer,arguments)};we.prototype.getScale=function(){return this.view.getScale.apply(this.view,arguments)};we.prototype.getViewPosition=function(){return this.view.getViewPosition.apply(this.view,arguments)};we.prototype.fit=function(){return this.view.fit.apply(this.view,arguments)};we.prototype.moveTo=function(){return this.view.moveTo.apply(this.view,arguments)};we.prototype.focus=function(){return this.view.focus.apply(this.view,arguments)};we.prototype.releaseNode=function(){return this.view.releaseNode.apply(this.view,arguments)};we.prototype.getOptionsFromConfigurator=function(){let t={};return this.configurator&&(t=this.configurator.getOptions.apply(this.configurator)),t};function C1e({graphData:t,startPersonId:e,onNodeClick:r}){const n=P.useRef(null),i=P.useRef(null),s=zr(),a=P.useCallback(d=>{r?r(d):s(`/people/${d}`)},[r,s]);P.useEffect(()=>{if(!n.current||!t||!t.nodes||t.nodes.length===0)return;const d=new Mc(t.nodes),h=new Mc(t.edges),f={layout:{hierarchical:{enabled:!0,direction:"UD",sortMethod:"directed",levelSeparation:180,nodeSpacing:200,treeSpacing:250,blockShifting:!0,edgeMinimization:!0,parentCentralization:!0}},nodes:{shape:"box",margin:10,font:{size:14,face:'system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',color:"#1f2937"},color:{border:"#d1d5db",background:"#ffffff",highlight:{border:"#f59e0b",background:"#fef3c7"},hover:{border:"#9ca3af",background:"#f9fafb"}},borderWidth:2,borderWidthSelected:3,shadow:{enabled:!0,color:"rgba(0,0,0,0.1)",size:5,x:0,y:2}},edges:{color:{color:"#9ca3af",highlight:"#6b7280",hover:"#6b7280"},width:2,smooth:{enabled:!0,type:"cubicBezier",forceDirection:"vertical",roundness:.4},arrows:{to:{enabled:!1}}},physics:{enabled:!1},interaction:{hover:!0,tooltipDelay:200,zoomView:!0,dragView:!0,dragNodes:!1,navigationButtons:!1,keyboard:{enabled:!0,bindToWindow:!1}}},p=new we(n.current,{nodes:d,edges:h},f);return i.current=p,p.on("click",v=>{if(v.nodes.length>0){const y=v.nodes[0];a(y)}}),p.on("doubleClick",v=>{v.nodes.length>0&&p.focus(v.nodes[0],{scale:1,animation:{duration:500,easingFunction:"easeInOutQuad"}})}),p.once("stabilized",()=>{const v=t.edges.filter(y=>y.dashes).map(y=>[y.from,y.to]);if(v.length>0){const y=p.getPositions(),x={},g=new Set;v.forEach(([m,w])=>{if(g.has(m)||g.has(w))return;const b=y[m],_=y[w];if(!b||!_)return;const E=(b.x+_.x)/2;x[m]={x:E-60,y:b.y},x[w]={x:E+60,y:_.y},g.add(m),g.add(w)}),Object.entries(x).forEach(([m,w])=>{p.moveNode(m,w.x,w.y)})}setTimeout(()=>{p.fit({animation:{duration:500,easingFunction:"easeInOutQuad"}})},50)}),setTimeout(()=>{e&&p&&p.focus(e,{scale:.8,animation:{duration:500,easingFunction:"easeInOutQuad"}})},100),()=>{p&&p.destroy()}},[t,e,a]);const o=()=>{if(i.current){const d=i.current.getScale();i.current.moveTo({scale:d*1.3,animation:{duration:300,easingFunction:"easeInOutQuad"}})}},c=()=>{if(i.current){const d=i.current.getScale();i.current.moveTo({scale:d/1.3,animation:{duration:300,easingFunction:"easeInOutQuad"}})}},u=()=>{i.current&&i.current.fit({animation:{duration:500,easingFunction:"easeInOutQuad"}})};return!t||!t.nodes||t.nodes.length===0?l.jsx("div",{className:"flex items-center justify-center h-96",children:l.jsx("p",{className:"text-gray-500",children:"No family tree data available"})}):l.jsxs("div",{className:"relative w-full h-full",children:[l.jsxs("div",{className:"absolute top-4 right-4 z-10 flex gap-2 bg-white rounded-lg shadow-lg p-2",children:[l.jsx("button",{onClick:o,className:"p-2 hover:bg-gray-100 rounded",title:"Zoom In",children:l.jsx(vne,{className:"w-4 h-4"})}),l.jsx("button",{onClick:c,className:"p-2 hover:bg-gray-100 rounded",title:"Zoom Out",children:l.jsx(gne,{className:"w-4 h-4"})}),l.jsx("button",{onClick:u,className:"p-2 hover:bg-gray-100 rounded",title:"Fit All",children:l.jsx(TK,{className:"w-4 h-4"})})]}),l.jsx("div",{className:"absolute bottom-4 left-4 z-10 text-xs text-gray-500 bg-white/80 px-2 py-1 rounded",children:"Click a person to view details  Double-click to center  Scroll to zoom"}),l.jsx("div",{ref:n,className:"w-full h-full min-h-[600px]",style:{background:"#fafafa"}})]})}const O1e=["parent","child","spouse","lover","partner"];function P1e(t){return O1e.includes(t==null?void 0:t.toLowerCase())}function T1e(t){return(t==null?void 0:t.toLowerCase())==="parent"}function I1e(t){return(t==null?void 0:t.toLowerCase())==="child"}function R1e(t){const e=t==null?void 0:t.toLowerCase();return e==="spouse"||e==="lover"||e==="partner"}function k1e(t,e,r){var d;const n=new Map,i=[],s=new Set,a=new Map;e.forEach(h=>a.set(h.id,h));const o=[{personId:t,depth:0}];s.add(t);function c(h,f){var m,w,b,_;let p=h.name||((m=h.title)==null?void 0:m.rendered)||h.title||`Person ${f}`;if(p&&typeof p=="string"&&typeof document<"u"){const E=document.createElement("textarea");E.innerHTML=p,p=E.value}let v=null,y=((w=h.acf)==null?void 0:w.birth_date)||null;if(y){const E=new Date(y);isNaN(E.getTime())||(v=Math.floor((new Date-E)/(365.25*24*60*60*1e3)))}let x="";switch((b=h.acf)==null?void 0:b.gender){case"male":x="";break;case"female":x="";break;case"non_binary":case"other":case"prefer_not_to_say":x="";break}let g="";if(y)try{const E=new Date(y);if(!isNaN(E.getTime())){const j=String(E.getDate()).padStart(2,"0"),S=String(E.getMonth()+1).padStart(2,"0"),C=E.getFullYear();g=`${j}-${S}-${C}`}}catch{}return{id:f,name:p,gender:((_=h.acf)==null?void 0:_.gender)||"",genderSymbol:x,photo:h.thumbnail||null,age:v,birthDate:y,formattedBirthDate:g}}const u=a.get(t);for(u&&n.set(t,c(u,t));o.length>0;){const{personId:h,depth:f}=o.shift(),p=r.get(h)||[];for(const v of p){if(v.relationship_type_slug&&!P1e(v.relationship_type_slug))continue;const y=v.related_person;if(!y||!a.has(y))continue;if(!n.has(y)){const w=a.get(y);n.set(y,c(w,y))}const x=`${h}-${y}`,g=`${y}-${h}`;if(!i.some(w=>`${w.from}-${w.to}`===x||`${w.from}-${w.to}`===g)){const w=(d=v.relationship_type_slug)==null?void 0:d.toLowerCase();if(T1e(w))i.push({from:y,to:h,type:"parent-child"});else if(I1e(w))i.push({from:h,to:y,type:"parent-child"});else if(R1e(w)){const[b,_]=h<y?[h,y]:[y,h];i.push({from:b,to:_,type:"spouse"})}}s.has(y)||(s.add(y),o.push({personId:y,depth:f+1}))}}return{nodes:Array.from(n.values()),edges:i}}function $1e(t,e,r={}){const{nodes:n,edges:i}=t;if(n.length===0)return{nodes:[],edges:[]};const s=new Map,a=new Map,o=new Map;n.forEach(x=>{s.set(x.id,[]),a.set(x.id,[]),o.set(x.id,[])}),i.forEach(x=>{var g,m,w,b;x.type==="parent-child"?((g=s.get(x.to))==null||g.push(x.from),(m=a.get(x.from))==null||m.push(x.to)):x.type==="spouse"&&((w=o.get(x.from))==null||w.push(x.to),(b=o.get(x.to))==null||b.push(x.from))});const c=new Map,u=new Set,d=[{id:e,generation:0}];for(c.set(e,0),u.add(e);d.length>0;){const{id:x,generation:g}=d.shift(),m=s.get(x)||[];for(const _ of m)u.has(_)||(u.add(_),c.set(_,g-1),d.push({id:_,generation:g-1}));const w=a.get(x)||[];for(const _ of w)u.has(_)||(u.add(_),c.set(_,g+1),d.push({id:_,generation:g+1}));const b=o.get(x)||[];for(const _ of b)u.has(_)||(u.add(_),c.set(_,g),d.push({id:_,generation:g}))}n.forEach(x=>{c.has(x.id)||c.set(x.id,0)});const h=Math.min(...c.values()),f=new Map;c.forEach((x,g)=>{f.set(g,x-h)});function p(x,g,m=!1){const w=x?x.split(" ").map(j=>j[0]).join("").toUpperCase().slice(0,2):"?";let b,_;m?(b="%23d1d5db",_="%236b7280"):g?(b="%23fef3c7",_="%23b45309"):(b="%23e5e7eb",_="%23374151");const E=`<svg xmlns="http://www.w3.org/2000/svg" width="90" height="90" viewBox="0 0 90 90">
      <circle cx="45" cy="45" r="45" fill="${b}"/>
      <text x="45" y="55" text-anchor="middle" font-family="system-ui, sans-serif" font-size="28" font-weight="500" fill="${_}">${w}</text>
    </svg>`;return"data:image/svg+xml,"+encodeURIComponent(E)}const v=n.map(x=>{const g=f.get(x.id)||0,m=x.id===e,w=r[x.id]||!1;let b=x.name;w&&(b=x.name+" ");let _=[b],E="";x.genderSymbol&&(E+=x.genderSymbol+" "),x.age!==null&&(E+=x.age+" "),x.formattedBirthDate&&(E+=x.formattedBirthDate),E.trim()&&_.push(E.trim());const j=x.photo||p(x.name,m,w);let S="#d1d5db";return m?S="#f59e0b":w&&(S="#9ca3af"),{id:x.id,label:_.join(`
`),level:g,shape:"circularImage",image:j,size:45,font:{size:14,face:"system-ui, -apple-system, sans-serif",vadjust:8,color:w?"#6b7280":"#1f2937"},color:{border:S,background:"#ffffff",highlight:{border:"#f59e0b",background:"#fef3c7"}},borderWidth:m?3:2,data:{...x,isDeceased:w}}}),y=i.map((x,g)=>{const m=x.type==="spouse";return{id:`edge-${g}`,from:x.from,to:x.to,arrows:{to:{enabled:!1}},color:{color:m?"#ec4899":"#9ca3af",highlight:m?"#db2777":"#6b7280"},width:2,dashes:m?[5,5]:!1,smooth:!1,length:m?50:300}});return{nodes:v,edges:y}}function D1e(t){const e=new Map;return t.forEach(r=>{var s;const i=(((s=r.acf)==null?void 0:s.relationships)||[]).map(a=>{var u,d,h,f,p,v;let o="";a.relationship_slug?o=a.relationship_slug.toLowerCase():typeof a.relationship_type=="object"?o=((u=a.relationship_type)==null?void 0:u.slug)||((h=(d=a.relationship_type)==null?void 0:d.name)==null?void 0:h.toLowerCase())||"":typeof a.relationship_type=="string"&&(o=a.relationship_type.toLowerCase());let c=null;return typeof a.related_person=="object"?c=((f=a.related_person)==null?void 0:f.ID)||((p=a.related_person)==null?void 0:p.id)||((v=a.related_person)==null?void 0:v.term_id):(typeof a.related_person=="number"||typeof a.related_person=="string")&&(c=parseInt(a.related_person,10)),{related_person:c,relationship_type:a.relationship_type,relationship_type_slug:o,relationship_name:a.relationship_name||"",relationship_label:a.relationship_label||""}}).filter(a=>a.related_person);e.set(r.id,i)}),e}function M1e(t,e){const r=new Map;e.forEach(n=>{var i;r.set(n.id,n.slug||((i=n.name)==null?void 0:i.toLowerCase()))}),t.forEach(n=>{n.forEach(i=>{if(!i.relationship_type_slug&&i.relationship_type){const s=typeof i.relationship_type=="object"?i.relationship_type.term_id||i.relationship_type.id:i.relationship_type;i.relationship_type_slug=r.get(s)||""}})})}function q1e(){var p,v;const{id:t}=Vi(),e=zr(),r=parseInt(t,10),{data:n,isLoading:i}=Jo(t),{data:s=[],isLoading:a}=Xo(),{data:o=[]}=rt({queryKey:["relationship-types"],queryFn:async()=>(await Be.getRelationshipTypes()).data}),c=P.useMemo(()=>s.map(y=>y.id).filter(Boolean),[s]),u=Lj({queries:c.map(y=>({queryKey:["person-dates",y],queryFn:async()=>(await Re.getPersonDates(y)).data,enabled:!!y,staleTime:5*60*1e3}))}),d=P.useMemo(()=>{const y={};return u.forEach((x,g)=>{if(x.data&&c[g]){const m=c[g],w=x.data.some(b=>{const _=Array.isArray(b.date_type)?b.date_type[0]:b.date_type;return(_==null?void 0:_.toLowerCase())==="died"});y[m]=w}}),y},[u,c]);rn(n?`Family Tree - ${n.name||((p=n.title)==null?void 0:p.rendered)||n.title||"Person"}`:"Family Tree");const h=P.useMemo(()=>{if(!n||!s.length)return null;try{const y=D1e(s);o.length>0&&M1e(y,o);const x=k1e(r,s,y);return!x||x.nodes.length===0?null:$1e(x,r,d)}catch(y){return console.error("Error building family tree:",y),null}},[n,s,o,r,d]),f=y=>{e(`/people/${y}`)};return i||a?l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):n?l.jsxs("div",{className:"max-w-full mx-auto space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(oe,{to:`/people/${t}`,className:"flex items-center text-gray-600 hover:text-gray-900",children:[l.jsx(xn,{className:"w-4 h-4 md:mr-2"}),l.jsx("span",{className:"hidden md:inline",children:"Back to Person"})]}),l.jsxs("h1",{className:"text-2xl font-bold",children:["Family Tree: ",n.name||((v=n.title)==null?void 0:v.rendered)||n.title||`Person ${t}`]})]})}),l.jsx("div",{className:"card p-6",children:l.jsx("div",{className:"w-full",style:{height:"800px"},children:h&&h.nodes&&h.nodes.length>0?l.jsx(C1e,{graphData:h,startPersonId:r,onNodeClick:f}):l.jsx("div",{className:"flex items-center justify-center h-full",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-gray-500 mb-2",children:"No family relationships found."}),l.jsx("p",{className:"text-sm text-gray-400",children:"Add parent or child relationships to see the family tree."})]})})})})]}):l.jsxs("div",{className:"card p-6 text-center",children:[l.jsx("p",{className:"text-red-600 mb-4",children:"Failed to load person."}),l.jsx(oe,{to:"/people",className:"btn-secondary",children:"Back to People"})]})}function A1e(){const{loginUrl:t,isLoggedIn:e}=_O();return qK(),P.useEffect(()=>{e||(window.location.href=t)},[e,t]),l.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-600",children:"Redirecting to login..."})]})})}function F1e({children:t}){const{data:e,isLoading:r,error:n}=rt({queryKey:["current-user"],queryFn:async()=>(await Re.getCurrentUser()).data,retry:!1});return r?l.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):n||!e?l.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:l.jsx("div",{className:"max-w-md w-full mx-4",children:l.jsxs("div",{className:"card p-8 text-center",children:[l.jsx("div",{className:"flex justify-center mb-4",children:l.jsx("div",{className:"p-3 bg-yellow-100 rounded-full",children:l.jsx(Cs,{className:"w-8 h-8 text-yellow-600"})})}),l.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Account Pending Approval"}),l.jsx("p",{className:"text-gray-600 mb-6",children:"Your account is pending approval by an administrator. You will receive an email notification once your account has been approved."}),l.jsx("p",{className:"text-sm text-gray-500",children:"If you have any questions, please contact your administrator."})]})})}):e!=null&&e.is_admin||e.is_approved?t:l.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:l.jsx("div",{className:"max-w-md w-full mx-4",children:l.jsxs("div",{className:"card p-8 text-center",children:[l.jsx("div",{className:"flex justify-center mb-4",children:l.jsx("div",{className:"p-3 bg-yellow-100 rounded-full",children:l.jsx(Cs,{className:"w-8 h-8 text-yellow-600"})})}),l.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Account Pending Approval"}),l.jsx("p",{className:"text-gray-600 mb-6",children:"Your account is pending approval by an administrator. You will receive an email notification once your account has been approved."}),l.jsx("p",{className:"text-sm text-gray-500",children:"If you have any questions, please contact your administrator."})]})})})}function L1e({children:t}){const{isLoggedIn:e,isLoading:r}=_O();return r?l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):e?l.jsx(F1e,{children:t}):l.jsx(MH,{to:"/login",replace:!0})}function B1e(){return l.jsxs(CI,{children:[l.jsx(ot,{path:"/login",element:l.jsx(A1e,{})}),l.jsx(ot,{path:"/*",element:l.jsx(L1e,{children:l.jsx(Fne,{children:l.jsxs(CI,{children:[l.jsx(ot,{path:"/",element:l.jsx(Ose,{})}),l.jsx(ot,{path:"/people",element:l.jsx(Tse,{})}),l.jsx(ot,{path:"/people/new",element:l.jsx(CR,{})}),l.jsx(ot,{path:"/people/:personId/contact/new",element:l.jsx(PR,{})}),l.jsx(ot,{path:"/people/:personId/contact/:index/edit",element:l.jsx(PR,{})}),l.jsx(ot,{path:"/people/:personId/address/new",element:l.jsx(IR,{})}),l.jsx(ot,{path:"/people/:personId/address/:index/edit",element:l.jsx(IR,{})}),l.jsx(ot,{path:"/people/:personId/work-history/new",element:l.jsx(OR,{})}),l.jsx(ot,{path:"/people/:personId/work-history/:index/edit",element:l.jsx(OR,{})}),l.jsx(ot,{path:"/people/:personId/relationship/new",element:l.jsx(TR,{})}),l.jsx(ot,{path:"/people/:personId/relationship/:index/edit",element:l.jsx(TR,{})}),l.jsx(ot,{path:"/people/:id/family-tree",element:l.jsx(q1e,{})}),l.jsx(ot,{path:"/people/:id/edit",element:l.jsx(CR,{})}),l.jsx(ot,{path:"/people/:id",element:l.jsx(Yse,{})}),l.jsx(ot,{path:"/companies",element:l.jsx(xae,{})}),l.jsx(ot,{path:"/companies/new",element:l.jsx(RR,{})}),l.jsx(ot,{path:"/companies/:id",element:l.jsx(wae,{})}),l.jsx(ot,{path:"/companies/:id/edit",element:l.jsx(RR,{})}),l.jsx(ot,{path:"/dates",element:l.jsx(Eae,{})}),l.jsx(ot,{path:"/dates/new",element:l.jsx(kR,{})}),l.jsx(ot,{path:"/dates/:id/edit",element:l.jsx(kR,{})}),l.jsx(ot,{path:"/todos",element:l.jsx(jae,{})}),l.jsx(ot,{path:"/settings",element:l.jsx(Cae,{})}),l.jsx(ot,{path:"/settings/relationship-types",element:l.jsx(Oae,{})}),l.jsx(ot,{path:"/settings/import",element:l.jsx(kae,{})}),l.jsx(ot,{path:"/settings/export",element:l.jsx($ae,{})}),l.jsx(ot,{path:"/settings/user-approval",element:l.jsx(Dae,{})}),l.jsx(ot,{path:"*",element:l.jsx(MH,{to:"/",replace:!0})})]})})})})]})}const z1e=new yte({defaultOptions:{queries:{staleTime:5*60*1e3,retry:1}}}),w2=document.getElementById("root");if(!w2)console.error('Root element not found! Make sure there is a <div id="root"></div> in your HTML.');else try{_2.createRoot(w2).render(l.jsx(Ae.StrictMode,{children:l.jsx(bte,{client:z1e,children:l.jsx(Bee,{children:l.jsx(B1e,{})})})}))}catch(t){console.error("Error mounting React app:",t),w2.innerHTML='<div style="padding: 20px; color: red;"><h1>Error Loading Application</h1><p>Please check the browser console for details.</p></div>'}
